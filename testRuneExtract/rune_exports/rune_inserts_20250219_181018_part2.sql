START TRANSACTION;

-- Rune ID: 27089901161

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 4 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(27089901161, 
 9215591, 
 1, 
 10034125408, 
 4,
 5, 
 6, 
 13, 
 15, 
 15,
 684720, 
 134236, 
 (SELECT id FROM stat_types WHERE code = 'ATK_PCT'), 
 63,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 256, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    22,
    0,
    18
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 18 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    9,
    1,
    2
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND 2 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ACC'),
    12,
    0,
    12
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ACC')
    AND is_ancient = 0
    AND 12 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    7,
    0,
    -3
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND -3 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 24011)
AND slot_number = 4;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 24011), 
    @last_rune_id, 
    4
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 24011);

-- Rune ID: 22809313955

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 5 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(22809313955, 
 9215591, 
 1, 
 10034125408, 
 5,
 5, 
 6, 
 13, 
 15, 
 15,
 608640, 
 130432, 
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 2448,
 (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'), 
 7, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    7,
    0,
    2
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND 2 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    9,
    1,
    -1
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND -1 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    17,
    0,
    12
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 12 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    16,
    0,
    12
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 12 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 24011)
AND slot_number = 5;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 24011), 
    @last_rune_id, 
    5
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 24011);

-- Rune ID: 20915859043

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 6 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(20915859043, 
 9215591, 
 1, 
 10034125408, 
 6,
 5, 
 6, 
 15, 
 15, 
 15,
 592790, 
 131742, 
 (SELECT id FROM stat_types WHERE code = 'HP_PCT'), 
 63,
 (SELECT id FROM stat_types WHERE code = 'ATK_FLAT'), 
 13, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_FLAT'),
    464,
    0,
    45
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_FLAT')
    AND is_ancient = 0
    AND 45 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    11,
    1,
    4
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 4 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    21,
    0,
    15
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND 15 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    12,
    0,
    8
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 8 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 24011)
AND slot_number = 6;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 24011), 
    @last_rune_id, 
    6
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 24011);

-- Rune ID: 22161401409

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 2 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(22161401409, 
 9215591, 
 1, 
 10122035144, 
 2,
 5, 
 6, 
 20, 
 15, 
 15,
 634000, 
 133949, 
 (SELECT id FROM stat_types WHERE code = 'DEF_PCT'), 
 63,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    8,
    0,
    1
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 1 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_FLAT'),
    26,
    1,
    4
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_FLAT')
    AND is_ancient = 0
    AND 4 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    15,
    0,
    11
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 11 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'),
    9,
    0,
    9
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_DMG')
    AND is_ancient = 0
    AND 9 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 11031)
AND slot_number = 2;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 11031), 
    @last_rune_id, 
    2
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 11031);

-- Rune ID: 43273474367

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 3 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(43273474367, 
 9215591, 
 1, 
 10122035144, 
 3,
 5, 
 6, 
 2, 
 15, 
 12,
 380400, 
 61877, 
 (SELECT id FROM stat_types WHERE code = 'DEF_FLAT'), 
 118,
 (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'), 
 4, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    9,
    1,
    3
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND 3 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ACC'),
    20,
    0,
    20
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ACC')
    AND is_ancient = 0
    AND 20 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    14,
    0,
    7
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 7 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    10,
    0,
    6
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 6 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 11031)
AND slot_number = 3;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 11031), 
    @last_rune_id, 
    3
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 11031);

-- Rune ID: 33324714764

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 4 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(33324714764, 
 9215591, 
 1, 
 10122035144, 
 4,
 5, 
 6, 
 20, 
 15, 
 15,
 627660, 
 133609, 
 (SELECT id FROM stat_types WHERE code = 'DEF_PCT'), 
 63,
 (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'), 
 6, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    8,
    1,
    1
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 1 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ACC'),
    22,
    0,
    22
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ACC')
    AND is_ancient = 0
    AND 22 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_FLAT'),
    17,
    0,
    -4
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_FLAT')
    AND is_ancient = 0
    AND -4 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'RES'),
    12,
    0,
    12
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'RES')
    AND is_ancient = 0
    AND 12 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 11031)
AND slot_number = 4;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 11031), 
    @last_rune_id, 
    4
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 11031);

-- Rune ID: 41275948824

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 5 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(41275948824, 
 9215591, 
 1, 
 10122035144, 
 5,
 5, 
 6, 
 2, 
 15, 
 12,
 405760, 
 63602, 
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 1800,
 (SELECT id FROM stat_types WHERE code = 'ACC'), 
 8, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    15,
    0,
    8
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND 8 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'RES'),
    16,
    0,
    16
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'RES')
    AND is_ancient = 0
    AND 16 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'),
    6,
    0,
    6
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_DMG')
    AND is_ancient = 0
    AND 6 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    16,
    0,
    12
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 12 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 11031)
AND slot_number = 5;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 11031), 
    @last_rune_id, 
    5
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 11031);

-- Rune ID: 44951698166

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 1 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(44951698166, 
 9215591, 
 1, 
 10161675268, 
 1,
 5, 
 6, 
 2, 
 15, 
 12,
 481840, 
 68778, 
 (SELECT id FROM stat_types WHERE code = 'ATK_FLAT'), 
 118,
 (SELECT id FROM stat_types WHERE code = 'ACC'), 
 7, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    22,
    0,
    18
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 18 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    4,
    0,
    4
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 4 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    8,
    0,
    1
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 1 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    6,
    0,
    0
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 0 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 11031)
AND slot_number = 1;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 11031), 
    @last_rune_id, 
    1
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 11031);

-- Rune ID: 34297880370

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 2 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(34297880370, 
 9215591, 
 1, 
 10161675268, 
 2,
 5, 
 6, 
 20, 
 15, 
 12,
 634000, 
 69949, 
 (SELECT id FROM stat_types WHERE code = 'DEF_PCT'), 
 47,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    21,
    0,
    15
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 15 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    4,
    0,
    4
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 4 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ACC'),
    15,
    0,
    15
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ACC')
    AND is_ancient = 0
    AND 15 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_FLAT'),
    231,
    0,
    231
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_FLAT')
    AND is_ancient = 0
    AND 231 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 11031)
AND slot_number = 2;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 11031), 
    @last_rune_id, 
    2
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 11031);

-- Rune ID: 41455495090

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 3 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(41455495090, 
 9215591, 
 1, 
 10161675268, 
 3,
 5, 
 6, 
 2, 
 15, 
 12,
 380400, 
 61877, 
 (SELECT id FROM stat_types WHERE code = 'DEF_FLAT'), 
 118,
 (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'), 
 4, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ACC'),
    21,
    0,
    21
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ACC')
    AND is_ancient = 0
    AND 21 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    4,
    0,
    0
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 0 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    15,
    0,
    8
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 8 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    11,
    1,
    4
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND 4 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_upgrades 
(rune_id, level_reached, stat_type_id, old_value, new_value, upgrade_date)
SELECT 
    @last_rune_id,
    3,
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    4.0,
    11.0,
    NOW();

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 11031)
AND slot_number = 3;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 11031), 
    @last_rune_id, 
    3
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 11031);

-- Rune ID: 32000023167

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 4 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(32000023167, 
 9215591, 
 1, 
 10161675268, 
 4,
 5, 
 6, 
 20, 
 15, 
 15,
 570600, 
 130554, 
 (SELECT id FROM stat_types WHERE code = 'DEF_PCT'), 
 63,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_FLAT'),
    18,
    0,
    0
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_FLAT')
    AND is_ancient = 0
    AND 0 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    18,
    0,
    12
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 12 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'),
    11,
    0,
    11
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_DMG')
    AND is_ancient = 0
    AND 11 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    5,
    0,
    1
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 1 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 11031)
AND slot_number = 4;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 11031), 
    @last_rune_id, 
    4
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 11031);

-- Rune ID: 37128510202

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 5 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(37128510202, 
 9215591, 
 1, 
 10161675268, 
 5,
 5, 
 6, 
 2, 
 15, 
 12,
 405760, 
 63602, 
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 1800,
 (SELECT id FROM stat_types WHERE code = 'ATK_PCT'), 
 7, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    10,
    1,
    3
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 3 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    6,
    0,
    -1
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND -1 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    21,
    0,
    17
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 17 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'RES'),
    7,
    0,
    7
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'RES')
    AND is_ancient = 0
    AND 7 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 11031)
AND slot_number = 5;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 11031), 
    @last_rune_id, 
    5
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 11031);

-- Rune ID: 44803737175

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 6 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(44803737175, 
 9215591, 
 1, 
 10161675268, 
 6,
 5, 
 6, 
 2, 
 15, 
 12,
 377230, 
 61661, 
 (SELECT id FROM stat_types WHERE code = 'ATK_PCT'), 
 47,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    6,
    1,
    6
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 6 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    22,
    0,
    18
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 18 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_FLAT'),
    373,
    0,
    17
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_FLAT')
    AND is_ancient = 0
    AND 17 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'),
    5,
    0,
    5
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_DMG')
    AND is_ancient = 0
    AND 5 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 11031)
AND slot_number = 6;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 11031), 
    @last_rune_id, 
    6
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 11031);

-- Rune ID: 30742431423

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 1 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(30742431423, 
 9215591, 
 1, 
 10183102064, 
 1,
 5, 
 6, 
 20, 
 15, 
 15,
 602300, 
 132251, 
 (SELECT id FROM stat_types WHERE code = 'ATK_FLAT'), 
 160,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    7,
    1,
    3
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 3 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ACC'),
    20,
    0,
    20
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ACC')
    AND is_ancient = 0
    AND 20 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    6,
    0,
    6
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 6 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    21,
    0,
    14
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 14 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 11031)
AND slot_number = 1;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 11031), 
    @last_rune_id, 
    1
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 11031);

-- Rune ID: 43342756798

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 2 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(43342756798, 
 9215591, 
 1, 
 10183102064, 
 2,
 5, 
 6, 
 2, 
 15, 
 15,
 507200, 
 134503, 
 (SELECT id FROM stat_types WHERE code = 'SPD'), 
 42,
 (SELECT id FROM stat_types WHERE code = 'ATK_FLAT'), 
 13, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    10,
    1,
    3
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 3 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    25,
    0,
    18
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND 18 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    7,
    0,
    0
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 0 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_FLAT'),
    14,
    0,
    -7
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_FLAT')
    AND is_ancient = 0
    AND -7 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 11031)
AND slot_number = 2;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 11031), 
    @last_rune_id, 
    2
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 11031);

-- Rune ID: 35518543568

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 3 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(35518543568, 
 9215591, 
 1, 
 10183102064, 
 3,
 5, 
 6, 
 2, 
 15, 
 15,
 332850, 
 122642, 
 (SELECT id FROM stat_types WHERE code = 'DEF_FLAT'), 
 160,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    6,
    0,
    2
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 2 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    10,
    1,
    3
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 3 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    27,
    0,
    20
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND 20 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    6,
    0,
    6
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 6 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 11031)
AND slot_number = 3;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 11031), 
    @last_rune_id, 
    3
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 11031);

-- Rune ID: 22167593447

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 5 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(22167593447, 
 9215591, 
 1, 
 10183102064, 
 5,
 5, 
 6, 
 20, 
 15, 
 15,
 507200, 
 127159, 
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 2448,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    17,
    0,
    13
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 13 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    12,
    0,
    5
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 5 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    8,
    1,
    2
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND 2 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ACC'),
    13,
    0,
    13
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ACC')
    AND is_ancient = 0
    AND 13 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 11031)
AND slot_number = 5;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 11031), 
    @last_rune_id, 
    5
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 11031);

-- Rune ID: 30857844209

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 6 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(30857844209, 
 9215591, 
 1, 
 10183102064, 
 6,
 15, 
 16, 
 15, 
 15, 
 15,
 646680, 
 134628, 
 (SELECT id FROM stat_types WHERE code = 'DEF_PCT'), 
 63,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    10,
    0,
    1
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 1
    AND 1 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ACC'),
    17,
    0,
    17
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ACC')
    AND is_ancient = 1
    AND 17 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    16,
    0,
    11
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 1
    AND 11 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    17,
    0,
    9
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 1
    AND 9 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 11031)
AND slot_number = 6;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 11031), 
    @last_rune_id, 
    6
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 11031);

-- Rune ID: 31761173710

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 5 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(31761173710, 
 9215591, 
 1, 
 10535598289, 
 5,
 5, 
 6, 
 15, 
 15, 
 15,
 557920, 
 129875, 
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 2448,
 (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'), 
 6, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    14,
    0,
    7
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 7 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    13,
    0,
    6
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 6 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    10,
    0,
    7
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 7 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    10,
    1,
    3
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND 3 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_upgrades 
(rune_id, level_reached, stat_type_id, old_value, new_value, upgrade_date)
SELECT 
    @last_rune_id,
    3,
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    3.0,
    10.0,
    NOW();

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 10131)
AND slot_number = 5;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 10131), 
    @last_rune_id, 
    5
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 10131);

-- Rune ID: 29021615170

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 1 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(29021615170, 
 9215591, 
 1, 
 10919653002, 
 1,
 5, 
 6, 
 15, 
 15, 
 15,
 662530, 
 135476, 
 (SELECT id FROM stat_types WHERE code = 'ATK_FLAT'), 
 160,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 270, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    14,
    0,
    10
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 10 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    8,
    0,
    1
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 1 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ACC'),
    9,
    1,
    9
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ACC')
    AND is_ancient = 0
    AND 9 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    24,
    0,
    17
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 17 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 21211)
AND slot_number = 1;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 21211), 
    @last_rune_id, 
    1
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 21211);

-- Rune ID: 23449400478

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 2 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(23449400478, 
 9215591, 
 1, 
 10919653002, 
 2,
 5, 
 6, 
 11, 
 15, 
 15,
 697400, 
 137344, 
 (SELECT id FROM stat_types WHERE code = 'HP_PCT'), 
 63,
 (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'), 
 4, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    22,
    0,
    18
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 18 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ACC'),
    5,
    0,
    5
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ACC')
    AND is_ancient = 0
    AND 5 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    8,
    0,
    1
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND 1 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    9,
    1,
    3
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 3 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_upgrades 
(rune_id, level_reached, stat_type_id, old_value, new_value, upgrade_date)
SELECT 
    @last_rune_id,
    3,
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    3.0,
    9.0,
    NOW();

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 21211)
AND slot_number = 2;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 21211), 
    @last_rune_id, 
    2
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 21211);

-- Rune ID: 29012485547

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 3 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(29012485547, 
 9215591, 
 1, 
 10919653002, 
 3,
 5, 
 6, 
 11, 
 15, 
 15,
 523050, 
 128008, 
 (SELECT id FROM stat_types WHERE code = 'DEF_FLAT'), 
 160,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 136, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    16,
    0,
    12
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 12 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    6,
    0,
    -1
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND -1 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    14,
    0,
    8
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 8 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ACC'),
    8,
    1,
    8
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ACC')
    AND is_ancient = 0
    AND 8 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_upgrades 
(rune_id, level_reached, stat_type_id, old_value, new_value, upgrade_date)
SELECT 
    @last_rune_id,
    3,
    (SELECT id FROM stat_types WHERE code = 'ACC'),
    8.0,
    8.0,
    NOW();

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 21211)
AND slot_number = 3;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 21211), 
    @last_rune_id, 
    3
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 21211);

-- Rune ID: 40857821957

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 4 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(40857821957, 
 9215591, 
 1, 
 10919653002, 
 4,
 5, 
 6, 
 11, 
 15, 
 15,
 627660, 
 133609, 
 (SELECT id FROM stat_types WHERE code = 'HP_PCT'), 
 63,
 (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'), 
 5, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    20,
    0,
    16
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 16 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    13,
    0,
    6
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 6 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    8,
    1,
    1
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND 1 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_FLAT'),
    213,
    0,
    -220
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_FLAT')
    AND is_ancient = 0
    AND -220 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 21211)
AND slot_number = 4;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 21211), 
    @last_rune_id, 
    4
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 21211);

-- Rune ID: 40961175272

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 5 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(40961175272, 
 9215591, 
 1, 
 10919653002, 
 5,
 5, 
 6, 
 11, 
 15, 
 15,
 557920, 
 129875, 
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 2448,
 (SELECT id FROM stat_types WHERE code = 'ACC'), 
 8, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    20,
    0,
    14
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 14 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    9,
    1,
    5
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 5 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    10,
    0,
    7
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 7 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    5,
    0,
    -2
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND -2 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 21211)
AND slot_number = 5;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 21211), 
    @last_rune_id, 
    5
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 21211);

-- Rune ID: 25946804888

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 6 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(25946804888, 
 9215591, 
 1, 
 10919653002, 
 6,
 5, 
 6, 
 15, 
 15, 
 15,
 538900, 
 128856, 
 (SELECT id FROM stat_types WHERE code = 'HP_PCT'), 
 63,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    21,
    0,
    16
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 16 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    11,
    1,
    5
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND 5 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_FLAT'),
    261,
    0,
    -254
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_FLAT')
    AND is_ancient = 0
    AND -254 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ACC'),
    13,
    0,
    13
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ACC')
    AND is_ancient = 0
    AND 13 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 21211)
AND slot_number = 6;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 21211), 
    @last_rune_id, 
    6
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 21211);

-- Rune ID: 36155286041

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 1 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(36155286041, 
 9215591, 
 1, 
 11234038306, 
 1,
 5, 
 6, 
 17, 
 15, 
 15,
 602300, 
 132251, 
 (SELECT id FROM stat_types WHERE code = 'ATK_FLAT'), 
 160,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    16,
    0,
    9
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 9 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    16,
    0,
    12
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 12 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ACC'),
    10,
    1,
    10
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ACC')
    AND is_ancient = 0
    AND 10 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    8,
    0,
    2
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 2 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 25111)
AND slot_number = 1;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 25111), 
    @last_rune_id, 
    1
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 25111);

-- Rune ID: 32999911618

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 2 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(32999911618, 
 9215591, 
 1, 
 11234038306, 
 2,
 5, 
 6, 
 13, 
 15, 
 15,
 760800, 
 138040, 
 (SELECT id FROM stat_types WHERE code = 'ATK_PCT'), 
 63,
 (SELECT id FROM stat_types WHERE code = 'DEF_FLAT'), 
 13, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    5,
    0,
    -1
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND -1 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    15,
    0,
    11
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 11 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    13,
    0,
    8
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 8 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    9,
    1,
    9
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 9 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_upgrades 
(rune_id, level_reached, stat_type_id, old_value, new_value, upgrade_date)
SELECT 
    @last_rune_id,
    3,
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    9.0,
    9.0,
    NOW();

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 25111)
AND slot_number = 2;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 25111), 
    @last_rune_id, 
    2
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 25111);

-- Rune ID: 29783181614

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 3 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(29783181614, 
 9215591, 
 1, 
 11234038306, 
 3,
 5, 
 6, 
 13, 
 15, 
 15,
 523050, 
 126152, 
 (SELECT id FROM stat_types WHERE code = 'DEF_FLAT'), 
 160,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    13,
    0,
    7
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 7 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ACC'),
    8,
    1,
    8
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ACC')
    AND is_ancient = 0
    AND 8 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    15,
    0,
    11
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 11 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    6,
    0,
    0
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND 0 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 25111)
AND slot_number = 3;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 25111), 
    @last_rune_id, 
    3
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 25111);

-- Rune ID: 34200599484

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 4 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(34200599484, 
 9215591, 
 1, 
 11234038306, 
 4,
 5, 
 6, 
 13, 
 15, 
 15,
 684720, 
 134236, 
 (SELECT id FROM stat_types WHERE code = 'ATK_PCT'), 
 63,
 (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'), 
 7, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'RES'),
    20,
    0,
    20
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'RES')
    AND is_ancient = 0
    AND 20 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    16,
    0,
    12
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 12 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    9,
    1,
    3
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND 3 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    5,
    0,
    0
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 0 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 25111)
AND slot_number = 4;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 25111), 
    @last_rune_id, 
    4
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 25111);

-- Rune ID: 32902829583

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 5 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(32902829583, 
 9215591, 
 1, 
 11234038306, 
 5,
 5, 
 6, 
 17, 
 15, 
 15,
 557920, 
 129875, 
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 2448,
 (SELECT id FROM stat_types WHERE code = 'DEF_FLAT'), 
 20, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    10,
    0,
    6
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 6 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    22,
    0,
    15
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 15 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    10,
    1,
    3
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND 3 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    6,
    0,
    -1
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND -1 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 25111)
AND slot_number = 5;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 25111), 
    @last_rune_id, 
    5
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 25111);

-- Rune ID: 41497189422

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 6 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(41497189422, 
 9215591, 
 1, 
 11234038306, 
 6,
 5, 
 6, 
 13, 
 15, 
 15,
 592790, 
 129639, 
 (SELECT id FROM stat_types WHERE code = 'ATK_PCT'), 
 63,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    20,
    0,
    15
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND 15 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_FLAT'),
    12,
    0,
    -6
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_FLAT')
    AND is_ancient = 0
    AND -6 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    10,
    0,
    7
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 7 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    10,
    1,
    5
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 5 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_upgrades 
(rune_id, level_reached, stat_type_id, old_value, new_value, upgrade_date)
SELECT 
    @last_rune_id,
    3,
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    5.0,
    10.0,
    NOW();

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 25111)
AND slot_number = 6;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 25111), 
    @last_rune_id, 
    6
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 25111);

-- Rune ID: 41561913426

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 1 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(41561913426, 
 9215591, 
 1, 
 11238378017, 
 1,
 5, 
 6, 
 14, 
 15, 
 12,
 662530, 
 71476, 
 (SELECT id FROM stat_types WHERE code = 'ATK_FLAT'), 
 118,
 (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'), 
 6, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    16,
    0,
    12
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 12 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    16,
    0,
    10
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 10 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    5,
    1,
    -2
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND -2 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ACC'),
    8,
    0,
    8
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ACC')
    AND is_ancient = 0
    AND 8 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 22211)
AND slot_number = 1;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 22211), 
    @last_rune_id, 
    1
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 22211);

-- Rune ID: 43497964094

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 2 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(43497964094, 
 9215591, 
 1, 
 11238378017, 
 2,
 5, 
 6, 
 13, 
 15, 
 15,
 697400, 
 134870, 
 (SELECT id FROM stat_types WHERE code = 'SPD'), 
 42,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    10,
    0,
    10
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 10 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    20,
    0,
    20
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND 20 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'RES'),
    4,
    0,
    4
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'RES')
    AND is_ancient = 0
    AND 4 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    8,
    0,
    2
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 2 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 22211)
AND slot_number = 2;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 22211), 
    @last_rune_id, 
    2
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 22211);

-- Rune ID: 43361221936

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 4 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(43361221936, 
 9215591, 
 1, 
 11238378017, 
 4,
 5, 
 6, 
 13, 
 15, 
 12,
 684720, 
 70236, 
 (SELECT id FROM stat_types WHERE code = 'DEF_PCT'), 
 47,
 (SELECT id FROM stat_types WHERE code = 'DEF_FLAT'), 
 10, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    6,
    0,
    1
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 1 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    12,
    0,
    7
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 7 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    16,
    0,
    12
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 12 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'RES'),
    6,
    0,
    6
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'RES')
    AND is_ancient = 0
    AND 6 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 22211)
AND slot_number = 4;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 22211), 
    @last_rune_id, 
    4
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 22211);

-- Rune ID: 32185264662

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 1 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(32185264662, 
 9215591, 
 1, 
 11463364438, 
 1,
 5, 
 6, 
 10, 
 15, 
 12,
 722760, 
 72138, 
 (SELECT id FROM stat_types WHERE code = 'ATK_FLAT'), 
 118,
 (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'), 
 5, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    23,
    0,
    16
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 16 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    10,
    0,
    7
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 7 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    9,
    1,
    2
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 2 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    5,
    0,
    5
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 5 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 21111)
AND slot_number = 1;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 21111), 
    @last_rune_id, 
    1
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 21111);

-- Rune ID: 31959510160

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 2 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(31959510160, 
 9215591, 
 1, 
 11463364438, 
 2,
 5, 
 6, 
 10, 
 15, 
 15,
 760800, 
 138040, 
 (SELECT id FROM stat_types WHERE code = 'SPD'), 
 42,
 (SELECT id FROM stat_types WHERE code = 'DEF_PCT'), 
 8, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ACC'),
    14,
    0,
    14
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ACC')
    AND is_ancient = 0
    AND 14 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    22,
    0,
    22
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 22 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    8,
    1,
    3
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 3 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_FLAT'),
    18,
    0,
    -9
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_FLAT')
    AND is_ancient = 0
    AND -9 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 21111)
AND slot_number = 2;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 21111), 
    @last_rune_id, 
    2
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 21111);

-- Rune ID: 20498377299

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 3 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(20498377299, 
 9215591, 
 1, 
 11463364438, 
 3,
 5, 
 6, 
 10, 
 15, 
 15,
 523050, 
 126152, 
 (SELECT id FROM stat_types WHERE code = 'DEF_FLAT'), 
 160,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    8,
    1,
    1
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 1 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    6,
    0,
    6
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 6 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    20,
    0,
    16
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 16 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'),
    12,
    0,
    12
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_DMG')
    AND is_ancient = 0
    AND 12 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 21111)
AND slot_number = 3;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 21111), 
    @last_rune_id, 
    3
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 21111);

-- Rune ID: 26645721087

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 4 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_DMG')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(26645721087, 
 9215591, 
 1, 
 11463364438, 
 4,
 5, 
 6, 
 14, 
 15, 
 15,
 627660, 
 133609, 
 (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'), 
 80,
 (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'), 
 6, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    4,
    0,
    0
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 0 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    5,
    0,
    -3
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND -3 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    29,
    0,
    19
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 19 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    8,
    1,
    1
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND 1 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_upgrades 
(rune_id, level_reached, stat_type_id, old_value, new_value, upgrade_date)
SELECT 
    @last_rune_id,
    3,
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    1.0,
    8.0,
    NOW();

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 21111)
AND slot_number = 4;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 21111), 
    @last_rune_id, 
    4
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 21111);

-- Rune ID: 36103158861

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 5 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(36103158861, 
 9215591, 
 1, 
 11463364438, 
 5,
 5, 
 6, 
 14, 
 15, 
 12,
 507200, 
 63159, 
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 1800,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    12,
    0,
    5
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 5 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    5,
    0,
    5
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 5 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    8,
    1,
    1
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 1 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    20,
    0,
    16
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 16 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 21111)
AND slot_number = 5;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 21111), 
    @last_rune_id, 
    5
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 21111);

-- Rune ID: 31214470395

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 6 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(31214470395, 
 9215591, 
 1, 
 11463364438, 
 6,
 5, 
 6, 
 10, 
 15, 
 15,
 646680, 
 132334, 
 (SELECT id FROM stat_types WHERE code = 'ATK_PCT'), 
 63,
 (SELECT id FROM stat_types WHERE code = 'DEF_PCT'), 
 7, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    7,
    0,
    2
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 2 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_FLAT'),
    349,
    0,
    -72
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_FLAT')
    AND is_ancient = 0
    AND -72 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    20,
    0,
    20
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 20 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    7,
    1,
    3
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 3 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_upgrades 
(rune_id, level_reached, stat_type_id, old_value, new_value, upgrade_date)
SELECT 
    @last_rune_id,
    3,
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    3.0,
    7.0,
    NOW();

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 21111)
AND slot_number = 6;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 21111), 
    @last_rune_id, 
    6
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 21111);

-- Rune ID: 44437403509

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 1 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(44437403509, 
 9215591, 
 1, 
 11463638021, 
 1,
 5, 
 6, 
 8, 
 15, 
 12,
 391495, 
 63889, 
 (SELECT id FROM stat_types WHERE code = 'ATK_FLAT'), 
 118,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    10,
    0,
    10
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 10 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    11,
    0,
    7
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 7 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'),
    5,
    0,
    5
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_DMG')
    AND is_ancient = 0
    AND 5 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    21,
    0,
    14
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 14 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 13411)
AND slot_number = 1;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 13411), 
    @last_rune_id, 
    1
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 13411);

-- Rune ID: 41734891313

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 2 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(41734891313, 
 9215591, 
 1, 
 11463638021, 
 2,
 5, 
 6, 
 15, 
 15, 
 15,
 634000, 
 133949, 
 (SELECT id FROM stat_types WHERE code = 'ATK_PCT'), 
 63,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'),
    4,
    0,
    4
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_DMG')
    AND is_ancient = 0
    AND 4 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    25,
    0,
    20
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 20 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    4,
    0,
    4
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 4 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    8,
    0,
    2
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND 2 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 13411)
AND slot_number = 2;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 13411), 
    @last_rune_id, 
    2
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 13411);

-- Rune ID: 36504508352

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 3 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(36504508352, 
 9215591, 
 1, 
 11463638021, 
 3,
 5, 
 6, 
 8, 
 15, 
 12,
 309075, 
 58017, 
 (SELECT id FROM stat_types WHERE code = 'DEF_FLAT'), 
 118,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    16,
    0,
    13
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 13 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ACC'),
    14,
    0,
    14
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ACC')
    AND is_ancient = 0
    AND 14 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    5,
    0,
    1
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 1 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    10,
    1,
    3
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND 3 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_upgrades 
(rune_id, level_reached, stat_type_id, old_value, new_value, upgrade_date)
SELECT 
    @last_rune_id,
    3,
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    3.0,
    10.0,
    NOW();

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 13411)
AND slot_number = 3;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 13411), 
    @last_rune_id, 
    3
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 13411);

-- Rune ID: 32717929641

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 4 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(32717929641, 
 9215591, 
 1, 
 11463638021, 
 4,
 5, 
 6, 
 8, 
 15, 
 15,
 370890, 
 126421, 
 (SELECT id FROM stat_types WHERE code = 'ATK_PCT'), 
 63,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_FLAT'),
    11,
    0,
    -5
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_FLAT')
    AND is_ancient = 0
    AND -5 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    13,
    0,
    10
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 10 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    8,
    1,
    4
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 4 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    19,
    0,
    15
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND 15 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 13411)
AND slot_number = 4;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 13411), 
    @last_rune_id, 
    4
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 13411);

-- Rune ID: 30924308720

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 5 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(30924308720, 
 9215591, 
 1, 
 11463638021, 
 5,
 5, 
 6, 
 8, 
 15, 
 12,
 380400, 
 63098, 
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 1800,
 (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'), 
 5, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    6,
    0,
    6
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 6 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    16,
    0,
    9
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND 9 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    15,
    0,
    12
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 12 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    9,
    1,
    4
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 4 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_upgrades 
(rune_id, level_reached, stat_type_id, old_value, new_value, upgrade_date)
SELECT 
    @last_rune_id,
    3,
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    4.0,
    9.0,
    NOW();

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 13411)
AND slot_number = 5;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 13411), 
    @last_rune_id, 
    5
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 13411);

-- Rune ID: 35308918618

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 1 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(35308918618, 
 9215591, 
 1, 
 11475816408, 
 1,
 5, 
 6, 
 1, 
 15, 
 12,
 361380, 
 63019, 
 (SELECT id FROM stat_types WHERE code = 'ATK_FLAT'), 
 118,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    14,
    0,
    7
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 7 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    11,
    1,
    5
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 5 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    18,
    0,
    14
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 14 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ACC'),
    7,
    0,
    7
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ACC')
    AND is_ancient = 0
    AND 7 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 23711)
AND slot_number = 1;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 23711), 
    @last_rune_id, 
    1
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 23711);

-- Rune ID: 31877795920

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 2 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(31877795920, 
 9215591, 
 1, 
 11475816408, 
 2,
 5, 
 6, 
 10, 
 15, 
 15,
 697400, 
 134870, 
 (SELECT id FROM stat_types WHERE code = 'SPD'), 
 42,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    12,
    0,
    5
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 5 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ACC'),
    17,
    0,
    17
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ACC')
    AND is_ancient = 0
    AND 17 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    7,
    0,
    -1
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND -1 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    11,
    1,
    5
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 5 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_upgrades 
(rune_id, level_reached, stat_type_id, old_value, new_value, upgrade_date)
SELECT 
    @last_rune_id,
    3,
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    5.0,
    11.0,
    NOW();

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 23711)
AND slot_number = 2;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 23711), 
    @last_rune_id, 
    2
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 23711);

-- Rune ID: 42068654309

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 3 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(42068654309, 
 9215591, 
 1, 
 11475816408, 
 3,
 5, 
 6, 
 1, 
 15, 
 12,
 332850, 
 60885, 
 (SELECT id FROM stat_types WHERE code = 'DEF_FLAT'), 
 118,
 (SELECT id FROM stat_types WHERE code = 'ACC'), 
 7, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    9,
    0,
    5
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 5 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    13,
    0,
    7
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 7 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    10,
    1,
    4
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND 4 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'RES'),
    22,
    0,
    22
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'RES')
    AND is_ancient = 0
    AND 22 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 23711)
AND slot_number = 3;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 23711), 
    @last_rune_id, 
    3
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 23711);

-- Rune ID: 38020109032

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 5 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(38020109032, 
 9215591, 
 1, 
 11475816408, 
 5,
 5, 
 6, 
 10, 
 15, 
 12,
 608640, 
 66432, 
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 1800,
 (SELECT id FROM stat_types WHERE code = 'RES'), 
 8, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    14,
    0,
    8
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 8 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    10,
    1,
    5
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND 5 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    13,
    0,
    8
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 8 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    14,
    0,
    11
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 11 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 23711)
AND slot_number = 5;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 23711), 
    @last_rune_id, 
    5
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 23711);

-- Rune ID: 39188816109

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 2 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(39188816109, 
 9215591, 
 1, 
 11504109596, 
 2,
 5, 
 6, 
 4, 
 15, 
 15,
 475500, 
 133873, 
 (SELECT id FROM stat_types WHERE code = 'SPD'), 
 42,
 (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'), 
 4, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    16,
    0,
    9
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 9 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'),
    18,
    0,
    18
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_DMG')
    AND is_ancient = 0
    AND 18 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_FLAT'),
    17,
    0,
    -4
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_FLAT')
    AND is_ancient = 0
    AND -4 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    6,
    0,
    -1
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND -1 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 23511)
AND slot_number = 2;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 23511), 
    @last_rune_id, 
    2
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 23511);

-- Rune ID: 25647955466

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 3 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(25647955466, 
 9215591, 
 1, 
 11504109596, 
 3,
 5, 
 6, 
 3, 
 15, 
 15,
 332850, 
 122642, 
 (SELECT id FROM stat_types WHERE code = 'DEF_FLAT'), 
 160,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    5,
    1,
    5
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 5 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    10,
    0,
    6
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 6 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'),
    20,
    0,
    20
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_DMG')
    AND is_ancient = 0
    AND 20 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    8,
    0,
    1
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 1 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 23511)
AND slot_number = 3;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 23511), 
    @last_rune_id, 
    3
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 23511);

-- Rune ID: 20740930022

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 4 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_DMG')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(20740930022, 
 9215591, 
 1, 
 11504109596, 
 4,
 5, 
 6, 
 3, 
 15, 
 15,
 456480, 
 131053, 
 (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'), 
 80,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 254, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    15,
    0,
    8
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 8 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    8,
    1,
    4
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 4 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    5,
    0,
    5
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 5 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    23,
    0,
    16
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 16 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 23511)
AND slot_number = 4;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 23511), 
    @last_rune_id, 
    4
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 23511);

-- Rune ID: 26148535477

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 5 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(26148535477, 
 9215591, 
 1, 
 11504109596, 
 5,
 5, 
 6, 
 3, 
 15, 
 12,
 405760, 
 63602, 
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 1800,
 (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'), 
 7, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    19,
    0,
    19
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 19 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    7,
    1,
    3
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 3 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ACC'),
    13,
    0,
    13
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ACC')
    AND is_ancient = 0
    AND 13 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    8,
    0,
    2
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 2 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 23511)
AND slot_number = 5;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 23511), 
    @last_rune_id, 
    5
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 23511);

-- Rune ID: 45488065866

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 6 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(45488065866, 
 9215591, 
 1, 
 11504109596, 
 6,
 5, 
 6, 
 4, 
 15, 
 12,
 404175, 
 64792, 
 (SELECT id FROM stat_types WHERE code = 'ATK_PCT'), 
 47,
 (SELECT id FROM stat_types WHERE code = 'DEF_PCT'), 
 6, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    23,
    0,
    23
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 23 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    4,
    0,
    4
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 4 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_FLAT'),
    374,
    0,
    374
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_FLAT')
    AND is_ancient = 0
    AND 374 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ACC'),
    4,
    0,
    4
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ACC')
    AND is_ancient = 0
    AND 4 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 23511)
AND slot_number = 6;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 23511), 
    @last_rune_id, 
    6
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 23511);

-- Rune ID: 38066812658

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 1 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(38066812658, 
 9215591, 
 1, 
 11608504985, 
 1,
 5, 
 6, 
 3, 
 15, 
 12,
 481840, 
 68778, 
 (SELECT id FROM stat_types WHERE code = 'ATK_FLAT'), 
 118,
 (SELECT id FROM stat_types WHERE code = 'RES'), 
 6, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    6,
    0,
    0
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 0 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    12,
    0,
    12
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 12 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'),
    10,
    0,
    10
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_DMG')
    AND is_ancient = 0
    AND 10 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    22,
    0,
    15
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 15 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 20611)
AND slot_number = 1;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 20611), 
    @last_rune_id, 
    1
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 20611);

-- Rune ID: 43408351866

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 2 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(43408351866, 
 9215591, 
 1, 
 11608504985, 
 2,
 5, 
 6, 
 16, 
 15, 
 15,
 697400, 
 137344, 
 (SELECT id FROM stat_types WHERE code = 'SPD'), 
 42,
 (SELECT id FROM stat_types WHERE code = 'ACC'), 
 7, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    20,
    0,
    20
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 20 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    5,
    0,
    -2
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND -2 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    11,
    1,
    4
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 4 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_FLAT'),
    15,
    0,
    2
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_FLAT')
    AND is_ancient = 0
    AND 2 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 20611)
AND slot_number = 2;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 20611), 
    @last_rune_id, 
    2
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 20611);

-- Rune ID: 44104288148

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 3 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(44104288148, 
 9215591, 
 1, 
 11608504985, 
 3,
 5, 
 6, 
 3, 
 15, 
 12,
 380400, 
 61877, 
 (SELECT id FROM stat_types WHERE code = 'DEF_FLAT'), 
 118,
 (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'), 
 7, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    13,
    0,
    13
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 13 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    13,
    0,
    13
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND 13 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    10,
    0,
    10
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 10 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ACC'),
    12,
    0,
    12
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ACC')
    AND is_ancient = 0
    AND 12 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 20611)
AND slot_number = 3;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 20611), 
    @last_rune_id, 
    3
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 20611);

-- Rune ID: 24712179910

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 1 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(24712179910, 
 9215591, 
 1, 
 12106995218, 
 1,
 5, 
 6, 
 15, 
 15, 
 15,
 602300, 
 132251, 
 (SELECT id FROM stat_types WHERE code = 'ATK_FLAT'), 
 160,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    6,
    0,
    -4
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND -4 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    21,
    0,
    16
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 16 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    6,
    0,
    6
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 6 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    10,
    1,
    3
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 3 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_upgrades 
(rune_id, level_reached, stat_type_id, old_value, new_value, upgrade_date)
SELECT 
    @last_rune_id,
    3,
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    3.0,
    10.0,
    NOW();

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 18111)
AND slot_number = 1;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 18111), 
    @last_rune_id, 
    1
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 18111);

-- Rune ID: 39644626136

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 2 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(39644626136, 
 9215591, 
 1, 
 12106995218, 
 2,
 5, 
 6, 
 8, 
 15, 
 15,
 412100, 
 129357, 
 (SELECT id FROM stat_types WHERE code = 'ATK_PCT'), 
 63,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    7,
    0,
    0
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 0 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    25,
    0,
    18
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND 18 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_FLAT'),
    13,
    0,
    -17
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_FLAT')
    AND is_ancient = 0
    AND -17 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    5,
    1,
    2
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 2 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_upgrades 
(rune_id, level_reached, stat_type_id, old_value, new_value, upgrade_date)
SELECT 
    @last_rune_id,
    3,
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    2.0,
    5.0,
    NOW();

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 18111)
AND slot_number = 2;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 18111), 
    @last_rune_id, 
    2
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 18111);

-- Rune ID: 16383398556

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 3 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(16383398556, 
 9215591, 
 1, 
 12106995218, 
 3,
 5, 
 6, 
 8, 
 15, 
 15,
 309075, 
 122017, 
 (SELECT id FROM stat_types WHERE code = 'DEF_FLAT'), 
 160,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ACC'),
    11,
    0,
    11
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ACC')
    AND is_ancient = 0
    AND 11 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    4,
    1,
    0
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 0 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    14,
    0,
    7
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 7 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    22,
    0,
    15
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND 15 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 18111)
AND slot_number = 3;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 18111), 
    @last_rune_id, 
    3
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 18111);

-- Rune ID: 30805036796

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 4 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(30805036796, 
 9215591, 
 1, 
 12106995218, 
 4,
 5, 
 6, 
 8, 
 15, 
 15,
 370890, 
 126421, 
 (SELECT id FROM stat_types WHERE code = 'ATK_PCT'), 
 63,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    7,
    1,
    0
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND 0 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    15,
    0,
    11
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 11 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ACC'),
    13,
    0,
    13
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ACC')
    AND is_ancient = 0
    AND 13 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    6,
    0,
    -1
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND -1 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 18111)
AND slot_number = 4;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 18111), 
    @last_rune_id, 
    4
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 18111);

-- Rune ID: 28986521925

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 5 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(28986521925, 
 9215591, 
 1, 
 12106995218, 
 5,
 5, 
 6, 
 8, 
 15, 
 15,
 380400, 
 127098, 
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 2448,
 (SELECT id FROM stat_types WHERE code = 'ACC'), 
 6, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    14,
    0,
    8
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 8 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    6,
    0,
    0
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND 0 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    15,
    0,
    11
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 11 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_FLAT'),
    20,
    1,
    -1
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_FLAT')
    AND is_ancient = 0
    AND -1 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_upgrades 
(rune_id, level_reached, stat_type_id, old_value, new_value, upgrade_date)
SELECT 
    @last_rune_id,
    3,
    (SELECT id FROM stat_types WHERE code = 'ATK_FLAT'),
    -1.0,
    20.0,
    NOW();

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 18111)
AND slot_number = 5;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 18111), 
    @last_rune_id, 
    5
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 18111);

-- Rune ID: 40881130977

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 6 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(40881130977, 
 9215591, 
 1, 
 12106995218, 
 6,
 5, 
 6, 
 15, 
 15, 
 15,
 592790, 
 131742, 
 (SELECT id FROM stat_types WHERE code = 'ATK_PCT'), 
 63,
 (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'), 
 4, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    15,
    0,
    13
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 13 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    6,
    0,
    1
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND 1 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ACC'),
    11,
    0,
    11
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ACC')
    AND is_ancient = 0
    AND 11 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    5,
    1,
    0
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 0 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_upgrades 
(rune_id, level_reached, stat_type_id, old_value, new_value, upgrade_date)
SELECT 
    @last_rune_id,
    3,
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    0.0,
    5.0,
    NOW();

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 18111)
AND slot_number = 6;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 18111), 
    @last_rune_id, 
    6
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 18111);

-- Rune ID: 35455625681

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 1 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(35455625681, 
 9215591, 
 1, 
 13833138704, 
 1,
 5, 
 6, 
 2, 
 15, 
 15,
 481840, 
 132778, 
 (SELECT id FROM stat_types WHERE code = 'ATK_FLAT'), 
 160,
 (SELECT id FROM stat_types WHERE code = 'RES'), 
 6, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    6,
    0,
    1
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 1 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    11,
    1,
    4
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 4 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    22,
    0,
    22
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 22 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    5,
    0,
    -2
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND -2 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 11031)
AND slot_number = 1;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 11031), 
    @last_rune_id, 
    1
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 11031);

-- Rune ID: 41455098783

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 2 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(41455098783, 
 9215591, 
 1, 
 13833138704, 
 2,
 5, 
 6, 
 2, 
 15, 
 12,
 443800, 
 66190, 
 (SELECT id FROM stat_types WHERE code = 'SPD'), 
 31,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    20,
    0,
    20
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 20 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_FLAT'),
    18,
    0,
    -7
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_FLAT')
    AND is_ancient = 0
    AND -7 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    10,
    1,
    4
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 4 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_FLAT'),
    147,
    0,
    -223
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_FLAT')
    AND is_ancient = 0
    AND -223 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 11031)
AND slot_number = 2;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 11031), 
    @last_rune_id, 
    2
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 11031);

-- Rune ID: 22923568685

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 3 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(22923568685, 
 9215591, 
 1, 
 13833138704, 
 3,
 5, 
 6, 
 20, 
 15, 
 15,
 523050, 
 128008, 
 (SELECT id FROM stat_types WHERE code = 'DEF_FLAT'), 
 160,
 (SELECT id FROM stat_types WHERE code = 'RES'), 
 5, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    19,
    0,
    12
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 12 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    13,
    0,
    9
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 9 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ACC'),
    8,
    1,
    8
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ACC')
    AND is_ancient = 0
    AND 8 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    6,
    0,
    -3
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND -3 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 11031)
AND slot_number = 3;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 11031), 
    @last_rune_id, 
    3
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 11031);

-- Rune ID: 43267901672

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 4 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(43267901672, 
 9215591, 
 1, 
 13833138704, 
 4,
 15, 
 16, 
 15, 
 15, 
 15,
 684720, 
 136665, 
 (SELECT id FROM stat_types WHERE code = 'DEF_PCT'), 
 63,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    15,
    0,
    7
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 1
    AND 7 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    18,
    0,
    18
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 1
    AND 18 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    12,
    1,
    3
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 1
    AND 3 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    11,
    0,
    6
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 1
    AND 6 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 11031)
AND slot_number = 4;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 11031), 
    @last_rune_id, 
    4
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 11031);

-- Rune ID: 31584116745

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 5 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(31584116745, 
 9215591, 
 1, 
 13833138704, 
 5,
 5, 
 6, 
 20, 
 15, 
 15,
 507200, 
 127159, 
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 2448,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    6,
    0,
    2
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 2 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    19,
    0,
    12
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND 12 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ACC'),
    10,
    0,
    10
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ACC')
    AND is_ancient = 0
    AND 10 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    6,
    1,
    -1
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND -1 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_upgrades 
(rune_id, level_reached, stat_type_id, old_value, new_value, upgrade_date)
SELECT 
    @last_rune_id,
    3,
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    -1.0,
    6.0,
    NOW();

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 11031)
AND slot_number = 5;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 11031), 
    @last_rune_id, 
    5
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 11031);

-- Rune ID: 44547855295

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 6 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(44547855295, 
 9215591, 
 1, 
 13833138704, 
 6,
 15, 
 16, 
 10, 
 15, 
 12,
 711348, 
 71567, 
 (SELECT id FROM stat_types WHERE code = 'DEF_PCT'), 
 47,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    17,
    0,
    12
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 1
    AND 12 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    10,
    0,
    10
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 1
    AND 10 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ACC'),
    20,
    0,
    20
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ACC')
    AND is_ancient = 1
    AND 20 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    10,
    1,
    3
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 1
    AND 3 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_upgrades 
(rune_id, level_reached, stat_type_id, old_value, new_value, upgrade_date)
SELECT 
    @last_rune_id,
    3,
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    3.0,
    10.0,
    NOW();

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 11031)
AND slot_number = 6;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 11031), 
    @last_rune_id, 
    6
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 11031);

-- Rune ID: 23215869526

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 1 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(23215869526, 
 9215591, 
 1, 
 14156588497, 
 1,
 5, 
 6, 
 3, 
 15, 
 15,
 421610, 
 128680, 
 (SELECT id FROM stat_types WHERE code = 'ATK_FLAT'), 
 160,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    13,
    0,
    5
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 5 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ACC'),
    8,
    1,
    8
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ACC')
    AND is_ancient = 0
    AND 8 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    5,
    0,
    -2
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND -2 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    21,
    0,
    16
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 16 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 19411)
AND slot_number = 1;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 19411), 
    @last_rune_id, 
    1
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 19411);

-- Rune ID: 45623047007

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 2 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(45623047007, 
 9215591, 
 1, 
 14156588497, 
 2,
 5, 
 6, 
 16, 
 15, 
 15,
 697400, 
 137344, 
 (SELECT id FROM stat_types WHERE code = 'SPD'), 
 42,
 (SELECT id FROM stat_types WHERE code = 'RES'), 
 5, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ACC'),
    5,
    0,
    5
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ACC')
    AND is_ancient = 0
    AND 5 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    8,
    0,
    3
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 3 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    29,
    0,
    19
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 19 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_FLAT'),
    158,
    0,
    -311
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_FLAT')
    AND is_ancient = 0
    AND -311 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 19411)
AND slot_number = 2;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 19411), 
    @last_rune_id, 
    2
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 19411);

-- Rune ID: 22142881835

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 3 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(22142881835, 
 9215591, 
 1, 
 14156588497, 
 3,
 5, 
 6, 
 3, 
 15, 
 15,
 380400, 
 125877, 
 (SELECT id FROM stat_types WHERE code = 'DEF_FLAT'), 
 160,
 (SELECT id FROM stat_types WHERE code = 'ACC'), 
 8, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    11,
    1,
    5
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND 5 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    16,
    0,
    12
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 12 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    5,
    0,
    5
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 5 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    22,
    0,
    14
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 14 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 19411)
AND slot_number = 3;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 19411), 
    @last_rune_id, 
    3
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 19411);

-- Rune ID: 40241043261

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 4 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(40241043261, 
 9215591, 
 1, 
 14156588497, 
 4,
 5, 
 6, 
 16, 
 15, 
 15,
 627660, 
 133609, 
 (SELECT id FROM stat_types WHERE code = 'HP_PCT'), 
 63,
 (SELECT id FROM stat_types WHERE code = 'DEF_PCT'), 
 5, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_FLAT'),
    319,
    0,
    -177
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_FLAT')
    AND is_ancient = 0
    AND -177 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    20,
    0,
    15
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 15 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    7,
    0,
    0
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 0 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_FLAT'),
    19,
    0,
    7
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_FLAT')
    AND is_ancient = 0
    AND 7 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 19411)
AND slot_number = 4;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 19411), 
    @last_rune_id, 
    4
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 19411);

-- Rune ID: 42766783998

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 5 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(42766783998, 
 9215591, 
 1, 
 14156588497, 
 5,
 5, 
 6, 
 3, 
 15, 
 12,
 355040, 
 60152, 
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 1800,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'RES'),
    13,
    0,
    13
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'RES')
    AND is_ancient = 0
    AND 13 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    7,
    0,
    2
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND 2 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    5,
    0,
    -1
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND -1 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    20,
    0,
    17
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 17 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 19411)
AND slot_number = 5;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 19411), 
    @last_rune_id, 
    5
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 19411);

-- Rune ID: 43117270459

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 6 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'ACC')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(43117270459, 
 9215591, 
 1, 
 14156588497, 
 6,
 5, 
 6, 
 3, 
 15, 
 15,
 431120, 
 129327, 
 (SELECT id FROM stat_types WHERE code = 'ACC'), 
 64,
 (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'), 
 5, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    7,
    0,
    0
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 0 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    21,
    0,
    17
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 17 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    7,
    1,
    1
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND 1 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_FLAT'),
    299,
    0,
    -235
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_FLAT')
    AND is_ancient = 0
    AND -235 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 19411)
AND slot_number = 6;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 19411), 
    @last_rune_id, 
    6
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 19411);

-- Rune ID: 38141729015

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 3 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(38141729015, 
 9215591, 
 1, 
 14434992915, 
 3,
 5, 
 6, 
 13, 
 15, 
 12,
 523050, 
 62152, 
 (SELECT id FROM stat_types WHERE code = 'DEF_FLAT'), 
 118,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    20,
    0,
    14
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND 14 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    12,
    0,
    12
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 12 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    7,
    0,
    1
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 1 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ACC'),
    9,
    1,
    9
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ACC')
    AND is_ancient = 0
    AND 9 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_upgrades 
(rune_id, level_reached, stat_type_id, old_value, new_value, upgrade_date)
SELECT 
    @last_rune_id,
    3,
    (SELECT id FROM stat_types WHERE code = 'ACC'),
    9.0,
    9.0,
    NOW();

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 22111)
AND slot_number = 3;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 22111), 
    @last_rune_id, 
    3
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 22111);

-- Rune ID: 35493328265

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 4 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(35493328265, 
 9215591, 
 1, 
 14434992915, 
 4,
 5, 
 6, 
 13, 
 15, 
 15,
 684720, 
 134236, 
 (SELECT id FROM stat_types WHERE code = 'DEF_PCT'), 
 63,
 (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'), 
 5, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    11,
    1,
    7
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 7 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ACC'),
    14,
    0,
    14
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ACC')
    AND is_ancient = 0
    AND 14 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    16,
    0,
    13
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 13 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_FLAT'),
    14,
    0,
    -6
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_FLAT')
    AND is_ancient = 0
    AND -6 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 22111)
AND slot_number = 4;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 22111), 
    @last_rune_id, 
    4
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 22111);

-- Rune ID: 24783079838

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 6 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(24783079838, 
 9215591, 
 1, 
 14434992915, 
 6,
 5, 
 6, 
 13, 
 15, 
 15,
 592790, 
 129639, 
 (SELECT id FROM stat_types WHERE code = 'HP_PCT'), 
 63,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    9,
    0,
    6
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 6 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    11,
    0,
    11
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 11 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'RES'),
    16,
    0,
    16
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'RES')
    AND is_ancient = 0
    AND 16 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    4,
    0,
    4
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 4 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 22111)
AND slot_number = 6;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 22111), 
    @last_rune_id, 
    6
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 22111);

-- Rune ID: 20890183635

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 1 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(20890183635, 
 9215591, 
 1, 
 14434992916, 
 1,
 5, 
 6, 
 3, 
 15, 
 15,
 481840, 
 132778, 
 (SELECT id FROM stat_types WHERE code = 'ATK_FLAT'), 
 160,
 (SELECT id FROM stat_types WHERE code = 'RES'), 
 6, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    21,
    0,
    14
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 14 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'),
    5,
    1,
    5
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_DMG')
    AND is_ancient = 0
    AND 5 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    10,
    0,
    6
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 6 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    10,
    0,
    10
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 10 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 20711)
AND slot_number = 1;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 20711), 
    @last_rune_id, 
    1
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 20711);

-- Rune ID: 21895865593

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 2 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(21895865593, 
 9215591, 
 1, 
 14434992916, 
 2,
 5, 
 6, 
 4, 
 15, 
 15,
 412100, 
 129357, 
 (SELECT id FROM stat_types WHERE code = 'SPD'), 
 42,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    14,
    0,
    9
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 9 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    11,
    0,
    11
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 11 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    12,
    0,
    3
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND 3 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'RES'),
    5,
    0,
    5
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'RES')
    AND is_ancient = 0
    AND 5 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 20711)
AND slot_number = 2;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 20711), 
    @last_rune_id, 
    2
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 20711);

-- Rune ID: 42062949301

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 3 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(42062949301, 
 9215591, 
 1, 
 14434992916, 
 3,
 5, 
 6, 
 4, 
 15, 
 12,
 356625, 
 61405, 
 (SELECT id FROM stat_types WHERE code = 'DEF_FLAT'), 
 118,
 (SELECT id FROM stat_types WHERE code = 'RES'), 
 5, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    6,
    0,
    6
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 6 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    20,
    0,
    17
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 17 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    8,
    0,
    1
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND 1 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    8,
    0,
    2
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 2 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 20711)
AND slot_number = 3;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 20711), 
    @last_rune_id, 
    3
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 20711);

-- Rune ID: 42008227117

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 4 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_DMG')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(42008227117, 
 9215591, 
 1, 
 14434992916, 
 4,
 5, 
 6, 
 3, 
 15, 
 15,
 456480, 
 131053, 
 (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'), 
 80,
 (SELECT id FROM stat_types WHERE code = 'DEF_PCT'), 
 5, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_FLAT'),
    26,
    0,
    4
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_FLAT')
    AND is_ancient = 0
    AND 4 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    4,
    0,
    4
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 4 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    20,
    0,
    17
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 17 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    7,
    0,
    2
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 2 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 20711)
AND slot_number = 4;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 20711), 
    @last_rune_id, 
    4
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 20711);

-- Rune ID: 31809925647

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 2 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(31809925647, 
 9215591, 
 1, 
 14447650810, 
 2,
 15, 
 16, 
 3, 
 15, 
 15,
 532560, 
 136228, 
 (SELECT id FROM stat_types WHERE code = 'ATK_PCT'), 
 63,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    11,
    0,
    6
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 1
    AND 6 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    10,
    0,
    3
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 1
    AND 3 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    17,
    0,
    17
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 1
    AND 17 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'),
    9,
    1,
    9
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_DMG')
    AND is_ancient = 1
    AND 9 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_upgrades 
(rune_id, level_reached, stat_type_id, old_value, new_value, upgrade_date)
SELECT 
    @last_rune_id,
    3,
    (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'),
    9.0,
    9.0,
    NOW();

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 19711)
AND slot_number = 2;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 19711), 
    @last_rune_id, 
    2
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 19711);

-- Rune ID: 39952578062

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 2 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(39952578062, 
 9215591, 
 1, 
 14562376012, 
 2,
 5, 
 6, 
 16, 
 15, 
 12,
 634000, 
 69949, 
 (SELECT id FROM stat_types WHERE code = 'SPD'), 
 31,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    12,
    0,
    5
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND 5 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ACC'),
    20,
    0,
    20
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ACC')
    AND is_ancient = 0
    AND 20 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    8,
    0,
    1
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 1 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'RES'),
    8,
    0,
    8
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'RES')
    AND is_ancient = 0
    AND 8 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 18611)
AND slot_number = 2;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 18611), 
    @last_rune_id, 
    2
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 18611);

-- Rune ID: 26144403711

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 3 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(26144403711, 
 9215591, 
 1, 
 14562376012, 
 3,
 5, 
 6, 
 3, 
 15, 
 12,
 380400, 
 61877, 
 (SELECT id FROM stat_types WHERE code = 'DEF_FLAT'), 
 118,
 (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'), 
 4, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    6,
    0,
    0
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND 0 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_FLAT'),
    512,
    0,
    94
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_FLAT')
    AND is_ancient = 0
    AND 94 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    18,
    0,
    14
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 14 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    7,
    0,
    3
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 3 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 18611)
AND slot_number = 3;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 18611), 
    @last_rune_id, 
    3
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 18611);

-- Rune ID: 21170161644

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 4 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_DMG')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(21170161644, 
 9215591, 
 1, 
 14562376012, 
 4,
 5, 
 6, 
 16, 
 15, 
 15,
 570600, 
 130554, 
 (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'), 
 80,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ACC'),
    11,
    0,
    11
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ACC')
    AND is_ancient = 0
    AND 11 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    18,
    0,
    13
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 13 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    10,
    1,
    3
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 3 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    5,
    0,
    -4
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND -4 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 18611)
AND slot_number = 4;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 18611), 
    @last_rune_id, 
    4
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 18611);

-- Rune ID: 21117796816

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 5 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(21117796816, 
 9215591, 
 1, 
 14562376012, 
 5,
 5, 
 6, 
 3, 
 15, 
 12,
 355040, 
 60152, 
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 1800,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'),
    7,
    0,
    7
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_DMG')
    AND is_ancient = 0
    AND 7 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    17,
    0,
    14
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 14 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    10,
    0,
    10
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 10 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    7,
    0,
    1
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 1 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 18611)
AND slot_number = 5;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 18611), 
    @last_rune_id, 
    5
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 18611);

-- Rune ID: 44307615739

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 6 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(44307615739, 
 9215591, 
 1, 
 14562376012, 
 6,
 5, 
 6, 
 3, 
 15, 
 12,
 431120, 
 65327, 
 (SELECT id FROM stat_types WHERE code = 'HP_PCT'), 
 47,
 (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'), 
 7, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_FLAT'),
    29,
    0,
    29
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_FLAT')
    AND is_ancient = 0
    AND 29 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_FLAT'),
    30,
    0,
    30
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_FLAT')
    AND is_ancient = 0
    AND 30 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'RES'),
    15,
    0,
    15
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'RES')
    AND is_ancient = 0
    AND 15 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    5,
    0,
    5
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 5 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 18611)
AND slot_number = 6;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 18611), 
    @last_rune_id, 
    6
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 18611);

-- Rune ID: 41416335697

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 1 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(41416335697, 
 9215591, 
 1, 
 14908798607, 
 1,
 5, 
 6, 
 16, 
 15, 
 15,
 602300, 
 132251, 
 (SELECT id FROM stat_types WHERE code = 'ATK_FLAT'), 
 160,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    24,
    0,
    17
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 17 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    8,
    1,
    4
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 4 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    5,
    0,
    5
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 5 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'),
    19,
    0,
    19
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_DMG')
    AND is_ancient = 0
    AND 19 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 23111)
AND slot_number = 1;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 23111), 
    @last_rune_id, 
    1
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 23111);

-- Rune ID: 41660841722

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 2 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(41660841722, 
 9215591, 
 1, 
 14908798607, 
 2,
 15, 
 16, 
 5, 
 15, 
 15,
 836880, 
 141844, 
 (SELECT id FROM stat_types WHERE code = 'ATK_PCT'), 
 63,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    7,
    0,
    7
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 1
    AND 7 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'),
    22,
    0,
    22
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_DMG')
    AND is_ancient = 1
    AND 22 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    16,
    0,
    16
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 1
    AND 16 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    14,
    0,
    14
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 1
    AND 14 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 23111)
AND slot_number = 2;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 23111), 
    @last_rune_id, 
    2
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 23111);

-- Rune ID: 41983627472

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 3 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(41983627472, 
 9215591, 
 1, 
 14908798607, 
 3,
 5, 
 6, 
 5, 
 15, 
 15,
 570600, 
 128530, 
 (SELECT id FROM stat_types WHERE code = 'DEF_FLAT'), 
 160,
 (SELECT id FROM stat_types WHERE code = 'SPD'), 
 6, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_FLAT'),
    305,
    0,
    -121
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_FLAT')
    AND is_ancient = 0
    AND -121 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    18,
    0,
    18
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 18 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'),
    11,
    0,
    11
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_DMG')
    AND is_ancient = 0
    AND 11 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    7,
    0,
    0
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 0 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 23111)
AND slot_number = 3;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 23111), 
    @last_rune_id, 
    3
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 23111);

-- Rune ID: 44288892777

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 4 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_DMG')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(44288892777, 
 9215591, 
 1, 
 14908798607, 
 4,
 5, 
 6, 
 5, 
 15, 
 15,
 684720, 
 134236, 
 (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'), 
 80,
 (SELECT id FROM stat_types WHERE code = 'RES'), 
 7, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    10,
    0,
    10
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 10 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    22,
    0,
    15
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 15 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    5,
    1,
    1
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 1 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_FLAT'),
    11,
    0,
    -6
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_FLAT')
    AND is_ancient = 0
    AND -6 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 23111)
AND slot_number = 4;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 23111), 
    @last_rune_id, 
    4
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 23111);

-- Rune ID: 25152513110

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 5 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(25152513110, 
 9215591, 
 1, 
 14908798607, 
 5,
 5, 
 6, 
 16, 
 15, 
 15,
 507200, 
 127159, 
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 2448,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    6,
    0,
    2
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 2 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    5,
    0,
    -2
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND -2 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    15,
    0,
    15
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 15 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    24,
    0,
    17
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 17 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 23111)
AND slot_number = 5;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 23111), 
    @last_rune_id, 
    5
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 23111);

-- Rune ID: 18469608758

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 6 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(18469608758, 
 9215591, 
 1, 
 14908798607, 
 6,
 5, 
 6, 
 5, 
 15, 
 15,
 646680, 
 132334, 
 (SELECT id FROM stat_types WHERE code = 'ATK_PCT'), 
 63,
 (SELECT id FROM stat_types WHERE code = 'DEF_PCT'), 
 5, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    16,
    0,
    16
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 16 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    5,
    0,
    1
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 1 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'),
    5,
    1,
    5
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_DMG')
    AND is_ancient = 0
    AND 5 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_FLAT'),
    15,
    0,
    -8
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_FLAT')
    AND is_ancient = 0
    AND -8 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 23111)
AND slot_number = 6;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 23111), 
    @last_rune_id, 
    6
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 23111);

-- Rune ID: 44805960902

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 1 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(44805960902, 
 9215591, 
 1, 
 14978682888, 
 1,
 5, 
 6, 
 10, 
 15, 
 12,
 722760, 
 72138, 
 (SELECT id FROM stat_types WHERE code = 'ATK_FLAT'), 
 118,
 (SELECT id FROM stat_types WHERE code = 'ACC'), 
 5, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    5,
    0,
    5
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 5 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    5,
    0,
    0
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 0 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    21,
    0,
    17
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 17 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    10,
    1,
    4
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 4 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_upgrades 
(rune_id, level_reached, stat_type_id, old_value, new_value, upgrade_date)
SELECT 
    @last_rune_id,
    3,
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    4.0,
    10.0,
    NOW();

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 15711)
AND slot_number = 1;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 15711), 
    @last_rune_id, 
    1
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 15711);

-- Rune ID: 35308785056

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 2 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(35308785056, 
 9215591, 
 1, 
 14978682888, 
 2,
 5, 
 6, 
 17, 
 15, 
 15,
 634000, 
 133949, 
 (SELECT id FROM stat_types WHERE code = 'SPD'), 
 42,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    5,
    0,
    -5
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND -5 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    12,
    1,
    6
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 6 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ACC'),
    28,
    0,
    28
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ACC')
    AND is_ancient = 0
    AND 28 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'RES'),
    14,
    0,
    14
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'RES')
    AND is_ancient = 0
    AND 14 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 15711)
AND slot_number = 2;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 15711), 
    @last_rune_id, 
    2
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 15711);

-- Rune ID: 37513131705

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 3 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(37513131705, 
 9215591, 
 1, 
 14978682888, 
 3,
 5, 
 6, 
 17, 
 15, 
 15,
 475500, 
 125461, 
 (SELECT id FROM stat_types WHERE code = 'DEF_FLAT'), 
 160,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    9,
    1,
    2
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 2 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    5,
    0,
    -2
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND -2 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ACC'),
    11,
    0,
    11
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ACC')
    AND is_ancient = 0
    AND 11 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    22,
    0,
    17
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 17 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 15711)
AND slot_number = 3;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 15711), 
    @last_rune_id, 
    3
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 15711);

-- Rune ID: 18712179111

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 4 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(18712179111, 
 9215591, 
 1, 
 14978682888, 
 4,
 5, 
 6, 
 10, 
 15, 
 15,
 627660, 
 131383, 
 (SELECT id FROM stat_types WHERE code = 'HP_PCT'), 
 63,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    12,
    0,
    6
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND 6 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    14,
    0,
    9
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 9 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    5,
    0,
    5
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 5 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ACC'),
    9,
    1,
    9
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ACC')
    AND is_ancient = 0
    AND 9 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_upgrades 
(rune_id, level_reached, stat_type_id, old_value, new_value, upgrade_date)
SELECT 
    @last_rune_id,
    3,
    (SELECT id FROM stat_types WHERE code = 'ACC'),
    9.0,
    9.0,
    NOW();

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 15711)
AND slot_number = 4;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 15711), 
    @last_rune_id, 
    4
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 15711);

-- Rune ID: 31521836518

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 5 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(31521836518, 
 9215591, 
 1, 
 14978682888, 
 5,
 5, 
 6, 
 10, 
 15, 
 12,
 608640, 
 66432, 
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 1800,
 (SELECT id FROM stat_types WHERE code = 'DEF_FLAT'), 
 13, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    5,
    0,
    -2
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND -2 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    7,
    1,
    3
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 3 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    27,
    0,
    22
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND 22 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ACC'),
    11,
    0,
    11
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ACC')
    AND is_ancient = 0
    AND 11 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 15711)
AND slot_number = 5;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 15711), 
    @last_rune_id, 
    5
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 15711);

-- Rune ID: 32074506657

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 1 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(32074506657, 
 9215591, 
 1, 
 14990455863, 
 1,
 5, 
 6, 
 10, 
 15, 
 12,
 722760, 
 72138, 
 (SELECT id FROM stat_types WHERE code = 'ATK_FLAT'), 
 118,
 (SELECT id FROM stat_types WHERE code = 'RES'), 
 8, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    16,
    0,
    13
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 13 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    15,
    0,
    8
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 8 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    5,
    1,
    1
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 1 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ACC'),
    5,
    0,
    5
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ACC')
    AND is_ancient = 0
    AND 5 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 23911)
AND slot_number = 1;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 23911), 
    @last_rune_id, 
    1
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 23911);

-- Rune ID: 20619529605

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 3 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(20619529605, 
 9215591, 
 1, 
 14990455863, 
 3,
 5, 
 6, 
 10, 
 15, 
 12,
 523050, 
 62152, 
 (SELECT id FROM stat_types WHERE code = 'DEF_FLAT'), 
 118,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    18,
    0,
    15
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 15 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    8,
    0,
    3
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 3 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'RES'),
    14,
    0,
    14
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'RES')
    AND is_ancient = 0
    AND 14 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    9,
    1,
    4
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND 4 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_upgrades 
(rune_id, level_reached, stat_type_id, old_value, new_value, upgrade_date)
SELECT 
    @last_rune_id,
    3,
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    4.0,
    9.0,
    NOW();

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 23911)
AND slot_number = 3;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 23911), 
    @last_rune_id, 
    3
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 23911);

-- Rune ID: 41262319635

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 4 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(41262319635, 
 9215591, 
 1, 
 14990455863, 
 4,
 5, 
 6, 
 6, 
 15, 
 12,
 456480, 
 67053, 
 (SELECT id FROM stat_types WHERE code = 'HP_PCT'), 
 47,
 (SELECT id FROM stat_types WHERE code = 'RES'), 
 7, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    4,
    0,
    4
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 4 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    22,
    0,
    17
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND 17 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    10,
    0,
    7
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 7 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_FLAT'),
    12,
    0,
    -9
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_FLAT')
    AND is_ancient = 0
    AND -9 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 23911)
AND slot_number = 4;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 23911), 
    @last_rune_id, 
    4
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 23911);

-- Rune ID: 42084689573

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 5 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(42084689573, 
 9215591, 
 1, 
 14990455863, 
 5,
 5, 
 6, 
 10, 
 15, 
 12,
 557920, 
 63896, 
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 1800,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    10,
    0,
    7
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 7 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    21,
    0,
    15
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 15 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    13,
    0,
    8
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 8 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    9,
    1,
    3
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND 3 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_upgrades 
(rune_id, level_reached, stat_type_id, old_value, new_value, upgrade_date)
SELECT 
    @last_rune_id,
    3,
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    3.0,
    9.0,
    NOW();

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 23911)
AND slot_number = 5;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 23911), 
    @last_rune_id, 
    5
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 23911);

-- Rune ID: 20985431498

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 6 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(20985431498, 
 9215591, 
 1, 
 14990455863, 
 6,
 5, 
 6, 
 10, 
 15, 
 15,
 592790, 
 129639, 
 (SELECT id FROM stat_types WHERE code = 'HP_PCT'), 
 63,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    18,
    0,
    13
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 13 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    5,
    0,
    5
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 5 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'),
    10,
    0,
    10
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_DMG')
    AND is_ancient = 0
    AND 10 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    8,
    1,
    1
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND 1 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_upgrades 
(rune_id, level_reached, stat_type_id, old_value, new_value, upgrade_date)
SELECT 
    @last_rune_id,
    3,
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    1.0,
    8.0,
    NOW();

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 23911)
AND slot_number = 6;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 23911), 
    @last_rune_id, 
    6
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 23911);

-- Rune ID: 40978022655

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 1 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(40978022655, 
 9215591, 
 1, 
 14990455864, 
 1,
 5, 
 6, 
 11, 
 15, 
 15,
 662530, 
 135476, 
 (SELECT id FROM stat_types WHERE code = 'ATK_FLAT'), 
 160,
 (SELECT id FROM stat_types WHERE code = 'RES'), 
 5, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    4,
    0,
    4
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 4 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    19,
    0,
    16
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 16 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    8,
    0,
    3
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 3 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ACC'),
    6,
    0,
    6
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ACC')
    AND is_ancient = 0
    AND 6 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 13511)
AND slot_number = 1;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 13511), 
    @last_rune_id, 
    1
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 13511);

-- Rune ID: 35605890301

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 2 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(35605890301, 
 9215591, 
 1, 
 14990455864, 
 2,
 5, 
 6, 
 17, 
 15, 
 15,
 697400, 
 137344, 
 (SELECT id FROM stat_types WHERE code = 'SPD'), 
 42,
 (SELECT id FROM stat_types WHERE code = 'ATK_PCT'), 
 7, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ACC'),
    7,
    0,
    7
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ACC')
    AND is_ancient = 0
    AND 7 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    21,
    0,
    21
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 21 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    5,
    0,
    -2
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND -2 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    10,
    1,
    4
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 4 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_upgrades 
(rune_id, level_reached, stat_type_id, old_value, new_value, upgrade_date)
SELECT 
    @last_rune_id,
    3,
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    4.0,
    10.0,
    NOW();

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 13511)
AND slot_number = 2;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 13511), 
    @last_rune_id, 
    2
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 13511);

-- Rune ID: 36422403415

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 4 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_DMG')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(36422403415, 
 9215591, 
 1, 
 14990455864, 
 4,
 5, 
 6, 
 17, 
 15, 
 15,
 627660, 
 133609, 
 (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'), 
 80,
 (SELECT id FROM stat_types WHERE code = 'HP_PCT'), 
 8, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    12,
    0,
    12
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 12 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    9,
    0,
    5
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 5 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    9,
    1,
    2
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND 2 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    21,
    0,
    14
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 14 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 13511)
AND slot_number = 4;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 13511), 
    @last_rune_id, 
    4
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 13511);

-- Rune ID: 27186109939

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 6 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(27186109939, 
 9215591, 
 1, 
 14990455864, 
 6,
 5, 
 6, 
 11, 
 15, 
 15,
 538900, 
 128856, 
 (SELECT id FROM stat_types WHERE code = 'ATK_PCT'), 
 63,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    12,
    0,
    12
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 12 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    10,
    0,
    6
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 6 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ACC'),
    12,
    0,
    12
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ACC')
    AND is_ancient = 0
    AND 12 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'),
    5,
    1,
    5
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_DMG')
    AND is_ancient = 0
    AND 5 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_upgrades 
(rune_id, level_reached, stat_type_id, old_value, new_value, upgrade_date)
SELECT 
    @last_rune_id,
    3,
    (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'),
    5.0,
    5.0,
    NOW();

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 13511)
AND slot_number = 6;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 13511), 
    @last_rune_id, 
    6
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 13511);

-- Rune ID: 33919305241

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 1 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(33919305241, 
 9215591, 
 1, 
 15414459747, 
 1,
 5, 
 6, 
 17, 
 15, 
 12,
 662530, 
 71476, 
 (SELECT id FROM stat_types WHERE code = 'ATK_FLAT'), 
 118,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 152, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    16,
    0,
    10
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 10 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    15,
    0,
    11
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 11 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    6,
    0,
    -1
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND -1 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    6,
    0,
    6
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 6 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 13311)
AND slot_number = 1;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 13311), 
    @last_rune_id, 
    1
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 13311);

-- Rune ID: 36271122960

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 2 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(36271122960, 
 9215591, 
 1, 
 15414459747, 
 2,
 5, 
 6, 
 11, 
 15, 
 15,
 697400, 
 137344, 
 (SELECT id FROM stat_types WHERE code = 'SPD'), 
 42,
 (SELECT id FROM stat_types WHERE code = 'ATK_FLAT'), 
 18, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    5,
    0,
    -1
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND -1 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ACC'),
    23,
    0,
    23
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ACC')
    AND is_ancient = 0
    AND 23 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    13,
    0,
    6
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND 6 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    9,
    1,
    2
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 2 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_upgrades 
(rune_id, level_reached, stat_type_id, old_value, new_value, upgrade_date)
SELECT 
    @last_rune_id,
    3,
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    2.0,
    9.0,
    NOW();

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 13311)
AND slot_number = 2;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 13311), 
    @last_rune_id, 
    2
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 13311);

-- Rune ID: 40991844293

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 3 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(40991844293, 
 9215591, 
 1, 
 15414459747, 
 3,
 5, 
 6, 
 11, 
 15, 
 15,
 475500, 
 125461, 
 (SELECT id FROM stat_types WHERE code = 'DEF_FLAT'), 
 160,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    21,
    0,
    17
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 17 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'RES'),
    16,
    0,
    16
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'RES')
    AND is_ancient = 0
    AND 16 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_FLAT'),
    270,
    0,
    -31
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_FLAT')
    AND is_ancient = 0
    AND -31 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    10,
    1,
    3
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 3 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_upgrades 
(rune_id, level_reached, stat_type_id, old_value, new_value, upgrade_date)
SELECT 
    @last_rune_id,
    3,
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    3.0,
    10.0,
    NOW();

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 13311)
AND slot_number = 3;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 13311), 
    @last_rune_id, 
    3
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 13311);

-- Rune ID: 31611555732

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 4 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_DMG')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(31611555732, 
 9215591, 
 1, 
 15414459747, 
 4,
 5, 
 6, 
 11, 
 15, 
 15,
 570600, 
 130554, 
 (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'), 
 80,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    6,
    0,
    -1
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND -1 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    20,
    0,
    14
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 14 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_FLAT'),
    33,
    0,
    12
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_FLAT')
    AND is_ancient = 0
    AND 12 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    9,
    1,
    2
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND 2 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_upgrades 
(rune_id, level_reached, stat_type_id, old_value, new_value, upgrade_date)
SELECT 
    @last_rune_id,
    3,
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    2.0,
    9.0,
    NOW();

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 13311)
AND slot_number = 4;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 13311), 
    @last_rune_id, 
    4
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 13311);

-- Rune ID: 39845110018

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 6 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(39845110018, 
 9215591, 
 1, 
 15414459747, 
 6,
 5, 
 6, 
 17, 
 15, 
 15,
 538900, 
 128856, 
 (SELECT id FROM stat_types WHERE code = 'HP_PCT'), 
 63,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    8,
    1,
    1
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 1 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_FLAT'),
    19,
    0,
    -1
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_FLAT')
    AND is_ancient = 0
    AND -1 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    19,
    0,
    15
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 15 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    5,
    0,
    -2
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND -2 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 13311)
AND slot_number = 6;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 13311), 
    @last_rune_id, 
    6
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 13311);

-- Rune ID: 22590547007

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 1 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(22590547007, 
 9215591, 
 1, 
 15423258733, 
 1,
 5, 
 6, 
 15, 
 15, 
 15,
 602300, 
 132251, 
 (SELECT id FROM stat_types WHERE code = 'ATK_FLAT'), 
 160,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    8,
    0,
    2
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 2 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    8,
    1,
    1
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 1 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'RES'),
    21,
    0,
    21
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'RES')
    AND is_ancient = 0
    AND 21 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    16,
    0,
    12
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 12 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 22611)
AND slot_number = 1;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 22611), 
    @last_rune_id, 
    1
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 22611);

-- Rune ID: 34102384091

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 2 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(34102384091, 
 9215591, 
 1, 
 15423258733, 
 2,
 5, 
 6, 
 16, 
 15, 
 15,
 697400, 
 137344, 
 (SELECT id FROM stat_types WHERE code = 'SPD'), 
 42,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 339, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'RES'),
    11,
    1,
    11
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'RES')
    AND is_ancient = 0
    AND 11 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    8,
    0,
    1
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 1 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    29,
    0,
    22
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND 22 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ACC'),
    6,
    0,
    6
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ACC')
    AND is_ancient = 0
    AND 6 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 22611)
AND slot_number = 2;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 22611), 
    @last_rune_id, 
    2
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 22611);

-- Rune ID: 22360234634

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 3 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(22360234634, 
 9215591, 
 1, 
 15423258733, 
 3,
 15, 
 16, 
 7, 
 15, 
 15,
 399420, 
 127171, 
 (SELECT id FROM stat_types WHERE code = 'DEF_FLAT'), 
 160,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'RES'),
    17,
    0,
    17
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'RES')
    AND is_ancient = 1
    AND 17 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    8,
    1,
    3
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 1
    AND 3 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    8,
    0,
    0
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 1
    AND 0 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    29,
    0,
    21
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 1
    AND 21 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 22611)
AND slot_number = 3;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 22611), 
    @last_rune_id, 
    3
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 22611);

-- Rune ID: 32821606573

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 4 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(32821606573, 
 9215591, 
 1, 
 15423258733, 
 4,
 5, 
 6, 
 7, 
 15, 
 15,
 399420, 
 127171, 
 (SELECT id FROM stat_types WHERE code = 'DEF_PCT'), 
 63,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    27,
    0,
    21
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 21 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'RES'),
    13,
    0,
    13
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'RES')
    AND is_ancient = 0
    AND 13 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    7,
    1,
    3
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 3 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    6,
    0,
    -1
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND -1 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 22611)
AND slot_number = 4;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 22611), 
    @last_rune_id, 
    4
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 22611);

-- Rune ID: 20110555440

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 5 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(20110555440, 
 9215591, 
 1, 
 15423258733, 
 5,
 5, 
 6, 
 16, 
 15, 
 15,
 557920, 
 129875, 
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 2448,
 (SELECT id FROM stat_types WHERE code = 'ACC'), 
 6, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    16,
    0,
    8
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 8 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    14,
    0,
    5
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND 5 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    9,
    1,
    0
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 0 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    13,
    0,
    8
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 8 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 22611)
AND slot_number = 5;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 22611), 
    @last_rune_id, 
    5
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 22611);

-- Rune ID: 33815172314

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 6 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(33815172314, 
 9215591, 
 1, 
 15423258733, 
 6,
 5, 
 6, 
 15, 
 15, 
 15,
 592790, 
 131742, 
 (SELECT id FROM stat_types WHERE code = 'HP_PCT'), 
 63,
 (SELECT id FROM stat_types WHERE code = 'ATK_FLAT'), 
 13, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    24,
    0,
    15
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 15 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ACC'),
    7,
    1,
    7
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ACC')
    AND is_ancient = 0
    AND 7 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    6,
    0,
    1
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND 1 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    16,
    0,
    12
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 12 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 22611)
AND slot_number = 6;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 22611), 
    @last_rune_id, 
    6
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 22611);

-- Rune ID: 40826056683

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 1 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(40826056683, 
 9215591, 
 1, 
 15507702444, 
 1,
 5, 
 6, 
 18, 
 15, 
 12,
 662530, 
 71476, 
 (SELECT id FROM stat_types WHERE code = 'ATK_FLAT'), 
 118,
 (SELECT id FROM stat_types WHERE code = 'ATK_PCT'), 
 7, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    10,
    0,
    7
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 7 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    4,
    0,
    4
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 4 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_FLAT'),
    197,
    0,
    -138
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_FLAT')
    AND is_ancient = 0
    AND -138 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    25,
    0,
    19
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 19 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 20831)
AND slot_number = 1;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 20831), 
    @last_rune_id, 
    1
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 20831);

-- Rune ID: 41635523572

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 2 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(41635523572, 
 9215591, 
 1, 
 15507702444, 
 2,
 5, 
 6, 
 18, 
 15, 
 15,
 697400, 
 137344, 
 (SELECT id FROM stat_types WHERE code = 'SPD'), 
 42,
 (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'), 
 5, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    22,
    0,
    15
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 15 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_FLAT'),
    539,
    1,
    96
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_FLAT')
    AND is_ancient = 0
    AND 96 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    13,
    0,
    6
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND 6 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_FLAT'),
    12,
    0,
    -14
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_FLAT')
    AND is_ancient = 0
    AND -14 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 20831)
AND slot_number = 2;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 20831), 
    @last_rune_id, 
    2
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 20831);

-- Rune ID: 37120840915

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 3 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(37120840915, 
 9215591, 
 1, 
 15507702444, 
 3,
 5, 
 6, 
 13, 
 15, 
 15,
 570600, 
 128530, 
 (SELECT id FROM stat_types WHERE code = 'DEF_FLAT'), 
 160,
 (SELECT id FROM stat_types WHERE code = 'ACC'), 
 5, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    13,
    0,
    7
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 7 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    18,
    0,
    15
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 15 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    10,
    1,
    5
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND 5 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_FLAT'),
    207,
    0,
    -192
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_FLAT')
    AND is_ancient = 0
    AND -192 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 20831)
AND slot_number = 3;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 20831), 
    @last_rune_id, 
    3
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 20831);

-- Rune ID: 41280083524

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 4 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(41280083524, 
 9215591, 
 1, 
 15507702444, 
 4,
 5, 
 6, 
 13, 
 15, 
 15,
 684720, 
 134236, 
 (SELECT id FROM stat_types WHERE code = 'DEF_PCT'), 
 63,
 (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'), 
 7, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_FLAT'),
    353,
    1,
    -19
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_FLAT')
    AND is_ancient = 0
    AND -19 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    5,
    0,
    -1
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND -1 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    10,
    0,
    7
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 7 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    25,
    0,
    20
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 20 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 20831)
AND slot_number = 4;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 20831), 
    @last_rune_id, 
    4
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 20831);

-- Rune ID: 24564060893

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 5 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(24564060893, 
 9215591, 
 1, 
 15507702444, 
 5,
 5, 
 6, 
 13, 
 15, 
 15,
 608640, 
 130432, 
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 2448,
 (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'), 
 4, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    14,
    0,
    7
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 7 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    15,
    0,
    12
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 12 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    8,
    0,
    2
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND 2 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    11,
    1,
    5
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 5 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_upgrades 
(rune_id, level_reached, stat_type_id, old_value, new_value, upgrade_date)
SELECT 
    @last_rune_id,
    3,
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    5.0,
    11.0,
    NOW();

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 20831)
AND slot_number = 5;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 20831), 
    @last_rune_id, 
    5
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 20831);

-- Rune ID: 37512618926

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 6 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(37512618926, 
 9215591, 
 1, 
 15507702444, 
 6,
 5, 
 6, 
 13, 
 15, 
 15,
 646680, 
 132334, 
 (SELECT id FROM stat_types WHERE code = 'DEF_PCT'), 
 63,
 (SELECT id FROM stat_types WHERE code = 'DEF_FLAT'), 
 20, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    16,
    0,
    13
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 13 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    8,
    0,
    3
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 3 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    12,
    0,
    6
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 6 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_FLAT'),
    373,
    1,
    45
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_FLAT')
    AND is_ancient = 0
    AND 45 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_upgrades 
(rune_id, level_reached, stat_type_id, old_value, new_value, upgrade_date)
SELECT 
    @last_rune_id,
    3,
    (SELECT id FROM stat_types WHERE code = 'HP_FLAT'),
    45.0,
    373.0,
    NOW();

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 20831)
AND slot_number = 6;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 20831), 
    @last_rune_id, 
    6
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 20831);

-- Rune ID: 35795806389

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 1 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(35795806389, 
 9215591, 
 1, 
 15579407207, 
 1,
 5, 
 6, 
 5, 
 15, 
 15,
 722760, 
 136138, 
 (SELECT id FROM stat_types WHERE code = 'ATK_FLAT'), 
 160,
 (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'), 
 6, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    7,
    1,
    3
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 3 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'),
    11,
    0,
    11
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_DMG')
    AND is_ancient = 0
    AND 11 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    20,
    0,
    12
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 12 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    5,
    0,
    -3
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND -3 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 25711)
AND slot_number = 1;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 25711), 
    @last_rune_id, 
    1
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 25711);

-- Rune ID: 31083882636

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 2 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(31083882636, 
 9215591, 
 1, 
 15579407207, 
 2,
 5, 
 6, 
 15, 
 15, 
 15,
 634000, 
 133949, 
 (SELECT id FROM stat_types WHERE code = 'ATK_PCT'), 
 63,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    6,
    0,
    3
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 3 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    16,
    0,
    11
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 11 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    16,
    0,
    16
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 16 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'),
    9,
    1,
    9
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_DMG')
    AND is_ancient = 0
    AND 9 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_upgrades 
(rune_id, level_reached, stat_type_id, old_value, new_value, upgrade_date)
SELECT 
    @last_rune_id,
    3,
    (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'),
    9.0,
    9.0,
    NOW();

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 25711)
AND slot_number = 2;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 25711), 
    @last_rune_id, 
    2
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 25711);

-- Rune ID: 33051810826

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 3 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(33051810826, 
 9215591, 
 1, 
 15579407207, 
 3,
 5, 
 6, 
 5, 
 15, 
 15,
 570600, 
 128530, 
 (SELECT id FROM stat_types WHERE code = 'DEF_FLAT'), 
 160,
 (SELECT id FROM stat_types WHERE code = 'DEF_PCT'), 
 8, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'),
    5,
    0,
    5
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_DMG')
    AND is_ancient = 0
    AND 5 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    16,
    0,
    16
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 16 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    10,
    0,
    5
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 5 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    8,
    1,
    1
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 1 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_upgrades 
(rune_id, level_reached, stat_type_id, old_value, new_value, upgrade_date)
SELECT 
    @last_rune_id,
    3,
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    1.0,
    8.0,
    NOW();

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 25711)
AND slot_number = 3;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 25711), 
    @last_rune_id, 
    3
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 25711);

-- Rune ID: 24426155904

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 4 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_DMG')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(24426155904, 
 9215591, 
 1, 
 15579407207, 
 4,
 15, 
 16, 
 5, 
 15, 
 15,
 753192, 
 137659, 
 (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'), 
 80,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    12,
    0,
    12
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 1
    AND 12 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    17,
    0,
    17
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 1
    AND 17 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    21,
    0,
    21
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 1
    AND 21 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    13,
    1,
    13
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 1
    AND 13 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_upgrades 
(rune_id, level_reached, stat_type_id, old_value, new_value, upgrade_date)
SELECT 
    @last_rune_id,
    3,
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    13.0,
    13.0,
    NOW();

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 25711)
AND slot_number = 4;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 25711), 
    @last_rune_id, 
    4
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 25711);

-- Rune ID: 38421002243

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 6 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(38421002243, 
 9215591, 
 1, 
 15579407207, 
 6,
 15, 
 16, 
 15, 
 15, 
 15,
 646680, 
 134628, 
 (SELECT id FROM stat_types WHERE code = 'ATK_PCT'), 
 63,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'),
    5,
    1,
    5
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_DMG')
    AND is_ancient = 1
    AND 5 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    14,
    0,
    14
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 1
    AND 14 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    13,
    0,
    5
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 1
    AND 5 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    10,
    0,
    6
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 1
    AND 6 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 25711)
AND slot_number = 6;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 25711), 
    @last_rune_id, 
    6
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 25711);

-- Rune ID: 44803932502

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 1 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(44803932502, 
 9215591, 
 1, 
 15759004502, 
 1,
 5, 
 6, 
 18, 
 15, 
 15,
 662530, 
 135476, 
 (SELECT id FROM stat_types WHERE code = 'ATK_FLAT'), 
 160,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 304, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    21,
    0,
    15
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 15 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    20,
    0,
    12
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 12 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    9,
    1,
    5
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 5 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ACC'),
    5,
    0,
    5
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ACC')
    AND is_ancient = 0
    AND 5 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 17411)
AND slot_number = 1;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 17411), 
    @last_rune_id, 
    1
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 17411);

-- Rune ID: 41671595490

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 2 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(41671595490, 
 9215591, 
 1, 
 15759004502, 
 2,
 5, 
 6, 
 13, 
 15, 
 15,
 760800, 
 138040, 
 (SELECT id FROM stat_types WHERE code = 'SPD'), 
 42,
 (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'), 
 4, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    13,
    0,
    6
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 6 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    10,
    1,
    5
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND 5 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    20,
    0,
    14
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 14 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ACC'),
    9,
    0,
    9
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ACC')
    AND is_ancient = 0
    AND 9 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 17411)
AND slot_number = 2;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 17411), 
    @last_rune_id, 
    2
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 17411);

-- Rune ID: 33803727778

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 3 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(33803727778, 
 9215591, 
 1, 
 15759004502, 
 3,
 5, 
 6, 
 18, 
 15, 
 15,
 523050, 
 128008, 
 (SELECT id FROM stat_types WHERE code = 'DEF_FLAT'), 
 160,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 240, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    14,
    0,
    10
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 10 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ACC'),
    15,
    0,
    15
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ACC')
    AND is_ancient = 0
    AND 15 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    7,
    1,
    1
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND 1 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    14,
    0,
    8
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 8 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 17411)
AND slot_number = 3;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 17411), 
    @last_rune_id, 
    3
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 17411);

-- Rune ID: 25772013299

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 4 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(25772013299, 
 9215591, 
 1, 
 15759004502, 
 4,
 5, 
 6, 
 13, 
 15, 
 15,
 627660, 
 131383, 
 (SELECT id FROM stat_types WHERE code = 'HP_PCT'), 
 63,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    8,
    0,
    1
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND 1 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    9,
    1,
    3
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 3 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    11,
    0,
    11
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 11 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    22,
    0,
    17
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 17 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 17411)
AND slot_number = 4;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 17411), 
    @last_rune_id, 
    4
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 17411);

-- Rune ID: 43508043325

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 5 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(43508043325, 
 9215591, 
 1, 
 15759004502, 
 5,
 5, 
 6, 
 13, 
 15, 
 15,
 557920, 
 127896, 
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 2448,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ACC'),
    7,
    0,
    7
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ACC')
    AND is_ancient = 0
    AND 7 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    21,
    0,
    17
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 17 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    11,
    1,
    5
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND 5 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    7,
    0,
    0
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 0 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 17411)
AND slot_number = 5;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 17411), 
    @last_rune_id, 
    5
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 17411);

-- Rune ID: 41425672663

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 6 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(41425672663, 
 9215591, 
 1, 
 15759004502, 
 6,
 5, 
 6, 
 13, 
 15, 
 15,
 646680, 
 132334, 
 (SELECT id FROM stat_types WHERE code = 'HP_PCT'), 
 63,
 (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'), 
 4, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_FLAT'),
    530,
    0,
    60
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_FLAT')
    AND is_ancient = 0
    AND 60 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    5,
    0,
    0
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 0 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    9,
    1,
    4
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND 4 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    22,
    0,
    17
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 17 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 17411)
AND slot_number = 6;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 17411), 
    @last_rune_id, 
    6
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 17411);

-- Rune ID: 41342376970

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 2 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(41342376970, 
 9215591, 
 1, 
 15799525649, 
 2,
 5, 
 6, 
 6, 
 15, 
 12,
 507200, 
 70503, 
 (SELECT id FROM stat_types WHERE code = 'SPD'), 
 31,
 (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'), 
 4, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    15,
    0,
    10
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 10 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    20,
    0,
    13
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 13 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_FLAT'),
    15,
    0,
    -7
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_FLAT')
    AND is_ancient = 0
    AND -7 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    7,
    1,
    0
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND 0 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_upgrades 
(rune_id, level_reached, stat_type_id, old_value, new_value, upgrade_date)
SELECT 
    @last_rune_id,
    3,
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    0.0,
    7.0,
    NOW();

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 25011)
AND slot_number = 2;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 25011), 
    @last_rune_id, 
    2
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 25011);

-- Rune ID: 44502296081

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 4 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(44502296081, 
 9215591, 
 1, 
 15799525649, 
 4,
 5, 
 6, 
 13, 
 15, 
 12,
 627660, 
 67383, 
 (SELECT id FROM stat_types WHERE code = 'HP_PCT'), 
 47,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    4,
    0,
    4
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 4 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    14,
    0,
    14
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 14 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    16,
    0,
    16
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 16 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'RES'),
    7,
    0,
    7
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'RES')
    AND is_ancient = 0
    AND 7 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 25011)
AND slot_number = 4;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 25011), 
    @last_rune_id, 
    4
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 25011);

-- Rune ID: 25917151968

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 5 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(25917151968, 
 9215591, 
 1, 
 15799525649, 
 5,
 5, 
 6, 
 13, 
 15, 
 12,
 608640, 
 66432, 
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 1800,
 (SELECT id FROM stat_types WHERE code = 'DEF_FLAT'), 
 15, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    18,
    0,
    11
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 11 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    11,
    0,
    11
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 11 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    11,
    1,
    6
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND 6 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    6,
    0,
    -1
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND -1 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 25011)
AND slot_number = 5;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 25011), 
    @last_rune_id, 
    5
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 25011);

-- Rune ID: 26773831466

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 1 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(26773831466, 
 9215591, 
 1, 
 15992699827, 
 1,
 5, 
 6, 
 17, 
 15, 
 15,
 662530, 
 135476, 
 (SELECT id FROM stat_types WHERE code = 'ATK_FLAT'), 
 160,
 (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'), 
 5, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    11,
    0,
    7
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 7 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    11,
    1,
    3
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 3 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    16,
    0,
    16
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 16 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    8,
    0,
    -2
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND -2 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 26911)
AND slot_number = 1;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 26911), 
    @last_rune_id, 
    1
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 26911);

-- Rune ID: 35661824119

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 2 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(35661824119, 
 9215591, 
 1, 
 15992699827, 
 2,
 5, 
 6, 
 17, 
 15, 
 15,
 697400, 
 137344, 
 (SELECT id FROM stat_types WHERE code = 'SPD'), 
 42,
 (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'), 
 5, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ACC'),
    7,
    0,
    7
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ACC')
    AND is_ancient = 0
    AND 7 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    10,
    0,
    3
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 3 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    21,
    0,
    15
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 15 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    9,
    1,
    2
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND 2 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_upgrades 
(rune_id, level_reached, stat_type_id, old_value, new_value, upgrade_date)
SELECT 
    @last_rune_id,
    3,
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    2.0,
    9.0,
    NOW();

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 26911)
AND slot_number = 2;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 26911), 
    @last_rune_id, 
    2
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 26911);

-- Rune ID: 25875687231

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 5 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(25875687231, 
 9215591, 
 1, 
 15992699827, 
 5,
 5, 
 6, 
 13, 
 15, 
 15,
 608640, 
 130432, 
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 2448,
 (SELECT id FROM stat_types WHERE code = 'HP_PCT'), 
 5, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    18,
    0,
    14
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 14 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ACC'),
    4,
    0,
    4
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ACC')
    AND is_ancient = 0
    AND 4 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    8,
    1,
    6
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 6 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    20,
    0,
    13
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND 13 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 26911)
AND slot_number = 5;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 26911), 
    @last_rune_id, 
    5
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 26911);

-- Rune ID: 41382250456

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 4 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(41382250456, 
 9215591, 
 1, 
 16049245450, 
 4,
 5, 
 6, 
 16, 
 15, 
 15,
 570600, 
 130554, 
 (SELECT id FROM stat_types WHERE code = 'HP_PCT'), 
 63,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    8,
    0,
    1
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 1 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    16,
    0,
    12
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 12 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    12,
    0,
    5
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND 5 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_FLAT'),
    10,
    0,
    10
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_FLAT')
    AND is_ancient = 0
    AND 10 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 25311)
AND slot_number = 4;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 25311), 
    @last_rune_id, 
    4
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 25311);

-- Rune ID: 42394936794

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 1 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(42394936794, 
 9215591, 
 1, 
 16145801146, 
 1,
 5, 
 6, 
 16, 
 15, 
 15,
 662530, 
 135476, 
 (SELECT id FROM stat_types WHERE code = 'ATK_FLAT'), 
 160,
 (SELECT id FROM stat_types WHERE code = 'HP_PCT'), 
 6, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    6,
    0,
    -3
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND -3 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    4,
    0,
    4
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 4 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    23,
    0,
    18
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 18 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'RES'),
    7,
    0,
    7
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'RES')
    AND is_ancient = 0
    AND 7 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 26811)
AND slot_number = 1;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 26811), 
    @last_rune_id, 
    1
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 26811);

-- Rune ID: 25961437871

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 2 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(25961437871, 
 9215591, 
 1, 
 16145801146, 
 2,
 15, 
 16, 
 3, 
 15, 
 15,
 532560, 
 136228, 
 (SELECT id FROM stat_types WHERE code = 'SPD'), 
 42,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    12,
    1,
    12
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 1
    AND 12 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ACC'),
    13,
    0,
    13
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ACC')
    AND is_ancient = 1
    AND 13 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'),
    21,
    0,
    21
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_DMG')
    AND is_ancient = 1
    AND 21 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    14,
    0,
    6
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 1
    AND 6 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 26811)
AND slot_number = 2;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 26811), 
    @last_rune_id, 
    2
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 26811);

-- Rune ID: 42844336640

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 3 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(42844336640, 
 9215591, 
 1, 
 16145801146, 
 3,
 5, 
 6, 
 3, 
 15, 
 15,
 380400, 
 125877, 
 (SELECT id FROM stat_types WHERE code = 'DEF_FLAT'), 
 160,
 (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'), 
 6, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ACC'),
    11,
    1,
    11
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ACC')
    AND is_ancient = 0
    AND 11 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    23,
    0,
    18
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 18 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    8,
    0,
    2
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 2 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_FLAT'),
    164,
    0,
    -328
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_FLAT')
    AND is_ancient = 0
    AND -328 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 26811)
AND slot_number = 3;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 26811), 
    @last_rune_id, 
    3
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 26811);

-- Rune ID: 45541322788

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 4 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(45541322788, 
 9215591, 
 1, 
 16145801146, 
 4,
 5, 
 6, 
 16, 
 15, 
 15,
 570600, 
 130554, 
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 2448,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    6,
    0,
    1
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 1 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'RES'),
    6,
    0,
    6
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'RES')
    AND is_ancient = 0
    AND 6 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'),
    7,
    0,
    7
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_DMG')
    AND is_ancient = 0
    AND 7 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    25,
    0,
    21
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 21 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 26811)
AND slot_number = 4;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 26811), 
    @last_rune_id, 
    4
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 26811);

-- Rune ID: 44343954825

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 5 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(44343954825, 
 9215591, 
 1, 
 16145801146, 
 5,
 5, 
 6, 
 3, 
 15, 
 15,
 405760, 
 127602, 
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 2448,
 (SELECT id FROM stat_types WHERE code = 'ATK_PCT'), 
 7, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    26,
    0,
    21
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 21 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    5,
    0,
    -1
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND -1 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    6,
    1,
    0
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND 0 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ACC'),
    8,
    0,
    8
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ACC')
    AND is_ancient = 0
    AND 8 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 26811)
AND slot_number = 5;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 26811), 
    @last_rune_id, 
    5
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 26811);

-- Rune ID: 42994880024

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 6 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(42994880024, 
 9215591, 
 1, 
 16145801146, 
 6,
 5, 
 6, 
 3, 
 15, 
 15,
 431120, 
 129327, 
 (SELECT id FROM stat_types WHERE code = 'DEF_PCT'), 
 63,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 169, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    23,
    0,
    19
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 19 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ACC'),
    4,
    0,
    4
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ACC')
    AND is_ancient = 0
    AND 4 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    8,
    0,
    2
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 2 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    4,
    0,
    4
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 4 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 26811)
AND slot_number = 6;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 26811), 
    @last_rune_id, 
    6
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 26811);

-- Rune ID: 32194563191

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 1 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(32194563191, 
 9215591, 
 1, 
 16695736178, 
 1,
 5, 
 6, 
 13, 
 15, 
 15,
 662530, 
 133126, 
 (SELECT id FROM stat_types WHERE code = 'ATK_FLAT'), 
 160,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    10,
    0,
    8
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 8 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    20,
    0,
    13
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 13 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ACC'),
    6,
    0,
    6
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ACC')
    AND is_ancient = 0
    AND 6 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    8,
    1,
    1
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 1 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_upgrades 
(rune_id, level_reached, stat_type_id, old_value, new_value, upgrade_date)
SELECT 
    @last_rune_id,
    3,
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    1.0,
    8.0,
    NOW();

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 16611)
AND slot_number = 1;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 16611), 
    @last_rune_id, 
    1
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 16611);

-- Rune ID: 41508561817

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 2 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(41508561817, 
 9215591, 
 1, 
 16695736178, 
 2,
 5, 
 6, 
 18, 
 15, 
 12,
 634000, 
 69949, 
 (SELECT id FROM stat_types WHERE code = 'SPD'), 
 31,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    7,
    1,
    1
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 1 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    6,
    0,
    -1
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND -1 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    28,
    0,
    23
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 23 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ACC'),
    6,
    0,
    6
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ACC')
    AND is_ancient = 0
    AND 6 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 16611)
AND slot_number = 2;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 16611), 
    @last_rune_id, 
    2
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 16611);

-- Rune ID: 24182758752

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 3 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(24182758752, 
 9215591, 
 1, 
 16695736178, 
 3,
 5, 
 6, 
 13, 
 15, 
 15,
 523050, 
 126152, 
 (SELECT id FROM stat_types WHERE code = 'DEF_FLAT'), 
 160,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    14,
    0,
    9
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 9 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'RES'),
    7,
    0,
    7
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'RES')
    AND is_ancient = 0
    AND 7 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    16,
    0,
    14
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 14 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    11,
    1,
    5
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND 5 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_upgrades 
(rune_id, level_reached, stat_type_id, old_value, new_value, upgrade_date)
SELECT 
    @last_rune_id,
    3,
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    5.0,
    11.0,
    NOW();

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 16611)
AND slot_number = 3;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 16611), 
    @last_rune_id, 
    3
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 16611);

-- Rune ID: 44555087434

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 4 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_DMG')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(44555087434, 
 9215591, 
 1, 
 16695736178, 
 4,
 5, 
 6, 
 13, 
 15, 
 15,
 627660, 
 131383, 
 (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'), 
 80,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    15,
    0,
    15
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 15 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    10,
    0,
    5
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND 5 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    8,
    1,
    1
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 1 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    11,
    0,
    11
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 11 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 16611)
AND slot_number = 4;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 16611), 
    @last_rune_id, 
    4
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 16611);

-- Rune ID: 31088126556

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 6 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(31088126556, 
 9215591, 
 1, 
 16695736178, 
 6,
 5, 
 6, 
 18, 
 15, 
 15,
 538900, 
 128856, 
 (SELECT id FROM stat_types WHERE code = 'HP_PCT'), 
 63,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    14,
    0,
    10
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND 10 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'),
    9,
    0,
    9
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_DMG')
    AND is_ancient = 0
    AND 9 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    16,
    0,
    10
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 10 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    6,
    1,
    3
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 3 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_upgrades 
(rune_id, level_reached, stat_type_id, old_value, new_value, upgrade_date)
SELECT 
    @last_rune_id,
    3,
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    3.0,
    6.0,
    NOW();

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 16611)
AND slot_number = 6;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 16611), 
    @last_rune_id, 
    6
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 16611);

-- Rune ID: 40992425893

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 1 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(40992425893, 
 9215591, 
 1, 
 16730839876, 
 1,
 5, 
 6, 
 11, 
 15, 
 12,
 602300, 
 68251, 
 (SELECT id FROM stat_types WHERE code = 'ATK_FLAT'), 
 118,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    15,
    0,
    12
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 12 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    6,
    0,
    1
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 1 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    13,
    0,
    7
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 7 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    10,
    0,
    10
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 10 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 24711)
AND slot_number = 1;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 24711), 
    @last_rune_id, 
    1
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 24711);

-- Rune ID: 36800874078

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 2 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(36800874078, 
 9215591, 
 1, 
 16730839876, 
 2,
 15, 
 16, 
 14, 
 15, 
 12,
 836880, 
 80812, 
 (SELECT id FROM stat_types WHERE code = 'HP_PCT'), 
 47,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 145, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    7,
    0,
    7
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 1
    AND 7 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    7,
    1,
    7
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 1
    AND 7 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    16,
    0,
    8
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 1
    AND 8 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    31,
    0,
    23
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 1
    AND 23 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 24711)
AND slot_number = 2;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 24711), 
    @last_rune_id, 
    2
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 24711);

-- Rune ID: 24653572234

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 3 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(24653572234, 
 9215591, 
 1, 
 16730839876, 
 3,
 15, 
 16, 
 14, 
 15, 
 15,
 570600, 
 130554, 
 (SELECT id FROM stat_types WHERE code = 'DEF_FLAT'), 
 160,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    12,
    1,
    4
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 1
    AND 4 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    12,
    0,
    7
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 1
    AND 7 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    20,
    0,
    14
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 1
    AND 14 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    13,
    0,
    13
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 1
    AND 13 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 24711)
AND slot_number = 3;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 24711), 
    @last_rune_id, 
    3
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 24711);

-- Rune ID: 40960971627

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 6 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(40960971627, 
 9215591, 
 1, 
 16730839876, 
 6,
 5, 
 6, 
 11, 
 15, 
 15,
 538900, 
 128856, 
 (SELECT id FROM stat_types WHERE code = 'HP_PCT'), 
 63,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    17,
    0,
    14
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 14 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    7,
    1,
    2
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND 2 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    13,
    0,
    4
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 4 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'RES'),
    8,
    0,
    8
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'RES')
    AND is_ancient = 0
    AND 8 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 24711)
AND slot_number = 6;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 24711), 
    @last_rune_id, 
    6
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 24711);

-- Rune ID: 43271579774

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 1 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(43271579774, 
 9215591, 
 1, 
 16832561371, 
 1,
 5, 
 6, 
 3, 
 15, 
 15,
 481840, 
 132778, 
 (SELECT id FROM stat_types WHERE code = 'ATK_FLAT'), 
 160,
 (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'), 
 7, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    13,
    0,
    7
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 7 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    6,
    0,
    6
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 6 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    6,
    0,
    -1
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND -1 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    20,
    0,
    16
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 16 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 18311)
AND slot_number = 1;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 18311), 
    @last_rune_id, 
    1
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 18311);

-- Rune ID: 22025954019

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 2 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(22025954019, 
 9215591, 
 1, 
 16832561371, 
 2,
 5, 
 6, 
 10, 
 15, 
 15,
 760800, 
 138040, 
 (SELECT id FROM stat_types WHERE code = 'SPD'), 
 42,
 (SELECT id FROM stat_types WHERE code = 'ACC'), 
 6, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    6,
    0,
    6
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 6 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    27,
    0,
    18
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 18 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    8,
    0,
    -1
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND -1 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    10,
    1,
    1
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND 1 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_upgrades 
(rune_id, level_reached, stat_type_id, old_value, new_value, upgrade_date)
SELECT 
    @last_rune_id,
    3,
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    1.0,
    10.0,
    NOW();

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 18311)
AND slot_number = 2;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 18311), 
    @last_rune_id, 
    2
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 18311);

-- Rune ID: 30801925361

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 3 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(30801925361, 
 9215591, 
 1, 
 16832561371, 
 3,
 5, 
 6, 
 3, 
 15, 
 12,
 380400, 
 61877, 
 (SELECT id FROM stat_types WHERE code = 'DEF_FLAT'), 
 118,
 (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'), 
 4, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    7,
    0,
    1
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 1 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    21,
    0,
    17
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 17 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    14,
    0,
    4
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND 4 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ACC'),
    6,
    1,
    6
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ACC')
    AND is_ancient = 0
    AND 6 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_upgrades 
(rune_id, level_reached, stat_type_id, old_value, new_value, upgrade_date)
SELECT 
    @last_rune_id,
    3,
    (SELECT id FROM stat_types WHERE code = 'ACC'),
    6.0,
    6.0,
    NOW();

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 18311)
AND slot_number = 3;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 18311), 
    @last_rune_id, 
    3
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 18311);

-- Rune ID: 28127934685

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 4 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_DMG')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(28127934685, 
 9215591, 
 1, 
 16832561371, 
 4,
 15, 
 16, 
 3, 
 15, 
 15,
 479304, 
 132605, 
 (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'), 
 80,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    29,
    0,
    20
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 1
    AND 20 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    17,
    0,
    9
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 1
    AND 9 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    6,
    0,
    6
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 1
    AND 6 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    6,
    1,
    3
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 1
    AND 3 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_upgrades 
(rune_id, level_reached, stat_type_id, old_value, new_value, upgrade_date)
SELECT 
    @last_rune_id,
    3,
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    3.0,
    6.0,
    NOW();

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 18311)
AND slot_number = 4;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 18311), 
    @last_rune_id, 
    4
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 18311);

-- Rune ID: 39477099204

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 5 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(39477099204, 
 9215591, 
 1, 
 16832561371, 
 5,
 5, 
 6, 
 3, 
 15, 
 12,
 355040, 
 60152, 
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 1800,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    12,
    1,
    5
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 5 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    6,
    0,
    6
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 6 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    20,
    0,
    16
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 16 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'),
    7,
    0,
    7
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_DMG')
    AND is_ancient = 0
    AND 7 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 18311)
AND slot_number = 5;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 18311), 
    @last_rune_id, 
    5
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 18311);

-- Rune ID: 45665431540

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 6 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(45665431540, 
 9215591, 
 1, 
 16832561371, 
 6,
 5, 
 6, 
 16, 
 15, 
 15,
 592790, 
 131742, 
 (SELECT id FROM stat_types WHERE code = 'ATK_PCT'), 
 63,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 206, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    25,
    0,
    21
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 21 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ACC'),
    5,
    0,
    5
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ACC')
    AND is_ancient = 0
    AND 5 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_FLAT'),
    12,
    0,
    -14
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_FLAT')
    AND is_ancient = 0
    AND -14 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    5,
    0,
    5
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 5 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 18311)
AND slot_number = 6;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 18311), 
    @last_rune_id, 
    6
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 18311);

-- Rune ID: 31995018994

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 1 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(31995018994, 
 9215591, 
 1, 
 16962158390, 
 1,
 5, 
 6, 
 4, 
 15, 
 15,
 451725, 
 132179, 
 (SELECT id FROM stat_types WHERE code = 'ATK_FLAT'), 
 160,
 (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'), 
 6, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'),
    5,
    0,
    5
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_DMG')
    AND is_ancient = 0
    AND 5 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    4,
    0,
    1
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 1 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    28,
    0,
    22
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 22 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    8,
    1,
    2
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 2 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_upgrades 
(rune_id, level_reached, stat_type_id, old_value, new_value, upgrade_date)
SELECT 
    @last_rune_id,
    3,
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    2.0,
    8.0,
    NOW();

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 28511)
AND slot_number = 1;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 28511), 
    @last_rune_id, 
    1
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 28511);

-- Rune ID: 37367226864

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 2 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(37367226864, 
 9215591, 
 1, 
 16962158390, 
 2,
 5, 
 6, 
 4, 
 15, 
 15,
 475500, 
 133873, 
 (SELECT id FROM stat_types WHERE code = 'ATK_PCT'), 
 63,
 (SELECT id FROM stat_types WHERE code = 'HP_PCT'), 
 6, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'),
    15,
    0,
    15
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_DMG')
    AND is_ancient = 0
    AND 15 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    9,
    1,
    2
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND 2 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    9,
    0,
    5
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 5 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    5,
    0,
    5
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 5 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 28511)
AND slot_number = 2;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 28511), 
    @last_rune_id, 
    2
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 28511);

-- Rune ID: 32975380297

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 3 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(32975380297, 
 9215591, 
 1, 
 16962158390, 
 3,
 5, 
 6, 
 11, 
 15, 
 15,
 523050, 
 128008, 
 (SELECT id FROM stat_types WHERE code = 'DEF_FLAT'), 
 160,
 (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'), 
 4, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    18,
    0,
    14
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 14 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    6,
    0,
    6
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 6 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'RES'),
    17,
    0,
    17
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'RES')
    AND is_ancient = 0
    AND 17 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    9,
    1,
    2
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 2 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_upgrades 
(rune_id, level_reached, stat_type_id, old_value, new_value, upgrade_date)
SELECT 
    @last_rune_id,
    3,
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    2.0,
    9.0,
    NOW();

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 28511)
AND slot_number = 3;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 28511), 
    @last_rune_id, 
    3
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 28511);

-- Rune ID: 40930390438

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 4 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_DMG')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(40930390438, 
 9215591, 
 1, 
 16962158390, 
 4,
 5, 
 6, 
 11, 
 15, 
 15,
 570600, 
 130554, 
 (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'), 
 80,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    9,
    0,
    6
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 6 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    7,
    1,
    7
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 7 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    20,
    0,
    13
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 13 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_FLAT'),
    13,
    0,
    -1
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_FLAT')
    AND is_ancient = 0
    AND -1 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 28511)
AND slot_number = 4;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 28511), 
    @last_rune_id, 
    4
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 28511);

-- Rune ID: 30782393508

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 2 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(30782393508, 
 9215591, 
 1, 
 16962158391, 
 2,
 15, 
 16, 
 5, 
 15, 
 15,
 836880, 
 141844, 
 (SELECT id FROM stat_types WHERE code = 'ATK_PCT'), 
 63,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    16,
    0,
    16
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 1
    AND 16 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    12,
    0,
    12
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 1
    AND 12 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    7,
    0,
    7
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 1
    AND 7 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    11,
    0,
    11
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 1
    AND 11 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 24811)
AND slot_number = 2;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 24811), 
    @last_rune_id, 
    2
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 24811);

-- Rune ID: 42206819384

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 3 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(42206819384, 
 9215591, 
 1, 
 16962158391, 
 3,
 5, 
 6, 
 4, 
 15, 
 15,
 309075, 
 122017, 
 (SELECT id FROM stat_types WHERE code = 'DEF_FLAT'), 
 160,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'),
    18,
    0,
    18
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_DMG')
    AND is_ancient = 0
    AND 18 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    13,
    0,
    8
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 8 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    10,
    0,
    10
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 10 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    7,
    1,
    3
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 3 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_upgrades 
(rune_id, level_reached, stat_type_id, old_value, new_value, upgrade_date)
SELECT 
    @last_rune_id,
    3,
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    3.0,
    7.0,
    NOW();

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 24811)
AND slot_number = 3;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 24811), 
    @last_rune_id, 
    3
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 24811);

-- Rune ID: 42206819385

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 4 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_DMG')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(42206819385, 
 9215591, 
 1, 
 16962158391, 
 4,
 5, 
 6, 
 4, 
 15, 
 15,
 370890, 
 126421, 
 (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'), 
 80,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    11,
    0,
    11
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 11 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    11,
    0,
    8
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 8 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    13,
    0,
    13
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 13 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    13,
    0,
    13
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 13 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 24811)
AND slot_number = 4;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 24811), 
    @last_rune_id, 
    4
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 24811);

-- Rune ID: 40823027062

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 5 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(40823027062, 
 9215591, 
 1, 
 16962158391, 
 5,
 5, 
 6, 
 5, 
 15, 
 15,
 608640, 
 130432, 
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 2448,
 (SELECT id FROM stat_types WHERE code = 'DEF_PCT'), 
 6, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'),
    12,
    0,
    12
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_DMG')
    AND is_ancient = 0
    AND 12 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    15,
    0,
    8
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 8 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    11,
    0,
    11
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 11 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    5,
    0,
    1
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 1 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 24811)
AND slot_number = 5;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 24811), 
    @last_rune_id, 
    5
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 24811);

-- Rune ID: 35876567427

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 6 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(35876567427, 
 9215591, 
 1, 
 16962158391, 
 6,
 5, 
 6, 
 5, 
 15, 
 15,
 592790, 
 129639, 
 (SELECT id FROM stat_types WHERE code = 'ATK_PCT'), 
 63,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    12,
    0,
    8
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 8 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    11,
    0,
    4
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 4 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'),
    10,
    0,
    10
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_DMG')
    AND is_ancient = 0
    AND 10 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    5,
    0,
    5
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 5 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 24811)
AND slot_number = 6;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 24811), 
    @last_rune_id, 
    6
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 24811);

-- Rune ID: 44809087412

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 1 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(44809087412, 
 9215591, 
 1, 
 17046138602, 
 1,
 5, 
 6, 
 13, 
 15, 
 12,
 722760, 
 72138, 
 (SELECT id FROM stat_types WHERE code = 'ATK_FLAT'), 
 118,
 (SELECT id FROM stat_types WHERE code = 'ATK_PCT'), 
 8, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'),
    4,
    0,
    4
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_DMG')
    AND is_ancient = 0
    AND 4 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    23,
    0,
    16
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 16 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    14,
    0,
    10
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 10 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ACC'),
    7,
    0,
    7
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ACC')
    AND is_ancient = 0
    AND 7 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 14411)
AND slot_number = 1;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 14411), 
    @last_rune_id, 
    1
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 14411);

-- Rune ID: 45863251933

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 2 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(45863251933, 
 9215591, 
 1, 
 17046138602, 
 2,
 5, 
 6, 
 13, 
 15, 
 15,
 760800, 
 138040, 
 (SELECT id FROM stat_types WHERE code = 'SPD'), 
 42,
 (SELECT id FROM stat_types WHERE code = 'ATK_FLAT'), 
 13, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ACC'),
    14,
    0,
    14
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ACC')
    AND is_ancient = 0
    AND 14 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    15,
    0,
    10
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 10 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    7,
    0,
    3
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND 3 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    22,
    0,
    17
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 17 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 14411)
AND slot_number = 2;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 14411), 
    @last_rune_id, 
    2
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 14411);

-- Rune ID: 29097995752

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 3 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(29097995752, 
 9215591, 
 1, 
 17046138602, 
 3,
 5, 
 6, 
 13, 
 15, 
 15,
 523050, 
 126152, 
 (SELECT id FROM stat_types WHERE code = 'DEF_FLAT'), 
 160,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    9,
    1,
    2
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 2 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    16,
    0,
    9
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND 9 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    17,
    0,
    14
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 14 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ACC'),
    7,
    0,
    7
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ACC')
    AND is_ancient = 0
    AND 7 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 14411)
AND slot_number = 3;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 14411), 
    @last_rune_id, 
    3
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 14411);

-- Rune ID: 23422664228

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 4 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(23422664228, 
 9215591, 
 1, 
 17046138602, 
 4,
 5, 
 6, 
 2, 
 15, 
 15,
 456480, 
 131053, 
 (SELECT id FROM stat_types WHERE code = 'DEF_PCT'), 
 63,
 (SELECT id FROM stat_types WHERE code = 'ATK_FLAT'), 
 18, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'RES'),
    7,
    0,
    7
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'RES')
    AND is_ancient = 0
    AND 7 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    11,
    0,
    5
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 5 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    18,
    0,
    14
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 14 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    11,
    1,
    4
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 4 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_upgrades 
(rune_id, level_reached, stat_type_id, old_value, new_value, upgrade_date)
SELECT 
    @last_rune_id,
    3,
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    4.0,
    11.0,
    NOW();

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 14411)
AND slot_number = 4;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 14411), 
    @last_rune_id, 
    4
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 14411);

-- Rune ID: 25078179683

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 5 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(25078179683, 
 9215591, 
 1, 
 17046138602, 
 5,
 5, 
 6, 
 13, 
 15, 
 15,
 608640, 
 130432, 
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 2448,
 (SELECT id FROM stat_types WHERE code = 'DEF_FLAT'), 
 13, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    15,
    0,
    12
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 12 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ACC'),
    15,
    0,
    15
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ACC')
    AND is_ancient = 0
    AND 15 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    14,
    0,
    8
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND 8 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    9,
    1,
    4
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 4 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_upgrades 
(rune_id, level_reached, stat_type_id, old_value, new_value, upgrade_date)
SELECT 
    @last_rune_id,
    3,
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    4.0,
    9.0,
    NOW();

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 14411)
AND slot_number = 5;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 14411), 
    @last_rune_id, 
    5
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 14411);

-- Rune ID: 24951186297

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 6 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(24951186297, 
 9215591, 
 1, 
 17046138602, 
 6,
 5, 
 6, 
 2, 
 15, 
 15,
 431120, 
 129327, 
 (SELECT id FROM stat_types WHERE code = 'DEF_PCT'), 
 63,
 (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'), 
 6, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    6,
    0,
    -1
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND -1 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    10,
    0,
    6
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 6 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ACC'),
    20,
    0,
    20
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ACC')
    AND is_ancient = 0
    AND 20 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    11,
    1,
    4
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 4 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_upgrades 
(rune_id, level_reached, stat_type_id, old_value, new_value, upgrade_date)
SELECT 
    @last_rune_id,
    3,
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    4.0,
    11.0,
    NOW();

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 14411)
AND slot_number = 6;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 14411), 
    @last_rune_id, 
    6
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 14411);

-- Rune ID: 40368523672

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 1 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(40368523672, 
 9215591, 
 1, 
 17425282876, 
 1,
 15, 
 16, 
 10, 
 15, 
 12,
 795036, 
 75751, 
 (SELECT id FROM stat_types WHERE code = 'ATK_FLAT'), 
 118,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    13,
    0,
    10
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 1
    AND 10 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    6,
    0,
    0
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 1
    AND 0 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    16,
    0,
    16
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 1
    AND 16 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    11,
    1,
    2
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 1
    AND 2 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_upgrades 
(rune_id, level_reached, stat_type_id, old_value, new_value, upgrade_date)
SELECT 
    @last_rune_id,
    3,
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    2.0,
    11.0,
    NOW();

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 22901)
AND slot_number = 1;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 22901), 
    @last_rune_id, 
    1
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 22901);

-- Rune ID: 44170749028

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 2 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(44170749028, 
 9215591, 
 1, 
 17425282876, 
 2,
 15, 
 16, 
 10, 
 15, 
 15,
 912960, 
 145648, 
 (SELECT id FROM stat_types WHERE code = 'ATK_PCT'), 
 63,
 (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'), 
 4, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    6,
    0,
    4
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 1
    AND 4 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_FLAT'),
    22,
    0,
    22
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_FLAT')
    AND is_ancient = 1
    AND 22 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ACC'),
    30,
    0,
    30
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ACC')
    AND is_ancient = 1
    AND 30 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'),
    4,
    0,
    4
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_DMG')
    AND is_ancient = 1
    AND 4 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 22901)
AND slot_number = 2;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 22901), 
    @last_rune_id, 
    2
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 22901);

-- Rune ID: 44733901780

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 3 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(44733901780, 
 9215591, 
 1, 
 17425282876, 
 3,
 5, 
 6, 
 6, 
 15, 
 12,
 380400, 
 61877, 
 (SELECT id FROM stat_types WHERE code = 'DEF_FLAT'), 
 118,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 238, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ACC'),
    6,
    0,
    6
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ACC')
    AND is_ancient = 0
    AND 6 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'),
    6,
    0,
    6
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_DMG')
    AND is_ancient = 0
    AND 6 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    11,
    0,
    7
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 7 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    28,
    0,
    21
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 21 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 22901)
AND slot_number = 3;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 22901), 
    @last_rune_id, 
    3
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 22901);

-- Rune ID: 37972774480

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 4 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_DMG')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(37972774480, 
 9215591, 
 1, 
 17425282876, 
 4,
 5, 
 6, 
 6, 
 15, 
 12,
 456480, 
 67053, 
 (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'), 
 59,
 (SELECT id FROM stat_types WHERE code = 'ATK_PCT'), 
 5, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    14,
    0,
    7
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND 7 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    16,
    0,
    12
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 12 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    4,
    1,
    4
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 4 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    7,
    0,
    1
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 1 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 22901)
AND slot_number = 4;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 22901), 
    @last_rune_id, 
    4
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 22901);

-- Rune ID: 42681446885

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 6 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(42681446885, 
 9215591, 
 1, 
 17425282876, 
 6,
 5, 
 6, 
 10, 
 15, 
 12,
 592790, 
 65639, 
 (SELECT id FROM stat_types WHERE code = 'ATK_PCT'), 
 47,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    4,
    0,
    4
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 4 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    16,
    0,
    16
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 16 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'),
    7,
    0,
    7
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_DMG')
    AND is_ancient = 0
    AND 7 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'RES'),
    19,
    0,
    19
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'RES')
    AND is_ancient = 0
    AND 19 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 22901)
AND slot_number = 6;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 22901), 
    @last_rune_id, 
    6
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 22901);

-- Rune ID: 26269067416

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 1 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(26269067416, 
 9215591, 
 1, 
 17608525324, 
 1,
 5, 
 6, 
 2, 
 15, 
 15,
 481840, 
 132778, 
 (SELECT id FROM stat_types WHERE code = 'ATK_FLAT'), 
 160,
 (SELECT id FROM stat_types WHERE code = 'RES'), 
 6, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ACC'),
    23,
    0,
    23
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ACC')
    AND is_ancient = 0
    AND 23 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    21,
    0,
    14
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 14 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    10,
    1,
    3
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 3 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    6,
    0,
    6
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 6 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 16111)
AND slot_number = 1;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 16111), 
    @last_rune_id, 
    1
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 16111);

-- Rune ID: 39846915119

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 2 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(39846915119, 
 9215591, 
 1, 
 17608525324, 
 2,
 5, 
 6, 
 13, 
 15, 
 15,
 760800, 
 138040, 
 (SELECT id FROM stat_types WHERE code = 'ATK_PCT'), 
 63,
 (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'), 
 4, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    21,
    0,
    15
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 15 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    11,
    0,
    8
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 8 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_FLAT'),
    348,
    1,
    109
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_FLAT')
    AND is_ancient = 0
    AND 109 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_FLAT'),
    14,
    0,
    -9
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_FLAT')
    AND is_ancient = 0
    AND -9 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 16111)
AND slot_number = 2;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 16111), 
    @last_rune_id, 
    2
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 16111);

-- Rune ID: 34521306539

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 3 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(34521306539, 
 9215591, 
 1, 
 17608525324, 
 3,
 5, 
 6, 
 13, 
 15, 
 15,
 523050, 
 126152, 
 (SELECT id FROM stat_types WHERE code = 'DEF_FLAT'), 
 160,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    19,
    0,
    13
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND 13 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    6,
    0,
    2
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 2 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    22,
    0,
    18
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 18 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ACC'),
    7,
    1,
    7
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ACC')
    AND is_ancient = 0
    AND 7 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_upgrades 
(rune_id, level_reached, stat_type_id, old_value, new_value, upgrade_date)
SELECT 
    @last_rune_id,
    3,
    (SELECT id FROM stat_types WHERE code = 'ACC'),
    7.0,
    7.0,
    NOW();

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 16111)
AND slot_number = 3;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 16111), 
    @last_rune_id, 
    3
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 16111);

-- Rune ID: 33288943623

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 4 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(33288943623, 
 9215591, 
 1, 
 17608525324, 
 4,
 5, 
 6, 
 15, 
 15, 
 15,
 627660, 
 133609, 
 (SELECT id FROM stat_types WHERE code = 'HP_PCT'), 
 63,
 (SELECT id FROM stat_types WHERE code = 'DEF_FLAT'), 
 13, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    5,
    0,
    5
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 5 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ACC'),
    27,
    0,
    27
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ACC')
    AND is_ancient = 0
    AND 27 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    8,
    0,
    2
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 2 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    10,
    1,
    5
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND 5 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_upgrades 
(rune_id, level_reached, stat_type_id, old_value, new_value, upgrade_date)
SELECT 
    @last_rune_id,
    3,
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    5.0,
    10.0,
    NOW();

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 16111)
AND slot_number = 4;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 16111), 
    @last_rune_id, 
    4
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 16111);

-- Rune ID: 24087148563

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 5 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(24087148563, 
 9215591, 
 1, 
 17608525324, 
 5,
 5, 
 6, 
 13, 
 15, 
 12,
 608640, 
 66432, 
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 1800,
 (SELECT id FROM stat_types WHERE code = 'DEF_PCT'), 
 6, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ACC'),
    8,
    0,
    8
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ACC')
    AND is_ancient = 0
    AND 8 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    5,
    0,
    3
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 3 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    27,
    0,
    21
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 21 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'RES'),
    8,
    0,
    8
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'RES')
    AND is_ancient = 0
    AND 8 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 16111)
AND slot_number = 5;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 16111), 
    @last_rune_id, 
    5
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 16111);

-- Rune ID: 41423374792

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 6 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(41423374792, 
 9215591, 
 1, 
 17608525324, 
 6,
 5, 
 6, 
 13, 
 15, 
 15,
 646680, 
 132334, 
 (SELECT id FROM stat_types WHERE code = 'DEF_PCT'), 
 63,
 (SELECT id FROM stat_types WHERE code = 'DEF_FLAT'), 
 12, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    11,
    0,
    5
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 5 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    4,
    0,
    0
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 0 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    22,
    0,
    17
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 17 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'RES'),
    5,
    0,
    5
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'RES')
    AND is_ancient = 0
    AND 5 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 16111)
AND slot_number = 6;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 16111), 
    @last_rune_id, 
    6
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 16111);

-- Rune ID: 18493516390

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 1 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(18493516390, 
 9215591, 
 1, 
 17884183998, 
 1,
 5, 
 6, 
 3, 
 15, 
 12,
 481840, 
 68778, 
 (SELECT id FROM stat_types WHERE code = 'ATK_FLAT'), 
 118,
 (SELECT id FROM stat_types WHERE code = 'ACC'), 
 8, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'),
    13,
    0,
    13
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_DMG')
    AND is_ancient = 0
    AND 13 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    10,
    0,
    10
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 10 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    6,
    0,
    2
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 2 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    15,
    0,
    11
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 11 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 19411)
AND slot_number = 1;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 19411), 
    @last_rune_id, 
    1
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 19411);

-- Rune ID: 44556016422

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 2 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(44556016422, 
 9215591, 
 1, 
 17884183998, 
 2,
 5, 
 6, 
 6, 
 15, 
 12,
 507200, 
 70503, 
 (SELECT id FROM stat_types WHERE code = 'SPD'), 
 31,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 140, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'),
    7,
    0,
    7
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_DMG')
    AND is_ancient = 0
    AND 7 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ACC'),
    13,
    0,
    13
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ACC')
    AND is_ancient = 0
    AND 13 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    18,
    0,
    18
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 18 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    12,
    0,
    12
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND 12 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 19411)
AND slot_number = 2;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 19411), 
    @last_rune_id, 
    2
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 19411);

-- Rune ID: 44179743678

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 4 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(44179743678, 
 9215591, 
 1, 
 17884183998, 
 4,
 5, 
 6, 
 3, 
 15, 
 12,
 456480, 
 67053, 
 (SELECT id FROM stat_types WHERE code = 'ATK_PCT'), 
 47,
 (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'), 
 6, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ACC'),
    4,
    0,
    4
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ACC')
    AND is_ancient = 0
    AND 4 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_FLAT'),
    38,
    0,
    38
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_FLAT')
    AND is_ancient = 0
    AND 38 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'),
    6,
    0,
    6
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_DMG')
    AND is_ancient = 0
    AND 6 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    24,
    0,
    24
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 24 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 19411)
AND slot_number = 4;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 19411), 
    @last_rune_id, 
    4
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 19411);

-- Rune ID: 41317676576

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 5 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(41317676576, 
 9215591, 
 1, 
 17884183998, 
 5,
 5, 
 6, 
 6, 
 15, 
 12,
 405760, 
 63602, 
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 1800,
 (SELECT id FROM stat_types WHERE code = 'DEF_PCT'), 
 6, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    6,
    0,
    -1
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND -1 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    22,
    0,
    18
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 18 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_FLAT'),
    18,
    0,
    -4
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_FLAT')
    AND is_ancient = 0
    AND -4 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    6,
    0,
    6
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 6 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 19411)
AND slot_number = 5;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 19411), 
    @last_rune_id, 
    5
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 19411);

-- Rune ID: 30804970814

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 2 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(30804970814, 
 9215591, 
 1, 
 17895834564, 
 2,
 5, 
 6, 
 10, 
 15, 
 15,
 697400, 
 134870, 
 (SELECT id FROM stat_types WHERE code = 'SPD'), 
 42,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    10,
    0,
    10
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 10 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    21,
    0,
    14
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND 14 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    13,
    1,
    5
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 5 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_FLAT'),
    211,
    0,
    -321
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_FLAT')
    AND is_ancient = 0
    AND -321 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 28311)
AND slot_number = 2;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 28311), 
    @last_rune_id, 
    2
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 28311);

-- Rune ID: 24034988721

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 3 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(24034988721, 
 9215591, 
 1, 
 17895834564, 
 3,
 5, 
 6, 
 10, 
 15, 
 15,
 523050, 
 126152, 
 (SELECT id FROM stat_types WHERE code = 'DEF_FLAT'), 
 160,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    11,
    1,
    4
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 4 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    27,
    0,
    20
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND 20 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    11,
    0,
    11
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 11 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    5,
    0,
    1
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 1 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 28311)
AND slot_number = 3;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 28311), 
    @last_rune_id, 
    3
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 28311);

-- Rune ID: 31540849095

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 4 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_DMG')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(31540849095, 
 9215591, 
 1, 
 17895834564, 
 4,
 5, 
 6, 
 10, 
 15, 
 15,
 627660, 
 131383, 
 (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'), 
 80,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    19,
    0,
    13
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 13 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    10,
    0,
    7
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 7 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    11,
    0,
    5
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND 5 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    8,
    1,
    8
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 8 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_upgrades 
(rune_id, level_reached, stat_type_id, old_value, new_value, upgrade_date)
SELECT 
    @last_rune_id,
    3,
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    8.0,
    8.0,
    NOW();

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 28311)
AND slot_number = 4;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 28311), 
    @last_rune_id, 
    4
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 28311);

-- Rune ID: 31930851426

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 1 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(31930851426, 
 9215591, 
 1, 
 18055516270, 
 1,
 5, 
 6, 
 13, 
 15, 
 15,
 662530, 
 133126, 
 (SELECT id FROM stat_types WHERE code = 'ATK_FLAT'), 
 160,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    9,
    1,
    2
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 2 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'RES'),
    23,
    0,
    23
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'RES')
    AND is_ancient = 0
    AND 23 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    15,
    0,
    12
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 12 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    5,
    0,
    -1
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND -1 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 25611)
AND slot_number = 1;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 25611), 
    @last_rune_id, 
    1
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 25611);

-- Rune ID: 23190987217

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 2 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(23190987217, 
 9215591, 
 1, 
 18055516270, 
 2,
 5, 
 6, 
 15, 
 15, 
 15,
 697400, 
 137344, 
 (SELECT id FROM stat_types WHERE code = 'SPD'), 
 42,
 (SELECT id FROM stat_types WHERE code = 'ACC'), 
 7, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_FLAT'),
    14,
    0,
    -15
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_FLAT')
    AND is_ancient = 0
    AND -15 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'RES'),
    11,
    0,
    11
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'RES')
    AND is_ancient = 0
    AND 11 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    22,
    0,
    15
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND 15 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    10,
    1,
    5
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 5 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_upgrades 
(rune_id, level_reached, stat_type_id, old_value, new_value, upgrade_date)
SELECT 
    @last_rune_id,
    3,
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    5.0,
    10.0,
    NOW();

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 25611)
AND slot_number = 2;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 25611), 
    @last_rune_id, 
    2
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 25611);

-- Rune ID: 26200946727

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 3 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(26200946727, 
 9215591, 
 1, 
 18055516270, 
 3,
 5, 
 6, 
 13, 
 15, 
 15,
 570600, 
 128530, 
 (SELECT id FROM stat_types WHERE code = 'DEF_FLAT'), 
 160,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 267, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    8,
    0,
    2
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 2 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    10,
    0,
    6
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 6 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    29,
    0,
    22
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND 22 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ACC'),
    9,
    1,
    9
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ACC')
    AND is_ancient = 0
    AND 9 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_upgrades 
(rune_id, level_reached, stat_type_id, old_value, new_value, upgrade_date)
SELECT 
    @last_rune_id,
    3,
    (SELECT id FROM stat_types WHERE code = 'ACC'),
    9.0,
    9.0,
    NOW();

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 25611)
AND slot_number = 3;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 25611), 
    @last_rune_id, 
    3
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 25611);

-- Rune ID: 21132032239

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 4 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(21132032239, 
 9215591, 
 1, 
 18055516270, 
 4,
 5, 
 6, 
 13, 
 15, 
 15,
 684720, 
 134236, 
 (SELECT id FROM stat_types WHERE code = 'HP_PCT'), 
 63,
 (SELECT id FROM stat_types WHERE code = 'ACC'), 
 7, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    11,
    0,
    8
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 8 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'RES'),
    12,
    0,
    12
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'RES')
    AND is_ancient = 0
    AND 12 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    9,
    1,
    5
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 5 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    7,
    0,
    1
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND 1 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 25611)
AND slot_number = 4;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 25611), 
    @last_rune_id, 
    4
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 25611);

-- Rune ID: 39858260532

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 5 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(39858260532, 
 9215591, 
 1, 
 18055516270, 
 5,
 5, 
 6, 
 13, 
 15, 
 15,
 557920, 
 127896, 
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 2448,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    10,
    1,
    3
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND 3 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    21,
    0,
    17
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 17 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    7,
    0,
    1
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 1 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    7,
    0,
    0
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 0 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 25611)
AND slot_number = 5;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 25611), 
    @last_rune_id, 
    5
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 25611);

-- Rune ID: 27161687589

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 6 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(27161687589, 
 9215591, 
 1, 
 18055516270, 
 6,
 5, 
 6, 
 15, 
 15, 
 15,
 538900, 
 128856, 
 (SELECT id FROM stat_types WHERE code = 'HP_PCT'), 
 63,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'RES'),
    18,
    0,
    18
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'RES')
    AND is_ancient = 0
    AND 18 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    9,
    1,
    3
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND 3 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    12,
    0,
    8
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 8 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_FLAT'),
    185,
    0,
    -225
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_FLAT')
    AND is_ancient = 0
    AND -225 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 25611)
AND slot_number = 6;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 25611), 
    @last_rune_id, 
    6
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 25611);

-- Rune ID: 43209796269

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 1 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(43209796269, 
 9215591, 
 1, 
 18149531767, 
 1,
 5, 
 6, 
 1, 
 15, 
 12,
 361380, 
 63019, 
 (SELECT id FROM stat_types WHERE code = 'ATK_FLAT'), 
 118,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    5,
    0,
    5
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 5 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    7,
    0,
    2
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 2 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    19,
    0,
    15
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 15 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    16,
    0,
    10
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 10 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 15311)
AND slot_number = 1;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 15311), 
    @last_rune_id, 
    1
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 15311);

-- Rune ID: 36853431138

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 2 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(36853431138, 
 9215591, 
 1, 
 18149531767, 
 2,
 5, 
 6, 
 1, 
 15, 
 15,
 380400, 
 128441, 
 (SELECT id FROM stat_types WHERE code = 'HP_PCT'), 
 63,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    8,
    1,
    1
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND 1 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ACC'),
    12,
    0,
    12
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ACC')
    AND is_ancient = 0
    AND 12 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'RES'),
    26,
    0,
    26
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'RES')
    AND is_ancient = 0
    AND 26 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    4,
    0,
    0
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 0 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 15311)
AND slot_number = 2;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 15311), 
    @last_rune_id, 
    2
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 15311);

-- Rune ID: 45433699553

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 4 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(45433699553, 
 9215591, 
 1, 
 18149531767, 
 4,
 5, 
 6, 
 7, 
 15, 
 12,
 399420, 
 63171, 
 (SELECT id FROM stat_types WHERE code = 'HP_PCT'), 
 47,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    20,
    0,
    20
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 20 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    6,
    0,
    6
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 6 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    8,
    0,
    8
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 8 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_FLAT'),
    272,
    0,
    272
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_FLAT')
    AND is_ancient = 0
    AND 272 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 15311)
AND slot_number = 4;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 15311), 
    @last_rune_id, 
    4
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 15311);

-- Rune ID: 23276391095

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 5 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(23276391095, 
 9215591, 
 1, 
 18149531767, 
 5,
 5, 
 6, 
 18, 
 15, 
 15,
 557920, 
 129875, 
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 2448,
 (SELECT id FROM stat_types WHERE code = 'ATK_FLAT'), 
 13, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    28,
    0,
    20
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 20 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    5,
    0,
    1
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 1 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    11,
    1,
    5
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 5 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    7,
    0,
    0
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND 0 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 15311)
AND slot_number = 5;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 15311), 
    @last_rune_id, 
    5
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 15311);

-- Rune ID: 38142372644

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 6 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'RES')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(38142372644, 
 9215591, 
 1, 
 18149531767, 
 6,
 5, 
 6, 
 7, 
 15, 
 15,
 377230, 
 125661, 
 (SELECT id FROM stat_types WHERE code = 'RES'), 
 64,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    14,
    0,
    8
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND 8 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    7,
    0,
    0
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 0 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    14,
    0,
    10
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 10 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    8,
    1,
    2
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 2 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_upgrades 
(rune_id, level_reached, stat_type_id, old_value, new_value, upgrade_date)
SELECT 
    @last_rune_id,
    3,
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    2.0,
    8.0,
    NOW();

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 15311)
AND slot_number = 6;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 15311), 
    @last_rune_id, 
    6
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 15311);

-- Rune ID: 40348268290

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 1 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(40348268290, 
 9215591, 
 1, 
 18150664934, 
 1,
 5, 
 6, 
 13, 
 15, 
 12,
 722760, 
 72138, 
 (SELECT id FROM stat_types WHERE code = 'ATK_FLAT'), 
 118,
 (SELECT id FROM stat_types WHERE code = 'ACC'), 
 6, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    13,
    0,
    7
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 7 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    5,
    0,
    5
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 5 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    16,
    0,
    13
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 13 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    9,
    1,
    4
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 4 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_upgrades 
(rune_id, level_reached, stat_type_id, old_value, new_value, upgrade_date)
SELECT 
    @last_rune_id,
    3,
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    4.0,
    9.0,
    NOW();

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 28911)
AND slot_number = 1;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 28911), 
    @last_rune_id, 
    1
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 28911);

-- Rune ID: 31078312578

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 2 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(31078312578, 
 9215591, 
 1, 
 18150664934, 
 2,
 5, 
 6, 
 14, 
 15, 
 15,
 634000, 
 133949, 
 (SELECT id FROM stat_types WHERE code = 'SPD'), 
 42,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    10,
    0,
    10
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 10 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    8,
    1,
    -1
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND -1 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    21,
    0,
    12
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 12 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    6,
    0,
    -1
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND -1 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 28911)
AND slot_number = 2;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 28911), 
    @last_rune_id, 
    2
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 28911);

-- Rune ID: 40287093900

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 3 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(40287093900, 
 9215591, 
 1, 
 18150664934, 
 3,
 5, 
 6, 
 13, 
 15, 
 12,
 570600, 
 64530, 
 (SELECT id FROM stat_types WHERE code = 'DEF_FLAT'), 
 118,
 (SELECT id FROM stat_types WHERE code = 'RES'), 
 4, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    12,
    0,
    7
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 7 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    17,
    0,
    14
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 14 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ACC'),
    8,
    0,
    8
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ACC')
    AND is_ancient = 0
    AND 8 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    10,
    1,
    4
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND 4 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_upgrades 
(rune_id, level_reached, stat_type_id, old_value, new_value, upgrade_date)
SELECT 
    @last_rune_id,
    3,
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    4.0,
    10.0,
    NOW();

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 28911)
AND slot_number = 3;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 28911), 
    @last_rune_id, 
    3
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 28911);

-- Rune ID: 41993216988

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 4 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(41993216988, 
 9215591, 
 1, 
 18150664934, 
 4,
 5, 
 6, 
 13, 
 15, 
 15,
 684720, 
 134236, 
 (SELECT id FROM stat_types WHERE code = 'HP_PCT'), 
 63,
 (SELECT id FROM stat_types WHERE code = 'RES'), 
 8, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    6,
    0,
    2
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 2 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    15,
    0,
    9
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 9 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'),
    12,
    0,
    12
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_DMG')
    AND is_ancient = 0
    AND 12 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    14,
    0,
    14
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 14 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 28911)
AND slot_number = 4;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 28911), 
    @last_rune_id, 
    4
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 28911);

-- Rune ID: 23226408854

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 6 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(23226408854, 
 9215591, 
 1, 
 18150664934, 
 6,
 5, 
 6, 
 14, 
 15, 
 15,
 592790, 
 131742, 
 (SELECT id FROM stat_types WHERE code = 'HP_PCT'), 
 63,
 (SELECT id FROM stat_types WHERE code = 'DEF_FLAT'), 
 14, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    9,
    0,
    5
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 5 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    10,
    0,
    10
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 10 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    15,
    0,
    8
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 8 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    9,
    1,
    2
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND 2 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_upgrades 
(rune_id, level_reached, stat_type_id, old_value, new_value, upgrade_date)
SELECT 
    @last_rune_id,
    3,
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    2.0,
    9.0,
    NOW();

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 28911)
AND slot_number = 6;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 28911), 
    @last_rune_id, 
    6
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 28911);

-- Rune ID: 43494707228

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 1 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(43494707228, 
 9215591, 
 1, 
 18150708471, 
 1,
 5, 
 6, 
 16, 
 15, 
 12,
 602300, 
 68251, 
 (SELECT id FROM stat_types WHERE code = 'ATK_FLAT'), 
 118,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    6,
    0,
    2
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 2 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    21,
    0,
    14
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 14 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    4,
    0,
    4
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 4 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    21,
    0,
    14
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 14 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 19011)
AND slot_number = 1;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 19011), 
    @last_rune_id, 
    1
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 19011);

-- Rune ID: 43920523589

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 2 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(43920523589, 
 9215591, 
 1, 
 18150708471, 
 2,
 5, 
 2, 
 15, 
 15, 
 15,
 32000, 
 16628, 
 (SELECT id FROM stat_types WHERE code = 'HP_PCT'), 
 19,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'),
    2,
    0,
    2
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_DMG')
    AND is_ancient = 0
    AND 2 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ACC'),
    3,
    0,
    3
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ACC')
    AND is_ancient = 0
    AND 3 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    1,
    0,
    1
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 1 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'RES'),
    2,
    0,
    2
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'RES')
    AND is_ancient = 0
    AND 2 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 19011)
AND slot_number = 2;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 19011), 
    @last_rune_id, 
    2
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 19011);

-- Rune ID: 26792038286

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 3 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(26792038286, 
 9215591, 
 1, 
 18150708471, 
 3,
 5, 
 6, 
 16, 
 15, 
 15,
 523050, 
 128008, 
 (SELECT id FROM stat_types WHERE code = 'DEF_FLAT'), 
 160,
 (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'), 
 4, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'RES'),
    6,
    0,
    6
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'RES')
    AND is_ancient = 0
    AND 6 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    14,
    0,
    10
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 10 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    10,
    1,
    3
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND 3 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    20,
    0,
    13
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 13 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 19011)
AND slot_number = 3;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 19011), 
    @last_rune_id, 
    3
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 19011);

-- Rune ID: 44832052416

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 4 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(44832052416, 
 9215591, 
 1, 
 18150708471, 
 4,
 5, 
 6, 
 7, 
 15, 
 12,
 456480, 
 67053, 
 (SELECT id FROM stat_types WHERE code = 'HP_PCT'), 
 47,
 (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'), 
 5, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    11,
    0,
    5
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND 5 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_FLAT'),
    15,
    0,
    15
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_FLAT')
    AND is_ancient = 0
    AND 15 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ACC'),
    11,
    0,
    11
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ACC')
    AND is_ancient = 0
    AND 11 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    15,
    0,
    11
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 11 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 19011)
AND slot_number = 4;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 19011), 
    @last_rune_id, 
    4
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 19011);

-- Rune ID: 41496517224

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 5 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(41496517224, 
 9215591, 
 1, 
 18150708471, 
 5,
 5, 
 6, 
 7, 
 15, 
 15,
 355040, 
 124152, 
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 2448,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    24,
    0,
    17
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 17 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    14,
    0,
    7
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 7 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'RES'),
    11,
    0,
    11
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'RES')
    AND is_ancient = 0
    AND 11 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    9,
    1,
    2
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND 2 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_upgrades 
(rune_id, level_reached, stat_type_id, old_value, new_value, upgrade_date)
SELECT 
    @last_rune_id,
    3,
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    2.0,
    9.0,
    NOW();

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 19011)
AND slot_number = 5;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 19011), 
    @last_rune_id, 
    5
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 19011);

-- Rune ID: 30881221958

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 1 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(30881221958, 
 9215591, 
 1, 
 18305986666, 
 1,
 5, 
 6, 
 8, 
 15, 
 15,
 391495, 
 127889, 
 (SELECT id FROM stat_types WHERE code = 'ATK_FLAT'), 
 160,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    12,
    1,
    6
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 6 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    8,
    0,
    -1
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND -1 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    22,
    0,
    17
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 17 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    4,
    0,
    4
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 4 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 29211)
AND slot_number = 1;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 29211), 
    @last_rune_id, 
    1
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 29211);

-- Rune ID: 42206819383

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 2 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(42206819383, 
 9215591, 
 1, 
 18305986666, 
 2,
 5, 
 6, 
 8, 
 15, 
 15,
 412100, 
 129357, 
 (SELECT id FROM stat_types WHERE code = 'SPD'), 
 42,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    13,
    0,
    7
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 7 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    14,
    0,
    14
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 14 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    14,
    0,
    9
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND 9 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    11,
    0,
    11
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 11 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 29211)
AND slot_number = 2;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 29211), 
    @last_rune_id, 
    2
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 29211);

-- Rune ID: 38078824297

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 3 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(38078824297, 
 9215591, 
 1, 
 18305986666, 
 3,
 5, 
 6, 
 4, 
 15, 
 15,
 356625, 
 125405, 
 (SELECT id FROM stat_types WHERE code = 'DEF_FLAT'), 
 160,
 (SELECT id FROM stat_types WHERE code = 'RES'), 
 5, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    17,
    0,
    17
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 17 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    10,
    1,
    3
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 3 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'),
    12,
    0,
    12
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_DMG')
    AND is_ancient = 0
    AND 12 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    6,
    0,
    2
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 2 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 29211)
AND slot_number = 3;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 29211), 
    @last_rune_id, 
    3
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 29211);

-- Rune ID: 29370809565

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 4 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_DMG')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(29370809565, 
 9215591, 
 1, 
 18305986666, 
 4,
 5, 
 6, 
 4, 
 15, 
 15,
 370890, 
 126421, 
 (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'), 
 80,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    11,
    0,
    7
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 7 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_FLAT'),
    17,
    0,
    -11
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_FLAT')
    AND is_ancient = 0
    AND -11 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    16,
    0,
    16
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 16 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    11,
    1,
    3
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 3 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_upgrades 
(rune_id, level_reached, stat_type_id, old_value, new_value, upgrade_date)
SELECT 
    @last_rune_id,
    3,
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    3.0,
    11.0,
    NOW();

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 29211)
AND slot_number = 4;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 29211), 
    @last_rune_id, 
    4
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 29211);

-- Rune ID: 36422682004

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 5 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(36422682004, 
 9215591, 
 1, 
 18305986666, 
 5,
 5, 
 6, 
 8, 
 15, 
 12,
 380400, 
 63098, 
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 1800,
 (SELECT id FROM stat_types WHERE code = 'RES'), 
 6, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    23,
    0,
    17
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 17 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    13,
    0,
    7
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 7 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_FLAT'),
    17,
    0,
    -1
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_FLAT')
    AND is_ancient = 0
    AND -1 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    8,
    1,
    4
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 4 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_upgrades 
(rune_id, level_reached, stat_type_id, old_value, new_value, upgrade_date)
SELECT 
    @last_rune_id,
    3,
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    4.0,
    8.0,
    NOW();

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 29211)
AND slot_number = 5;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 29211), 
    @last_rune_id, 
    5
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 29211);

-- Rune ID: 42206819387

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 6 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(42206819387, 
 9215591, 
 1, 
 18305986666, 
 6,
 5, 
 6, 
 8, 
 15, 
 15,
 350285, 
 124953, 
 (SELECT id FROM stat_types WHERE code = 'ATK_PCT'), 
 63,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    17,
    0,
    14
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 14 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    11,
    0,
    11
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 11 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    15,
    0,
    9
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND 9 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_FLAT'),
    25,
    1,
    13
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_FLAT')
    AND is_ancient = 0
    AND 13 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_upgrades 
(rune_id, level_reached, stat_type_id, old_value, new_value, upgrade_date)
SELECT 
    @last_rune_id,
    3,
    (SELECT id FROM stat_types WHERE code = 'ATK_FLAT'),
    13.0,
    25.0,
    NOW();

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 29211)
AND slot_number = 6;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 29211), 
    @last_rune_id, 
    6
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 29211);

-- Rune ID: 36658375804

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 1 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(36658375804, 
 9215591, 
 1, 
 18387819317, 
 1,
 5, 
 6, 
 15, 
 15, 
 15,
 662530, 
 135476, 
 (SELECT id FROM stat_types WHERE code = 'ATK_FLAT'), 
 160,
 (SELECT id FROM stat_types WHERE code = 'RES'), 
 6, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    16,
    0,
    11
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 11 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    6,
    0,
    2
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 2 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    8,
    1,
    5
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 5 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    20,
    0,
    20
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 20 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 22711)
AND slot_number = 1;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 22711), 
    @last_rune_id, 
    1
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 22711);

-- Rune ID: 32277452120

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 2 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(32277452120, 
 9215591, 
 1, 
 18387819317, 
 2,
 5, 
 6, 
 8, 
 15, 
 15,
 412100, 
 129357, 
 (SELECT id FROM stat_types WHERE code = 'ATK_PCT'), 
 63,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    10,
    0,
    10
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 10 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    14,
    0,
    7
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND 7 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    13,
    0,
    6
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 6 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'),
    7,
    1,
    7
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_DMG')
    AND is_ancient = 0
    AND 7 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_upgrades 
(rune_id, level_reached, stat_type_id, old_value, new_value, upgrade_date)
SELECT 
    @last_rune_id,
    3,
    (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'),
    7.0,
    7.0,
    NOW();

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 22711)
AND slot_number = 2;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 22711), 
    @last_rune_id, 
    2
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 22711);

-- Rune ID: 32314648355

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 3 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(32314648355, 
 9215591, 
 1, 
 18387819317, 
 3,
 5, 
 6, 
 8, 
 15, 
 12,
 309075, 
 58017, 
 (SELECT id FROM stat_types WHERE code = 'DEF_FLAT'), 
 118,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    15,
    0,
    11
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 11 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    13,
    0,
    6
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND 6 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    14,
    0,
    7
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 7 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ACC'),
    8,
    1,
    8
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ACC')
    AND is_ancient = 0
    AND 8 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_upgrades 
(rune_id, level_reached, stat_type_id, old_value, new_value, upgrade_date)
SELECT 
    @last_rune_id,
    3,
    (SELECT id FROM stat_types WHERE code = 'ACC'),
    8.0,
    8.0,
    NOW();

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 22711)
AND slot_number = 3;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 22711), 
    @last_rune_id, 
    3
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 22711);

-- Rune ID: 26153461434

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 4 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_DMG')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(26153461434, 
 9215591, 
 1, 
 18387819317, 
 4,
 5, 
 6, 
 8, 
 15, 
 15,
 370890, 
 126421, 
 (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'), 
 80,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    6,
    0,
    6
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 6 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_FLAT'),
    30,
    1,
    13
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_FLAT')
    AND is_ancient = 0
    AND 13 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    22,
    0,
    18
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 18 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    8,
    0,
    1
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 1 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 22711)
AND slot_number = 4;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 22711), 
    @last_rune_id, 
    4
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 22711);

-- Rune ID: 41664570656

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 6 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(41664570656, 
 9215591, 
 1, 
 18387819317, 
 6,
 5, 
 6, 
 15, 
 15, 
 15,
 592790, 
 131742, 
 (SELECT id FROM stat_types WHERE code = 'ATK_PCT'), 
 63,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 197, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    10,
    0,
    8
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 8 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    8,
    0,
    1
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND 1 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    20,
    0,
    15
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 15 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    4,
    1,
    4
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 4 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_upgrades 
(rune_id, level_reached, stat_type_id, old_value, new_value, upgrade_date)
SELECT 
    @last_rune_id,
    3,
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    4.0,
    4.0,
    NOW();

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 22711)
AND slot_number = 6;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 22711), 
    @last_rune_id, 
    6
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 22711);

-- Rune ID: 42328394720

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 2 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(42328394720, 
 9215591, 
 1, 
 18470216175, 
 2,
 5, 
 6, 
 10, 
 15, 
 15,
 697400, 
 134870, 
 (SELECT id FROM stat_types WHERE code = 'SPD'), 
 42,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ACC'),
    20,
    0,
    20
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ACC')
    AND is_ancient = 0
    AND 20 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_FLAT'),
    20,
    0,
    1
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_FLAT')
    AND is_ancient = 0
    AND 1 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    14,
    0,
    5
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 5 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    10,
    1,
    0
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 0 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_upgrades 
(rune_id, level_reached, stat_type_id, old_value, new_value, upgrade_date)
SELECT 
    @last_rune_id,
    3,
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    0.0,
    10.0,
    NOW();

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 29411)
AND slot_number = 2;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 29411), 
    @last_rune_id, 
    2
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 29411);

-- Rune ID: 34302902943

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 3 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(34302902943, 
 9215591, 
 1, 
 18470216175, 
 3,
 15, 
 16, 
 10, 
 15, 
 15,
 627660, 
 131383, 
 (SELECT id FROM stat_types WHERE code = 'DEF_FLAT'), 
 160,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    12,
    0,
    12
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 1
    AND 12 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    15,
    1,
    7
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 1
    AND 7 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'RES'),
    8,
    0,
    8
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'RES')
    AND is_ancient = 1
    AND 8 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    21,
    0,
    16
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 1
    AND 16 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 29411)
AND slot_number = 3;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 29411), 
    @last_rune_id, 
    3
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 29411);

-- Rune ID: 23218597599

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 4 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_DMG')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(23218597599, 
 9215591, 
 1, 
 18470216175, 
 4,
 5, 
 6, 
 15, 
 15, 
 15,
 570600, 
 130554, 
 (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'), 
 80,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    9,
    1,
    5
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 5 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    13,
    0,
    4
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 4 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    17,
    0,
    17
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 17 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    13,
    0,
    5
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND 5 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 29411)
AND slot_number = 4;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 29411), 
    @last_rune_id, 
    4
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 29411);

-- Rune ID: 42446270249

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 5 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(42446270249, 
 9215591, 
 1, 
 18470216175, 
 5,
 5, 
 6, 
 10, 
 15, 
 12,
 608640, 
 66432, 
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 1800,
 (SELECT id FROM stat_types WHERE code = 'HP_PCT'), 
 8, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    16,
    0,
    13
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 13 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    13,
    0,
    7
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND 7 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    7,
    1,
    7
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 7 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    15,
    0,
    5
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 5 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 29411)
AND slot_number = 5;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 29411), 
    @last_rune_id, 
    5
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 29411);

-- Rune ID: 39564124427

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 6 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(39564124427, 
 9215591, 
 1, 
 18470216175, 
 6,
 15, 
 16, 
 10, 
 15, 
 15,
 711348, 
 135567, 
 (SELECT id FROM stat_types WHERE code = 'ATK_PCT'), 
 63,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    20,
    0,
    16
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 1
    AND 16 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    7,
    0,
    1
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 1
    AND 1 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    10,
    0,
    10
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 1
    AND 10 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    10,
    1,
    2
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 1
    AND 2 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_upgrades 
(rune_id, level_reached, stat_type_id, old_value, new_value, upgrade_date)
SELECT 
    @last_rune_id,
    3,
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    2.0,
    10.0,
    NOW();

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 29411)
AND slot_number = 6;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 29411), 
    @last_rune_id, 
    6
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 29411);

-- Rune ID: 44060407893

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 1 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(44060407893, 
 9215591, 
 1, 
 18520801738, 
 1,
 5, 
 6, 
 3, 
 15, 
 12,
 481840, 
 68778, 
 (SELECT id FROM stat_types WHERE code = 'ATK_FLAT'), 
 118,
 (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'), 
 6, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    21,
    0,
    14
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 14 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ACC'),
    6,
    0,
    6
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ACC')
    AND is_ancient = 0
    AND 6 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'RES'),
    6,
    0,
    6
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'RES')
    AND is_ancient = 0
    AND 6 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    16,
    0,
    12
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 12 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 20511)
AND slot_number = 1;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 20511), 
    @last_rune_id, 
    1
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 20511);

-- Rune ID: 45018076601

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 2 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(45018076601, 
 9215591, 
 1, 
 18520801738, 
 2,
 5, 
 6, 
 3, 
 15, 
 12,
 507200, 
 70503, 
 (SELECT id FROM stat_types WHERE code = 'SPD'), 
 31,
 (SELECT id FROM stat_types WHERE code = 'ATK_FLAT'), 
 13, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    16,
    0,
    16
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 16 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    13,
    0,
    13
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND 13 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ACC'),
    7,
    0,
    7
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ACC')
    AND is_ancient = 0
    AND 7 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_FLAT'),
    10,
    0,
    10
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_FLAT')
    AND is_ancient = 0
    AND 10 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 20511)
AND slot_number = 2;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 20511), 
    @last_rune_id, 
    2
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 20511);

-- Rune ID: 35048305967

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 3 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(35048305967, 
 9215591, 
 1, 
 18520801738, 
 3,
 5, 
 6, 
 3, 
 15, 
 12,
 380400, 
 61877, 
 (SELECT id FROM stat_types WHERE code = 'DEF_FLAT'), 
 118,
 (SELECT id FROM stat_types WHERE code = 'ACC'), 
 8, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    11,
    0,
    11
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 11 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    12,
    0,
    12
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 12 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    13,
    0,
    13
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND 13 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'RES'),
    16,
    0,
    16
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'RES')
    AND is_ancient = 0
    AND 16 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 20511)
AND slot_number = 3;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 20511), 
    @last_rune_id, 
    3
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 20511);

-- Rune ID: 40993121096

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 4 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(40993121096, 
 9215591, 
 1, 
 18520801738, 
 4,
 5, 
 6, 
 15, 
 15, 
 12,
 627660, 
 69609, 
 (SELECT id FROM stat_types WHERE code = 'HP_PCT'), 
 47,
 (SELECT id FROM stat_types WHERE code = 'DEF_FLAT'), 
 18, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    7,
    0,
    7
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND 7 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    14,
    0,
    14
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 14 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    5,
    0,
    5
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 5 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    24,
    0,
    24
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 24 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 20511)
AND slot_number = 4;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 20511), 
    @last_rune_id, 
    4
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 20511);

-- Rune ID: 33033343683

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 1 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(33033343683, 
 9215591, 
 1, 
 18827634753, 
 1,
 5, 
 6, 
 14, 
 15, 
 12,
 662530, 
 71476, 
 (SELECT id FROM stat_types WHERE code = 'ATK_FLAT'), 
 118,
 (SELECT id FROM stat_types WHERE code = 'RES'), 
 6, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    12,
    0,
    5
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 5 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    6,
    0,
    -1
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND -1 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    17,
    0,
    13
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 13 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ACC'),
    8,
    0,
    8
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ACC')
    AND is_ancient = 0
    AND 8 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 21801)
AND slot_number = 1;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 21801), 
    @last_rune_id, 
    1
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 21801);

-- Rune ID: 16361012480

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 3 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(16361012480, 
 9215591, 
 1, 
 18827634753, 
 3,
 5, 
 6, 
 13, 
 15, 
 15,
 523050, 
 126152, 
 (SELECT id FROM stat_types WHERE code = 'DEF_FLAT'), 
 160,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    8,
    0,
    3
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND 3 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ACC'),
    11,
    0,
    11
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ACC')
    AND is_ancient = 0
    AND 11 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    17,
    0,
    12
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 12 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    10,
    0,
    10
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 10 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 21801)
AND slot_number = 3;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 21801), 
    @last_rune_id, 
    3
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 21801);

-- Rune ID: 26295296278

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 4 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_DMG')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(26295296278, 
 9215591, 
 1, 
 18827634753, 
 4,
 5, 
 6, 
 14, 
 15, 
 15,
 627660, 
 133609, 
 (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'), 
 80,
 (SELECT id FROM stat_types WHERE code = 'DEF_PCT'), 
 7, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    21,
    0,
    17
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 17 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    6,
    0,
    -1
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND -1 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    6,
    1,
    6
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 6 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    6,
    0,
    -1
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND -1 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 21801)
AND slot_number = 4;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 21801), 
    @last_rune_id, 
    4
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 21801);

-- Rune ID: 34689749584

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 5 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(34689749584, 
 9215591, 
 1, 
 18827634753, 
 5,
 5, 
 6, 
 13, 
 15, 
 12,
 557920, 
 63896, 
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 1800,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    13,
    0,
    6
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 6 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'RES'),
    7,
    0,
    7
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'RES')
    AND is_ancient = 0
    AND 7 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    16,
    0,
    13
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 13 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    6,
    0,
    1
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND 1 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 21801)
AND slot_number = 5;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 21801), 
    @last_rune_id, 
    5
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 21801);

-- Rune ID: 44256805012

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 6 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(44256805012, 
 9215591, 
 1, 
 18827634753, 
 6,
 5, 
 6, 
 13, 
 15, 
 12,
 592790, 
 65639, 
 (SELECT id FROM stat_types WHERE code = 'DEF_PCT'), 
 47,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    20,
    0,
    17
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 17 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ACC'),
    8,
    0,
    8
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ACC')
    AND is_ancient = 0
    AND 8 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'RES'),
    5,
    0,
    5
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'RES')
    AND is_ancient = 0
    AND 5 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    8,
    0,
    2
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 2 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 21801)
AND slot_number = 6;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 21801), 
    @last_rune_id, 
    6
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 21801);

-- Rune ID: 45381345052

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 6 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(45381345052, 
 9215591, 
 1, 
 19251942668, 
 6,
 5, 
 6, 
 13, 
 15, 
 12,
 646680, 
 68334, 
 (SELECT id FROM stat_types WHERE code = 'HP_PCT'), 
 47,
 (SELECT id FROM stat_types WHERE code = 'DEF_FLAT'), 
 15, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    11,
    0,
    11
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 11 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    20,
    0,
    20
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 20 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'RES'),
    14,
    0,
    14
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'RES')
    AND is_ancient = 0
    AND 14 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ACC'),
    5,
    0,
    5
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ACC')
    AND is_ancient = 0
    AND 5 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 27211)
AND slot_number = 6;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 27211), 
    @last_rune_id, 
    6
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 27211);

-- Rune ID: 31591355840

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 1 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(31591355840, 
 9215591, 
 1, 
 7567101238, 
 1,
 5, 
 5, 
 19, 
 15, 
 15,
 319770, 
 69062, 
 (SELECT id FROM stat_types WHERE code = 'ATK_FLAT'), 
 135,
 (SELECT id FROM stat_types WHERE code = 'ACC'), 
 4, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    10,
    0,
    10
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 10 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    10,
    0,
    4
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 4 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'),
    5,
    0,
    5
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_DMG')
    AND is_ancient = 0
    AND 5 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    5,
    0,
    1
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 1 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 12112)
AND slot_number = 1;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 12112), 
    @last_rune_id, 
    1
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 12112);

-- Rune ID: 25153715506

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 2 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(25153715506, 
 9215591, 
 1, 
 7567101238, 
 2,
 4, 
 4, 
 19, 
 15, 
 9,
 117600, 
 11601, 
 (SELECT id FROM stat_types WHERE code = 'ATK_PCT'), 
 24,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'heroic',
 9,
 'heroic',
 'heroic',
 4,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_FLAT'),
    9,
    0,
    9
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_FLAT')
    AND is_ancient = 0
    AND 9 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'),
    3,
    0,
    3
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_DMG')
    AND is_ancient = 0
    AND 3 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    4,
    0,
    4
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 4 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 12112)
AND slot_number = 2;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 12112), 
    @last_rune_id, 
    2
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 12112);

-- Rune ID: 23022061157

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 3 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(23022061157, 
 9215591, 
 1, 
 7567101238, 
 3,
 5, 
 6, 
 19, 
 15, 
 12,
 475500, 
 61461, 
 (SELECT id FROM stat_types WHERE code = 'DEF_FLAT'), 
 118,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_FLAT'),
    784,
    0,
    385
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_FLAT')
    AND is_ancient = 0
    AND 385 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ACC'),
    14,
    0,
    14
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ACC')
    AND is_ancient = 0
    AND 14 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    6,
    0,
    4
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 4 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'RES'),
    8,
    0,
    8
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'RES')
    AND is_ancient = 0
    AND 8 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 12112)
AND slot_number = 3;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 12112), 
    @last_rune_id, 
    3
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 12112);

-- Rune ID: 41506973030

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 4 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(41506973030, 
 9215591, 
 1, 
 7567101238, 
 4,
 4, 
 6, 
 15, 
 15, 
 9,
 513540, 
 38698, 
 (SELECT id FROM stat_types WHERE code = 'ATK_PCT'), 
 38,
 (SELECT id FROM stat_types WHERE code = 'HP_PCT'), 
 6, 
 'heroic',
 9,
 'heroic',
 'heroic',
 4,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_FLAT'),
    37,
    0,
    37
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_FLAT')
    AND is_ancient = 0
    AND 37 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    11,
    0,
    11
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 11 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_FLAT'),
    12,
    0,
    12
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_FLAT')
    AND is_ancient = 0
    AND 12 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 12112)
AND slot_number = 4;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 12112), 
    @last_rune_id, 
    4
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 12112);

-- Rune ID: 40374875652

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 5 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(40374875652, 
 9215591, 
 1, 
 7567101238, 
 5,
 5, 
 6, 
 25, 
 15, 
 12,
 557920, 
 63896, 
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 1800,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    13,
    0,
    13
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND 13 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    5,
    0,
    2
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 2 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'),
    20,
    0,
    20
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_DMG')
    AND is_ancient = 0
    AND 20 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    4,
    0,
    4
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 4 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 12112)
AND slot_number = 5;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 12112), 
    @last_rune_id, 
    5
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 12112);

-- Rune ID: 25858897925

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 1 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(25858897925, 
 9215591, 
 1, 
 7692900539, 
 1,
 5, 
 6, 
 6, 
 15, 
 15,
 481840, 
 132778, 
 (SELECT id FROM stat_types WHERE code = 'ATK_FLAT'), 
 160,
 (SELECT id FROM stat_types WHERE code = 'RES'), 
 7, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    13,
    0,
    6
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 6 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    15,
    0,
    8
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 8 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ACC'),
    18,
    0,
    18
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ACC')
    AND is_ancient = 0
    AND 18 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    6,
    0,
    2
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 2 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 22212)
AND slot_number = 1;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 22212), 
    @last_rune_id, 
    1
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 22212);

-- Rune ID: 41418388790

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 2 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(41418388790, 
 9215591, 
 1, 
 7692900539, 
 2,
 5, 
 6, 
 6, 
 15, 
 15,
 507200, 
 134503, 
 (SELECT id FROM stat_types WHERE code = 'HP_PCT'), 
 63,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 370, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    14,
    0,
    7
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 7 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    16,
    0,
    13
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 13 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    12,
    1,
    6
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND 6 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ACC'),
    6,
    0,
    6
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ACC')
    AND is_ancient = 0
    AND 6 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 22212)
AND slot_number = 2;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 22212), 
    @last_rune_id, 
    2
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 22212);

-- Rune ID: 16377925007

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 3 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(16377925007, 
 9215591, 
 1, 
 7692900539, 
 3,
 5, 
 6, 
 10, 
 15, 
 15,
 570600, 
 128530, 
 (SELECT id FROM stat_types WHERE code = 'DEF_FLAT'), 
 160,
 (SELECT id FROM stat_types WHERE code = 'SPD'), 
 5, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ACC'),
    7,
    0,
    7
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ACC')
    AND is_ancient = 0
    AND 7 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    11,
    1,
    5
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND 5 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    32,
    0,
    25
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 25 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    4,
    0,
    4
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 4 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 22212)
AND slot_number = 3;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 22212), 
    @last_rune_id, 
    3
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 22212);

-- Rune ID: 32435290557

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 4 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(32435290557, 
 9215591, 
 1, 
 7692900539, 
 4,
 5, 
 6, 
 10, 
 15, 
 15,
 684720, 
 134236, 
 (SELECT id FROM stat_types WHERE code = 'HP_PCT'), 
 63,
 (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'), 
 5, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    10,
    0,
    6
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 6 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    13,
    0,
    7
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 7 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ACC'),
    15,
    0,
    15
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ACC')
    AND is_ancient = 0
    AND 15 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    9,
    1,
    2
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND 2 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_upgrades 
(rune_id, level_reached, stat_type_id, old_value, new_value, upgrade_date)
SELECT 
    @last_rune_id,
    3,
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    2.0,
    9.0,
    NOW();

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 22212)
AND slot_number = 4;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 22212), 
    @last_rune_id, 
    4
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 22212);

-- Rune ID: 41090413640

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 5 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(41090413640, 
 9215591, 
 1, 
 7692900539, 
 5,
 15, 
 16, 
 10, 
 15, 
 15,
 730368, 
 136518, 
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 2448,
 (SELECT id FROM stat_types WHERE code = 'ACC'), 
 6, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    17,
    0,
    12
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 1
    AND 12 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    17,
    0,
    12
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 1
    AND 12 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    12,
    1,
    4
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 1
    AND 4 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    17,
    0,
    5
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 1
    AND 5 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 22212)
AND slot_number = 5;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 22212), 
    @last_rune_id, 
    5
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 22212);

-- Rune ID: 39359238200

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 6 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(39359238200, 
 9215591, 
 1, 
 7692900539, 
 6,
 5, 
 6, 
 10, 
 15, 
 15,
 592790, 
 129639, 
 (SELECT id FROM stat_types WHERE code = 'HP_PCT'), 
 63,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ACC'),
    5,
    0,
    5
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ACC')
    AND is_ancient = 0
    AND 5 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    10,
    0,
    3
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND 3 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    29,
    0,
    23
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 23 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    9,
    1,
    6
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 6 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_upgrades 
(rune_id, level_reached, stat_type_id, old_value, new_value, upgrade_date)
SELECT 
    @last_rune_id,
    3,
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    6.0,
    9.0,
    NOW();

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 22212)
AND slot_number = 6;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 22212), 
    @last_rune_id, 
    6
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 22212);

-- Rune ID: 42766915260

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 1 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(42766915260, 
 9215591, 
 1, 
 7694756446, 
 1,
 5, 
 6, 
 3, 
 15, 
 12,
 481840, 
 68778, 
 (SELECT id FROM stat_types WHERE code = 'ATK_FLAT'), 
 118,
 (SELECT id FROM stat_types WHERE code = 'RES'), 
 4, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'),
    21,
    0,
    21
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_DMG')
    AND is_ancient = 0
    AND 21 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    11,
    0,
    11
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 11 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    11,
    0,
    8
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 8 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ACC'),
    8,
    0,
    8
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ACC')
    AND is_ancient = 0
    AND 8 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 11532)
AND slot_number = 1;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 11532), 
    @last_rune_id, 
    1
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 11532);

-- Rune ID: 36657774441

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 3 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(36657774441, 
 9215591, 
 1, 
 7694756446, 
 3,
 5, 
 6, 
 4, 
 15, 
 12,
 309075, 
 58017, 
 (SELECT id FROM stat_types WHERE code = 'DEF_FLAT'), 
 118,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    6,
    0,
    -1
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND -1 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    8,
    0,
    1
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 1 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    23,
    0,
    20
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 20 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    4,
    1,
    4
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 4 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_upgrades 
(rune_id, level_reached, stat_type_id, old_value, new_value, upgrade_date)
SELECT 
    @last_rune_id,
    3,
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    4.0,
    4.0,
    NOW();

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 11532)
AND slot_number = 3;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 11532), 
    @last_rune_id, 
    3
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 11532);

-- Rune ID: 43016026848

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 4 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(43016026848, 
 9215591, 
 1, 
 7694756446, 
 4,
 5, 
 6, 
 3, 
 15, 
 12,
 456480, 
 67053, 
 (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'), 
 43,
 (SELECT id FROM stat_types WHERE code = 'DEF_PCT'), 
 5, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    22,
    0,
    15
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 15 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    8,
    0,
    1
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 1 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    10,
    0,
    7
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 7 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'RES'),
    6,
    0,
    6
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'RES')
    AND is_ancient = 0
    AND 6 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 11532)
AND slot_number = 4;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 11532), 
    @last_rune_id, 
    4
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 11532);

-- Rune ID: 31947804578

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 5 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(31947804578, 
 9215591, 
 1, 
 7694756446, 
 5,
 5, 
 6, 
 4, 
 15, 
 12,
 380400, 
 63098, 
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 1800,
 (SELECT id FROM stat_types WHERE code = 'ACC'), 
 8, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    10,
    0,
    10
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 10 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'),
    13,
    0,
    13
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_DMG')
    AND is_ancient = 0
    AND 13 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    15,
    0,
    8
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND 8 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    12,
    0,
    7
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 7 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 11532)
AND slot_number = 5;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 11532), 
    @last_rune_id, 
    5
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 11532);

-- Rune ID: 44354755479

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 6 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'ACC')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(44354755479, 
 9215591, 
 1, 
 7694756446, 
 6,
 5, 
 6, 
 3, 
 15, 
 15,
 431120, 
 129327, 
 (SELECT id FROM stat_types WHERE code = 'ACC'), 
 64,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 353, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_FLAT'),
    13,
    0,
    -5
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_FLAT')
    AND is_ancient = 0
    AND -5 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    6,
    0,
    2
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 2 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    22,
    0,
    19
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 19 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    11,
    1,
    5
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 5 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_upgrades 
(rune_id, level_reached, stat_type_id, old_value, new_value, upgrade_date)
SELECT 
    @last_rune_id,
    3,
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    5.0,
    11.0,
    NOW();

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 11532)
AND slot_number = 6;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 11532), 
    @last_rune_id, 
    6
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 11532);

-- Rune ID: 43127147239

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 2 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(43127147239, 
 9215591, 
 1, 
 7713490074, 
 2,
 5, 
 6, 
 3, 
 15, 
 15,
 507200, 
 134503, 
 (SELECT id FROM stat_types WHERE code = 'SPD'), 
 42,
 (SELECT id FROM stat_types WHERE code = 'DEF_FLAT'), 
 17, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_FLAT'),
    11,
    0,
    11
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_FLAT')
    AND is_ancient = 0
    AND 11 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    10,
    0,
    10
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 10 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    21,
    0,
    15
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND 15 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    6,
    0,
    0
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 0 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 15312)
AND slot_number = 2;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 15312), 
    @last_rune_id, 
    2
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 15312);

-- Rune ID: 44767280714

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 6 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'RES')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(44767280714, 
 9215591, 
 1, 
 7713490074, 
 6,
 5, 
 6, 
 7, 
 15, 
 12,
 377230, 
 61661, 
 (SELECT id FROM stat_types WHERE code = 'RES'), 
 48,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    10,
    1,
    4
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND 4 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    15,
    0,
    10
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 10 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    12,
    0,
    5
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 5 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    14,
    0,
    7
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 7 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 15312)
AND slot_number = 6;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 15312), 
    @last_rune_id, 
    6
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 15312);

-- Rune ID: 42566142725

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 1 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(42566142725, 
 9215591, 
 1, 
 7717066438, 
 1,
 5, 
 6, 
 3, 
 15, 
 15,
 481840, 
 132778, 
 (SELECT id FROM stat_types WHERE code = 'ATK_FLAT'), 
 160,
 (SELECT id FROM stat_types WHERE code = 'HP_PCT'), 
 5, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    21,
    0,
    14
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 14 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'),
    7,
    1,
    7
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_DMG')
    AND is_ancient = 0
    AND 7 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    5,
    0,
    2
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 2 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    17,
    0,
    17
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 17 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 14712)
AND slot_number = 1;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 14712), 
    @last_rune_id, 
    1
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 14712);

-- Rune ID: 42445332320

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 2 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(42445332320, 
 9215591, 
 1, 
 7717066438, 
 2,
 5, 
 6, 
 8, 
 15, 
 15,
 412100, 
 129357, 
 (SELECT id FROM stat_types WHERE code = 'ATK_PCT'), 
 63,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    5,
    0,
    5
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND 5 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    14,
    0,
    14
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 14 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_FLAT'),
    32,
    0,
    13
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_FLAT')
    AND is_ancient = 0
    AND 13 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    6,
    0,
    -1
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND -1 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 14712)
AND slot_number = 2;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 14712), 
    @last_rune_id, 
    2
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 14712);

-- Rune ID: 35175523337

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 3 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(35175523337, 
 9215591, 
 1, 
 7717066438, 
 3,
 5, 
 6, 
 8, 
 15, 
 15,
 309075, 
 122017, 
 (SELECT id FROM stat_types WHERE code = 'DEF_FLAT'), 
 160,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'),
    13,
    0,
    13
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_DMG')
    AND is_ancient = 0
    AND 13 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    8,
    1,
    2
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 2 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    15,
    0,
    15
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 15 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    9,
    0,
    5
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 5 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 14712)
AND slot_number = 3;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 14712), 
    @last_rune_id, 
    3
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 14712);

-- Rune ID: 24162522869

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 4 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_DMG')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(24162522869, 
 9215591, 
 1, 
 7717066438, 
 4,
 5, 
 6, 
 13, 
 15, 
 15,
 627660, 
 131383, 
 (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'), 
 80,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    24,
    0,
    24
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 24 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    7,
    0,
    1
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 1 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    9,
    1,
    5
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 5 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_FLAT'),
    20,
    0,
    -4
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_FLAT')
    AND is_ancient = 0
    AND -4 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 14712)
AND slot_number = 4;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 14712), 
    @last_rune_id, 
    4
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 14712);

-- Rune ID: 38082975229

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 5 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(38082975229, 
 9215591, 
 1, 
 7717066438, 
 5,
 5, 
 6, 
 8, 
 15, 
 15,
 380400, 
 127098, 
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 2448,
 (SELECT id FROM stat_types WHERE code = 'ACC'), 
 5, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    10,
    0,
    6
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 6 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'),
    13,
    0,
    13
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_DMG')
    AND is_ancient = 0
    AND 13 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    11,
    0,
    11
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 11 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    11,
    1,
    4
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 4 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_upgrades 
(rune_id, level_reached, stat_type_id, old_value, new_value, upgrade_date)
SELECT 
    @last_rune_id,
    3,
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    4.0,
    11.0,
    NOW();

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 14712)
AND slot_number = 5;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 14712), 
    @last_rune_id, 
    5
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 14712);

-- Rune ID: 32644173986

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 6 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(32644173986, 
 9215591, 
 1, 
 7717066438, 
 6,
 5, 
 6, 
 8, 
 15, 
 15,
 350285, 
 124953, 
 (SELECT id FROM stat_types WHERE code = 'ATK_PCT'), 
 63,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    11,
    0,
    11
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 11 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    11,
    0,
    7
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 7 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_FLAT'),
    28,
    0,
    8
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_FLAT')
    AND is_ancient = 0
    AND 8 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'),
    9,
    1,
    9
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_DMG')
    AND is_ancient = 0
    AND 9 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_upgrades 
(rune_id, level_reached, stat_type_id, old_value, new_value, upgrade_date)
SELECT 
    @last_rune_id,
    3,
    (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'),
    9.0,
    9.0,
    NOW();

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 14712)
AND slot_number = 6;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 14712), 
    @last_rune_id, 
    6
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 14712);

-- Rune ID: 38421286168

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 2 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(38421286168, 
 9215591, 
 1, 
 7792416285, 
 2,
 1, 
 4, 
 19, 
 15, 
 0,
 88200, 
 5929, 
 (SELECT id FROM stat_types WHERE code = 'DEF_FLAT'), 
 10,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'rare',
 0,
 'normal',
 'normal',
 1,
 0);

SET @last_rune_id = LAST_INSERT_ID();

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 11212)
AND slot_number = 2;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 11212), 
    @last_rune_id, 
    2
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 11212);

-- Rune ID: 25153714007

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 3 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(25153714007, 
 9215591, 
 1, 
 7792416285, 
 3,
 4, 
 3, 
 19, 
 15, 
 9,
 45225, 
 6054, 
 (SELECT id FROM stat_types WHERE code = 'DEF_FLAT'), 
 52,
 (SELECT id FROM stat_types WHERE code = 'RES'), 
 4, 
 'heroic',
 9,
 'heroic',
 'heroic',
 4,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_FLAT'),
    70,
    0,
    70
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_FLAT')
    AND is_ancient = 0
    AND 70 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    3,
    0,
    3
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 3 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    2,
    0,
    2
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 2 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 11212)
AND slot_number = 3;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 11212), 
    @last_rune_id, 
    3
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 11212);

-- Rune ID: 38421286166

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 4 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(38421286166, 
 9215591, 
 1, 
 7792416285, 
 4,
 3, 
 3, 
 19, 
 15, 
 0,
 42210, 
 3488, 
 (SELECT id FROM stat_types WHERE code = 'DEF_FLAT'), 
 7,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'rare',
 0,
 'rare',
 'rare',
 3,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    2,
    0,
    2
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 2 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    2,
    0,
    2
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 2 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 11212)
AND slot_number = 4;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 11212), 
    @last_rune_id, 
    4
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 11212);

-- Rune ID: 38421286164

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 5 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(38421286164, 
 9215591, 
 1, 
 7792416285, 
 5,
 2, 
 4, 
 19, 
 15, 
 0,
 76440, 
 5138, 
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 160,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'rare',
 0,
 'magic',
 'magic',
 2,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    3,
    0,
    3
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 3 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 11212)
AND slot_number = 5;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 11212), 
    @last_rune_id, 
    5
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 11212);

-- Rune ID: 40624007745

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 6 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(40624007745, 
 9215591, 
 1, 
 7792416285, 
 6,
 2, 
 4, 
 19, 
 15, 
 0,
 93713, 
 6300, 
 (SELECT id FROM stat_types WHERE code = 'ATK_PCT'), 
 5,
 (SELECT id FROM stat_types WHERE code = 'DEF_PCT'), 
 5, 
 'rare',
 0,
 'magic',
 'magic',
 2,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    2,
    0,
    2
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 2 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 11212)
AND slot_number = 6;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 11212), 
    @last_rune_id, 
    6
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 11212);

-- Rune ID: 42632506473

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 1 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(42632506473, 
 9215591, 
 1, 
 7820972095, 
 1,
 5, 
 6, 
 19, 
 15, 
 15,
 602300, 
 132251, 
 (SELECT id FROM stat_types WHERE code = 'ATK_FLAT'), 
 160,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'),
    5,
    0,
    5
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_DMG')
    AND is_ancient = 0
    AND 5 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    20,
    0,
    16
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 16 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    8,
    1,
    2
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 2 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ACC'),
    7,
    0,
    7
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ACC')
    AND is_ancient = 0
    AND 7 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 21912)
AND slot_number = 1;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 21912), 
    @last_rune_id, 
    1
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 21912);

-- Rune ID: 23124084512

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 2 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(23124084512, 
 9215591, 
 1, 
 7820972095, 
 2,
 5, 
 6, 
 19, 
 15, 
 15,
 697400, 
 137344, 
 (SELECT id FROM stat_types WHERE code = 'SPD'), 
 42,
 (SELECT id FROM stat_types WHERE code = 'DEF_FLAT'), 
 15, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_FLAT'),
    37,
    0,
    20
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_FLAT')
    AND is_ancient = 0
    AND 20 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'RES'),
    13,
    0,
    13
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'RES')
    AND is_ancient = 0
    AND 13 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    6,
    0,
    6
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 6 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    8,
    0,
    2
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 2 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 21912)
AND slot_number = 2;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 21912), 
    @last_rune_id, 
    2
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 21912);

-- Rune ID: 33010305182

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 3 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(33010305182, 
 9215591, 
 1, 
 7820972095, 
 3,
 5, 
 6, 
 19, 
 15, 
 12,
 475500, 
 61461, 
 (SELECT id FROM stat_types WHERE code = 'DEF_FLAT'), 
 118,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_FLAT'),
    598,
    0,
    159
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_FLAT')
    AND is_ancient = 0
    AND 159 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ACC'),
    5,
    0,
    5
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ACC')
    AND is_ancient = 0
    AND 5 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    14,
    0,
    10
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 10 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    8,
    0,
    2
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 2 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 21912)
AND slot_number = 3;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 21912), 
    @last_rune_id, 
    3
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 21912);

-- Rune ID: 31601453127

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 4 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(31601453127, 
 9215591, 
 1, 
 7820972095, 
 4,
 5, 
 5, 
 19, 
 15, 
 15,
 302940, 
 68059, 
 (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'), 
 47,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 94, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'RES'),
    5,
    0,
    5
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'RES')
    AND is_ancient = 0
    AND 5 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ACC'),
    17,
    0,
    17
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ACC')
    AND is_ancient = 0
    AND 17 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    7,
    0,
    1
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 1 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    7,
    0,
    0
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND 0 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 21912)
AND slot_number = 4;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 21912), 
    @last_rune_id, 
    4
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 21912);

-- Rune ID: 34326925707

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 5 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(34326925707, 
 9215591, 
 1, 
 7820972095, 
 5,
 5, 
 6, 
 19, 
 15, 
 15,
 557920, 
 129875, 
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 2448,
 (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'), 
 6, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ACC'),
    4,
    0,
    4
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ACC')
    AND is_ancient = 0
    AND 4 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    18,
    0,
    14
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 14 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    5,
    0,
    -2
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND -2 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    8,
    1,
    1
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 1 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_upgrades 
(rune_id, level_reached, stat_type_id, old_value, new_value, upgrade_date)
SELECT 
    @last_rune_id,
    3,
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    1.0,
    8.0,
    NOW();

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 21912)
AND slot_number = 5;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 21912), 
    @last_rune_id, 
    5
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 21912);

-- Rune ID: 34288487082

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 6 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'ACC')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(34288487082, 
 9215591, 
 1, 
 7820972095, 
 6,
 5, 
 6, 
 19, 
 15, 
 12,
 592790, 
 67742, 
 (SELECT id FROM stat_types WHERE code = 'ACC'), 
 48,
 (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'), 
 5, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    14,
    0,
    7
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 7 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    12,
    0,
    8
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 8 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    7,
    1,
    1
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 1 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    6,
    0,
    6
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 6 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 21912)
AND slot_number = 6;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 21912), 
    @last_rune_id, 
    6
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 21912);

-- Rune ID: 35069734541

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 1 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(35069734541, 
 9215591, 
 1, 
 8021792127, 
 1,
 5, 
 6, 
 8, 
 15, 
 15,
 391495, 
 127889, 
 (SELECT id FROM stat_types WHERE code = 'ATK_FLAT'), 
 160,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    29,
    0,
    24
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 24 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'),
    5,
    0,
    5
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_DMG')
    AND is_ancient = 0
    AND 5 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    5,
    0,
    5
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 5 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    5,
    1,
    1
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 1 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_upgrades 
(rune_id, level_reached, stat_type_id, old_value, new_value, upgrade_date)
SELECT 
    @last_rune_id,
    3,
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    1.0,
    5.0,
    NOW();

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 18312)
AND slot_number = 1;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 18312), 
    @last_rune_id, 
    1
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 18312);

-- Rune ID: 42895883154

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 2 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(42895883154, 
 9215591, 
 1, 
 8021792127, 
 2,
 5, 
 6, 
 4, 
 15, 
 15,
 475500, 
 133873, 
 (SELECT id FROM stat_types WHERE code = 'ATK_PCT'), 
 63,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 212, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    12,
    0,
    12
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 12 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    5,
    0,
    0
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 0 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    15,
    0,
    12
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 12 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_FLAT'),
    15,
    0,
    15
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_FLAT')
    AND is_ancient = 0
    AND 15 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 18312)
AND slot_number = 2;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 18312), 
    @last_rune_id, 
    2
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 18312);

-- Rune ID: 39307337473

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 3 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(39307337473, 
 9215591, 
 1, 
 8021792127, 
 3,
 5, 
 6, 
 8, 
 15, 
 12,
 309075, 
 58017, 
 (SELECT id FROM stat_types WHERE code = 'DEF_FLAT'), 
 118,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    15,
    0,
    15
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 15 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    8,
    1,
    1
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND 1 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    8,
    0,
    5
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 5 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'),
    13,
    0,
    13
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_DMG')
    AND is_ancient = 0
    AND 13 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 18312)
AND slot_number = 3;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 18312), 
    @last_rune_id, 
    3
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 18312);

-- Rune ID: 44440567705

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 4 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(44440567705, 
 9215591, 
 1, 
 8021792127, 
 4,
 5, 
 6, 
 8, 
 15, 
 12,
 427950, 
 66486, 
 (SELECT id FROM stat_types WHERE code = 'ATK_PCT'), 
 47,
 (SELECT id FROM stat_types WHERE code = 'DEF_FLAT'), 
 18, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_FLAT'),
    31,
    0,
    31
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_FLAT')
    AND is_ancient = 0
    AND 31 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    7,
    0,
    7
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND 7 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    15,
    0,
    15
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 15 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'RES'),
    4,
    0,
    4
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'RES')
    AND is_ancient = 0
    AND 4 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 18312)
AND slot_number = 4;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 18312), 
    @last_rune_id, 
    4
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 18312);

-- Rune ID: 45533968242

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 5 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(45533968242, 
 9215591, 
 1, 
 8021792127, 
 5,
 5, 
 6, 
 8, 
 15, 
 12,
 380400, 
 63098, 
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 1800,
 (SELECT id FROM stat_types WHERE code = 'DEF_FLAT'), 
 17, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'),
    6,
    0,
    6
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_DMG')
    AND is_ancient = 0
    AND 6 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    14,
    0,
    14
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 14 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    15,
    0,
    5
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 5 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    7,
    1,
    7
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 7 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_upgrades 
(rune_id, level_reached, stat_type_id, old_value, new_value, upgrade_date)
SELECT 
    @last_rune_id,
    3,
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    7.0,
    7.0,
    NOW();

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 18312)
AND slot_number = 5;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 18312), 
    @last_rune_id, 
    5
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 18312);

-- Rune ID: 44104129348

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 6 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(44104129348, 
 9215591, 
 1, 
 8021792127, 
 6,
 5, 
 6, 
 4, 
 15, 
 15,
 404175, 
 128792, 
 (SELECT id FROM stat_types WHERE code = 'ATK_PCT'), 
 63,
 (SELECT id FROM stat_types WHERE code = 'RES'), 
 6, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'),
    8,
    0,
    8
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_DMG')
    AND is_ancient = 0
    AND 8 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    16,
    0,
    16
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 16 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_FLAT'),
    10,
    0,
    -5
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_FLAT')
    AND is_ancient = 0
    AND -5 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_FLAT'),
    14,
    0,
    14
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_FLAT')
    AND is_ancient = 0
    AND 14 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 18312)
AND slot_number = 6;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 18312), 
    @last_rune_id, 
    6
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 18312);

-- Rune ID: 42476412838

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 1 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(42476412838, 
 9215591, 
 1, 
 8038772890, 
 1,
 5, 
 6, 
 13, 
 15, 
 15,
 722760, 
 136138, 
 (SELECT id FROM stat_types WHERE code = 'ATK_FLAT'), 
 160,
 (SELECT id FROM stat_types WHERE code = 'RES'), 
 8, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    9,
    0,
    9
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 9 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ACC'),
    13,
    0,
    13
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ACC')
    AND is_ancient = 0
    AND 13 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    6,
    1,
    6
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 6 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    22,
    0,
    17
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 17 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 11032)
AND slot_number = 1;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 11032), 
    @last_rune_id, 
    1
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 11032);

-- Rune ID: 18172831524

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 2 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(18172831524, 
 9215591, 
 1, 
 8038772890, 
 2,
 5, 
 6, 
 4, 
 15, 
 15,
 475500, 
 133873, 
 (SELECT id FROM stat_types WHERE code = 'ATK_PCT'), 
 63,
 (SELECT id FROM stat_types WHERE code = 'ATK_FLAT'), 
 11, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    6,
    0,
    2
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 2 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    6,
    1,
    6
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 6 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    31,
    0,
    24
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND 24 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    11,
    0,
    2
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 2 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 11032)
AND slot_number = 2;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 11032), 
    @last_rune_id, 
    2
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 11032);

-- Rune ID: 25075750470

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 3 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(25075750470, 
 9215591, 
 1, 
 8038772890, 
 3,
 5, 
 6, 
 13, 
 15, 
 15,
 523050, 
 126152, 
 (SELECT id FROM stat_types WHERE code = 'DEF_FLAT'), 
 160,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_FLAT'),
    260,
    0,
    -157
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_FLAT')
    AND is_ancient = 0
    AND -157 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'),
    6,
    0,
    6
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_DMG')
    AND is_ancient = 0
    AND 6 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    12,
    1,
    6
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 6 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    26,
    0,
    26
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 26 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 11032)
AND slot_number = 3;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 11032), 
    @last_rune_id, 
    3
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 11032);

-- Rune ID: 37272801807

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 4 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_DMG')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(37272801807, 
 9215591, 
 1, 
 8038772890, 
 4,
 5, 
 6, 
 4, 
 15, 
 15,
 427950, 
 130486, 
 (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'), 
 80,
 (SELECT id FROM stat_types WHERE code = 'HP_PCT'), 
 8, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    13,
    0,
    6
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 6 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ACC'),
    12,
    0,
    12
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ACC')
    AND is_ancient = 0
    AND 12 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    12,
    0,
    12
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 12 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    6,
    0,
    2
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 2 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 11032)
AND slot_number = 4;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 11032), 
    @last_rune_id, 
    4
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 11032);

-- Rune ID: 36221475723

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 5 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(36221475723, 
 9215591, 
 1, 
 8038772890, 
 5,
 5, 
 6, 
 13, 
 15, 
 15,
 608640, 
 130432, 
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 2448,
 (SELECT id FROM stat_types WHERE code = 'DEF_PCT'), 
 5, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    8,
    0,
    3
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 3 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ACC'),
    12,
    0,
    12
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ACC')
    AND is_ancient = 0
    AND 12 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    16,
    0,
    16
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 16 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    5,
    0,
    5
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 5 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 11032)
AND slot_number = 5;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 11032), 
    @last_rune_id, 
    5
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 11032);

-- Rune ID: 45417624853

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 6 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(45417624853, 
 9215591, 
 1, 
 8038772890, 
 6,
 5, 
 6, 
 13, 
 15, 
 15,
 592790, 
 129639, 
 (SELECT id FROM stat_types WHERE code = 'ATK_PCT'), 
 63,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ACC'),
    8,
    0,
    8
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ACC')
    AND is_ancient = 0
    AND 8 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    13,
    0,
    13
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 13 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    17,
    0,
    17
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 17 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    12,
    0,
    12
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 12 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 11032)
AND slot_number = 6;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 11032), 
    @last_rune_id, 
    6
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 11032);

-- Rune ID: 36339724952

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 1 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(36339724952, 
 9215591, 
 1, 
 8160782784, 
 1,
 5, 
 6, 
 10, 
 15, 
 12,
 722760, 
 72138, 
 (SELECT id FROM stat_types WHERE code = 'ATK_FLAT'), 
 118,
 (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'), 
 4, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    10,
    1,
    4
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 4 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    12,
    0,
    7
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 7 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    16,
    0,
    12
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 12 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ACC'),
    4,
    0,
    4
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ACC')
    AND is_ancient = 0
    AND 4 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 16312)
AND slot_number = 1;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 16312), 
    @last_rune_id, 
    1
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 16312);

-- Rune ID: 41725081801

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 2 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(41725081801, 
 9215591, 
 1, 
 8160782784, 
 2,
 5, 
 6, 
 17, 
 15, 
 15,
 697400, 
 137344, 
 (SELECT id FROM stat_types WHERE code = 'HP_PCT'), 
 63,
 (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'), 
 7, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    16,
    0,
    12
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 12 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    13,
    0,
    7
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 7 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    8,
    1,
    1
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND 1 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ACC'),
    5,
    0,
    5
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ACC')
    AND is_ancient = 0
    AND 5 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 16312)
AND slot_number = 2;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 16312), 
    @last_rune_id, 
    2
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 16312);

-- Rune ID: 45259945398

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 3 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(45259945398, 
 9215591, 
 1, 
 8160782784, 
 3,
 15, 
 16, 
 10, 
 15, 
 12,
 627660, 
 67383, 
 (SELECT id FROM stat_types WHERE code = 'DEF_FLAT'), 
 118,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'RES'),
    6,
    0,
    6
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'RES')
    AND is_ancient = 1
    AND 6 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    7,
    0,
    7
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 1
    AND 7 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    13,
    0,
    13
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 1
    AND 13 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    26,
    0,
    26
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 1
    AND 26 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 16312)
AND slot_number = 3;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 16312), 
    @last_rune_id, 
    3
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 16312);

-- Rune ID: 41379688065

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 4 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(41379688065, 
 9215591, 
 1, 
 8160782784, 
 4,
 5, 
 6, 
 10, 
 15, 
 12,
 684720, 
 70236, 
 (SELECT id FROM stat_types WHERE code = 'ATK_PCT'), 
 47,
 (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'), 
 6, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    6,
    0,
    6
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 6 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'RES'),
    23,
    0,
    23
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'RES')
    AND is_ancient = 0
    AND 23 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_FLAT'),
    20,
    0,
    20
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_FLAT')
    AND is_ancient = 0
    AND 20 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_FLAT'),
    657,
    0,
    657
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_FLAT')
    AND is_ancient = 0
    AND 657 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 16312)
AND slot_number = 4;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 16312), 
    @last_rune_id, 
    4
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 16312);

-- Rune ID: 44143443507

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 5 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(44143443507, 
 9215591, 
 1, 
 8160782784, 
 5,
 5, 
 6, 
 10, 
 15, 
 12,
 608640, 
 66432, 
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 1800,
 (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'), 
 7, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    4,
    0,
    4
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 4 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    13,
    0,
    13
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 13 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    27,
    0,
    27
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND 27 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_FLAT'),
    14,
    0,
    14
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_FLAT')
    AND is_ancient = 0
    AND 14 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 16312)
AND slot_number = 5;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 16312), 
    @last_rune_id, 
    5
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 16312);

-- Rune ID: 36155938932

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 6 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(36155938932, 
 9215591, 
 1, 
 8160782784, 
 6,
 5, 
 6, 
 17, 
 15, 
 15,
 538900, 
 128856, 
 (SELECT id FROM stat_types WHERE code = 'DEF_PCT'), 
 63,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    12,
    0,
    8
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 8 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_FLAT'),
    311,
    1,
    14
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_FLAT')
    AND is_ancient = 0
    AND 14 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    21,
    0,
    14
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 14 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    5,
    0,
    -2
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND -2 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 16312)
AND slot_number = 6;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 16312), 
    @last_rune_id, 
    6
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 16312);

-- Rune ID: 43441948095

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 1 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(43441948095, 
 9215591, 
 1, 
 8323337189, 
 1,
 5, 
 6, 
 13, 
 15, 
 12,
 662530, 
 69126, 
 (SELECT id FROM stat_types WHERE code = 'ATK_FLAT'), 
 118,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    6,
    0,
    2
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 2 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ACC'),
    14,
    0,
    14
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ACC')
    AND is_ancient = 0
    AND 14 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    17,
    0,
    13
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 13 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'),
    4,
    0,
    4
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_DMG')
    AND is_ancient = 0
    AND 4 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 21812)
AND slot_number = 1;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 21812), 
    @last_rune_id, 
    1
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 21812);

-- Rune ID: 43037663643

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 2 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(43037663643, 
 9215591, 
 1, 
 8323337189, 
 2,
 5, 
 6, 
 7, 
 15, 
 15,
 443800, 
 130190, 
 (SELECT id FROM stat_types WHERE code = 'SPD'), 
 42,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    19,
    0,
    13
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 13 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_FLAT'),
    15,
    0,
    0
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_FLAT')
    AND is_ancient = 0
    AND 0 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    9,
    1,
    2
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND 2 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    22,
    0,
    15
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 15 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 21812)
AND slot_number = 2;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 21812), 
    @last_rune_id, 
    2
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 21812);

-- Rune ID: 41119929386

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 3 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(41119929386, 
 9215591, 
 1, 
 8323337189, 
 3,
 5, 
 6, 
 13, 
 15, 
 15,
 523050, 
 126152, 
 (SELECT id FROM stat_types WHERE code = 'DEF_FLAT'), 
 160,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    21,
    0,
    14
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND 14 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    4,
    0,
    4
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 4 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'RES'),
    4,
    0,
    4
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'RES')
    AND is_ancient = 0
    AND 4 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    21,
    0,
    21
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 21 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 21812)
AND slot_number = 3;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 21812), 
    @last_rune_id, 
    3
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 21812);

-- Rune ID: 42916987424

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 6 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(42916987424, 
 9215591, 
 1, 
 8323337189, 
 6,
 5, 
 6, 
 13, 
 15, 
 12,
 592790, 
 65639, 
 (SELECT id FROM stat_types WHERE code = 'DEF_PCT'), 
 47,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    10,
    0,
    10
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 10 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_FLAT'),
    48,
    0,
    26
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_FLAT')
    AND is_ancient = 0
    AND 26 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    8,
    0,
    8
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 8 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_FLAT'),
    19,
    0,
    19
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_FLAT')
    AND is_ancient = 0
    AND 19 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 21812)
AND slot_number = 6;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 21812), 
    @last_rune_id, 
    6
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 21812);

-- Rune ID: 45281376593

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 1 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(45281376593, 
 9215591, 
 1, 
 8586992007, 
 1,
 5, 
 6, 
 13, 
 15, 
 12,
 722760, 
 72138, 
 (SELECT id FROM stat_types WHERE code = 'ATK_FLAT'), 
 118,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 253, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    17,
    0,
    17
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 17 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    5,
    0,
    5
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 5 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    15,
    0,
    15
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 15 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    7,
    0,
    7
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 7 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 22012)
AND slot_number = 1;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 22012), 
    @last_rune_id, 
    1
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 22012);

-- Rune ID: 43981686786

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 2 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(43981686786, 
 9215591, 
 1, 
 8586992007, 
 2,
 5, 
 6, 
 13, 
 15, 
 12,
 697400, 
 70870, 
 (SELECT id FROM stat_types WHERE code = 'ATK_PCT'), 
 47,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_FLAT'),
    561,
    0,
    561
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_FLAT')
    AND is_ancient = 0
    AND 561 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    15,
    0,
    15
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 15 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'),
    5,
    0,
    5
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_DMG')
    AND is_ancient = 0
    AND 5 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    12,
    0,
    12
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 12 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 22012)
AND slot_number = 2;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 22012), 
    @last_rune_id, 
    2
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 22012);

-- Rune ID: 45371565884

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 3 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(45371565884, 
 9215591, 
 1, 
 8586992007, 
 3,
 5, 
 6, 
 13, 
 15, 
 12,
 570600, 
 64530, 
 (SELECT id FROM stat_types WHERE code = 'DEF_FLAT'), 
 118,
 (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'), 
 6, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    6,
    0,
    6
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 6 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ACC'),
    4,
    0,
    4
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ACC')
    AND is_ancient = 0
    AND 4 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    29,
    0,
    29
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 29 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_FLAT'),
    622,
    0,
    237
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_FLAT')
    AND is_ancient = 0
    AND 237 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 22012)
AND slot_number = 3;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 22012), 
    @last_rune_id, 
    3
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 22012);

-- Rune ID: 44870082735

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 4 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_DMG')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(44870082735, 
 9215591, 
 1, 
 8586992007, 
 4,
 5, 
 6, 
 17, 
 15, 
 12,
 570600, 
 66554, 
 (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'), 
 59,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    11,
    0,
    8
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 8 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    16,
    0,
    16
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 16 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    5,
    0,
    -1
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND -1 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_FLAT'),
    14,
    0,
    14
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_FLAT')
    AND is_ancient = 0
    AND 14 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 22012)
AND slot_number = 4;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 22012), 
    @last_rune_id, 
    4
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 22012);

-- Rune ID: 35992663252

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 5 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(35992663252, 
 9215591, 
 1, 
 8586992007, 
 5,
 5, 
 6, 
 17, 
 15, 
 12,
 507200, 
 63159, 
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 1800,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    14,
    0,
    9
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 9 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ACC'),
    5,
    0,
    5
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ACC')
    AND is_ancient = 0
    AND 5 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    15,
    0,
    15
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 15 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    10,
    0,
    6
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 6 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 22012)
AND slot_number = 5;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 22012), 
    @last_rune_id, 
    5
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 22012);

-- Rune ID: 42751694917

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 6 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'ACC')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(42751694917, 
 9215591, 
 1, 
 8586992007, 
 6,
 5, 
 6, 
 13, 
 15, 
 12,
 592790, 
 65639, 
 (SELECT id FROM stat_types WHERE code = 'ACC'), 
 48,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    10,
    0,
    10
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 10 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'),
    7,
    0,
    7
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_DMG')
    AND is_ancient = 0
    AND 7 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'RES'),
    8,
    0,
    8
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'RES')
    AND is_ancient = 0
    AND 8 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    24,
    0,
    24
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND 24 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 22012)
AND slot_number = 6;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 22012), 
    @last_rune_id, 
    6
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 22012);

-- Rune ID: 34326925703

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 2 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(34326925703, 
 9215591, 
 1, 
 9409567582, 
 2,
 5, 
 6, 
 19, 
 15, 
 15,
 634000, 
 133949, 
 (SELECT id FROM stat_types WHERE code = 'ATK_PCT'), 
 63,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    6,
    0,
    6
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 6 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_FLAT'),
    55,
    0,
    55
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_FLAT')
    AND is_ancient = 0
    AND 55 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'RES'),
    13,
    0,
    13
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'RES')
    AND is_ancient = 0
    AND 13 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_FLAT'),
    10,
    0,
    10
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_FLAT')
    AND is_ancient = 0
    AND 10 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 15512)
AND slot_number = 2;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 15512), 
    @last_rune_id, 
    2
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 15512);

-- Rune ID: 43921121516

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 4 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(43921121516, 
 9215591, 
 1, 
 9409567582, 
 4,
 1, 
 1, 
 15, 
 15, 
 0,
 7020, 
 845, 
 (SELECT id FROM stat_types WHERE code = 'HP_PCT'), 
 1,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'rare',
 0,
 'normal',
 'normal',
 1,
 0);

SET @last_rune_id = LAST_INSERT_ID();

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 15512)
AND slot_number = 4;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 15512), 
    @last_rune_id, 
    4
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 15512);

-- Rune ID: 34313510270

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 5 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(34313510270, 
 9215591, 
 1, 
 9409567582, 
 5,
 5, 
 6, 
 19, 
 15, 
 12,
 557920, 
 65875, 
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 1800,
 (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'), 
 6, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    17,
    0,
    17
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 17 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'RES'),
    6,
    0,
    6
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'RES')
    AND is_ancient = 0
    AND 6 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_FLAT'),
    22,
    0,
    22
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_FLAT')
    AND is_ancient = 0
    AND 22 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ACC'),
    13,
    0,
    13
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ACC')
    AND is_ancient = 0
    AND 13 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 15512)
AND slot_number = 5;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 15512), 
    @last_rune_id, 
    5
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 15512);

-- Rune ID: 43921174873

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 6 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(43921174873, 
 9215591, 
 1, 
 9409567582, 
 6,
 1, 
 3, 
 15, 
 15, 
 0,
 34170, 
 2823, 
 (SELECT id FROM stat_types WHERE code = 'DEF_FLAT'), 
 7,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'rare',
 0,
 'normal',
 'normal',
 1,
 0);

SET @last_rune_id = LAST_INSERT_ID();

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 15512)
AND slot_number = 6;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 15512), 
    @last_rune_id, 
    6
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 15512);

-- Rune ID: 36297719105

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 1 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(36297719105, 
 9215591, 
 1, 
 9464392105, 
 1,
 5, 
 6, 
 13, 
 15, 
 15,
 722760, 
 136138, 
 (SELECT id FROM stat_types WHERE code = 'ATK_FLAT'), 
 160,
 (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'), 
 5, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    19,
    0,
    13
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 13 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    8,
    0,
    -2
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND -2 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    11,
    0,
    8
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 8 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_FLAT'),
    316,
    0,
    -232
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_FLAT')
    AND is_ancient = 0
    AND -232 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 19212)
AND slot_number = 1;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 19212), 
    @last_rune_id, 
    1
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 19212);

-- Rune ID: 36605233645

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 2 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(36605233645, 
 9215591, 
 1, 
 9464392105, 
 2,
 5, 
 6, 
 13, 
 15, 
 15,
 697400, 
 134870, 
 (SELECT id FROM stat_types WHERE code = 'SPD'), 
 42,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    9,
    0,
    9
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 9 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    14,
    0,
    7
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 7 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    16,
    0,
    9
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 9 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    8,
    1,
    2
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND 2 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_upgrades 
(rune_id, level_reached, stat_type_id, old_value, new_value, upgrade_date)
SELECT 
    @last_rune_id,
    3,
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    2.0,
    8.0,
    NOW();

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 19212)
AND slot_number = 2;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 19212), 
    @last_rune_id, 
    2
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 19212);

-- Rune ID: 22497286960

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 3 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(22497286960, 
 9215591, 
 1, 
 9464392105, 
 3,
 5, 
 6, 
 15, 
 15, 
 15,
 523050, 
 128008, 
 (SELECT id FROM stat_types WHERE code = 'DEF_FLAT'), 
 160,
 (SELECT id FROM stat_types WHERE code = 'RES'), 
 6, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ACC'),
    8,
    1,
    8
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ACC')
    AND is_ancient = 0
    AND 8 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    16,
    0,
    11
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 11 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    6,
    0,
    -1
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND -1 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    20,
    0,
    13
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 13 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 19212)
AND slot_number = 3;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 19212), 
    @last_rune_id, 
    3
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 19212);

-- Rune ID: 33705315588

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 4 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(33705315588, 
 9215591, 
 1, 
 9464392105, 
 4,
 5, 
 6, 
 15, 
 15, 
 15,
 627660, 
 133609, 
 (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'), 
 58,
 (SELECT id FROM stat_types WHERE code = 'RES'), 
 5, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    11,
    1,
    4
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 4 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    13,
    0,
    7
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 7 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_FLAT'),
    318,
    0,
    -126
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_FLAT')
    AND is_ancient = 0
    AND -126 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    20,
    0,
    16
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 16 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 19212)
AND slot_number = 4;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 19212), 
    @last_rune_id, 
    4
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 19212);

-- Rune ID: 31164543553

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 5 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(31164543553, 
 9215591, 
 1, 
 9464392105, 
 5,
 5, 
 6, 
 13, 
 15, 
 15,
 557920, 
 127896, 
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 2448,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    11,
    0,
    4
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 4 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    7,
    1,
    3
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 3 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    22,
    0,
    18
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 18 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    8,
    0,
    1
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND 1 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 19212)
AND slot_number = 5;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 19212), 
    @last_rune_id, 
    5
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 19212);

-- Rune ID: 25364946469

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 6 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(25364946469, 
 9215591, 
 1, 
 9464392105, 
 6,
 5, 
 6, 
 13, 
 15, 
 15,
 646680, 
 132334, 
 (SELECT id FROM stat_types WHERE code = 'ATK_PCT'), 
 63,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 158, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    11,
    0,
    7
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 7 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    21,
    0,
    15
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 15 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    8,
    1,
    2
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND 2 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    11,
    0,
    11
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 11 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 19212)
AND slot_number = 6;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 19212), 
    @last_rune_id, 
    6
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 19212);

-- Rune ID: 19653929728

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 3 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(19653929728, 
 9215591, 
 1, 
 9499788786, 
 3,
 5, 
 6, 
 5, 
 15, 
 15,
 570600, 
 128530, 
 (SELECT id FROM stat_types WHERE code = 'DEF_FLAT'), 
 160,
 (SELECT id FROM stat_types WHERE code = 'SPD'), 
 4, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_FLAT'),
    617,
    0,
    155
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_FLAT')
    AND is_ancient = 0
    AND 155 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'),
    21,
    0,
    21
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_DMG')
    AND is_ancient = 0
    AND 21 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    7,
    1,
    7
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 7 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    8,
    0,
    -2
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND -2 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 22612)
AND slot_number = 3;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 22612), 
    @last_rune_id, 
    3
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 22612);

-- Rune ID: 40984285762

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 5 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(40984285762, 
 9215591, 
 1, 
 9499788786, 
 5,
 5, 
 6, 
 5, 
 15, 
 12,
 557920, 
 63896, 
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 1800,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    9,
    1,
    3
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 3 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    4,
    0,
    0
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 0 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'),
    25,
    0,
    25
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_DMG')
    AND is_ancient = 0
    AND 25 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_FLAT'),
    12,
    0,
    -5
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_FLAT')
    AND is_ancient = 0
    AND -5 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 22612)
AND slot_number = 5;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 22612), 
    @last_rune_id, 
    5
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 22612);

-- Rune ID: 40807209643

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 6 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(40807209643, 
 9215591, 
 1, 
 9499788786, 
 6,
 5, 
 6, 
 5, 
 15, 
 15,
 592790, 
 129639, 
 (SELECT id FROM stat_types WHERE code = 'ATK_PCT'), 
 63,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    6,
    0,
    2
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 2 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_FLAT'),
    23,
    1,
    3
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_FLAT')
    AND is_ancient = 0
    AND 3 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    31,
    0,
    22
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND 22 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'),
    6,
    0,
    6
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_DMG')
    AND is_ancient = 0
    AND 6 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 22612)
AND slot_number = 6;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 22612), 
    @last_rune_id, 
    6
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 22612);

-- Rune ID: 24148959051

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 1 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(24148959051, 
 9215591, 
 1, 
 9598098048, 
 1,
 5, 
 6, 
 19, 
 15, 
 12,
 662530, 
 71476, 
 (SELECT id FROM stat_types WHERE code = 'ATK_FLAT'), 
 118,
 (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'), 
 5, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    14,
    0,
    7
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 7 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ACC'),
    12,
    0,
    12
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ACC')
    AND is_ancient = 0
    AND 12 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_FLAT'),
    318,
    0,
    -224
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_FLAT')
    AND is_ancient = 0
    AND -224 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    4,
    0,
    4
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 4 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 20112)
AND slot_number = 1;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 20112), 
    @last_rune_id, 
    1
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 20112);

-- Rune ID: 30849586106

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 2 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(30849586106, 
 9215591, 
 1, 
 9598098048, 
 2,
 5, 
 6, 
 19, 
 15, 
 15,
 634000, 
 133949, 
 (SELECT id FROM stat_types WHERE code = 'HP_PCT'), 
 63,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_FLAT'),
    38,
    0,
    13
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_FLAT')
    AND is_ancient = 0
    AND 13 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    10,
    0,
    5
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 5 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    5,
    0,
    5
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 5 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    15,
    0,
    8
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND 8 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 20112)
AND slot_number = 2;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 20112), 
    @last_rune_id, 
    2
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 20112);

-- Rune ID: 41014469267

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 5 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(41014469267, 
 9215591, 
 1, 
 9598098048, 
 5,
 5, 
 6, 
 25, 
 15, 
 12,
 608640, 
 66432, 
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 1800,
 (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'), 
 5, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    14,
    0,
    9
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND 9 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    12,
    0,
    12
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 12 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    14,
    0,
    14
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 14 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    9,
    1,
    9
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 9 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_upgrades 
(rune_id, level_reached, stat_type_id, old_value, new_value, upgrade_date)
SELECT 
    @last_rune_id,
    3,
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    9.0,
    9.0,
    NOW();

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 20112)
AND slot_number = 5;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 20112), 
    @last_rune_id, 
    5
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 20112);

-- Rune ID: 32176942553

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 1 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(32176942553, 
 9215591, 
 1, 
 9660378696, 
 1,
 5, 
 6, 
 8, 
 15, 
 12,
 451725, 
 68179, 
 (SELECT id FROM stat_types WHERE code = 'ATK_FLAT'), 
 118,
 (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'), 
 5, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    8,
    0,
    1
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 1 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    11,
    0,
    8
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 8 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'),
    20,
    0,
    20
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_DMG')
    AND is_ancient = 0
    AND 20 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    7,
    0,
    1
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 1 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 12032)
AND slot_number = 1;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 12032), 
    @last_rune_id, 
    1
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 12032);

-- Rune ID: 32324094167

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 2 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(32324094167, 
 9215591, 
 1, 
 9660378696, 
 2,
 5, 
 6, 
 8, 
 15, 
 15,
 412100, 
 129357, 
 (SELECT id FROM stat_types WHERE code = 'ATK_PCT'), 
 63,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    15,
    0,
    8
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND 8 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    12,
    0,
    12
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 12 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    15,
    0,
    8
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 8 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'),
    5,
    1,
    5
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_DMG')
    AND is_ancient = 0
    AND 5 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_upgrades 
(rune_id, level_reached, stat_type_id, old_value, new_value, upgrade_date)
SELECT 
    @last_rune_id,
    3,
    (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'),
    5.0,
    5.0,
    NOW();

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 12032)
AND slot_number = 2;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 12032), 
    @last_rune_id, 
    2
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 12032);

-- Rune ID: 30994382941

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 4 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_DMG')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(30994382941, 
 9215591, 
 1, 
 9660378696, 
 4,
 5, 
 6, 
 8, 
 15, 
 15,
 427950, 
 130486, 
 (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'), 
 80,
 (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'), 
 6, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_FLAT'),
    24,
    1,
    8
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_FLAT')
    AND is_ancient = 0
    AND 8 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    12,
    0,
    4
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 4 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    14,
    0,
    7
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND 7 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    21,
    0,
    14
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 14 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 12032)
AND slot_number = 4;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 12032), 
    @last_rune_id, 
    4
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 12032);

-- Rune ID: 44821827910

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 5 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(44821827910, 
 9215591, 
 1, 
 9660378696, 
 5,
 5, 
 6, 
 8, 
 15, 
 12,
 329680, 
 59485, 
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 1800,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    11,
    0,
    11
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 11 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    18,
    0,
    15
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 15 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    9,
    1,
    4
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 4 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'),
    12,
    0,
    12
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_DMG')
    AND is_ancient = 0
    AND 12 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 12032)
AND slot_number = 5;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 12032), 
    @last_rune_id, 
    5
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 12032);

-- Rune ID: 41773660615

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 1 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(41773660615, 
 9215591, 
 1, 
 9753017078, 
 1,
 5, 
 6, 
 14, 
 15, 
 15,
 662530, 
 135476, 
 (SELECT id FROM stat_types WHERE code = 'ATK_FLAT'), 
 160,
 (SELECT id FROM stat_types WHERE code = 'RES'), 
 8, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    19,
    0,
    13
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 13 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    16,
    0,
    16
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 16 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    8,
    0,
    1
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 1 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'),
    5,
    0,
    5
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_DMG')
    AND is_ancient = 0
    AND 5 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 13512)
AND slot_number = 1;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 13512), 
    @last_rune_id, 
    1
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 13512);

-- Rune ID: 40855019177

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 2 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(40855019177, 
 9215591, 
 1, 
 9753017078, 
 2,
 5, 
 6, 
 11, 
 15, 
 15,
 634000, 
 133949, 
 (SELECT id FROM stat_types WHERE code = 'SPD'), 
 42,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    30,
    0,
    23
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND 23 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_FLAT'),
    15,
    0,
    -1
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_FLAT')
    AND is_ancient = 0
    AND -1 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    6,
    0,
    -1
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND -1 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    4,
    0,
    4
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 4 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 13512)
AND slot_number = 2;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 13512), 
    @last_rune_id, 
    2
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 13512);

-- Rune ID: 40966189452

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 3 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(40966189452, 
 9215591, 
 1, 
 9753017078, 
 3,
 5, 
 6, 
 14, 
 15, 
 12,
 523050, 
 64008, 
 (SELECT id FROM stat_types WHERE code = 'DEF_FLAT'), 
 118,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 288, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    10,
    0,
    6
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 6 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    11,
    1,
    5
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND 5 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    15,
    0,
    15
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 15 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    8,
    0,
    2
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 2 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 13512)
AND slot_number = 3;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 13512), 
    @last_rune_id, 
    3
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 13512);

-- Rune ID: 41560167407

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 4 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(41560167407, 
 9215591, 
 1, 
 9753017078, 
 4,
 5, 
 6, 
 11, 
 15, 
 12,
 570600, 
 66554, 
 (SELECT id FROM stat_types WHERE code = 'ATK_PCT'), 
 47,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_FLAT'),
    228,
    0,
    -269
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_FLAT')
    AND is_ancient = 0
    AND -269 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'RES'),
    27,
    0,
    27
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'RES')
    AND is_ancient = 0
    AND 27 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    10,
    1,
    0
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 0 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ACC'),
    12,
    0,
    12
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ACC')
    AND is_ancient = 0
    AND 12 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 13512)
AND slot_number = 4;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 13512), 
    @last_rune_id, 
    4
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 13512);

-- Rune ID: 20910232994

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 5 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(20910232994, 
 9215591, 
 1, 
 9753017078, 
 5,
 5, 
 6, 
 11, 
 15, 
 15,
 557920, 
 129875, 
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 2448,
 (SELECT id FROM stat_types WHERE code = 'ACC'), 
 5, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    16,
    0,
    16
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 16 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    14,
    0,
    7
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 7 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    13,
    1,
    7
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 7 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    9,
    0,
    4
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 4 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 13512)
AND slot_number = 5;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 13512), 
    @last_rune_id, 
    5
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 13512);

-- Rune ID: 40881767553

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 6 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(40881767553, 
 9215591, 
 1, 
 9753017078, 
 6,
 5, 
 6, 
 11, 
 15, 
 15,
 592790, 
 131742, 
 (SELECT id FROM stat_types WHERE code = 'HP_PCT'), 
 63,
 (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'), 
 4, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_FLAT'),
    510,
    0,
    219
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_FLAT')
    AND is_ancient = 0
    AND 219 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    6,
    0,
    2
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 2 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    17,
    0,
    13
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 13 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    8,
    1,
    5
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND 5 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_upgrades 
(rune_id, level_reached, stat_type_id, old_value, new_value, upgrade_date)
SELECT 
    @last_rune_id,
    3,
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    5.0,
    8.0,
    NOW();

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 13512)
AND slot_number = 6;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 13512), 
    @last_rune_id, 
    6
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 13512);

-- Rune ID: 32738516660

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 1 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(32738516660, 
 9215591, 
 1, 
 10001557027, 
 1,
 5, 
 6, 
 18, 
 15, 
 15,
 602300, 
 132251, 
 (SELECT id FROM stat_types WHERE code = 'ATK_FLAT'), 
 160,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    10,
    1,
    3
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 3 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    17,
    0,
    13
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 13 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    15,
    0,
    15
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 15 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    6,
    0,
    -1
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND -1 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 16612)
AND slot_number = 1;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 16612), 
    @last_rune_id, 
    1
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 16612);

-- Rune ID: 34885985887

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 2 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(34885985887, 
 9215591, 
 1, 
 10001557027, 
 2,
 15, 
 16, 
 18, 
 15, 
 15,
 760800, 
 140738, 
 (SELECT id FROM stat_types WHERE code = 'ATK_PCT'), 
 63,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    24,
    0,
    24
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 1
    AND 24 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    13,
    0,
    10
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 1
    AND 10 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    9,
    0,
    9
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 1
    AND 9 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'),
    10,
    1,
    10
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_DMG')
    AND is_ancient = 1
    AND 10 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_upgrades 
(rune_id, level_reached, stat_type_id, old_value, new_value, upgrade_date)
SELECT 
    @last_rune_id,
    3,
    (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'),
    10.0,
    10.0,
    NOW();

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 16612)
AND slot_number = 2;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 16612), 
    @last_rune_id, 
    2
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 16612);

-- Rune ID: 33088514823

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 3 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(33088514823, 
 9215591, 
 1, 
 10001557027, 
 3,
 5, 
 6, 
 11, 
 15, 
 12,
 523050, 
 64008, 
 (SELECT id FROM stat_types WHERE code = 'DEF_FLAT'), 
 118,
 (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'), 
 5, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    15,
    0,
    8
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 8 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    15,
    0,
    11
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 11 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    10,
    1,
    3
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND 3 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    12,
    0,
    12
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 12 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 16612)
AND slot_number = 3;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 16612), 
    @last_rune_id, 
    3
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 16612);

-- Rune ID: 41597030377

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 4 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_DMG')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(41597030377, 
 9215591, 
 1, 
 10001557027, 
 4,
 5, 
 6, 
 11, 
 15, 
 15,
 570600, 
 130554, 
 (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'), 
 80,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ACC'),
    8,
    0,
    8
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ACC')
    AND is_ancient = 0
    AND 8 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    18,
    0,
    14
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 14 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    21,
    0,
    14
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 14 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    6,
    0,
    6
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 6 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 16612)
AND slot_number = 4;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 16612), 
    @last_rune_id, 
    4
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 16612);

-- Rune ID: 41531842383

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 5 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(41531842383, 
 9215591, 
 1, 
 10001557027, 
 5,
 5, 
 6, 
 11, 
 15, 
 12,
 557920, 
 65875, 
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 1800,
 (SELECT id FROM stat_types WHERE code = 'ATK_FLAT'), 
 15, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'),
    5,
    1,
    5
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_DMG')
    AND is_ancient = 0
    AND 5 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    5,
    0,
    5
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 5 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    24,
    0,
    20
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 20 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    6,
    0,
    -1
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND -1 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 16612)
AND slot_number = 5;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 16612), 
    @last_rune_id, 
    5
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 16612);

-- Rune ID: 41006549321

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 6 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(41006549321, 
 9215591, 
 1, 
 10001557027, 
 6,
 5, 
 6, 
 11, 
 15, 
 15,
 538900, 
 128856, 
 (SELECT id FROM stat_types WHERE code = 'ATK_PCT'), 
 63,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    9,
    0,
    9
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 9 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    16,
    0,
    12
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 12 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    8,
    1,
    1
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 1 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_FLAT'),
    17,
    0,
    1
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_FLAT')
    AND is_ancient = 0
    AND 1 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 16612)
AND slot_number = 6;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 16612), 
    @last_rune_id, 
    6
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 16612);

-- Rune ID: 41623097507

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 1 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(41623097507, 
 9215591, 
 1, 
 10004982167, 
 1,
 5, 
 6, 
 5, 
 15, 
 12,
 662530, 
 69126, 
 (SELECT id FROM stat_types WHERE code = 'ATK_FLAT'), 
 118,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_FLAT'),
    221,
    0,
    -150
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_FLAT')
    AND is_ancient = 0
    AND -150 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    15,
    0,
    15
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 15 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    11,
    1,
    5
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 5 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    16,
    0,
    12
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 12 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 24112)
AND slot_number = 1;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 24112), 
    @last_rune_id, 
    1
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 24112);

-- Rune ID: 39935957365

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 2 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(39935957365, 
 9215591, 
 1, 
 10004982167, 
 2,
 5, 
 6, 
 7, 
 15, 
 15,
 507200, 
 134503, 
 (SELECT id FROM stat_types WHERE code = 'SPD'), 
 42,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 195, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    13,
    0,
    7
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 7 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    5,
    0,
    5
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 5 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    21,
    0,
    14
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND 14 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    11,
    1,
    4
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 4 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_upgrades 
(rune_id, level_reached, stat_type_id, old_value, new_value, upgrade_date)
SELECT 
    @last_rune_id,
    3,
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    4.0,
    11.0,
    NOW();

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 24112)
AND slot_number = 2;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 24112), 
    @last_rune_id, 
    2
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 24112);

-- Rune ID: 41664403118

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 3 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(41664403118, 
 9215591, 
 1, 
 10004982167, 
 3,
 5, 
 6, 
 5, 
 15, 
 15,
 523050, 
 126152, 
 (SELECT id FROM stat_types WHERE code = 'DEF_FLAT'), 
 160,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    19,
    0,
    19
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 19 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    4,
    0,
    0
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 0 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    9,
    1,
    2
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 2 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'),
    6,
    0,
    6
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_DMG')
    AND is_ancient = 0
    AND 6 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 24112)
AND slot_number = 3;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 24112), 
    @last_rune_id, 
    3
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 24112);

-- Rune ID: 37979060720

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 4 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_DMG')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(37979060720, 
 9215591, 
 1, 
 10004982167, 
 4,
 15, 
 16, 
 22, 
 15, 
 15,
 684720, 
 136665, 
 (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'), 
 80,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    9,
    0,
    -1
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 1
    AND -1 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    16,
    0,
    7
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 1
    AND 7 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    19,
    0,
    14
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 1
    AND 14 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    13,
    1,
    4
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 1
    AND 4 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_upgrades 
(rune_id, level_reached, stat_type_id, old_value, new_value, upgrade_date)
SELECT 
    @last_rune_id,
    3,
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    4.0,
    13.0,
    NOW();

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 24112)
AND slot_number = 4;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 24112), 
    @last_rune_id, 
    4
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 24112);

-- Rune ID: 21895865597

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 5 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(21895865597, 
 9215591, 
 1, 
 10004982167, 
 5,
 5, 
 6, 
 5, 
 15, 
 15,
 557920, 
 127896, 
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 2448,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    12,
    0,
    8
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 8 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    6,
    0,
    6
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 6 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    18,
    0,
    11
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 11 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'),
    7,
    1,
    7
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_DMG')
    AND is_ancient = 0
    AND 7 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_upgrades 
(rune_id, level_reached, stat_type_id, old_value, new_value, upgrade_date)
SELECT 
    @last_rune_id,
    3,
    (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'),
    7.0,
    7.0,
    NOW();

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 24112)
AND slot_number = 5;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 24112), 
    @last_rune_id, 
    5
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 24112);

-- Rune ID: 21895865598

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 6 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(21895865598, 
 9215591, 
 1, 
 10004982167, 
 6,
 5, 
 6, 
 5, 
 15, 
 15,
 592790, 
 129639, 
 (SELECT id FROM stat_types WHERE code = 'ATK_PCT'), 
 63,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'),
    12,
    0,
    12
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_DMG')
    AND is_ancient = 0
    AND 12 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_FLAT'),
    23,
    1,
    0
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_FLAT')
    AND is_ancient = 0
    AND 0 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    15,
    0,
    8
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 8 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ACC'),
    8,
    0,
    8
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ACC')
    AND is_ancient = 0
    AND 8 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 24112)
AND slot_number = 6;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 24112), 
    @last_rune_id, 
    6
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 24112);

-- Rune ID: 39473118432

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 1 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(39473118432, 
 9215591, 
 1, 
 10252443362, 
 1,
 5, 
 6, 
 4, 
 15, 
 12,
 451725, 
 68179, 
 (SELECT id FROM stat_types WHERE code = 'ATK_FLAT'), 
 118,
 (SELECT id FROM stat_types WHERE code = 'SPD'), 
 4, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    7,
    1,
    0
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 0 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'),
    12,
    0,
    12
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_DMG')
    AND is_ancient = 0
    AND 12 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    16,
    0,
    16
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 16 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    7,
    0,
    0
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 0 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 11032)
AND slot_number = 1;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 11032), 
    @last_rune_id, 
    1
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 11032);

-- Rune ID: 28243390965

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 2 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(28243390965, 
 9215591, 
 1, 
 10252443362, 
 2,
 5, 
 6, 
 4, 
 15, 
 15,
 475500, 
 133873, 
 (SELECT id FROM stat_types WHERE code = 'ATK_PCT'), 
 63,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 172, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'),
    7,
    0,
    7
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_DMG')
    AND is_ancient = 0
    AND 7 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    18,
    0,
    18
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 18 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ACC'),
    4,
    0,
    4
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ACC')
    AND is_ancient = 0
    AND 4 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    8,
    1,
    4
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 4 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_upgrades 
(rune_id, level_reached, stat_type_id, old_value, new_value, upgrade_date)
SELECT 
    @last_rune_id,
    3,
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    4.0,
    8.0,
    NOW();

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 11032)
AND slot_number = 2;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 11032), 
    @last_rune_id, 
    2
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 11032);

-- Rune ID: 41773944531

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 3 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(41773944531, 
 9215591, 
 1, 
 10252443362, 
 3,
 5, 
 6, 
 5, 
 15, 
 15,
 570600, 
 128530, 
 (SELECT id FROM stat_types WHERE code = 'DEF_FLAT'), 
 160,
 (SELECT id FROM stat_types WHERE code = 'HP_PCT'), 
 5, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    10,
    0,
    10
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 10 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'),
    17,
    0,
    17
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_DMG')
    AND is_ancient = 0
    AND 17 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    10,
    0,
    6
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 6 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    8,
    0,
    1
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND 1 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 11032)
AND slot_number = 3;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 11032), 
    @last_rune_id, 
    3
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 11032);

-- Rune ID: 44831486600

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 4 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_DMG')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(44831486600, 
 9215591, 
 1, 
 10252443362, 
 4,
 5, 
 6, 
 5, 
 15, 
 15,
 684720, 
 134236, 
 (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'), 
 80,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 321, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    18,
    0,
    11
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 11 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    10,
    0,
    6
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 6 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_FLAT'),
    28,
    0,
    6
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_FLAT')
    AND is_ancient = 0
    AND 6 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    5,
    0,
    5
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 5 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 11032)
AND slot_number = 4;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 11032), 
    @last_rune_id, 
    4
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 11032);

-- Rune ID: 34968662073

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 5 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(34968662073, 
 9215591, 
 1, 
 10252443362, 
 5,
 5, 
 6, 
 5, 
 15, 
 15,
 557920, 
 127896, 
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 2448,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    7,
    1,
    7
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 7 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'),
    17,
    0,
    17
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_DMG')
    AND is_ancient = 0
    AND 17 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    12,
    0,
    2
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 2 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    6,
    0,
    2
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 2 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 11032)
AND slot_number = 5;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 11032), 
    @last_rune_id, 
    5
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 11032);

-- Rune ID: 43794503826

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 1 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(43794503826, 
 9215591, 
 1, 
 10283244496, 
 1,
 5, 
 6, 
 13, 
 15, 
 12,
 662530, 
 69126, 
 (SELECT id FROM stat_types WHERE code = 'ATK_FLAT'), 
 118,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    9,
    0,
    9
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 9 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'),
    11,
    0,
    11
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_DMG')
    AND is_ancient = 0
    AND 11 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    5,
    0,
    5
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 5 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    16,
    0,
    16
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 16 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 21012)
AND slot_number = 1;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 21012), 
    @last_rune_id, 
    1
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 21012);

-- Rune ID: 43342550853

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 2 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(43342550853, 
 9215591, 
 1, 
 10283244496, 
 2,
 5, 
 6, 
 13, 
 15, 
 15,
 697400, 
 134870, 
 (SELECT id FROM stat_types WHERE code = 'HP_PCT'), 
 63,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_FLAT'),
    15,
    0,
    -7
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_FLAT')
    AND is_ancient = 0
    AND -7 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    20,
    0,
    13
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND 13 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    12,
    0,
    8
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 8 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    6,
    0,
    6
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 6 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 21012)
AND slot_number = 2;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 21012), 
    @last_rune_id, 
    2
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 21012);

-- Rune ID: 40011395883

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 3 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(40011395883, 
 9215591, 
 1, 
 10283244496, 
 3,
 5, 
 6, 
 13, 
 15, 
 12,
 523050, 
 62152, 
 (SELECT id FROM stat_types WHERE code = 'DEF_FLAT'), 
 118,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    14,
    0,
    10
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND 10 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    6,
    0,
    6
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 6 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    16,
    0,
    16
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 16 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    9,
    1,
    9
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 9 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_upgrades 
(rune_id, level_reached, stat_type_id, old_value, new_value, upgrade_date)
SELECT 
    @last_rune_id,
    3,
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    9.0,
    9.0,
    NOW();

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 21012)
AND slot_number = 3;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 21012), 
    @last_rune_id, 
    3
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 21012);

-- Rune ID: 29012644193

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 4 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(29012644193, 
 9215591, 
 1, 
 10283244496, 
 4,
 5, 
 6, 
 15, 
 15, 
 15,
 627660, 
 133609, 
 (SELECT id FROM stat_types WHERE code = 'DEF_PCT'), 
 63,
 (SELECT id FROM stat_types WHERE code = 'DEF_FLAT'), 
 16, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    18,
    0,
    13
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 13 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ACC'),
    14,
    0,
    14
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ACC')
    AND is_ancient = 0
    AND 14 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    8,
    0,
    5
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 5 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    11,
    0,
    11
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 11 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 21012)
AND slot_number = 4;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 21012), 
    @last_rune_id, 
    4
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 21012);

-- Rune ID: 40307072253

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 5 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(40307072253, 
 9215591, 
 1, 
 10283244496, 
 5,
 5, 
 6, 
 13, 
 15, 
 12,
 557920, 
 63896, 
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 1800,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    17,
    0,
    17
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 17 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'RES'),
    5,
    0,
    5
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'RES')
    AND is_ancient = 0
    AND 5 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    10,
    0,
    5
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 5 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    6,
    0,
    6
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 6 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 21012)
AND slot_number = 5;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 21012), 
    @last_rune_id, 
    5
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 21012);

-- Rune ID: 41629179666

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 6 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(41629179666, 
 9215591, 
 1, 
 10283244496, 
 6,
 5, 
 6, 
 15, 
 15, 
 15,
 592790, 
 131742, 
 (SELECT id FROM stat_types WHERE code = 'DEF_PCT'), 
 63,
 (SELECT id FROM stat_types WHERE code = 'RES'), 
 8, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_FLAT'),
    461,
    0,
    -21
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_FLAT')
    AND is_ancient = 0
    AND -21 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ACC'),
    16,
    0,
    16
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ACC')
    AND is_ancient = 0
    AND 16 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    10,
    0,
    6
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 6 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_FLAT'),
    14,
    0,
    1
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_FLAT')
    AND is_ancient = 0
    AND 1 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 21012)
AND slot_number = 6;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 21012), 
    @last_rune_id, 
    6
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 21012);

-- Rune ID: 34351250929

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 1 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(34351250929, 
 9215591, 
 1, 
 10541867987, 
 1,
 5, 
 6, 
 19, 
 15, 
 12,
 662530, 
 71476, 
 (SELECT id FROM stat_types WHERE code = 'ATK_FLAT'), 
 118,
 (SELECT id FROM stat_types WHERE code = 'ACC'), 
 5, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    18,
    0,
    11
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 11 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    10,
    0,
    10
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 10 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_FLAT'),
    269,
    0,
    -259
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_FLAT')
    AND is_ancient = 0
    AND -259 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'),
    7,
    0,
    7
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_DMG')
    AND is_ancient = 0
    AND 7 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 12112)
AND slot_number = 1;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 12112), 
    @last_rune_id, 
    1
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 12112);

-- Rune ID: 45624604228

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 2 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(45624604228, 
 9215591, 
 1, 
 10541867987, 
 2,
 5, 
 6, 
 15, 
 15, 
 12,
 697400, 
 73344, 
 (SELECT id FROM stat_types WHERE code = 'SPD'), 
 31,
 (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'), 
 4, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_FLAT'),
    322,
    0,
    322
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_FLAT')
    AND is_ancient = 0
    AND 322 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'RES'),
    5,
    0,
    5
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'RES')
    AND is_ancient = 0
    AND 5 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ACC'),
    9,
    0,
    9
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ACC')
    AND is_ancient = 0
    AND 9 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    25,
    0,
    25
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 25 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 12112)
AND slot_number = 2;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 12112), 
    @last_rune_id, 
    2
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 12112);

-- Rune ID: 42626740315

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 3 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(42626740315, 
 9215591, 
 1, 
 10541867987, 
 3,
 5, 
 6, 
 19, 
 15, 
 12,
 523050, 
 64008, 
 (SELECT id FROM stat_types WHERE code = 'DEF_FLAT'), 
 118,
 (SELECT id FROM stat_types WHERE code = 'DEF_PCT'), 
 7, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'RES'),
    24,
    0,
    24
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'RES')
    AND is_ancient = 0
    AND 24 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ACC'),
    4,
    0,
    4
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ACC')
    AND is_ancient = 0
    AND 4 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    10,
    0,
    6
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 6 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    5,
    0,
    5
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 5 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 12112)
AND slot_number = 3;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 12112), 
    @last_rune_id, 
    3
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 12112);

-- Rune ID: 34326922089

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 5 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(34326922089, 
 9215591, 
 1, 
 10541867987, 
 5,
 5, 
 6, 
 19, 
 15, 
 12,
 557920, 
 65875, 
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 1800,
 (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'), 
 4, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    12,
    0,
    8
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 8 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    13,
    0,
    6
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND 6 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    5,
    0,
    -2
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND -2 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ACC'),
    9,
    1,
    9
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ACC')
    AND is_ancient = 0
    AND 9 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_upgrades 
(rune_id, level_reached, stat_type_id, old_value, new_value, upgrade_date)
SELECT 
    @last_rune_id,
    3,
    (SELECT id FROM stat_types WHERE code = 'ACC'),
    9.0,
    9.0,
    NOW();

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 12112)
AND slot_number = 5;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 12112), 
    @last_rune_id, 
    5
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 12112);

-- Rune ID: 39937786557

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 6 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(39937786557, 
 9215591, 
 1, 
 10541867987, 
 6,
 5, 
 6, 
 19, 
 15, 
 15,
 592790, 
 131742, 
 (SELECT id FROM stat_types WHERE code = 'DEF_PCT'), 
 63,
 (SELECT id FROM stat_types WHERE code = 'HP_PCT'), 
 5, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    11,
    0,
    8
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 8 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    17,
    0,
    17
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 17 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_FLAT'),
    18,
    0,
    18
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_FLAT')
    AND is_ancient = 0
    AND 18 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    11,
    0,
    11
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 11 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 12112)
AND slot_number = 6;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 12112), 
    @last_rune_id, 
    6
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 12112);

-- Rune ID: 35952333876

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 1 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(35952333876, 
 9215591, 
 1, 
 10689170428, 
 1,
 5, 
 6, 
 13, 
 15, 
 15,
 662530, 
 133126, 
 (SELECT id FROM stat_types WHERE code = 'ATK_FLAT'), 
 160,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    16,
    0,
    12
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 12 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ACC'),
    12,
    0,
    12
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ACC')
    AND is_ancient = 0
    AND 12 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_FLAT'),
    238,
    0,
    -170
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_FLAT')
    AND is_ancient = 0
    AND -170 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    9,
    1,
    4
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 4 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_upgrades 
(rune_id, level_reached, stat_type_id, old_value, new_value, upgrade_date)
SELECT 
    @last_rune_id,
    3,
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    4.0,
    9.0,
    NOW();

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 20412)
AND slot_number = 1;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 20412), 
    @last_rune_id, 
    1
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 20412);

-- Rune ID: 35175358234

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 3 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(35175358234, 
 9215591, 
 1, 
 10689170428, 
 3,
 5, 
 6, 
 1, 
 15, 
 15,
 332850, 
 124885, 
 (SELECT id FROM stat_types WHERE code = 'DEF_FLAT'), 
 160,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 262, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'RES'),
    5,
    0,
    5
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'RES')
    AND is_ancient = 0
    AND 5 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    20,
    0,
    16
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 16 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    9,
    1,
    3
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND 3 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    6,
    0,
    -1
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND -1 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 20412)
AND slot_number = 3;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 20412), 
    @last_rune_id, 
    3
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 20412);

-- Rune ID: 35359356758

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 5 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(35359356758, 
 9215591, 
 1, 
 10689170428, 
 5,
 5, 
 6, 
 1, 
 15, 
 15,
 304320, 
 122752, 
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 2448,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    22,
    0,
    18
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 18 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    11,
    1,
    5
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND 5 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    6,
    0,
    0
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 0 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'RES'),
    14,
    0,
    14
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'RES')
    AND is_ancient = 0
    AND 14 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 20412)
AND slot_number = 5;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 20412), 
    @last_rune_id, 
    5
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 20412);

-- Rune ID: 26650141071

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 1 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(26650141071, 
 9215591, 
 1, 
 10736828381, 
 1,
 5, 
 6, 
 15, 
 15, 
 15,
 662530, 
 135476, 
 (SELECT id FROM stat_types WHERE code = 'ATK_FLAT'), 
 160,
 (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'), 
 4, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    15,
    0,
    8
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 8 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    16,
    0,
    12
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 12 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    10,
    1,
    3
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 3 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_FLAT'),
    326,
    0,
    -142
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_FLAT')
    AND is_ancient = 0
    AND -142 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 10332)
AND slot_number = 1;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 10332), 
    @last_rune_id, 
    1
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 10332);

-- Rune ID: 41387293495

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 2 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(41387293495, 
 9215591, 
 1, 
 10736828381, 
 2,
 5, 
 6, 
 19, 
 15, 
 15,
 634000, 
 133949, 
 (SELECT id FROM stat_types WHERE code = 'HP_PCT'), 
 63,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    16,
    0,
    16
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 16 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ACC'),
    8,
    0,
    8
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ACC')
    AND is_ancient = 0
    AND 8 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    11,
    0,
    11
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 11 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_FLAT'),
    17,
    0,
    17
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_FLAT')
    AND is_ancient = 0
    AND 17 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 10332)
AND slot_number = 2;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 10332), 
    @last_rune_id, 
    2
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 10332);

-- Rune ID: 32870545012

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 4 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(32870545012, 
 9215591, 
 1, 
 10736828381, 
 4,
 5, 
 6, 
 19, 
 15, 
 15,
 570600, 
 130554, 
 (SELECT id FROM stat_types WHERE code = 'DEF_PCT'), 
 63,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ACC'),
    6,
    0,
    6
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ACC')
    AND is_ancient = 0
    AND 6 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    12,
    0,
    8
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 8 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    20,
    0,
    13
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 13 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    8,
    1,
    1
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 1 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_upgrades 
(rune_id, level_reached, stat_type_id, old_value, new_value, upgrade_date)
SELECT 
    @last_rune_id,
    3,
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    1.0,
    8.0,
    NOW();

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 10332)
AND slot_number = 4;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 10332), 
    @last_rune_id, 
    4
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 10332);

-- Rune ID: 21547815218

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 5 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(21547815218, 
 9215591, 
 1, 
 10736828381, 
 5,
 5, 
 6, 
 15, 
 15, 
 15,
 507200, 
 127159, 
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 2448,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    21,
    0,
    16
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 16 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    6,
    0,
    2
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 2 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    12,
    0,
    5
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND 5 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    8,
    0,
    1
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 1 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 10332)
AND slot_number = 5;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 10332), 
    @last_rune_id, 
    5
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 10332);

-- Rune ID: 44264527059

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 6 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(44264527059, 
 9215591, 
 1, 
 10736828381, 
 6,
 5, 
 6, 
 15, 
 15, 
 15,
 538900, 
 128856, 
 (SELECT id FROM stat_types WHERE code = 'HP_PCT'), 
 63,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    19,
    0,
    19
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 19 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    6,
    0,
    6
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 6 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    6,
    0,
    3
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND 3 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    15,
    0,
    12
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 12 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 10332)
AND slot_number = 6;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 10332), 
    @last_rune_id, 
    6
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 10332);

-- Rune ID: 41459896469

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 1 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(41459896469, 
 9215591, 
 1, 
 10933211174, 
 1,
 5, 
 6, 
 2, 
 15, 
 12,
 421610, 
 64680, 
 (SELECT id FROM stat_types WHERE code = 'ATK_FLAT'), 
 118,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    20,
    0,
    16
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 16 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_FLAT'),
    272,
    0,
    -163
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_FLAT')
    AND is_ancient = 0
    AND -163 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    8,
    1,
    2
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 2 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    7,
    0,
    1
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 1 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 21212)
AND slot_number = 1;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 21212), 
    @last_rune_id, 
    1
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 21212);

-- Rune ID: 23157353021

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 3 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(23157353021, 
 9215591, 
 1, 
 10933211174, 
 3,
 5, 
 6, 
 2, 
 15, 
 15,
 380400, 
 125877, 
 (SELECT id FROM stat_types WHERE code = 'DEF_FLAT'), 
 160,
 (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'), 
 4, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    21,
    0,
    14
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND 14 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    6,
    0,
    -1
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND -1 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    11,
    0,
    7
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 7 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_FLAT'),
    313,
    1,
    -116
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_FLAT')
    AND is_ancient = 0
    AND -116 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_upgrades 
(rune_id, level_reached, stat_type_id, old_value, new_value, upgrade_date)
SELECT 
    @last_rune_id,
    3,
    (SELECT id FROM stat_types WHERE code = 'HP_FLAT'),
    -116.0,
    313.0,
    NOW();

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 21212)
AND slot_number = 3;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 21212), 
    @last_rune_id, 
    3
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 21212);

-- Rune ID: 41320535391

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 5 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(41320535391, 
 9215591, 
 1, 
 10933211174, 
 5,
 5, 
 6, 
 13, 
 15, 
 12,
 608640, 
 66432, 
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 1800,
 (SELECT id FROM stat_types WHERE code = 'RES'), 
 5, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    6,
    0,
    6
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND 6 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    11,
    0,
    11
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 11 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    11,
    0,
    11
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 11 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ACC'),
    17,
    0,
    17
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ACC')
    AND is_ancient = 0
    AND 17 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 21212)
AND slot_number = 5;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 21212), 
    @last_rune_id, 
    5
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 21212);

-- Rune ID: 43367815348

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 6 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'ACC')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(43367815348, 
 9215591, 
 1, 
 10933211174, 
 6,
 5, 
 6, 
 13, 
 15, 
 15,
 592790, 
 129639, 
 (SELECT id FROM stat_types WHERE code = 'ACC'), 
 64,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    7,
    0,
    1
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 1 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_FLAT'),
    244,
    0,
    -205
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_FLAT')
    AND is_ancient = 0
    AND -205 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    19,
    0,
    16
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 16 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    5,
    0,
    5
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 5 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 21212)
AND slot_number = 6;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 21212), 
    @last_rune_id, 
    6
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 21212);

-- Rune ID: 32280543344

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 2 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(32280543344, 
 9215591, 
 1, 
 10942616154, 
 2,
 5, 
 6, 
 15, 
 15, 
 15,
 697400, 
 137344, 
 (SELECT id FROM stat_types WHERE code = 'SPD'), 
 42,
 (SELECT id FROM stat_types WHERE code = 'DEF_FLAT'), 
 16, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ACC'),
    21,
    0,
    21
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ACC')
    AND is_ancient = 0
    AND 21 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_FLAT'),
    497,
    0,
    58
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_FLAT')
    AND is_ancient = 0
    AND 58 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    9,
    1,
    2
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 2 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    10,
    0,
    4
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND 4 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 16032)
AND slot_number = 2;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 16032), 
    @last_rune_id, 
    2
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 16032);

-- Rune ID: 31810494548

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 3 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(31810494548, 
 9215591, 
 1, 
 10942616154, 
 3,
 15, 
 16, 
 16, 
 15, 
 12,
 627660, 
 69609, 
 (SELECT id FROM stat_types WHERE code = 'DEF_FLAT'), 
 118,
 (SELECT id FROM stat_types WHERE code = 'DEF_PCT'), 
 7, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    18,
    0,
    18
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 1
    AND 18 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_FLAT'),
    428,
    0,
    428
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_FLAT')
    AND is_ancient = 1
    AND 428 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ACC'),
    16,
    0,
    16
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ACC')
    AND is_ancient = 1
    AND 16 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    8,
    0,
    -2
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 1
    AND -2 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 16032)
AND slot_number = 3;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 16032), 
    @last_rune_id, 
    3
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 16032);

-- Rune ID: 33307342626

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 4 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(33307342626, 
 9215591, 
 1, 
 10942616154, 
 4,
 5, 
 6, 
 15, 
 15, 
 15,
 627660, 
 133609, 
 (SELECT id FROM stat_types WHERE code = 'DEF_PCT'), 
 63,
 (SELECT id FROM stat_types WHERE code = 'ATK_PCT'), 
 6, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    5,
    0,
    1
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 1 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ACC'),
    11,
    0,
    11
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ACC')
    AND is_ancient = 0
    AND 11 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_FLAT'),
    230,
    0,
    -121
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_FLAT')
    AND is_ancient = 0
    AND -121 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'RES'),
    25,
    0,
    25
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'RES')
    AND is_ancient = 0
    AND 25 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 16032)
AND slot_number = 4;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 16032), 
    @last_rune_id, 
    4
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 16032);

-- Rune ID: 44575736852

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 5 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(44575736852, 
 9215591, 
 1, 
 10942616154, 
 5,
 5, 
 6, 
 16, 
 15, 
 12,
 557920, 
 65875, 
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 1800,
 (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'), 
 6, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    10,
    0,
    6
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 6 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_FLAT'),
    12,
    0,
    -1
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_FLAT')
    AND is_ancient = 0
    AND -1 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    21,
    0,
    14
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 14 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    13,
    0,
    6
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND 6 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 16032)
AND slot_number = 5;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 16032), 
    @last_rune_id, 
    5
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 16032);

-- Rune ID: 40757896656

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 2 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(40757896656, 
 9215591, 
 1, 
 11328140268, 
 2,
 5, 
 6, 
 11, 
 15, 
 12,
 634000, 
 69949, 
 (SELECT id FROM stat_types WHERE code = 'SPD'), 
 31,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'RES'),
    15,
    0,
    15
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'RES')
    AND is_ancient = 0
    AND 15 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_FLAT'),
    17,
    0,
    17
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_FLAT')
    AND is_ancient = 0
    AND 17 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    20,
    0,
    13
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 13 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    8,
    0,
    1
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 1 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 18012)
AND slot_number = 2;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 18012), 
    @last_rune_id, 
    2
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 18012);

-- Rune ID: 42869972961

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 3 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(42869972961, 
 9215591, 
 1, 
 11328140268, 
 3,
 5, 
 6, 
 22, 
 15, 
 12,
 523050, 
 64008, 
 (SELECT id FROM stat_types WHERE code = 'DEF_FLAT'), 
 118,
 (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'), 
 4, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    24,
    0,
    20
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND 20 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    16,
    0,
    11
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 11 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    10,
    1,
    3
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 3 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ACC'),
    7,
    0,
    7
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ACC')
    AND is_ancient = 0
    AND 7 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 18012)
AND slot_number = 3;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 18012), 
    @last_rune_id, 
    3
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 18012);

-- Rune ID: 43143996016

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 4 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(43143996016, 
 9215591, 
 1, 
 11328140268, 
 4,
 5, 
 6, 
 10, 
 15, 
 15,
 684720, 
 134236, 
 (SELECT id FROM stat_types WHERE code = 'DEF_PCT'), 
 63,
 (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'), 
 5, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_FLAT'),
    604,
    0,
    117
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_FLAT')
    AND is_ancient = 0
    AND 117 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    6,
    0,
    2
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 2 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_FLAT'),
    12,
    0,
    -6
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_FLAT')
    AND is_ancient = 0
    AND -6 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    20,
    0,
    17
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 17 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 18012)
AND slot_number = 4;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 18012), 
    @last_rune_id, 
    4
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 18012);

-- Rune ID: 21115154381

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 5 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(21115154381, 
 9215591, 
 1, 
 11328140268, 
 5,
 5, 
 6, 
 21, 
 15, 
 15,
 557920, 
 129875, 
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 2448,
 (SELECT id FROM stat_types WHERE code = 'ACC'), 
 6, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    7,
    0,
    0
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 0 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    16,
    0,
    12
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 12 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    19,
    0,
    11
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND 11 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    9,
    1,
    2
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 2 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_upgrades 
(rune_id, level_reached, stat_type_id, old_value, new_value, upgrade_date)
SELECT 
    @last_rune_id,
    3,
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    2.0,
    9.0,
    NOW();

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 18012)
AND slot_number = 5;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 18012), 
    @last_rune_id, 
    5
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 18012);

-- Rune ID: 31591610108

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 1 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(31591610108, 
 9215591, 
 1, 
 11463299552, 
 1,
 5, 
 6, 
 18, 
 15, 
 15,
 662530, 
 135476, 
 (SELECT id FROM stat_types WHERE code = 'ATK_FLAT'), 
 160,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 139, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    12,
    0,
    12
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 12 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    15,
    0,
    10
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 10 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    8,
    0,
    -2
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND -2 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    9,
    1,
    1
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 1 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_upgrades 
(rune_id, level_reached, stat_type_id, old_value, new_value, upgrade_date)
SELECT 
    @last_rune_id,
    3,
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    1.0,
    9.0,
    NOW();

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 15712)
AND slot_number = 1;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 15712), 
    @last_rune_id, 
    1
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 15712);

-- Rune ID: 32181214976

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 2 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(32181214976, 
 9215591, 
 1, 
 11463299552, 
 2,
 15, 
 16, 
 10, 
 15, 
 15,
 836880, 
 141844, 
 (SELECT id FROM stat_types WHERE code = 'SPD'), 
 42,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ACC'),
    6,
    0,
    6
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ACC')
    AND is_ancient = 1
    AND 6 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    30,
    0,
    25
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 1
    AND 25 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    13,
    1,
    2
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 1
    AND 2 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    13,
    0,
    4
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 1
    AND 4 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 15712)
AND slot_number = 2;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 15712), 
    @last_rune_id, 
    2
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 15712);

-- Rune ID: 43218461216

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 3 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(43218461216, 
 9215591, 
 1, 
 11463299552, 
 3,
 5, 
 6, 
 10, 
 15, 
 15,
 523050, 
 126152, 
 (SELECT id FROM stat_types WHERE code = 'DEF_FLAT'), 
 160,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    6,
    0,
    0
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND 0 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    23,
    0,
    19
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 19 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    11,
    0,
    3
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 3 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_FLAT'),
    577,
    1,
    106
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_FLAT')
    AND is_ancient = 0
    AND 106 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_upgrades 
(rune_id, level_reached, stat_type_id, old_value, new_value, upgrade_date)
SELECT 
    @last_rune_id,
    3,
    (SELECT id FROM stat_types WHERE code = 'HP_FLAT'),
    106.0,
    577.0,
    NOW();

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 15712)
AND slot_number = 3;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 15712), 
    @last_rune_id, 
    3
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 15712);

-- Rune ID: 38903207803

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 4 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(38903207803, 
 9215591, 
 1, 
 11463299552, 
 4,
 15, 
 16, 
 10, 
 15, 
 15,
 753192, 
 137659, 
 (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'), 
 58,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    22,
    0,
    15
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 1
    AND 15 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    14,
    0,
    5
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 1
    AND 5 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ACC'),
    7,
    0,
    7
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ACC')
    AND is_ancient = 1
    AND 7 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    11,
    1,
    2
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 1
    AND 2 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_upgrades 
(rune_id, level_reached, stat_type_id, old_value, new_value, upgrade_date)
SELECT 
    @last_rune_id,
    3,
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    2.0,
    11.0,
    NOW();

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 15712)
AND slot_number = 4;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 15712), 
    @last_rune_id, 
    4
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 15712);

-- Rune ID: 40066437720

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 5 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(40066437720, 
 9215591, 
 1, 
 11463299552, 
 5,
 15, 
 16, 
 10, 
 15, 
 15,
 730368, 
 136518, 
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 2448,
 (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'), 
 6, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    17,
    0,
    13
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 1
    AND 13 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    7,
    0,
    -1
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 1
    AND -1 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    12,
    1,
    1
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 1
    AND 1 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    19,
    0,
    13
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 1
    AND 13 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 15712)
AND slot_number = 5;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 15712), 
    @last_rune_id, 
    5
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 15712);

-- Rune ID: 24038282308

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 6 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(24038282308, 
 9215591, 
 1, 
 11463299552, 
 6,
 15, 
 16, 
 18, 
 15, 
 15,
 646680, 
 134628, 
 (SELECT id FROM stat_types WHERE code = 'HP_PCT'), 
 63,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ACC'),
    6,
    1,
    6
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ACC')
    AND is_ancient = 1
    AND 6 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    10,
    0,
    4
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 1
    AND 4 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    17,
    0,
    12
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 1
    AND 12 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    21,
    0,
    13
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 1
    AND 13 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 15712)
AND slot_number = 6;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 15712), 
    @last_rune_id, 
    6
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 15712);

-- Rune ID: 44538412732

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 1 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(44538412732, 
 9215591, 
 1, 
 11463638121, 
 1,
 5, 
 6, 
 13, 
 15, 
 12,
 722760, 
 72138, 
 (SELECT id FROM stat_types WHERE code = 'ATK_FLAT'), 
 118,
 (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'), 
 6, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'RES'),
    22,
    0,
    22
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'RES')
    AND is_ancient = 0
    AND 22 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    7,
    0,
    7
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 7 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    11,
    0,
    11
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 11 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_FLAT'),
    206,
    0,
    206
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_FLAT')
    AND is_ancient = 0
    AND 206 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 21412)
AND slot_number = 1;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 21412), 
    @last_rune_id, 
    1
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 21412);

-- Rune ID: 45647896538

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 2 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(45647896538, 
 9215591, 
 1, 
 11463638121, 
 2,
 5, 
 6, 
 13, 
 15, 
 12,
 697400, 
 70870, 
 (SELECT id FROM stat_types WHERE code = 'HP_PCT'), 
 47,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'),
    5,
    0,
    5
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_DMG')
    AND is_ancient = 0
    AND 5 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    20,
    0,
    20
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 20 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'RES'),
    4,
    0,
    4
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'RES')
    AND is_ancient = 0
    AND 4 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    5,
    0,
    5
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND 5 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 21412)
AND slot_number = 2;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 21412), 
    @last_rune_id, 
    2
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 21412);

-- Rune ID: 24553138455

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 3 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(24553138455, 
 9215591, 
 1, 
 11463638121, 
 3,
 5, 
 6, 
 13, 
 15, 
 12,
 523050, 
 62152, 
 (SELECT id FROM stat_types WHERE code = 'DEF_FLAT'), 
 118,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    26,
    0,
    22
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND 22 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    4,
    0,
    4
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 4 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'RES'),
    8,
    0,
    8
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'RES')
    AND is_ancient = 0
    AND 8 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    8,
    1,
    3
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 3 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_upgrades 
(rune_id, level_reached, stat_type_id, old_value, new_value, upgrade_date)
SELECT 
    @last_rune_id,
    3,
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    3.0,
    8.0,
    NOW();

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 21412)
AND slot_number = 3;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 21412), 
    @last_rune_id, 
    3
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 21412);

-- Rune ID: 33088938100

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 4 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_DMG')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(33088938100, 
 9215591, 
 1, 
 11463638121, 
 4,
 5, 
 6, 
 14, 
 15, 
 12,
 627660, 
 69609, 
 (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'), 
 59,
 (SELECT id FROM stat_types WHERE code = 'RES'), 
 7, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    10,
    0,
    10
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 10 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    11,
    1,
    4
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 4 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    20,
    0,
    14
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND 14 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    8,
    0,
    1
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 1 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 21412)
AND slot_number = 4;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 21412), 
    @last_rune_id, 
    4
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 21412);

-- Rune ID: 41981767920

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 5 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(41981767920, 
 9215591, 
 1, 
 11463638121, 
 5,
 5, 
 6, 
 14, 
 15, 
 12,
 557920, 
 65875, 
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 1800,
 (SELECT id FROM stat_types WHERE code = 'DEF_FLAT'), 
 14, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    12,
    1,
    3
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND 3 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    11,
    0,
    8
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 8 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ACC'),
    5,
    0,
    5
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ACC')
    AND is_ancient = 0
    AND 5 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'RES'),
    29,
    0,
    29
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'RES')
    AND is_ancient = 0
    AND 29 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 21412)
AND slot_number = 5;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 21412), 
    @last_rune_id, 
    5
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 21412);

-- Rune ID: 41596812123

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 4 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_DMG')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(41596812123, 
 9215591, 
 1, 
 11552355019, 
 4,
 5, 
 6, 
 11, 
 15, 
 15,
 627660, 
 133609, 
 (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'), 
 80,
 (SELECT id FROM stat_types WHERE code = 'RES'), 
 4, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_FLAT'),
    16,
    1,
    -3
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_FLAT')
    AND is_ancient = 0
    AND -3 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    28,
    0,
    22
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 22 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    5,
    0,
    5
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 5 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    5,
    0,
    -2
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND -2 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 19812)
AND slot_number = 4;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 19812), 
    @last_rune_id, 
    4
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 19812);

-- Rune ID: 32676597542

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 5 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(32676597542, 
 9215591, 
 1, 
 11552355019, 
 5,
 5, 
 6, 
 11, 
 15, 
 15,
 557920, 
 129875, 
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 2448,
 (SELECT id FROM stat_types WHERE code = 'ACC'), 
 4, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'),
    6,
    0,
    6
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_DMG')
    AND is_ancient = 0
    AND 6 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    23,
    0,
    13
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 13 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    10,
    0,
    10
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 10 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    7,
    1,
    3
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 3 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_upgrades 
(rune_id, level_reached, stat_type_id, old_value, new_value, upgrade_date)
SELECT 
    @last_rune_id,
    3,
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    3.0,
    7.0,
    NOW();

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 19812)
AND slot_number = 5;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 19812), 
    @last_rune_id, 
    5
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 19812);

-- Rune ID: 42206819382

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 1 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(42206819382, 
 9215591, 
 1, 
 11605432652, 
 1,
 5, 
 6, 
 8, 
 15, 
 15,
 391495, 
 127889, 
 (SELECT id FROM stat_types WHERE code = 'ATK_FLAT'), 
 160,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    21,
    0,
    21
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 21 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    14,
    0,
    14
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 14 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ACC'),
    14,
    0,
    14
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ACC')
    AND is_ancient = 0
    AND 14 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    5,
    0,
    5
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 5 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 25112)
AND slot_number = 1;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 25112), 
    @last_rune_id, 
    1
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 25112);

-- Rune ID: 35574032472

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 2 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(35574032472, 
 9215591, 
 1, 
 11605432652, 
 2,
 15, 
 16, 
 2, 
 15, 
 15,
 532560, 
 136228, 
 (SELECT id FROM stat_types WHERE code = 'ATK_PCT'), 
 63,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    17,
    0,
    17
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 1
    AND 17 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ACC'),
    18,
    0,
    18
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ACC')
    AND is_ancient = 1
    AND 18 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    7,
    0,
    2
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 1
    AND 2 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    10,
    1,
    2
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 1
    AND 2 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_upgrades 
(rune_id, level_reached, stat_type_id, old_value, new_value, upgrade_date)
SELECT 
    @last_rune_id,
    3,
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    2.0,
    10.0,
    NOW();

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 25112)
AND slot_number = 2;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 25112), 
    @last_rune_id, 
    2
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 25112);

-- Rune ID: 44764041065

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 3 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(44764041065, 
 9215591, 
 1, 
 11605432652, 
 3,
 5, 
 6, 
 2, 
 15, 
 12,
 332850, 
 58642, 
 (SELECT id FROM stat_types WHERE code = 'DEF_FLAT'), 
 118,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    22,
    0,
    18
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 18 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ACC'),
    5,
    0,
    5
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ACC')
    AND is_ancient = 0
    AND 5 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    4,
    0,
    4
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 4 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    5,
    0,
    -2
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND -2 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 25112)
AND slot_number = 3;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 25112), 
    @last_rune_id, 
    3
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 25112);

-- Rune ID: 37025176893

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 4 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(37025176893, 
 9215591, 
 1, 
 11605432652, 
 4,
 5, 
 6, 
 8, 
 15, 
 15,
 427950, 
 130486, 
 (SELECT id FROM stat_types WHERE code = 'ATK_PCT'), 
 63,
 (SELECT id FROM stat_types WHERE code = 'RES'), 
 4, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_FLAT'),
    41,
    0,
    12
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_FLAT')
    AND is_ancient = 0
    AND 12 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    5,
    0,
    -2
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND -2 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    12,
    0,
    9
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 9 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    6,
    0,
    0
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 0 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 25112)
AND slot_number = 4;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 25112), 
    @last_rune_id, 
    4
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 25112);

-- Rune ID: 32172165785

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 5 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(32172165785, 
 9215591, 
 1, 
 11605432652, 
 5,
 5, 
 6, 
 8, 
 15, 
 12,
 380400, 
 63098, 
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 1800,
 (SELECT id FROM stat_types WHERE code = 'DEF_FLAT'), 
 20, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    13,
    0,
    7
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND 7 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    5,
    0,
    1
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 1 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    21,
    0,
    14
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 14 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_FLAT'),
    30,
    1,
    30
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_FLAT')
    AND is_ancient = 0
    AND 30 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_upgrades 
(rune_id, level_reached, stat_type_id, old_value, new_value, upgrade_date)
SELECT 
    @last_rune_id,
    3,
    (SELECT id FROM stat_types WHERE code = 'ATK_FLAT'),
    30.0,
    30.0,
    NOW();

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 25112)
AND slot_number = 5;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 25112), 
    @last_rune_id, 
    5
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 25112);

-- Rune ID: 42005152634

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 6 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(42005152634, 
 9215591, 
 1, 
 11605432652, 
 6,
 5, 
 6, 
 8, 
 15, 
 15,
 350285, 
 124953, 
 (SELECT id FROM stat_types WHERE code = 'ATK_PCT'), 
 63,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_FLAT'),
    179,
    0,
    -255
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_FLAT')
    AND is_ancient = 0
    AND -255 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    11,
    0,
    7
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 7 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_FLAT'),
    44,
    0,
    18
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_FLAT')
    AND is_ancient = 0
    AND 18 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    7,
    1,
    7
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 7 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_upgrades 
(rune_id, level_reached, stat_type_id, old_value, new_value, upgrade_date)
SELECT 
    @last_rune_id,
    3,
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    7.0,
    7.0,
    NOW();

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 25112)
AND slot_number = 6;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 25112), 
    @last_rune_id, 
    6
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 25112);

-- Rune ID: 40386385716

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 3 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(40386385716, 
 9215591, 
 1, 
 12286045671, 
 3,
 5, 
 6, 
 13, 
 15, 
 15,
 570600, 
 128530, 
 (SELECT id FROM stat_types WHERE code = 'DEF_FLAT'), 
 160,
 (SELECT id FROM stat_types WHERE code = 'RES'), 
 5, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    12,
    0,
    12
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 12 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_FLAT'),
    369,
    0,
    15
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_FLAT')
    AND is_ancient = 0
    AND 15 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    16,
    0,
    14
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 14 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    9,
    1,
    4
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 4 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_upgrades 
(rune_id, level_reached, stat_type_id, old_value, new_value, upgrade_date)
SELECT 
    @last_rune_id,
    3,
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    4.0,
    9.0,
    NOW();

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 22712)
AND slot_number = 3;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 22712), 
    @last_rune_id, 
    3
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 22712);

-- Rune ID: 40766697792

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 6 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(40766697792, 
 9215591, 
 1, 
 12286045671, 
 6,
 5, 
 6, 
 18, 
 15, 
 15,
 538900, 
 128856, 
 (SELECT id FROM stat_types WHERE code = 'HP_PCT'), 
 63,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    15,
    0,
    11
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 11 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_FLAT'),
    209,
    0,
    -229
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_FLAT')
    AND is_ancient = 0
    AND -229 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    10,
    0,
    10
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 10 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    10,
    1,
    3
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 3 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_upgrades 
(rune_id, level_reached, stat_type_id, old_value, new_value, upgrade_date)
SELECT 
    @last_rune_id,
    3,
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    3.0,
    10.0,
    NOW();

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 22712)
AND slot_number = 6;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 22712), 
    @last_rune_id, 
    6
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 22712);

-- Rune ID: 32310452558

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 5 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(32310452558, 
 9215591, 
 1, 
 12731975228, 
 5,
 5, 
 6, 
 4, 
 15, 
 12,
 329680, 
 59485, 
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 1800,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    15,
    0,
    15
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 15 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'),
    6,
    0,
    6
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_DMG')
    AND is_ancient = 0
    AND 6 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    10,
    0,
    7
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 7 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    10,
    1,
    3
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 3 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_upgrades 
(rune_id, level_reached, stat_type_id, old_value, new_value, upgrade_date)
SELECT 
    @last_rune_id,
    3,
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    3.0,
    10.0,
    NOW();

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 23512)
AND slot_number = 5;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 23512), 
    @last_rune_id, 
    5
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 23512);

-- Rune ID: 32883938427

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 1 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(32883938427, 
 9215591, 
 1, 
 13836276716, 
 1,
 5, 
 6, 
 6, 
 15, 
 15,
 421610, 
 128680, 
 (SELECT id FROM stat_types WHERE code = 'ATK_FLAT'), 
 160,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    10,
    0,
    6
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 6 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    7,
    0,
    0
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 0 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ACC'),
    14,
    0,
    14
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ACC')
    AND is_ancient = 0
    AND 14 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    14,
    0,
    7
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 7 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 18612)
AND slot_number = 1;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 18612), 
    @last_rune_id, 
    1
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 18612);

-- Rune ID: 28264338467

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 3 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(28264338467, 
 9215591, 
 1, 
 13836276716, 
 3,
 5, 
 6, 
 10, 
 15, 
 15,
 523050, 
 126152, 
 (SELECT id FROM stat_types WHERE code = 'DEF_FLAT'), 
 160,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    28,
    0,
    21
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND 21 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    5,
    0,
    5
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 5 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ACC'),
    8,
    1,
    8
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ACC')
    AND is_ancient = 0
    AND 8 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    10,
    0,
    5
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 5 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 18612)
AND slot_number = 3;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 18612), 
    @last_rune_id, 
    3
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 18612);

-- Rune ID: 31982381814

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 4 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(31982381814, 
 9215591, 
 1, 
 13836276716, 
 4,
 5, 
 6, 
 10, 
 15, 
 15,
 627660, 
 131383, 
 (SELECT id FROM stat_types WHERE code = 'DEF_PCT'), 
 63,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ACC'),
    5,
    0,
    5
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ACC')
    AND is_ancient = 0
    AND 5 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    18,
    0,
    14
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 14 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    15,
    0,
    8
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 8 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    10,
    1,
    4
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 4 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_upgrades 
(rune_id, level_reached, stat_type_id, old_value, new_value, upgrade_date)
SELECT 
    @last_rune_id,
    3,
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    4.0,
    10.0,
    NOW();

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 18612)
AND slot_number = 4;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 18612), 
    @last_rune_id, 
    4
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 18612);

-- Rune ID: 41859214125

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 5 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(41859214125, 
 9215591, 
 1, 
 13836276716, 
 5,
 5, 
 6, 
 10, 
 15, 
 12,
 557920, 
 63896, 
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 1800,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    23,
    0,
    23
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 23 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_FLAT'),
    20,
    0,
    7
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_FLAT')
    AND is_ancient = 0
    AND 7 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    8,
    1,
    8
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 8 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    20,
    0,
    14
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND 14 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 18612)
AND slot_number = 5;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 18612), 
    @last_rune_id, 
    5
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 18612);

-- Rune ID: 38894410069

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 6 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'ACC')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(38894410069, 
 9215591, 
 1, 
 13836276716, 
 6,
 5, 
 6, 
 10, 
 15, 
 15,
 646680, 
 132334, 
 (SELECT id FROM stat_types WHERE code = 'ACC'), 
 64,
 (SELECT id FROM stat_types WHERE code = 'HP_PCT'), 
 7, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'RES'),
    6,
    0,
    6
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'RES')
    AND is_ancient = 0
    AND 6 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    22,
    0,
    18
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 18 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    4,
    0,
    4
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 4 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    10,
    1,
    3
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND 3 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_upgrades 
(rune_id, level_reached, stat_type_id, old_value, new_value, upgrade_date)
SELECT 
    @last_rune_id,
    3,
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    3.0,
    10.0,
    NOW();

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 18612)
AND slot_number = 6;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 18612), 
    @last_rune_id, 
    6
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 18612);

-- Rune ID: 44273565493

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 1 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(44273565493, 
 9215591, 
 1, 
 13928684918, 
 1,
 5, 
 6, 
 5, 
 15, 
 12,
 722760, 
 72138, 
 (SELECT id FROM stat_types WHERE code = 'ATK_FLAT'), 
 118,
 (SELECT id FROM stat_types WHERE code = 'ACC'), 
 7, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_FLAT'),
    237,
    0,
    237
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_FLAT')
    AND is_ancient = 0
    AND 237 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    22,
    0,
    22
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 22 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'),
    6,
    0,
    6
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_DMG')
    AND is_ancient = 0
    AND 6 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    5,
    0,
    5
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 5 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 14712)
AND slot_number = 1;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 14712), 
    @last_rune_id, 
    1
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 14712);

-- Rune ID: 21844826929

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 2 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(21844826929, 
 9215591, 
 1, 
 13928684918, 
 2,
 15, 
 16, 
 5, 
 15, 
 15,
 836880, 
 141844, 
 (SELECT id FROM stat_types WHERE code = 'ATK_PCT'), 
 63,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ACC'),
    16,
    0,
    16
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ACC')
    AND is_ancient = 1
    AND 16 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'),
    20,
    0,
    20
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_DMG')
    AND is_ancient = 1
    AND 20 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_FLAT'),
    43,
    0,
    30
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_FLAT')
    AND is_ancient = 1
    AND 30 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    7,
    0,
    7
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 1
    AND 7 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 14712)
AND slot_number = 2;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 14712), 
    @last_rune_id, 
    2
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 14712);

-- Rune ID: 36339446480

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 4 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_DMG')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(36339446480, 
 9215591, 
 1, 
 13928684918, 
 4,
 5, 
 6, 
 4, 
 15, 
 15,
 370890, 
 126421, 
 (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'), 
 80,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    7,
    1,
    7
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 7 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    4,
    0,
    0
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 0 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    25,
    0,
    18
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 18 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    6,
    0,
    -1
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND -1 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 14712)
AND slot_number = 4;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 14712), 
    @last_rune_id, 
    4
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 14712);


COMMIT;

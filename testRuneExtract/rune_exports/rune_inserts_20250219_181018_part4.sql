START TRANSACTION;

-- Rune ID: 28555502889

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 4 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(28555502889, 
 9215591, 
 1, 
 16656619190, 
 4,
 15, 
 16, 
 14, 
 15, 
 15,
 684720, 
 136665, 
 (SELECT id FROM stat_types WHERE code = 'HP_PCT'), 
 63,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    18,
    0,
    10
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 1
    AND 10 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    7,
    0,
    4
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 1
    AND 4 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    11,
    0,
    11
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 1
    AND 11 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'RES'),
    20,
    0,
    20
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'RES')
    AND is_ancient = 1
    AND 20 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 17013)
AND slot_number = 4;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 17013), 
    @last_rune_id, 
    4
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 17013);

-- Rune ID: 39856905256

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 5 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(39856905256, 
 9215591, 
 1, 
 16656619190, 
 5,
 5, 
 6, 
 7, 
 15, 
 12,
 355040, 
 60152, 
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 1800,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    12,
    0,
    8
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 8 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    22,
    0,
    16
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND 16 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    8,
    0,
    1
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 1 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    11,
    1,
    4
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 4 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_upgrades 
(rune_id, level_reached, stat_type_id, old_value, new_value, upgrade_date)
SELECT 
    @last_rune_id,
    3,
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    4.0,
    11.0,
    NOW();

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 17013)
AND slot_number = 5;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 17013), 
    @last_rune_id, 
    5
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 17013);

-- Rune ID: 20253804101

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 6 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(20253804101, 
 9215591, 
 1, 
 16656619190, 
 6,
 5, 
 6, 
 15, 
 15, 
 15,
 538900, 
 128856, 
 (SELECT id FROM stat_types WHERE code = 'HP_PCT'), 
 63,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    8,
    0,
    2
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 2 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    18,
    0,
    14
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 14 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ACC'),
    9,
    1,
    9
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ACC')
    AND is_ancient = 0
    AND 9 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    15,
    0,
    8
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND 8 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 17013)
AND slot_number = 6;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 17013), 
    @last_rune_id, 
    6
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 17013);

-- Rune ID: 40543500075

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 1 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(40543500075, 
 9215591, 
 1, 
 16903975922, 
 1,
 15, 
 16, 
 10, 
 15, 
 12,
 867312, 
 79365, 
 (SELECT id FROM stat_types WHERE code = 'ATK_FLAT'), 
 118,
 (SELECT id FROM stat_types WHERE code = 'ACC'), 
 5, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    6,
    0,
    6
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 1
    AND 6 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    15,
    0,
    11
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 1
    AND 11 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    17,
    0,
    9
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 1
    AND 9 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    13,
    0,
    5
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 1
    AND 5 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 23713)
AND slot_number = 1;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 23713), 
    @last_rune_id, 
    1
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 23713);

-- Rune ID: 32753519367

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 2 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(32753519367, 
 9215591, 
 1, 
 16903975922, 
 2,
 5, 
 6, 
 6, 
 15, 
 15,
 443800, 
 130190, 
 (SELECT id FROM stat_types WHERE code = 'SPD'), 
 42,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ACC'),
    8,
    0,
    8
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ACC')
    AND is_ancient = 0
    AND 8 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    26,
    0,
    19
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND 19 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    8,
    1,
    1
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 1 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    6,
    0,
    6
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 6 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 23713)
AND slot_number = 2;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 23713), 
    @last_rune_id, 
    2
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 23713);

-- Rune ID: 39589704004

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 3 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(39589704004, 
 9215591, 
 1, 
 16903975922, 
 3,
 15, 
 16, 
 10, 
 15, 
 15,
 627660, 
 131383, 
 (SELECT id FROM stat_types WHERE code = 'DEF_FLAT'), 
 160,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    6,
    0,
    6
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 1
    AND 6 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ACC'),
    17,
    0,
    17
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ACC')
    AND is_ancient = 1
    AND 17 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    18,
    0,
    14
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 1
    AND 14 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    9,
    1,
    1
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 1
    AND 1 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_upgrades 
(rune_id, level_reached, stat_type_id, old_value, new_value, upgrade_date)
SELECT 
    @last_rune_id,
    3,
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    1.0,
    9.0,
    NOW();

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 23713)
AND slot_number = 3;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 23713), 
    @last_rune_id, 
    3
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 23713);

-- Rune ID: 36474550835

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 5 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(36474550835, 
 9215591, 
 1, 
 16903975922, 
 5,
 5, 
 6, 
 10, 
 15, 
 12,
 608640, 
 66432, 
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 1800,
 (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'), 
 6, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    17,
    0,
    14
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 14 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    11,
    0,
    6
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 6 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    7,
    0,
    2
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 2 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    10,
    1,
    3
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND 3 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_upgrades 
(rune_id, level_reached, stat_type_id, old_value, new_value, upgrade_date)
SELECT 
    @last_rune_id,
    3,
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    3.0,
    10.0,
    NOW();

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 23713)
AND slot_number = 5;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 23713), 
    @last_rune_id, 
    5
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 23713);

-- Rune ID: 42854911522

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 1 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(42854911522, 
 9215591, 
 1, 
 17018083291, 
 1,
 5, 
 6, 
 4, 
 15, 
 15,
 391495, 
 127889, 
 (SELECT id FROM stat_types WHERE code = 'ATK_FLAT'), 
 160,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    10,
    0,
    4
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 4 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    5,
    0,
    5
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 5 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    21,
    0,
    18
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 18 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'),
    8,
    1,
    8
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_DMG')
    AND is_ancient = 0
    AND 8 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_upgrades 
(rune_id, level_reached, stat_type_id, old_value, new_value, upgrade_date)
SELECT 
    @last_rune_id,
    3,
    (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'),
    8.0,
    8.0,
    NOW();

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 28513)
AND slot_number = 1;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 28513), 
    @last_rune_id, 
    1
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 28513);

-- Rune ID: 36236591259

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 2 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(36236591259, 
 9215591, 
 1, 
 17018083291, 
 2,
 5, 
 6, 
 18, 
 15, 
 12,
 634000, 
 69949, 
 (SELECT id FROM stat_types WHERE code = 'ATK_PCT'), 
 47,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    8,
    0,
    8
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 8 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    6,
    0,
    2
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 2 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    29,
    0,
    22
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND 22 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_FLAT'),
    287,
    0,
    -145
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_FLAT')
    AND is_ancient = 0
    AND -145 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 28513)
AND slot_number = 2;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 28513), 
    @last_rune_id, 
    2
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 28513);

-- Rune ID: 41243472659

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 3 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(41243472659, 
 9215591, 
 1, 
 17018083291, 
 3,
 5, 
 6, 
 16, 
 15, 
 12,
 523050, 
 64008, 
 (SELECT id FROM stat_types WHERE code = 'DEF_FLAT'), 
 118,
 (SELECT id FROM stat_types WHERE code = 'DEF_PCT'), 
 8, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    20,
    0,
    16
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 16 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    6,
    0,
    -1
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND -1 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    6,
    0,
    6
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 6 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ACC'),
    7,
    1,
    7
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ACC')
    AND is_ancient = 0
    AND 7 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_upgrades 
(rune_id, level_reached, stat_type_id, old_value, new_value, upgrade_date)
SELECT 
    @last_rune_id,
    3,
    (SELECT id FROM stat_types WHERE code = 'ACC'),
    7.0,
    7.0,
    NOW();

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 28513)
AND slot_number = 3;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 28513), 
    @last_rune_id, 
    3
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 28513);

-- Rune ID: 33625545223

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 1 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(33625545223, 
 9215591, 
 1, 
 17112395298, 
 1,
 5, 
 6, 
 18, 
 15, 
 15,
 602300, 
 132251, 
 (SELECT id FROM stat_types WHERE code = 'ATK_FLAT'), 
 160,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    22,
    0,
    15
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 15 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_FLAT'),
    247,
    0,
    -268
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_FLAT')
    AND is_ancient = 0
    AND -268 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    12,
    0,
    8
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 8 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    11,
    1,
    4
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 4 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_upgrades 
(rune_id, level_reached, stat_type_id, old_value, new_value, upgrade_date)
SELECT 
    @last_rune_id,
    3,
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    4.0,
    11.0,
    NOW();

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 25713)
AND slot_number = 1;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 25713), 
    @last_rune_id, 
    1
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 25713);

-- Rune ID: 23142663494

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 2 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(23142663494, 
 9215591, 
 1, 
 17112395298, 
 2,
 5, 
 6, 
 13, 
 15, 
 15,
 697400, 
 134870, 
 (SELECT id FROM stat_types WHERE code = 'SPD'), 
 42,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    23,
    0,
    13
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 13 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    10,
    1,
    5
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND 5 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    5,
    0,
    5
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 5 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    8,
    0,
    0
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 0 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 25713)
AND slot_number = 2;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 25713), 
    @last_rune_id, 
    2
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 25713);

-- Rune ID: 27134823693

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 3 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(27134823693, 
 9215591, 
 1, 
 17112395298, 
 3,
 5, 
 6, 
 18, 
 15, 
 15,
 475500, 
 125461, 
 (SELECT id FROM stat_types WHERE code = 'DEF_FLAT'), 
 160,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    13,
    0,
    6
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 6 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    18,
    0,
    14
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 14 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ACC'),
    6,
    0,
    6
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ACC')
    AND is_ancient = 0
    AND 6 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    12,
    1,
    3
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND 3 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_upgrades 
(rune_id, level_reached, stat_type_id, old_value, new_value, upgrade_date)
SELECT 
    @last_rune_id,
    3,
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    3.0,
    12.0,
    NOW();

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 25713)
AND slot_number = 3;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 25713), 
    @last_rune_id, 
    3
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 25713);

-- Rune ID: 41687976541

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 4 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(41687976541, 
 9215591, 
 1, 
 17112395298, 
 4,
 5, 
 6, 
 13, 
 15, 
 15,
 684720, 
 134236, 
 (SELECT id FROM stat_types WHERE code = 'HP_PCT'), 
 63,
 (SELECT id FROM stat_types WHERE code = 'ATK_FLAT'), 
 14, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    23,
    0,
    18
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 18 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    9,
    0,
    6
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 6 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    8,
    0,
    2
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND 2 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_FLAT'),
    361,
    1,
    110
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_FLAT')
    AND is_ancient = 0
    AND 110 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_upgrades 
(rune_id, level_reached, stat_type_id, old_value, new_value, upgrade_date)
SELECT 
    @last_rune_id,
    3,
    (SELECT id FROM stat_types WHERE code = 'HP_FLAT'),
    110.0,
    361.0,
    NOW();

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 25713)
AND slot_number = 4;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 25713), 
    @last_rune_id, 
    4
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 25713);

-- Rune ID: 37544897274

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 5 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(37544897274, 
 9215591, 
 1, 
 17112395298, 
 5,
 5, 
 6, 
 13, 
 15, 
 15,
 608640, 
 130432, 
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 2448,
 (SELECT id FROM stat_types WHERE code = 'ATK_FLAT'), 
 19, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    16,
    0,
    13
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 13 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    14,
    0,
    7
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND 7 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    16,
    0,
    9
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 9 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    6,
    1,
    3
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 3 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_upgrades 
(rune_id, level_reached, stat_type_id, old_value, new_value, upgrade_date)
SELECT 
    @last_rune_id,
    3,
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    3.0,
    6.0,
    NOW();

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 25713)
AND slot_number = 5;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 25713), 
    @last_rune_id, 
    5
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 25713);

-- Rune ID: 32973748854

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 6 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(32973748854, 
 9215591, 
 1, 
 17112395298, 
 6,
 5, 
 6, 
 13, 
 15, 
 15,
 646680, 
 132334, 
 (SELECT id FROM stat_types WHERE code = 'ATK_PCT'), 
 63,
 (SELECT id FROM stat_types WHERE code = 'ACC'), 
 6, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_FLAT'),
    594,
    0,
    157
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_FLAT')
    AND is_ancient = 0
    AND 157 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    22,
    0,
    16
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 16 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    10,
    0,
    6
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 6 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    9,
    1,
    3
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND 3 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_upgrades 
(rune_id, level_reached, stat_type_id, old_value, new_value, upgrade_date)
SELECT 
    @last_rune_id,
    3,
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    3.0,
    9.0,
    NOW();

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 25713)
AND slot_number = 6;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 25713), 
    @last_rune_id, 
    6
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 25713);

-- Rune ID: 45279916836

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 1 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(45279916836, 
 9215591, 
 1, 
 17169248639, 
 1,
 5, 
 6, 
 19, 
 15, 
 12,
 602300, 
 68251, 
 (SELECT id FROM stat_types WHERE code = 'ATK_FLAT'), 
 118,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    10,
    1,
    2
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 2 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    12,
    0,
    8
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 8 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    10,
    0,
    10
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 10 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'),
    17,
    0,
    17
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_DMG')
    AND is_ancient = 0
    AND 17 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 10513)
AND slot_number = 1;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 10513), 
    @last_rune_id, 
    1
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 10513);

-- Rune ID: 44276099098

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 2 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(44276099098, 
 9215591, 
 1, 
 17169248639, 
 2,
 5, 
 6, 
 19, 
 15, 
 15,
 697400, 
 137344, 
 (SELECT id FROM stat_types WHERE code = 'ATK_PCT'), 
 63,
 (SELECT id FROM stat_types WHERE code = 'SPD'), 
 4, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    19,
    0,
    19
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 19 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    13,
    0,
    9
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 9 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'),
    5,
    1,
    5
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_DMG')
    AND is_ancient = 0
    AND 5 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    7,
    0,
    0
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND 0 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 10513)
AND slot_number = 2;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 10513), 
    @last_rune_id, 
    2
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 10513);

-- Rune ID: 24501060219

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 3 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(24501060219, 
 9215591, 
 1, 
 17169248639, 
 3,
 5, 
 6, 
 19, 
 15, 
 15,
 523050, 
 128008, 
 (SELECT id FROM stat_types WHERE code = 'DEF_FLAT'), 
 160,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 351, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    10,
    0,
    10
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 10 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    8,
    1,
    1
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 1 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    11,
    0,
    7
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 7 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ACC'),
    24,
    0,
    24
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ACC')
    AND is_ancient = 0
    AND 24 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 10513)
AND slot_number = 3;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 10513), 
    @last_rune_id, 
    3
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 10513);

-- Rune ID: 22542037675

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 4 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_DMG')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(22542037675, 
 9215591, 
 1, 
 17169248639, 
 4,
 5, 
 6, 
 19, 
 15, 
 15,
 627660, 
 133609, 
 (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'), 
 80,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 168, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    23,
    0,
    15
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 15 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    6,
    0,
    0
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 0 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    10,
    0,
    10
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 10 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    8,
    1,
    4
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 4 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_upgrades 
(rune_id, level_reached, stat_type_id, old_value, new_value, upgrade_date)
SELECT 
    @last_rune_id,
    3,
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    4.0,
    8.0,
    NOW();

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 10513)
AND slot_number = 4;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 10513), 
    @last_rune_id, 
    4
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 10513);

-- Rune ID: 42333690235

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 5 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(42333690235, 
 9215591, 
 1, 
 17169248639, 
 5,
 5, 
 6, 
 19, 
 15, 
 15,
 507200, 
 127159, 
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 2448,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    15,
    0,
    11
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 11 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    13,
    0,
    6
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 6 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'),
    5,
    1,
    5
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_DMG')
    AND is_ancient = 0
    AND 5 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_FLAT'),
    11,
    0,
    -7
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_FLAT')
    AND is_ancient = 0
    AND -7 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 10513)
AND slot_number = 5;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 10513), 
    @last_rune_id, 
    5
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 10513);

-- Rune ID: 41121684826

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 1 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(41121684826, 
 9215591, 
 1, 
 17306796331, 
 1,
 5, 
 6, 
 6, 
 15, 
 12,
 421610, 
 64680, 
 (SELECT id FROM stat_types WHERE code = 'ATK_FLAT'), 
 118,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    11,
    1,
    4
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 4 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    22,
    0,
    15
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 15 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    10,
    0,
    7
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 7 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'RES'),
    7,
    0,
    7
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'RES')
    AND is_ancient = 0
    AND 7 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 20513)
AND slot_number = 1;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 20513), 
    @last_rune_id, 
    1
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 20513);

-- Rune ID: 43910142906

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 2 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(43910142906, 
 9215591, 
 1, 
 17306796331, 
 2,
 5, 
 6, 
 15, 
 15, 
 12,
 697400, 
 73344, 
 (SELECT id FROM stat_types WHERE code = 'SPD'), 
 31,
 (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'), 
 6, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ACC'),
    10,
    0,
    10
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ACC')
    AND is_ancient = 0
    AND 10 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_FLAT'),
    182,
    0,
    182
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_FLAT')
    AND is_ancient = 0
    AND 182 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'RES'),
    23,
    0,
    23
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'RES')
    AND is_ancient = 0
    AND 23 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_FLAT'),
    23,
    0,
    23
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_FLAT')
    AND is_ancient = 0
    AND 23 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 20513)
AND slot_number = 2;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 20513), 
    @last_rune_id, 
    2
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 20513);

-- Rune ID: 34622280332

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 3 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(34622280332, 
 9215591, 
 1, 
 17306796331, 
 3,
 5, 
 6, 
 6, 
 15, 
 12,
 332850, 
 58642, 
 (SELECT id FROM stat_types WHERE code = 'DEF_FLAT'), 
 118,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    6,
    0,
    -1
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND -1 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    5,
    0,
    -2
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND -2 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    20,
    0,
    16
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 16 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ACC'),
    9,
    1,
    9
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ACC')
    AND is_ancient = 0
    AND 9 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_upgrades 
(rune_id, level_reached, stat_type_id, old_value, new_value, upgrade_date)
SELECT 
    @last_rune_id,
    3,
    (SELECT id FROM stat_types WHERE code = 'ACC'),
    9.0,
    9.0,
    NOW();

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 20513)
AND slot_number = 3;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 20513), 
    @last_rune_id, 
    3
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 20513);

-- Rune ID: 44454949435

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 4 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(44454949435, 
 9215591, 
 1, 
 17306796331, 
 4,
 5, 
 6, 
 7, 
 15, 
 12,
 456480, 
 67053, 
 (SELECT id FROM stat_types WHERE code = 'ATK_PCT'), 
 47,
 (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'), 
 6, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    20,
    0,
    16
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 16 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    7,
    0,
    0
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 0 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    10,
    1,
    5
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND 5 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_FLAT'),
    20,
    0,
    5
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_FLAT')
    AND is_ancient = 0
    AND 5 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 20513)
AND slot_number = 4;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 20513), 
    @last_rune_id, 
    4
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 20513);

-- Rune ID: 45159645839

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 5 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(45159645839, 
 9215591, 
 1, 
 17306796331, 
 5,
 5, 
 6, 
 17, 
 15, 
 12,
 557920, 
 65875, 
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 1800,
 (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'), 
 5, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    22,
    0,
    15
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 15 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_FLAT'),
    14,
    0,
    -3
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_FLAT')
    AND is_ancient = 0
    AND -3 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    6,
    0,
    3
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 3 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    16,
    0,
    9
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND 9 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 20513)
AND slot_number = 5;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 20513), 
    @last_rune_id, 
    5
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 20513);

-- Rune ID: 31521034193

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 1 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(31521034193, 
 9215591, 
 1, 
 17740406780, 
 1,
 5, 
 6, 
 3, 
 15, 
 15,
 421610, 
 128680, 
 (SELECT id FROM stat_types WHERE code = 'ATK_FLAT'), 
 160,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    14,
    0,
    7
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 7 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    8,
    1,
    8
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 8 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    17,
    0,
    13
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 13 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'),
    7,
    0,
    7
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_DMG')
    AND is_ancient = 0
    AND 7 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 26113)
AND slot_number = 1;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 26113), 
    @last_rune_id, 
    1
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 26113);

-- Rune ID: 43226699620

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 2 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(43226699620, 
 9215591, 
 1, 
 17740406780, 
 2,
 5, 
 6, 
 3, 
 15, 
 15,
 507200, 
 134503, 
 (SELECT id FROM stat_types WHERE code = 'SPD'), 
 42,
 (SELECT id FROM stat_types WHERE code = 'DEF_PCT'), 
 5, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'),
    11,
    0,
    11
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_DMG')
    AND is_ancient = 0
    AND 11 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    9,
    0,
    9
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 9 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_FLAT'),
    25,
    0,
    4
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_FLAT')
    AND is_ancient = 0
    AND 4 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    14,
    0,
    4
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 4 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 26113)
AND slot_number = 2;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 26113), 
    @last_rune_id, 
    2
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 26113);

-- Rune ID: 30954728202

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 3 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(30954728202, 
 9215591, 
 1, 
 17740406780, 
 3,
 5, 
 6, 
 3, 
 15, 
 12,
 380400, 
 61877, 
 (SELECT id FROM stat_types WHERE code = 'DEF_FLAT'), 
 118,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 262, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    21,
    0,
    16
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 16 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    7,
    0,
    0
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 0 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'),
    4,
    0,
    4
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_DMG')
    AND is_ancient = 0
    AND 4 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ACC'),
    7,
    1,
    7
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ACC')
    AND is_ancient = 0
    AND 7 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_upgrades 
(rune_id, level_reached, stat_type_id, old_value, new_value, upgrade_date)
SELECT 
    @last_rune_id,
    3,
    (SELECT id FROM stat_types WHERE code = 'ACC'),
    7.0,
    7.0,
    NOW();

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 26113)
AND slot_number = 3;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 26113), 
    @last_rune_id, 
    3
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 26113);

-- Rune ID: 41246083040

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 4 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(41246083040, 
 9215591, 
 1, 
 17740406780, 
 4,
 5, 
 6, 
 13, 
 15, 
 15,
 684720, 
 134236, 
 (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'), 
 58,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 373, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    6,
    0,
    0
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND 0 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    6,
    0,
    2
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 2 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    10,
    0,
    7
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 7 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    27,
    0,
    21
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 21 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 26113)
AND slot_number = 4;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 26113), 
    @last_rune_id, 
    4
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 26113);

-- Rune ID: 22940963589

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 5 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(22940963589, 
 9215591, 
 1, 
 17740406780, 
 5,
 5, 
 6, 
 3, 
 15, 
 15,
 405760, 
 127602, 
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 2448,
 (SELECT id FROM stat_types WHERE code = 'DEF_PCT'), 
 7, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'),
    7,
    0,
    7
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_DMG')
    AND is_ancient = 0
    AND 7 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    7,
    1,
    1
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 1 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    21,
    0,
    16
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 16 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    7,
    0,
    0
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 0 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 26113)
AND slot_number = 5;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 26113), 
    @last_rune_id, 
    5
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 26113);

-- Rune ID: 24655205952

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 6 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(24655205952, 
 9215591, 
 1, 
 17740406780, 
 6,
 15, 
 16, 
 11, 
 15, 
 15,
 711348, 
 138090, 
 (SELECT id FROM stat_types WHERE code = 'ATK_PCT'), 
 63,
 (SELECT id FROM stat_types WHERE code = 'DEF_PCT'), 
 8, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'),
    6,
    0,
    6
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_DMG')
    AND is_ancient = 1
    AND 6 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    10,
    0,
    10
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 1
    AND 10 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    17,
    0,
    12
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 1
    AND 12 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_FLAT'),
    12,
    0,
    -4
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_FLAT')
    AND is_ancient = 1
    AND -4 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 26113)
AND slot_number = 6;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 26113), 
    @last_rune_id, 
    6
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 26113);

-- Rune ID: 41347399760

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 1 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(41347399760, 
 9215591, 
 1, 
 17838803548, 
 1,
 5, 
 6, 
 13, 
 15, 
 15,
 722760, 
 136138, 
 (SELECT id FROM stat_types WHERE code = 'ATK_FLAT'), 
 160,
 (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'), 
 6, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    6,
    0,
    1
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 1 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    19,
    0,
    16
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 16 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    9,
    1,
    3
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 3 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ACC'),
    8,
    0,
    8
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ACC')
    AND is_ancient = 0
    AND 8 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 16813)
AND slot_number = 1;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 16813), 
    @last_rune_id, 
    1
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 16813);

-- Rune ID: 39839284707

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 2 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(39839284707, 
 9215591, 
 1, 
 17838803548, 
 2,
 5, 
 6, 
 13, 
 15, 
 15,
 760800, 
 138040, 
 (SELECT id FROM stat_types WHERE code = 'SPD'), 
 42,
 (SELECT id FROM stat_types WHERE code = 'HP_PCT'), 
 5, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    10,
    0,
    10
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 10 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ACC'),
    7,
    0,
    7
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ACC')
    AND is_ancient = 0
    AND 7 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    20,
    0,
    14
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 14 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    9,
    1,
    3
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND 3 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_upgrades 
(rune_id, level_reached, stat_type_id, old_value, new_value, upgrade_date)
SELECT 
    @last_rune_id,
    3,
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    3.0,
    9.0,
    NOW();

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 16813)
AND slot_number = 2;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 16813), 
    @last_rune_id, 
    2
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 16813);

-- Rune ID: 34200599482

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 3 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(34200599482, 
 9215591, 
 1, 
 17838803548, 
 3,
 5, 
 6, 
 13, 
 15, 
 15,
 570600, 
 128530, 
 (SELECT id FROM stat_types WHERE code = 'DEF_FLAT'), 
 160,
 (SELECT id FROM stat_types WHERE code = 'RES'), 
 8, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_FLAT'),
    388,
    1,
    42
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_FLAT')
    AND is_ancient = 0
    AND 42 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    13,
    0,
    7
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND 7 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    16,
    0,
    12
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 12 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    13,
    0,
    9
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 9 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 16813)
AND slot_number = 3;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 16813), 
    @last_rune_id, 
    3
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 16813);

-- Rune ID: 37115602799

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 4 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(37115602799, 
 9215591, 
 1, 
 17838803548, 
 4,
 5, 
 6, 
 21, 
 15, 
 15,
 570600, 
 130554, 
 (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'), 
 58,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    20,
    0,
    15
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 15 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    8,
    0,
    1
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 1 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    13,
    1,
    4
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 4 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    5,
    0,
    -2
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND -2 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 16813)
AND slot_number = 4;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 16813), 
    @last_rune_id, 
    4
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 16813);

-- Rune ID: 41242870466

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 5 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(41242870466, 
 9215591, 
 1, 
 17838803548, 
 5,
 5, 
 6, 
 25, 
 15, 
 15,
 608640, 
 130432, 
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 2448,
 (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'), 
 6, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    17,
    0,
    14
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 14 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    15,
    0,
    7
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND 7 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    7,
    0,
    3
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 3 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    14,
    0,
    9
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 9 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 16813)
AND slot_number = 5;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 16813), 
    @last_rune_id, 
    5
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 16813);

-- Rune ID: 43402222885

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 6 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(43402222885, 
 9215591, 
 1, 
 17838803548, 
 6,
 5, 
 6, 
 13, 
 15, 
 15,
 646680, 
 132334, 
 (SELECT id FROM stat_types WHERE code = 'HP_PCT'), 
 63,
 (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'), 
 5, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_FLAT'),
    17,
    0,
    -13
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_FLAT')
    AND is_ancient = 0
    AND -13 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    16,
    0,
    13
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 13 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    11,
    0,
    5
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND 5 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    11,
    1,
    4
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 4 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_upgrades 
(rune_id, level_reached, stat_type_id, old_value, new_value, upgrade_date)
SELECT 
    @last_rune_id,
    3,
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    4.0,
    11.0,
    NOW();

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 16813)
AND slot_number = 6;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 16813), 
    @last_rune_id, 
    6
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 16813);

-- Rune ID: 35233800260

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 1 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(35233800260, 
 9215591, 
 1, 
 18307792058, 
 1,
 5, 
 6, 
 10, 
 15, 
 12,
 722760, 
 72138, 
 (SELECT id FROM stat_types WHERE code = 'ATK_FLAT'), 
 118,
 (SELECT id FROM stat_types WHERE code = 'HP_PCT'), 
 6, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ACC'),
    8,
    0,
    8
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ACC')
    AND is_ancient = 0
    AND 8 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    15,
    0,
    9
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 9 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    16,
    0,
    12
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 12 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_FLAT'),
    263,
    0,
    -120
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_FLAT')
    AND is_ancient = 0
    AND -120 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 29213)
AND slot_number = 1;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 29213), 
    @last_rune_id, 
    1
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 29213);

-- Rune ID: 45579862655

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 2 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(45579862655, 
 9215591, 
 1, 
 18307792058, 
 2,
 5, 
 6, 
 15, 
 15, 
 12,
 697400, 
 73344, 
 (SELECT id FROM stat_types WHERE code = 'SPD'), 
 31,
 (SELECT id FROM stat_types WHERE code = 'ATK_PCT'), 
 6, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_FLAT'),
    16,
    0,
    16
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_FLAT')
    AND is_ancient = 0
    AND 16 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    4,
    0,
    4
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 4 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    29,
    0,
    29
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 29 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_FLAT'),
    447,
    0,
    447
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_FLAT')
    AND is_ancient = 0
    AND 447 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 29213)
AND slot_number = 2;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 29213), 
    @last_rune_id, 
    2
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 29213);

-- Rune ID: 44143443505

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 3 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(44143443505, 
 9215591, 
 1, 
 18307792058, 
 3,
 5, 
 6, 
 10, 
 15, 
 12,
 570600, 
 64530, 
 (SELECT id FROM stat_types WHERE code = 'DEF_FLAT'), 
 118,
 (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'), 
 7, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ACC'),
    14,
    0,
    14
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ACC')
    AND is_ancient = 0
    AND 14 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    12,
    0,
    12
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND 12 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    5,
    0,
    5
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 5 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    19,
    0,
    19
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 19 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 29213)
AND slot_number = 3;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 29213), 
    @last_rune_id, 
    3
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 29213);

-- Rune ID: 42440726862

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 4 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(42440726862, 
 9215591, 
 1, 
 18307792058, 
 4,
 5, 
 6, 
 10, 
 15, 
 12,
 627660, 
 67383, 
 (SELECT id FROM stat_types WHERE code = 'ATK_PCT'), 
 47,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    5,
    0,
    5
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 5 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ACC'),
    26,
    0,
    26
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ACC')
    AND is_ancient = 0
    AND 26 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    5,
    0,
    5
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 5 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'),
    5,
    0,
    5
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_DMG')
    AND is_ancient = 0
    AND 5 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 29213)
AND slot_number = 4;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 29213), 
    @last_rune_id, 
    4
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 29213);

-- Rune ID: 40937711736

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 5 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(40937711736, 
 9215591, 
 1, 
 18307792058, 
 5,
 5, 
 6, 
 15, 
 15, 
 15,
 507200, 
 127159, 
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 2448,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    17,
    0,
    14
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 14 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ACC'),
    16,
    0,
    16
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ACC')
    AND is_ancient = 0
    AND 16 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_FLAT'),
    20,
    1,
    3
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_FLAT')
    AND is_ancient = 0
    AND 3 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    13,
    0,
    7
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND 7 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 29213)
AND slot_number = 5;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 29213), 
    @last_rune_id, 
    5
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 29213);

-- Rune ID: 43256548129

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 6 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'ACC')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(43256548129, 
 9215591, 
 1, 
 18307792058, 
 6,
 5, 
 6, 
 10, 
 15, 
 12,
 646680, 
 68334, 
 (SELECT id FROM stat_types WHERE code = 'ACC'), 
 48,
 (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'), 
 5, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    9,
    1,
    9
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 9 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'),
    5,
    0,
    5
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_DMG')
    AND is_ancient = 0
    AND 5 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    19,
    0,
    15
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 15 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_FLAT'),
    14,
    0,
    -8
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_FLAT')
    AND is_ancient = 0
    AND -8 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 29213)
AND slot_number = 6;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 29213), 
    @last_rune_id, 
    6
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 29213);

-- Rune ID: 44354216500

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 1 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(44354216500, 
 9215591, 
 1, 
 18367036441, 
 1,
 5, 
 6, 
 10, 
 15, 
 12,
 722760, 
 72138, 
 (SELECT id FROM stat_types WHERE code = 'ATK_FLAT'), 
 118,
 (SELECT id FROM stat_types WHERE code = 'RES'), 
 5, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    20,
    0,
    16
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 16 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    11,
    0,
    4
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 4 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ACC'),
    5,
    0,
    5
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ACC')
    AND is_ancient = 0
    AND 5 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'),
    5,
    0,
    5
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_DMG')
    AND is_ancient = 0
    AND 5 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 29113)
AND slot_number = 1;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 29113), 
    @last_rune_id, 
    1
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 29113);

-- Rune ID: 31547989228

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 2 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(31547989228, 
 9215591, 
 1, 
 18367036441, 
 2,
 5, 
 6, 
 10, 
 15, 
 12,
 760800, 
 74040, 
 (SELECT id FROM stat_types WHERE code = 'DEF_PCT'), 
 47,
 (SELECT id FROM stat_types WHERE code = 'ATK_PCT'), 
 7, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    20,
    0,
    20
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 20 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ACC'),
    6,
    0,
    6
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ACC')
    AND is_ancient = 0
    AND 6 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'RES'),
    6,
    0,
    6
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'RES')
    AND is_ancient = 0
    AND 6 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_FLAT'),
    341,
    0,
    20
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_FLAT')
    AND is_ancient = 0
    AND 20 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 29113)
AND slot_number = 2;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 29113), 
    @last_rune_id, 
    2
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 29113);

-- Rune ID: 28992651566

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 3 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(28992651566, 
 9215591, 
 1, 
 18367036441, 
 3,
 5, 
 6, 
 10, 
 15, 
 12,
 523050, 
 62152, 
 (SELECT id FROM stat_types WHERE code = 'DEF_FLAT'), 
 118,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    8,
    1,
    2
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 2 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    17,
    0,
    13
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 13 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'RES'),
    10,
    0,
    10
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'RES')
    AND is_ancient = 0
    AND 10 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ACC'),
    7,
    0,
    7
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ACC')
    AND is_ancient = 0
    AND 7 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 29113)
AND slot_number = 3;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 29113), 
    @last_rune_id, 
    3
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 29113);

-- Rune ID: 41495874566

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 5 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(41495874566, 
 9215591, 
 1, 
 18367036441, 
 5,
 5, 
 6, 
 6, 
 15, 
 12,
 355040, 
 60152, 
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 1800,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    7,
    0,
    3
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 3 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'),
    4,
    0,
    4
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_DMG')
    AND is_ancient = 0
    AND 4 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    23,
    0,
    19
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 19 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    6,
    0,
    6
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 6 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 29113)
AND slot_number = 5;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 29113), 
    @last_rune_id, 
    5
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 29113);

-- Rune ID: 41320172851

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 6 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(41320172851, 
 9215591, 
 1, 
 18367036441, 
 6,
 5, 
 6, 
 6, 
 15, 
 12,
 377230, 
 61661, 
 (SELECT id FROM stat_types WHERE code = 'DEF_PCT'), 
 47,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    13,
    0,
    8
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 8 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_FLAT'),
    68,
    0,
    46
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_FLAT')
    AND is_ancient = 0
    AND 46 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    6,
    0,
    6
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 6 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'RES'),
    8,
    0,
    8
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'RES')
    AND is_ancient = 0
    AND 8 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 29113)
AND slot_number = 6;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 29113), 
    @last_rune_id, 
    6
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 29113);

-- Rune ID: 31133533187

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 1 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(31133533187, 
 9215591, 
 1, 
 18545543159, 
 1,
 5, 
 6, 
 13, 
 15, 
 15,
 722760, 
 136138, 
 (SELECT id FROM stat_types WHERE code = 'ATK_FLAT'), 
 160,
 (SELECT id FROM stat_types WHERE code = 'ACC'), 
 8, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    10,
    1,
    2
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 2 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    6,
    0,
    6
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 6 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    16,
    0,
    11
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 11 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    23,
    0,
    15
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 15 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 28913)
AND slot_number = 1;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 28913), 
    @last_rune_id, 
    1
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 28913);

-- Rune ID: 26787729821

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 2 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(26787729821, 
 9215591, 
 1, 
 18545543159, 
 2,
 5, 
 6, 
 13, 
 15, 
 15,
 760800, 
 138040, 
 (SELECT id FROM stat_types WHERE code = 'SPD'), 
 42,
 (SELECT id FROM stat_types WHERE code = 'ATK_FLAT'), 
 14, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_FLAT'),
    347,
    1,
    67
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_FLAT')
    AND is_ancient = 0
    AND 67 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    13,
    0,
    5
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 5 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    21,
    0,
    11
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 11 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    7,
    0,
    1
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND 1 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 28913)
AND slot_number = 2;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 28913), 
    @last_rune_id, 
    2
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 28913);

-- Rune ID: 33799155175

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 3 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(33799155175, 
 9215591, 
 1, 
 18545543159, 
 3,
 5, 
 6, 
 18, 
 15, 
 15,
 523050, 
 128008, 
 (SELECT id FROM stat_types WHERE code = 'DEF_FLAT'), 
 160,
 (SELECT id FROM stat_types WHERE code = 'RES'), 
 5, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    24,
    0,
    18
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 18 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    7,
    0,
    0
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND 0 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    9,
    0,
    5
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 5 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_FLAT'),
    278,
    0,
    -172
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_FLAT')
    AND is_ancient = 0
    AND -172 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 28913)
AND slot_number = 3;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 28913), 
    @last_rune_id, 
    3
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 28913);

-- Rune ID: 34372895035

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 4 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_DMG')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(34372895035, 
 9215591, 
 1, 
 18545543159, 
 4,
 5, 
 6, 
 13, 
 15, 
 15,
 684720, 
 134236, 
 (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'), 
 80,
 (SELECT id FROM stat_types WHERE code = 'ACC'), 
 7, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    13,
    1,
    3
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 3 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    12,
    0,
    6
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND 6 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    5,
    0,
    -2
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND -2 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    21,
    0,
    17
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 17 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 28913)
AND slot_number = 4;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 28913), 
    @last_rune_id, 
    4
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 28913);

-- Rune ID: 39221176941

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 5 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(39221176941, 
 9215591, 
 1, 
 18545543159, 
 5,
 5, 
 6, 
 13, 
 15, 
 15,
 608640, 
 130432, 
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 2448,
 (SELECT id FROM stat_types WHERE code = 'RES'), 
 7, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    10,
    1,
    5
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 5 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    23,
    0,
    19
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 19 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_FLAT'),
    14,
    0,
    -6
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_FLAT')
    AND is_ancient = 0
    AND -6 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    7,
    0,
    1
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 1 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 28913)
AND slot_number = 5;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 28913), 
    @last_rune_id, 
    5
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 28913);

-- Rune ID: 25840520121

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 6 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(25840520121, 
 9215591, 
 1, 
 18545543159, 
 6,
 5, 
 6, 
 18, 
 15, 
 15,
 592790, 
 131742, 
 (SELECT id FROM stat_types WHERE code = 'HP_PCT'), 
 63,
 (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'), 
 5, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    11,
    1,
    2
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND 2 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ACC'),
    7,
    0,
    7
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ACC')
    AND is_ancient = 0
    AND 7 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    20,
    0,
    16
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 16 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_FLAT'),
    315,
    0,
    -151
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_FLAT')
    AND is_ancient = 0
    AND -151 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 28913)
AND slot_number = 6;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 28913), 
    @last_rune_id, 
    6
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 28913);

-- Rune ID: 41881976329

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 1 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(41881976329, 
 9215591, 
 1, 
 18662932822, 
 1,
 5, 
 6, 
 4, 
 15, 
 12,
 451725, 
 68179, 
 (SELECT id FROM stat_types WHERE code = 'ATK_FLAT'), 
 118,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 369, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    8,
    0,
    3
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 3 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    10,
    0,
    10
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 10 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    16,
    0,
    12
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 12 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'),
    4,
    0,
    4
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_DMG')
    AND is_ancient = 0
    AND 4 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 11013)
AND slot_number = 1;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 11013), 
    @last_rune_id, 
    1
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 11013);

-- Rune ID: 44022924759

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 3 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(44022924759, 
 9215591, 
 1, 
 18662932822, 
 3,
 5, 
 6, 
 4, 
 15, 
 12,
 356625, 
 61405, 
 (SELECT id FROM stat_types WHERE code = 'DEF_FLAT'), 
 118,
 (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'), 
 4, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    22,
    0,
    22
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 22 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    6,
    0,
    6
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 6 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    11,
    0,
    11
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND 11 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    5,
    0,
    5
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 5 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 11013)
AND slot_number = 3;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 11013), 
    @last_rune_id, 
    3
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 11013);

-- Rune ID: 44775392012

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 4 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(44775392012, 
 9215591, 
 1, 
 18662932822, 
 4,
 5, 
 6, 
 15, 
 15, 
 12,
 627660, 
 69609, 
 (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'), 
 43,
 (SELECT id FROM stat_types WHERE code = 'RES'), 
 5, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    10,
    0,
    10
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 10 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    5,
    0,
    5
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 5 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    20,
    0,
    20
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND 20 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_FLAT'),
    17,
    0,
    17
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_FLAT')
    AND is_ancient = 0
    AND 17 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 11013)
AND slot_number = 4;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 11013), 
    @last_rune_id, 
    4
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 11013);

-- Rune ID: 40940321573

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 5 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(40940321573, 
 9215591, 
 1, 
 18662932822, 
 5,
 5, 
 6, 
 14, 
 15, 
 12,
 507200, 
 63159, 
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 1800,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    18,
    0,
    14
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 14 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    14,
    0,
    7
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND 7 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    4,
    0,
    4
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 4 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'),
    7,
    0,
    7
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_DMG')
    AND is_ancient = 0
    AND 7 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 11013)
AND slot_number = 5;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 11013), 
    @last_rune_id, 
    5
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 11013);

-- Rune ID: 41696649027

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 1 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(41696649027, 
 9215591, 
 1, 
 19044353389, 
 1,
 5, 
 6, 
 15, 
 15, 
 12,
 662530, 
 71476, 
 (SELECT id FROM stat_types WHERE code = 'ATK_FLAT'), 
 118,
 (SELECT id FROM stat_types WHERE code = 'HP_PCT'), 
 8, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'RES'),
    20,
    0,
    20
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'RES')
    AND is_ancient = 0
    AND 20 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ACC'),
    12,
    0,
    12
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ACC')
    AND is_ancient = 0
    AND 12 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    10,
    0,
    6
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 6 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    5,
    0,
    1
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 1 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 23313)
AND slot_number = 1;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 23313), 
    @last_rune_id, 
    1
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 23313);

-- Rune ID: 44473479246

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 2 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(44473479246, 
 9215591, 
 1, 
 19044353389, 
 2,
 5, 
 6, 
 7, 
 15, 
 15,
 443800, 
 130190, 
 (SELECT id FROM stat_types WHERE code = 'DEF_PCT'), 
 63,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    6,
    0,
    2
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 2 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    27,
    0,
    20
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 20 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    8,
    0,
    1
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 1 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ACC'),
    11,
    0,
    11
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ACC')
    AND is_ancient = 0
    AND 11 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 23313)
AND slot_number = 2;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 23313), 
    @last_rune_id, 
    2
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 23313);

-- Rune ID: 40882755083

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 3 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(40882755083, 
 9215591, 
 1, 
 19044353389, 
 3,
 5, 
 6, 
 18, 
 15, 
 12,
 523050, 
 64008, 
 (SELECT id FROM stat_types WHERE code = 'DEF_FLAT'), 
 118,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 344, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    14,
    0,
    9
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND 9 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    7,
    1,
    7
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 7 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'RES'),
    16,
    0,
    16
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'RES')
    AND is_ancient = 0
    AND 16 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    22,
    0,
    17
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 17 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 23313)
AND slot_number = 3;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 23313), 
    @last_rune_id, 
    3
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 23313);

-- Rune ID: 35925586766

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 4 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(35925586766, 
 9215591, 
 1, 
 19044353389, 
 4,
 5, 
 6, 
 18, 
 15, 
 12,
 570600, 
 66554, 
 (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'), 
 43,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ACC'),
    8,
    0,
    8
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ACC')
    AND is_ancient = 0
    AND 8 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    10,
    1,
    5
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 5 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    20,
    0,
    17
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 17 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    5,
    0,
    0
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND 0 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 23313)
AND slot_number = 4;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 23313), 
    @last_rune_id, 
    4
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 23313);

-- Rune ID: 44772200374

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 5 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(44772200374, 
 9215591, 
 1, 
 19044353389, 
 5,
 5, 
 6, 
 7, 
 15, 
 12,
 355040, 
 60152, 
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 1800,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ACC'),
    6,
    0,
    6
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ACC')
    AND is_ancient = 0
    AND 6 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    22,
    0,
    18
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 18 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'RES'),
    6,
    0,
    6
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'RES')
    AND is_ancient = 0
    AND 6 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    8,
    0,
    2
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND 2 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 23313)
AND slot_number = 5;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 23313), 
    @last_rune_id, 
    5
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 23313);

-- Rune ID: 44262092180

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 6 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'RES')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(44262092180, 
 9215591, 
 1, 
 19044353389, 
 6,
 5, 
 6, 
 15, 
 15, 
 12,
 538900, 
 64856, 
 (SELECT id FROM stat_types WHERE code = 'RES'), 
 48,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    17,
    0,
    17
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 17 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    14,
    0,
    14
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND 14 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_FLAT'),
    18,
    0,
    18
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_FLAT')
    AND is_ancient = 0
    AND 18 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    4,
    0,
    4
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 4 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 23313)
AND slot_number = 6;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 23313), 
    @last_rune_id, 
    6
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 23313);

-- Rune ID: 40163067267

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 1 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(40163067267, 
 9215591, 
 1, 
 19866114491, 
 1,
 5, 
 6, 
 5, 
 15, 
 12,
 662530, 
 69126, 
 (SELECT id FROM stat_types WHERE code = 'ATK_FLAT'), 
 118,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    6,
    0,
    -1
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND -1 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    19,
    0,
    19
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 19 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'),
    5,
    0,
    5
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_DMG')
    AND is_ancient = 0
    AND 5 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    7,
    1,
    3
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 3 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_upgrades 
(rune_id, level_reached, stat_type_id, old_value, new_value, upgrade_date)
SELECT 
    @last_rune_id,
    3,
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    3.0,
    7.0,
    NOW();

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 14513)
AND slot_number = 1;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 14513), 
    @last_rune_id, 
    1
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 14513);

-- Rune ID: 20288778598

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 2 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(20288778598, 
 9215591, 
 1, 
 19866114491, 
 2,
 5, 
 6, 
 5, 
 15, 
 15,
 697400, 
 134870, 
 (SELECT id FROM stat_types WHERE code = 'ATK_PCT'), 
 63,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    15,
    0,
    15
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 15 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_FLAT'),
    25,
    0,
    3
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_FLAT')
    AND is_ancient = 0
    AND 3 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    7,
    1,
    3
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 3 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'),
    4,
    0,
    4
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_DMG')
    AND is_ancient = 0
    AND 4 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 14513)
AND slot_number = 2;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 14513), 
    @last_rune_id, 
    2
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 14513);

-- Rune ID: 17982652456

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 3 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(17982652456, 
 9215591, 
 1, 
 19866114491, 
 3,
 5, 
 6, 
 10, 
 15, 
 12,
 570600, 
 64530, 
 (SELECT id FROM stat_types WHERE code = 'DEF_FLAT'), 
 118,
 (SELECT id FROM stat_types WHERE code = 'DEF_PCT'), 
 8, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    9,
    0,
    9
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 9 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    9,
    1,
    4
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 4 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    8,
    0,
    2
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 2 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'),
    28,
    0,
    28
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_DMG')
    AND is_ancient = 0
    AND 28 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 14513)
AND slot_number = 3;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 14513), 
    @last_rune_id, 
    3
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 14513);

-- Rune ID: 29042884930

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 4 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_DMG')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(29042884930, 
 9215591, 
 1, 
 19866114491, 
 4,
 5, 
 6, 
 13, 
 15, 
 15,
 627660, 
 131383, 
 (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'), 
 80,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ACC'),
    4,
    0,
    4
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ACC')
    AND is_ancient = 0
    AND 4 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    6,
    1,
    4
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 4 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    22,
    0,
    22
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 22 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    8,
    0,
    1
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 1 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 14513)
AND slot_number = 4;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 14513), 
    @last_rune_id, 
    4
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 14513);

-- Rune ID: 40958643080

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 5 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(40958643080, 
 9215591, 
 1, 
 19866114491, 
 5,
 5, 
 6, 
 5, 
 15, 
 12,
 557920, 
 63896, 
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 1800,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    4,
    0,
    0
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 0 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    29,
    0,
    24
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 24 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    4,
    0,
    4
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 4 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'),
    6,
    1,
    6
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_DMG')
    AND is_ancient = 0
    AND 6 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_upgrades 
(rune_id, level_reached, stat_type_id, old_value, new_value, upgrade_date)
SELECT 
    @last_rune_id,
    3,
    (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'),
    6.0,
    6.0,
    NOW();

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 14513)
AND slot_number = 5;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 14513), 
    @last_rune_id, 
    5
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 14513);

-- Rune ID: 40840081930

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 6 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(40840081930, 
 9215591, 
 1, 
 19866114491, 
 6,
 5, 
 6, 
 5, 
 15, 
 15,
 646680, 
 132334, 
 (SELECT id FROM stat_types WHERE code = 'ATK_PCT'), 
 63,
 (SELECT id FROM stat_types WHERE code = 'DEF_FLAT'), 
 11, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_FLAT'),
    50,
    0,
    31
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_FLAT')
    AND is_ancient = 0
    AND 31 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    10,
    0,
    10
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 10 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'),
    5,
    0,
    5
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_DMG')
    AND is_ancient = 0
    AND 5 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    7,
    1,
    3
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 3 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_upgrades 
(rune_id, level_reached, stat_type_id, old_value, new_value, upgrade_date)
SELECT 
    @last_rune_id,
    3,
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    3.0,
    7.0,
    NOW();

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 14513)
AND slot_number = 6;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 14513), 
    @last_rune_id, 
    6
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 14513);

-- Rune ID: 35804790217

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 1 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(35804790217, 
 9215591, 
 1, 
 7566940902, 
 1,
 5, 
 6, 
 18, 
 15, 
 15,
 662530, 
 135476, 
 (SELECT id FROM stat_types WHERE code = 'ATK_FLAT'), 
 160,
 (SELECT id FROM stat_types WHERE code = 'ATK_PCT'), 
 5, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    5,
    0,
    1
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 1 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    29,
    0,
    23
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 23 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_FLAT'),
    277,
    0,
    -204
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_FLAT')
    AND is_ancient = 0
    AND -204 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    6,
    0,
    6
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 6 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 10514)
AND slot_number = 1;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 10514), 
    @last_rune_id, 
    1
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 10514);

-- Rune ID: 40291281713

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 3 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(40291281713, 
 9215591, 
 1, 
 7566940902, 
 3,
 5, 
 6, 
 13, 
 15, 
 12,
 570600, 
 64530, 
 (SELECT id FROM stat_types WHERE code = 'DEF_FLAT'), 
 118,
 (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'), 
 4, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    10,
    1,
    5
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND 5 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ACC'),
    7,
    0,
    7
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ACC')
    AND is_ancient = 0
    AND 7 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    17,
    0,
    17
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 17 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    7,
    0,
    7
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 7 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 10514)
AND slot_number = 3;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 10514), 
    @last_rune_id, 
    3
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 10514);

-- Rune ID: 30964132241

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 5 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(30964132241, 
 9215591, 
 1, 
 7566940902, 
 5,
 5, 
 6, 
 8, 
 15, 
 12,
 380400, 
 63098, 
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 1800,
 (SELECT id FROM stat_types WHERE code = 'DEF_FLAT'), 
 11, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    16,
    0,
    16
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 16 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'),
    4,
    0,
    4
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_DMG')
    AND is_ancient = 0
    AND 4 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    12,
    0,
    6
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 6 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_FLAT'),
    13,
    0,
    -1
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_FLAT')
    AND is_ancient = 0
    AND -1 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 10514)
AND slot_number = 5;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 10514), 
    @last_rune_id, 
    5
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 10514);

-- Rune ID: 36338672950

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 1 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(36338672950, 
 9215591, 
 1, 
 7567037910, 
 1,
 5, 
 6, 
 3, 
 15, 
 15,
 481840, 
 132778, 
 (SELECT id FROM stat_types WHERE code = 'ATK_FLAT'), 
 160,
 (SELECT id FROM stat_types WHERE code = 'ATK_PCT'), 
 8, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_FLAT'),
    321,
    0,
    -111
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_FLAT')
    AND is_ancient = 0
    AND -111 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'RES'),
    6,
    0,
    6
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'RES')
    AND is_ancient = 0
    AND 6 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    22,
    0,
    18
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 18 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    7,
    0,
    0
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 0 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 10914)
AND slot_number = 1;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 10914), 
    @last_rune_id, 
    1
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 10914);

-- Rune ID: 41671596653

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 2 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(41671596653, 
 9215591, 
 1, 
 7567037910, 
 2,
 5, 
 6, 
 3, 
 15, 
 15,
 507200, 
 134503, 
 (SELECT id FROM stat_types WHERE code = 'SPD'), 
 42,
 (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'), 
 5, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    23,
    0,
    17
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND 17 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    11,
    0,
    4
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 4 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    6,
    0,
    6
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 6 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    7,
    0,
    1
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 1 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 10914)
AND slot_number = 2;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 10914), 
    @last_rune_id, 
    2
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 10914);

-- Rune ID: 44797506674

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 3 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(44797506674, 
 9215591, 
 1, 
 7567037910, 
 3,
 5, 
 6, 
 3, 
 15, 
 15,
 332850, 
 122642, 
 (SELECT id FROM stat_types WHERE code = 'DEF_FLAT'), 
 160,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    22,
    0,
    18
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 18 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    5,
    0,
    -2
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND -2 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ACC'),
    5,
    0,
    5
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ACC')
    AND is_ancient = 0
    AND 5 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_FLAT'),
    227,
    0,
    -210
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_FLAT')
    AND is_ancient = 0
    AND -210 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 10914)
AND slot_number = 3;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 10914), 
    @last_rune_id, 
    3
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 10914);

-- Rune ID: 31900348504

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 4 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(31900348504, 
 9215591, 
 1, 
 7567037910, 
 4,
 5, 
 6, 
 8, 
 15, 
 15,
 427950, 
 130486, 
 (SELECT id FROM stat_types WHERE code = 'HP_PCT'), 
 63,
 (SELECT id FROM stat_types WHERE code = 'DEF_FLAT'), 
 18, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    26,
    0,
    21
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 21 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    4,
    0,
    4
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 4 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    5,
    0,
    -5
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND -5 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    9,
    1,
    3
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND 3 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_upgrades 
(rune_id, level_reached, stat_type_id, old_value, new_value, upgrade_date)
SELECT 
    @last_rune_id,
    3,
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    3.0,
    9.0,
    NOW();

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 10914)
AND slot_number = 4;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 10914), 
    @last_rune_id, 
    4
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 10914);

-- Rune ID: 18472921493

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 5 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(18472921493, 
 9215591, 
 1, 
 7567037910, 
 5,
 5, 
 6, 
 3, 
 15, 
 15,
 405760, 
 127602, 
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 2448,
 (SELECT id FROM stat_types WHERE code = 'RES'), 
 7, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    21,
    0,
    17
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 17 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    12,
    0,
    5
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 5 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    8,
    0,
    2
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 2 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    10,
    1,
    1
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND 1 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_upgrades 
(rune_id, level_reached, stat_type_id, old_value, new_value, upgrade_date)
SELECT 
    @last_rune_id,
    3,
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    1.0,
    10.0,
    NOW();

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 10914)
AND slot_number = 5;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 10914), 
    @last_rune_id, 
    5
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 10914);

-- Rune ID: 26148859986

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 6 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'RES')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(26148859986, 
 9215591, 
 1, 
 7567037910, 
 6,
 5, 
 6, 
 4, 
 15, 
 15,
 404175, 
 128792, 
 (SELECT id FROM stat_types WHERE code = 'RES'), 
 64,
 (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'), 
 5, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ACC'),
    9,
    1,
    9
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ACC')
    AND is_ancient = 0
    AND 9 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    5,
    0,
    -2
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND -2 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    24,
    0,
    19
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 19 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    5,
    0,
    5
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 5 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 10914)
AND slot_number = 6;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 10914), 
    @last_rune_id, 
    6
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 10914);

-- Rune ID: 41651465029

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 1 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(41651465029, 
 9215591, 
 1, 
 7574253300, 
 1,
 5, 
 6, 
 24, 
 15, 
 12,
 662530, 
 69126, 
 (SELECT id FROM stat_types WHERE code = 'ATK_FLAT'), 
 118,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    15,
    0,
    8
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 8 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    26,
    0,
    19
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 19 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'),
    6,
    0,
    6
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_DMG')
    AND is_ancient = 0
    AND 6 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'RES'),
    6,
    0,
    6
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'RES')
    AND is_ancient = 0
    AND 6 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 11034)
AND slot_number = 1;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 11034), 
    @last_rune_id, 
    1
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 11034);

-- Rune ID: 41669165839

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 2 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(41669165839, 
 9215591, 
 1, 
 7574253300, 
 2,
 5, 
 6, 
 15, 
 15, 
 12,
 697400, 
 73344, 
 (SELECT id FROM stat_types WHERE code = 'DEF_PCT'), 
 47,
 (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'), 
 7, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    20,
    0,
    20
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 20 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    13,
    0,
    10
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 10 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    5,
    0,
    5
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 5 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_FLAT'),
    354,
    0,
    354
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_FLAT')
    AND is_ancient = 0
    AND 354 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 11034)
AND slot_number = 2;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 11034), 
    @last_rune_id, 
    2
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 11034);

-- Rune ID: 39952188959

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 3 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(39952188959, 
 9215591, 
 1, 
 7574253300, 
 3,
 5, 
 6, 
 16, 
 15, 
 15,
 523050, 
 128008, 
 (SELECT id FROM stat_types WHERE code = 'DEF_FLAT'), 
 160,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 290, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    5,
    0,
    -2
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND -2 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    19,
    0,
    15
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 15 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    7,
    0,
    0
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND 0 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ACC'),
    8,
    1,
    8
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ACC')
    AND is_ancient = 0
    AND 8 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_upgrades 
(rune_id, level_reached, stat_type_id, old_value, new_value, upgrade_date)
SELECT 
    @last_rune_id,
    3,
    (SELECT id FROM stat_types WHERE code = 'ACC'),
    8.0,
    8.0,
    NOW();

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 11034)
AND slot_number = 3;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 11034), 
    @last_rune_id, 
    3
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 11034);

-- Rune ID: 42206819386

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 5 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(42206819386, 
 9215591, 
 1, 
 7574253300, 
 5,
 5, 
 6, 
 8, 
 15, 
 15,
 329680, 
 123485, 
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 2448,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    14,
    0,
    14
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 14 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ACC'),
    13,
    0,
    13
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ACC')
    AND is_ancient = 0
    AND 13 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    23,
    0,
    23
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 23 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'),
    7,
    0,
    7
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_DMG')
    AND is_ancient = 0
    AND 7 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 11034)
AND slot_number = 5;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 11034), 
    @last_rune_id, 
    5
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 11034);

-- Rune ID: 33891399329

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 1 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(33891399329, 
 9215591, 
 1, 
 7689186493, 
 1,
 5, 
 6, 
 17, 
 15, 
 12,
 602300, 
 68251, 
 (SELECT id FROM stat_types WHERE code = 'ATK_FLAT'), 
 118,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    15,
    0,
    8
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 8 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    7,
    1,
    3
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 3 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    11,
    0,
    11
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 11 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    24,
    0,
    17
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 17 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 15234)
AND slot_number = 1;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 15234), 
    @last_rune_id, 
    1
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 15234);

-- Rune ID: 41443194580

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 2 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(41443194580, 
 9215591, 
 1, 
 7689186493, 
 2,
 5, 
 6, 
 17, 
 15, 
 15,
 697400, 
 137344, 
 (SELECT id FROM stat_types WHERE code = 'DEF_PCT'), 
 63,
 (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'), 
 6, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ACC'),
    23,
    0,
    23
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ACC')
    AND is_ancient = 0
    AND 23 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'RES'),
    5,
    0,
    5
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'RES')
    AND is_ancient = 0
    AND 5 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    20,
    0,
    13
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 13 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_FLAT'),
    16,
    0,
    -4
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_FLAT')
    AND is_ancient = 0
    AND -4 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 15234)
AND slot_number = 2;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 15234), 
    @last_rune_id, 
    2
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 15234);

-- Rune ID: 36251295173

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 3 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(36251295173, 
 9215591, 
 1, 
 7689186493, 
 3,
 5, 
 6, 
 17, 
 15, 
 12,
 523050, 
 64008, 
 (SELECT id FROM stat_types WHERE code = 'DEF_FLAT'), 
 118,
 (SELECT id FROM stat_types WHERE code = 'DEF_PCT'), 
 6, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ACC'),
    7,
    1,
    7
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ACC')
    AND is_ancient = 0
    AND 7 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    5,
    0,
    -1
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND -1 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    21,
    0,
    17
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 17 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'RES'),
    8,
    0,
    8
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'RES')
    AND is_ancient = 0
    AND 8 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 15234)
AND slot_number = 3;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 15234), 
    @last_rune_id, 
    3
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 15234);

-- Rune ID: 43781764661

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 4 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(43781764661, 
 9215591, 
 1, 
 7689186493, 
 4,
 5, 
 6, 
 17, 
 15, 
 12,
 570600, 
 66554, 
 (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'), 
 43,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    6,
    0,
    2
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND 2 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ACC'),
    12,
    0,
    12
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ACC')
    AND is_ancient = 0
    AND 12 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_FLAT'),
    337,
    0,
    89
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_FLAT')
    AND is_ancient = 0
    AND 89 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    16,
    0,
    12
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 12 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 15234)
AND slot_number = 4;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 15234), 
    @last_rune_id, 
    4
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 15234);

-- Rune ID: 32020122797

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 5 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(32020122797, 
 9215591, 
 1, 
 7689186493, 
 5,
 5, 
 6, 
 17, 
 15, 
 15,
 557920, 
 129875, 
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 2448,
 (SELECT id FROM stat_types WHERE code = 'DEF_FLAT'), 
 20, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    8,
    1,
    1
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 1 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    23,
    0,
    16
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND 16 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'RES'),
    11,
    0,
    11
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'RES')
    AND is_ancient = 0
    AND 11 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    16,
    0,
    9
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 9 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 15234)
AND slot_number = 5;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 15234), 
    @last_rune_id, 
    5
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 15234);

-- Rune ID: 41770442812

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 6 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(41770442812, 
 9215591, 
 1, 
 7689186493, 
 6,
 5, 
 6, 
 17, 
 15, 
 15,
 538900, 
 128856, 
 (SELECT id FROM stat_types WHERE code = 'DEF_PCT'), 
 63,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    11,
    0,
    11
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 11 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    10,
    0,
    7
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 7 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    20,
    0,
    12
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 12 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    12,
    1,
    4
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 4 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_upgrades 
(rune_id, level_reached, stat_type_id, old_value, new_value, upgrade_date)
SELECT 
    @last_rune_id,
    3,
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    4.0,
    12.0,
    NOW();

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 15234)
AND slot_number = 6;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 15234), 
    @last_rune_id, 
    6
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 15234);

-- Rune ID: 40181471503

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 1 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(40181471503, 
 9215591, 
 1, 
 7776405215, 
 1,
 5, 
 6, 
 15, 
 15, 
 15,
 662530, 
 135476, 
 (SELECT id FROM stat_types WHERE code = 'ATK_FLAT'), 
 160,
 (SELECT id FROM stat_types WHERE code = 'ATK_PCT'), 
 7, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    20,
    0,
    15
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 15 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    13,
    1,
    5
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 5 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    6,
    0,
    6
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 6 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ACC'),
    12,
    0,
    12
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ACC')
    AND is_ancient = 0
    AND 12 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 11414)
AND slot_number = 1;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 11414), 
    @last_rune_id, 
    1
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 11414);

-- Rune ID: 41650607314

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 2 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(41650607314, 
 9215591, 
 1, 
 7776405215, 
 2,
 5, 
 6, 
 11, 
 15, 
 15,
 634000, 
 133949, 
 (SELECT id FROM stat_types WHERE code = 'DEF_PCT'), 
 63,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    19,
    0,
    14
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 14 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_FLAT'),
    10,
    0,
    -10
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_FLAT')
    AND is_ancient = 0
    AND -10 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    17,
    0,
    17
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 17 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    11,
    1,
    6
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 6 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_upgrades 
(rune_id, level_reached, stat_type_id, old_value, new_value, upgrade_date)
SELECT 
    @last_rune_id,
    3,
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    6.0,
    11.0,
    NOW();

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 11414)
AND slot_number = 2;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 11414), 
    @last_rune_id, 
    2
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 11414);

-- Rune ID: 40983891056

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 3 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(40983891056, 
 9215591, 
 1, 
 7776405215, 
 3,
 5, 
 6, 
 11, 
 15, 
 12,
 523050, 
 64008, 
 (SELECT id FROM stat_types WHERE code = 'DEF_FLAT'), 
 118,
 (SELECT id FROM stat_types WHERE code = 'ACC'), 
 7, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_FLAT'),
    344,
    0,
    -138
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_FLAT')
    AND is_ancient = 0
    AND -138 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    16,
    0,
    12
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 12 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    15,
    0,
    8
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND 8 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    4,
    0,
    4
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 4 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 11414)
AND slot_number = 3;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 11414), 
    @last_rune_id, 
    3
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 11414);

-- Rune ID: 41774701474

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 4 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(41774701474, 
 9215591, 
 1, 
 7776405215, 
 4,
 5, 
 6, 
 11, 
 15, 
 15,
 627660, 
 133609, 
 (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'), 
 58,
 (SELECT id FROM stat_types WHERE code = 'DEF_PCT'), 
 7, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    23,
    0,
    17
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 17 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_FLAT'),
    11,
    0,
    11
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_FLAT')
    AND is_ancient = 0
    AND 11 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    11,
    0,
    8
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 8 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    6,
    0,
    -1
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND -1 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 11414)
AND slot_number = 4;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 11414), 
    @last_rune_id, 
    4
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 11414);

-- Rune ID: 45451744577

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 1 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(45451744577, 
 9215591, 
 1, 
 7986064110, 
 1,
 5, 
 6, 
 3, 
 15, 
 12,
 481840, 
 68778, 
 (SELECT id FROM stat_types WHERE code = 'ATK_FLAT'), 
 118,
 (SELECT id FROM stat_types WHERE code = 'ACC'), 
 8, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    14,
    0,
    5
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 5 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    22,
    0,
    22
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 22 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'),
    8,
    1,
    8
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_DMG')
    AND is_ancient = 0
    AND 8 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    5,
    0,
    5
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 5 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 15414)
AND slot_number = 1;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 15414), 
    @last_rune_id, 
    1
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 15414);

-- Rune ID: 42009940868

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 2 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(42009940868, 
 9215591, 
 1, 
 7986064110, 
 2,
 5, 
 6, 
 3, 
 15, 
 12,
 443800, 
 66190, 
 (SELECT id FROM stat_types WHERE code = 'SPD'), 
 31,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    6,
    0,
    6
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 6 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_FLAT'),
    31,
    0,
    31
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_FLAT')
    AND is_ancient = 0
    AND 31 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'),
    19,
    0,
    19
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_DMG')
    AND is_ancient = 0
    AND 19 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'RES'),
    6,
    0,
    6
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'RES')
    AND is_ancient = 0
    AND 6 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 15414)
AND slot_number = 2;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 15414), 
    @last_rune_id, 
    2
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 15414);

-- Rune ID: 44305455304

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 3 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(44305455304, 
 9215591, 
 1, 
 7986064110, 
 3,
 5, 
 6, 
 3, 
 15, 
 12,
 380400, 
 61877, 
 (SELECT id FROM stat_types WHERE code = 'DEF_FLAT'), 
 118,
 (SELECT id FROM stat_types WHERE code = 'RES'), 
 8, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    10,
    0,
    10
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 10 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'),
    10,
    0,
    10
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_DMG')
    AND is_ancient = 0
    AND 10 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ACC'),
    8,
    0,
    8
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ACC')
    AND is_ancient = 0
    AND 8 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    14,
    0,
    10
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 10 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 15414)
AND slot_number = 3;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 15414), 
    @last_rune_id, 
    3
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 15414);

-- Rune ID: 29370148496

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 4 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_DMG')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(29370148496, 
 9215591, 
 1, 
 7986064110, 
 4,
 5, 
 6, 
 4, 
 15, 
 15,
 427950, 
 130486, 
 (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'), 
 80,
 (SELECT id FROM stat_types WHERE code = 'ACC'), 
 5, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    7,
    1,
    7
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 7 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    20,
    0,
    13
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 13 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_FLAT'),
    18,
    0,
    -9
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_FLAT')
    AND is_ancient = 0
    AND -9 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    17,
    0,
    12
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 12 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 15414)
AND slot_number = 4;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 15414), 
    @last_rune_id, 
    4
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 15414);

-- Rune ID: 36359726540

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 5 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(36359726540, 
 9215591, 
 1, 
 7986064110, 
 5,
 5, 
 6, 
 3, 
 15, 
 12,
 405760, 
 63602, 
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 1800,
 (SELECT id FROM stat_types WHERE code = 'RES'), 
 5, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    12,
    0,
    12
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 12 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    8,
    0,
    2
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 2 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    15,
    0,
    11
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 11 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'),
    5,
    1,
    5
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_DMG')
    AND is_ancient = 0
    AND 5 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_upgrades 
(rune_id, level_reached, stat_type_id, old_value, new_value, upgrade_date)
SELECT 
    @last_rune_id,
    3,
    (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'),
    5.0,
    5.0,
    NOW();

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 15414)
AND slot_number = 5;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 15414), 
    @last_rune_id, 
    5
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 15414);

-- Rune ID: 31611691547

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 6 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(31611691547, 
 9215591, 
 1, 
 7986064110, 
 6,
 5, 
 6, 
 18, 
 15, 
 15,
 592790, 
 131742, 
 (SELECT id FROM stat_types WHERE code = 'ATK_PCT'), 
 63,
 (SELECT id FROM stat_types WHERE code = 'ACC'), 
 8, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    6,
    1,
    6
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 6 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'),
    4,
    0,
    4
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_DMG')
    AND is_ancient = 0
    AND 4 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    22,
    0,
    18
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 18 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_FLAT'),
    20,
    0,
    -5
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_FLAT')
    AND is_ancient = 0
    AND -5 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 15414)
AND slot_number = 6;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 15414), 
    @last_rune_id, 
    6
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 15414);

-- Rune ID: 44070997061

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 3 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(44070997061, 
 9215591, 
 1, 
 8011399170, 
 3,
 5, 
 6, 
 4, 
 15, 
 12,
 356625, 
 61405, 
 (SELECT id FROM stat_types WHERE code = 'DEF_FLAT'), 
 118,
 (SELECT id FROM stat_types WHERE code = 'ACC'), 
 7, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    5,
    0,
    2
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 2 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    20,
    0,
    20
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 20 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'),
    7,
    0,
    7
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_DMG')
    AND is_ancient = 0
    AND 7 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'RES'),
    7,
    0,
    7
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'RES')
    AND is_ancient = 0
    AND 7 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 21914)
AND slot_number = 3;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 21914), 
    @last_rune_id, 
    3
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 21914);

-- Rune ID: 43019862475

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 5 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(43019862475, 
 9215591, 
 1, 
 8011399170, 
 5,
 5, 
 6, 
 4, 
 15, 
 12,
 380400, 
 63098, 
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 1800,
 (SELECT id FROM stat_types WHERE code = 'SPD'), 
 4, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_FLAT'),
    20,
    0,
    3
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_FLAT')
    AND is_ancient = 0
    AND 3 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    21,
    0,
    21
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 21 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    6,
    0,
    0
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 0 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'),
    5,
    0,
    5
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_DMG')
    AND is_ancient = 0
    AND 5 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 21914)
AND slot_number = 5;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 21914), 
    @last_rune_id, 
    5
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 21914);

-- Rune ID: 26184027301

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 1 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(26184027301, 
 9215591, 
 1, 
 8058884602, 
 1,
 5, 
 6, 
 1, 
 15, 
 15,
 421610, 
 131522, 
 (SELECT id FROM stat_types WHERE code = 'ATK_FLAT'), 
 160,
 (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'), 
 6, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ACC'),
    12,
    0,
    12
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ACC')
    AND is_ancient = 0
    AND 12 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    21,
    0,
    17
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 17 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    8,
    0,
    -1
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND -1 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    10,
    1,
    5
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 5 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_upgrades 
(rune_id, level_reached, stat_type_id, old_value, new_value, upgrade_date)
SELECT 
    @last_rune_id,
    3,
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    5.0,
    10.0,
    NOW();

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 19314)
AND slot_number = 1;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 19314), 
    @last_rune_id, 
    1
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 19314);

-- Rune ID: 17968698416

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 4 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_DMG')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(17968698416, 
 9215591, 
 1, 
 8058884602, 
 4,
 5, 
 6, 
 1, 
 15, 
 15,
 399420, 
 129863, 
 (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'), 
 80,
 (SELECT id FROM stat_types WHERE code = 'ATK_FLAT'), 
 15, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ACC'),
    7,
    0,
    7
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ACC')
    AND is_ancient = 0
    AND 7 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    7,
    1,
    3
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 3 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    6,
    0,
    6
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 6 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    32,
    0,
    25
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND 25 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 19314)
AND slot_number = 4;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 19314), 
    @last_rune_id, 
    4
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 19314);

-- Rune ID: 41888357722

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 6 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(41888357722, 
 9215591, 
 1, 
 8058884602, 
 6,
 5, 
 6, 
 3, 
 15, 
 15,
 431120, 
 129327, 
 (SELECT id FROM stat_types WHERE code = 'HP_PCT'), 
 63,
 (SELECT id FROM stat_types WHERE code = 'DEF_FLAT'), 
 18, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'),
    5,
    0,
    5
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_DMG')
    AND is_ancient = 0
    AND 5 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    6,
    0,
    2
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND 2 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    20,
    0,
    16
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 16 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_FLAT'),
    19,
    0,
    5
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_FLAT')
    AND is_ancient = 0
    AND 5 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 19314)
AND slot_number = 6;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 19314), 
    @last_rune_id, 
    6
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 19314);

-- Rune ID: 31237308069

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 1 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(31237308069, 
 9215591, 
 1, 
 8148049719, 
 1,
 5, 
 5, 
 19, 
 15, 
 12,
 319770, 
 38262, 
 (SELECT id FROM stat_types WHERE code = 'ATK_FLAT'), 
 99,
 (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'), 
 3, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'RES'),
    12,
    0,
    12
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'RES')
    AND is_ancient = 0
    AND 12 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_FLAT'),
    354,
    0,
    354
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_FLAT')
    AND is_ancient = 0
    AND 354 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    10,
    0,
    10
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 10 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    3,
    0,
    3
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 3 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 19114)
AND slot_number = 1;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 19114), 
    @last_rune_id, 
    1
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 19114);

-- Rune ID: 43923315514

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 2 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(43923315514, 
 9215591, 
 1, 
 8148049719, 
 2,
 1, 
 4, 
 19, 
 15, 
 0,
 88200, 
 5929, 
 (SELECT id FROM stat_types WHERE code = 'DEF_FLAT'), 
 10,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'rare',
 0,
 'normal',
 'normal',
 1,
 0);

SET @last_rune_id = LAST_INSERT_ID();

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 19114)
AND slot_number = 2;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 19114), 
    @last_rune_id, 
    2
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 19114);

-- Rune ID: 31601384703

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 3 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(31601384703, 
 9215591, 
 1, 
 8148049719, 
 3,
 4, 
 5, 
 19, 
 15, 
 9,
 183600, 
 17244, 
 (SELECT id FROM stat_types WHERE code = 'DEF_FLAT'), 
 78,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'heroic',
 9,
 'heroic',
 'heroic',
 4,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'RES'),
    13,
    0,
    13
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'RES')
    AND is_ancient = 0
    AND 13 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    9,
    0,
    9
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 9 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'),
    4,
    0,
    4
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_DMG')
    AND is_ancient = 0
    AND 4 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 19114)
AND slot_number = 3;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 19114), 
    @last_rune_id, 
    3
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 19114);

-- Rune ID: 42444699437

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 4 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(42444699437, 
 9215591, 
 1, 
 8148049719, 
 4,
 5, 
 6, 
 25, 
 15, 
 15,
 684720, 
 134236, 
 (SELECT id FROM stat_types WHERE code = 'ATK_PCT'), 
 63,
 (SELECT id FROM stat_types WHERE code = 'DEF_FLAT'), 
 20, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    10,
    0,
    10
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 10 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    7,
    0,
    7
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 7 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    20,
    0,
    20
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND 20 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ACC'),
    8,
    0,
    8
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ACC')
    AND is_ancient = 0
    AND 8 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 19114)
AND slot_number = 4;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 19114), 
    @last_rune_id, 
    4
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 19114);

-- Rune ID: 34326938846

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 5 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(34326938846, 
 9215591, 
 1, 
 8148049719, 
 5,
 5, 
 6, 
 19, 
 15, 
 12,
 507200, 
 63159, 
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 1800,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    8,
    0,
    8
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 8 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    15,
    0,
    11
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 11 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_FLAT'),
    28,
    0,
    -2
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_FLAT')
    AND is_ancient = 0
    AND -2 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'RES'),
    7,
    0,
    7
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'RES')
    AND is_ancient = 0
    AND 7 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 19114)
AND slot_number = 5;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 19114), 
    @last_rune_id, 
    5
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 19114);

-- Rune ID: 43920539425

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 6 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(43920539425, 
 9215591, 
 1, 
 8148049719, 
 6,
 5, 
 3, 
 15, 
 15, 
 15,
 56950, 
 22861, 
 (SELECT id FROM stat_types WHERE code = 'ATK_FLAT'), 
 92,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'),
    3,
    0,
    3
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_DMG')
    AND is_ancient = 0
    AND 3 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    4,
    0,
    4
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND 4 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    1,
    0,
    1
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 1 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    3,
    0,
    3
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 3 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 19114)
AND slot_number = 6;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 19114), 
    @last_rune_id, 
    6
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 19114);

-- Rune ID: 35456182051

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 1 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(35456182051, 
 9215591, 
 1, 
 8708961450, 
 1,
 5, 
 6, 
 6, 
 15, 
 12,
 481840, 
 68778, 
 (SELECT id FROM stat_types WHERE code = 'ATK_FLAT'), 
 118,
 (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'), 
 4, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ACC'),
    15,
    0,
    15
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ACC')
    AND is_ancient = 0
    AND 15 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    16,
    0,
    12
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 12 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_FLAT'),
    267,
    0,
    -91
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_FLAT')
    AND is_ancient = 0
    AND -91 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    10,
    1,
    10
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 10 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_upgrades 
(rune_id, level_reached, stat_type_id, old_value, new_value, upgrade_date)
SELECT 
    @last_rune_id,
    3,
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    10.0,
    10.0,
    NOW();

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 18014)
AND slot_number = 1;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 18014), 
    @last_rune_id, 
    1
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 18014);

-- Rune ID: 43782283195

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 3 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(43782283195, 
 9215591, 
 1, 
 8708961450, 
 3,
 5, 
 6, 
 6, 
 15, 
 12,
 380400, 
 61877, 
 (SELECT id FROM stat_types WHERE code = 'DEF_FLAT'), 
 118,
 (SELECT id FROM stat_types WHERE code = 'ACC'), 
 5, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    5,
    0,
    1
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND 1 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    22,
    0,
    18
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 18 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'RES'),
    5,
    0,
    5
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'RES')
    AND is_ancient = 0
    AND 5 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_FLAT'),
    245,
    0,
    -201
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_FLAT')
    AND is_ancient = 0
    AND -201 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 18014)
AND slot_number = 3;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 18014), 
    @last_rune_id, 
    3
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 18014);

-- Rune ID: 45451570240

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 5 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(45451570240, 
 9215591, 
 1, 
 8708961450, 
 5,
 5, 
 6, 
 7, 
 15, 
 12,
 355040, 
 60152, 
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 1800,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'RES'),
    5,
    0,
    5
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'RES')
    AND is_ancient = 0
    AND 5 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    20,
    0,
    20
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 20 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    8,
    0,
    8
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 8 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    5,
    0,
    5
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 5 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 18014)
AND slot_number = 5;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 18014), 
    @last_rune_id, 
    5
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 18014);

-- Rune ID: 36234885544

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 1 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(36234885544, 
 9215591, 
 1, 
 8863868437, 
 1,
 5, 
 6, 
 17, 
 15, 
 12,
 602300, 
 68251, 
 (SELECT id FROM stat_types WHERE code = 'ATK_FLAT'), 
 118,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    15,
    0,
    11
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 11 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    20,
    0,
    14
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 14 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ACC'),
    6,
    0,
    6
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ACC')
    AND is_ancient = 0
    AND 6 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'),
    7,
    0,
    7
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_DMG')
    AND is_ancient = 0
    AND 7 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 19214)
AND slot_number = 1;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 19214), 
    @last_rune_id, 
    1
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 19214);

-- Rune ID: 34313544804

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 2 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(34313544804, 
 9215591, 
 1, 
 8863868437, 
 2,
 5, 
 6, 
 19, 
 15, 
 15,
 634000, 
 133949, 
 (SELECT id FROM stat_types WHERE code = 'DEF_PCT'), 
 63,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'),
    14,
    0,
    14
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_DMG')
    AND is_ancient = 0
    AND 14 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    11,
    0,
    11
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 11 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_FLAT'),
    276,
    0,
    -165
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_FLAT')
    AND is_ancient = 0
    AND -165 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    7,
    0,
    7
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 7 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 19214)
AND slot_number = 2;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 19214), 
    @last_rune_id, 
    2
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 19214);

-- Rune ID: 40017703575

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 3 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(40017703575, 
 9215591, 
 1, 
 8863868437, 
 3,
 5, 
 6, 
 17, 
 15, 
 12,
 523050, 
 64008, 
 (SELECT id FROM stat_types WHERE code = 'DEF_FLAT'), 
 118,
 (SELECT id FROM stat_types WHERE code = 'ACC'), 
 7, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    5,
    0,
    -1
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND -1 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    15,
    0,
    11
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 11 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    13,
    0,
    7
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 7 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_FLAT'),
    291,
    0,
    -132
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_FLAT')
    AND is_ancient = 0
    AND -132 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 19214)
AND slot_number = 3;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 19214), 
    @last_rune_id, 
    3
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 19214);

-- Rune ID: 42006163006

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 4 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(42006163006, 
 9215591, 
 1, 
 8863868437, 
 4,
 5, 
 6, 
 3, 
 15, 
 12,
 456480, 
 67053, 
 (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'), 
 43,
 (SELECT id FROM stat_types WHERE code = 'RES'), 
 8, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    7,
    0,
    7
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 7 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_FLAT'),
    812,
    0,
    812
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_FLAT')
    AND is_ancient = 0
    AND 812 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_FLAT'),
    15,
    0,
    15
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_FLAT')
    AND is_ancient = 0
    AND 15 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_FLAT'),
    42,
    0,
    42
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_FLAT')
    AND is_ancient = 0
    AND 42 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 19214)
AND slot_number = 4;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 19214), 
    @last_rune_id, 
    4
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 19214);

-- Rune ID: 31570569417

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 5 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(31570569417, 
 9215591, 
 1, 
 8863868437, 
 5,
 5, 
 6, 
 4, 
 15, 
 12,
 329680, 
 59485, 
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 1800,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    5,
    1,
    1
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 1 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    17,
    0,
    17
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 17 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    12,
    0,
    5
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 5 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_FLAT'),
    13,
    0,
    -16
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_FLAT')
    AND is_ancient = 0
    AND -16 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 19214)
AND slot_number = 5;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 19214), 
    @last_rune_id, 
    5
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 19214);

-- Rune ID: 43833410936

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 1 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(43833410936, 
 9215591, 
 1, 
 9073156424, 
 1,
 5, 
 6, 
 4, 
 15, 
 12,
 451725, 
 68179, 
 (SELECT id FROM stat_types WHERE code = 'ATK_FLAT'), 
 118,
 (SELECT id FROM stat_types WHERE code = 'HP_PCT'), 
 7, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    5,
    1,
    5
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 5 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'),
    10,
    0,
    10
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_DMG')
    AND is_ancient = 0
    AND 10 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    17,
    0,
    17
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 17 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    6,
    0,
    6
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 6 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 22014)
AND slot_number = 1;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 22014), 
    @last_rune_id, 
    1
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 22014);

-- Rune ID: 42688710076

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 1 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(42688710076, 
 9215591, 
 1, 
 9630824901, 
 1,
 15, 
 16, 
 18, 
 15, 
 12,
 795036, 
 78572, 
 (SELECT id FROM stat_types WHERE code = 'ATK_FLAT'), 
 118,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 275, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    9,
    1,
    1
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 1
    AND 1 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'),
    28,
    0,
    28
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_DMG')
    AND is_ancient = 1
    AND 28 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ACC'),
    10,
    0,
    10
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ACC')
    AND is_ancient = 1
    AND 10 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    13,
    0,
    13
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 1
    AND 13 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 15514)
AND slot_number = 1;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 15514), 
    @last_rune_id, 
    1
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 15514);

-- Rune ID: 36778136562

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 3 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(36778136562, 
 9215591, 
 1, 
 9630824901, 
 3,
 5, 
 6, 
 4, 
 15, 
 12,
 356625, 
 61405, 
 (SELECT id FROM stat_types WHERE code = 'DEF_FLAT'), 
 118,
 (SELECT id FROM stat_types WHERE code = 'RES'), 
 7, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'),
    13,
    0,
    13
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_DMG')
    AND is_ancient = 0
    AND 13 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    10,
    0,
    7
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 7 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    9,
    0,
    9
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 9 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_FLAT'),
    566,
    0,
    180
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_FLAT')
    AND is_ancient = 0
    AND 180 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 15514)
AND slot_number = 3;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 15514), 
    @last_rune_id, 
    3
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 15514);

-- Rune ID: 45514601488

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 5 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(45514601488, 
 9215591, 
 1, 
 9630824901, 
 5,
 5, 
 6, 
 4, 
 15, 
 12,
 380400, 
 63098, 
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 1800,
 (SELECT id FROM stat_types WHERE code = 'HP_PCT'), 
 7, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ACC'),
    7,
    0,
    7
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ACC')
    AND is_ancient = 0
    AND 7 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'),
    24,
    0,
    24
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_DMG')
    AND is_ancient = 0
    AND 24 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    6,
    0,
    6
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 6 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    7,
    0,
    7
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND 7 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 15514)
AND slot_number = 5;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 15514), 
    @last_rune_id, 
    5
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 15514);

-- Rune ID: 23659865465

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 1 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(23659865465, 
 9215591, 
 1, 
 9722874768, 
 1,
 5, 
 6, 
 6, 
 15, 
 12,
 481840, 
 68778, 
 (SELECT id FROM stat_types WHERE code = 'ATK_FLAT'), 
 118,
 (SELECT id FROM stat_types WHERE code = 'ATK_PCT'), 
 6, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    15,
    0,
    15
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 15 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    15,
    0,
    11
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 11 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    5,
    0,
    -2
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND -2 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'),
    8,
    1,
    8
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_DMG')
    AND is_ancient = 0
    AND 8 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_upgrades 
(rune_id, level_reached, stat_type_id, old_value, new_value, upgrade_date)
SELECT 
    @last_rune_id,
    3,
    (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'),
    8.0,
    8.0,
    NOW();

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 14034)
AND slot_number = 1;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 14034), 
    @last_rune_id, 
    1
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 14034);

-- Rune ID: 35876632379

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 2 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(35876632379, 
 9215591, 
 1, 
 9722874768, 
 2,
 5, 
 6, 
 15, 
 15, 
 15,
 697400, 
 137344, 
 (SELECT id FROM stat_types WHERE code = 'DEF_PCT'), 
 63,
 (SELECT id FROM stat_types WHERE code = 'ATK_FLAT'), 
 13, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_FLAT'),
    19,
    0,
    -1
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_FLAT')
    AND is_ancient = 0
    AND -1 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    11,
    0,
    7
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 7 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    20,
    0,
    16
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 16 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    8,
    1,
    2
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 2 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_upgrades 
(rune_id, level_reached, stat_type_id, old_value, new_value, upgrade_date)
SELECT 
    @last_rune_id,
    3,
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    2.0,
    8.0,
    NOW();

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 14034)
AND slot_number = 2;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 14034), 
    @last_rune_id, 
    2
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 14034);

-- Rune ID: 40375807963

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 3 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(40375807963, 
 9215591, 
 1, 
 9722874768, 
 3,
 15, 
 16, 
 14, 
 15, 
 12,
 570600, 
 66554, 
 (SELECT id FROM stat_types WHERE code = 'DEF_FLAT'), 
 118,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    11,
    0,
    11
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 1
    AND 11 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'),
    5,
    0,
    5
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_DMG')
    AND is_ancient = 1
    AND 5 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    13,
    0,
    4
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 1
    AND 4 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    15,
    0,
    12
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 1
    AND 12 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 14034)
AND slot_number = 3;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 14034), 
    @last_rune_id, 
    3
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 14034);

-- Rune ID: 41657554935

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 5 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(41657554935, 
 9215591, 
 1, 
 9722874768, 
 5,
 5, 
 6, 
 15, 
 15, 
 12,
 507200, 
 63159, 
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 1800,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    14,
    0,
    8
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND 8 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    8,
    0,
    4
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 4 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    16,
    0,
    16
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 16 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'),
    10,
    1,
    10
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_DMG')
    AND is_ancient = 0
    AND 10 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_upgrades 
(rune_id, level_reached, stat_type_id, old_value, new_value, upgrade_date)
SELECT 
    @last_rune_id,
    3,
    (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'),
    10.0,
    10.0,
    NOW();

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 14034)
AND slot_number = 5;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 14034), 
    @last_rune_id, 
    5
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 14034);

-- Rune ID: 41714701853

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 1 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(41714701853, 
 9215591, 
 1, 
 9753466732, 
 1,
 5, 
 6, 
 15, 
 15, 
 15,
 662530, 
 135476, 
 (SELECT id FROM stat_types WHERE code = 'ATK_FLAT'), 
 160,
 (SELECT id FROM stat_types WHERE code = 'ACC'), 
 7, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    12,
    0,
    5
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 5 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    11,
    0,
    7
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 7 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    11,
    0,
    11
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 11 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    15,
    0,
    10
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 10 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 19314)
AND slot_number = 1;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 19314), 
    @last_rune_id, 
    1
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 19314);

-- Rune ID: 45624452570

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 2 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(45624452570, 
 9215591, 
 1, 
 9753466732, 
 2,
 5, 
 6, 
 6, 
 15, 
 15,
 507200, 
 134503, 
 (SELECT id FROM stat_types WHERE code = 'HP_PCT'), 
 63,
 (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'), 
 5, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ACC'),
    7,
    0,
    7
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ACC')
    AND is_ancient = 0
    AND 7 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    5,
    0,
    0
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND 0 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    21,
    0,
    21
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 21 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_FLAT'),
    330,
    0,
    330
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_FLAT')
    AND is_ancient = 0
    AND 330 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 19314)
AND slot_number = 2;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 19314), 
    @last_rune_id, 
    2
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 19314);

-- Rune ID: 43735619552

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 3 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(43735619552, 
 9215591, 
 1, 
 9753466732, 
 3,
 5, 
 6, 
 15, 
 15, 
 15,
 523050, 
 128008, 
 (SELECT id FROM stat_types WHERE code = 'DEF_FLAT'), 
 160,
 (SELECT id FROM stat_types WHERE code = 'ACC'), 
 6, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    14,
    0,
    7
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND 7 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    6,
    0,
    6
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 6 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    16,
    0,
    13
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 13 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'),
    6,
    0,
    6
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_DMG')
    AND is_ancient = 0
    AND 6 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 19314)
AND slot_number = 3;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 19314), 
    @last_rune_id, 
    3
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 19314);

-- Rune ID: 27192334210

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 4 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(27192334210, 
 9215591, 
 1, 
 9753466732, 
 4,
 5, 
 6, 
 15, 
 15, 
 15,
 627660, 
 133609, 
 (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'), 
 58,
 (SELECT id FROM stat_types WHERE code = 'RES'), 
 4, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    11,
    1,
    5
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 5 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    17,
    0,
    11
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND 11 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    11,
    0,
    7
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 7 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ACC'),
    7,
    0,
    7
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ACC')
    AND is_ancient = 0
    AND 7 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 19314)
AND slot_number = 4;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 19314), 
    @last_rune_id, 
    4
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 19314);

-- Rune ID: 45647179363

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 5 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(45647179363, 
 9215591, 
 1, 
 9753466732, 
 5,
 5, 
 6, 
 6, 
 15, 
 15,
 405760, 
 127602, 
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 2448,
 (SELECT id FROM stat_types WHERE code = 'ATK_FLAT'), 
 18, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    4,
    0,
    4
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 4 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    11,
    0,
    4
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 4 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    21,
    0,
    21
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 21 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_FLAT'),
    17,
    0,
    17
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_FLAT')
    AND is_ancient = 0
    AND 17 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 19314)
AND slot_number = 5;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 19314), 
    @last_rune_id, 
    5
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 19314);

-- Rune ID: 34968164702

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 6 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(34968164702, 
 9215591, 
 1, 
 9753466732, 
 6,
 5, 
 6, 
 15, 
 15, 
 15,
 592790, 
 131742, 
 (SELECT id FROM stat_types WHERE code = 'HP_PCT'), 
 63,
 (SELECT id FROM stat_types WHERE code = 'ATK_FLAT'), 
 11, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    14,
    0,
    8
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 8 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    12,
    1,
    8
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND 8 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    16,
    0,
    16
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 16 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    11,
    0,
    8
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 8 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 19314)
AND slot_number = 6;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 19314), 
    @last_rune_id, 
    6
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 19314);

-- Rune ID: 40240597531

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 1 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(40240597531, 
 9215591, 
 1, 
 10910677573, 
 1,
 5, 
 6, 
 6, 
 15, 
 15,
 481840, 
 132778, 
 (SELECT id FROM stat_types WHERE code = 'ATK_FLAT'), 
 160,
 (SELECT id FROM stat_types WHERE code = 'ACC'), 
 6, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'RES'),
    4,
    0,
    4
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'RES')
    AND is_ancient = 0
    AND 4 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    6,
    0,
    -1
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND -1 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    22,
    0,
    22
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 22 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    11,
    0,
    7
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 7 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 23314)
AND slot_number = 1;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 23314), 
    @last_rune_id, 
    1
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 23314);

-- Rune ID: 39844860299

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 3 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(39844860299, 
 9215591, 
 1, 
 10910677573, 
 3,
 5, 
 6, 
 16, 
 15, 
 15,
 475500, 
 125461, 
 (SELECT id FROM stat_types WHERE code = 'DEF_FLAT'), 
 160,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'RES'),
    5,
    0,
    5
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'RES')
    AND is_ancient = 0
    AND 5 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    16,
    0,
    12
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 12 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    12,
    0,
    6
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND 6 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    6,
    0,
    0
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 0 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 23314)
AND slot_number = 3;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 23314), 
    @last_rune_id, 
    3
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 23314);

-- Rune ID: 44827555676

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 5 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(44827555676, 
 9215591, 
 1, 
 10910677573, 
 5,
 5, 
 6, 
 15, 
 15, 
 12,
 557920, 
 65875, 
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 1800,
 (SELECT id FROM stat_types WHERE code = 'ACC'), 
 7, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'),
    5,
    0,
    5
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_DMG')
    AND is_ancient = 0
    AND 5 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'RES'),
    14,
    0,
    14
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'RES')
    AND is_ancient = 0
    AND 14 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    21,
    0,
    21
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 21 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    13,
    0,
    13
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND 13 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 23314)
AND slot_number = 5;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 23314), 
    @last_rune_id, 
    5
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 23314);

-- Rune ID: 43372253279

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 1 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(43372253279, 
 9215591, 
 1, 
 10998457442, 
 1,
 5, 
 6, 
 17, 
 15, 
 12,
 662530, 
 71476, 
 (SELECT id FROM stat_types WHERE code = 'ATK_FLAT'), 
 118,
 (SELECT id FROM stat_types WHERE code = 'ACC'), 
 8, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'),
    12,
    0,
    12
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_DMG')
    AND is_ancient = 0
    AND 12 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_FLAT'),
    296,
    0,
    296
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_FLAT')
    AND is_ancient = 0
    AND 296 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    15,
    0,
    5
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 5 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'RES'),
    19,
    0,
    19
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'RES')
    AND is_ancient = 0
    AND 19 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 21814)
AND slot_number = 1;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 21814), 
    @last_rune_id, 
    1
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 21814);

-- Rune ID: 41455055746

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 2 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(41455055746, 
 9215591, 
 1, 
 10998457442, 
 2,
 5, 
 6, 
 17, 
 15, 
 15,
 697400, 
 137344, 
 (SELECT id FROM stat_types WHERE code = 'HP_PCT'), 
 63,
 (SELECT id FROM stat_types WHERE code = 'RES'), 
 8, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    18,
    0,
    11
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 11 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    16,
    0,
    9
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND 9 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    11,
    0,
    7
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 7 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_FLAT'),
    10,
    0,
    -9
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_FLAT')
    AND is_ancient = 0
    AND -9 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 21814)
AND slot_number = 2;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 21814), 
    @last_rune_id, 
    2
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 21814);

-- Rune ID: 40139889329

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 3 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(40139889329, 
 9215591, 
 1, 
 10998457442, 
 3,
 5, 
 6, 
 13, 
 15, 
 12,
 570600, 
 64530, 
 (SELECT id FROM stat_types WHERE code = 'DEF_FLAT'), 
 118,
 (SELECT id FROM stat_types WHERE code = 'ACC'), 
 4, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'RES'),
    10,
    1,
    10
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'RES')
    AND is_ancient = 0
    AND 10 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    4,
    0,
    4
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 4 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    21,
    0,
    14
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND 14 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    20,
    0,
    13
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 13 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 21814)
AND slot_number = 3;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 21814), 
    @last_rune_id, 
    3
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 21814);

-- Rune ID: 39938589634

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 4 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(39938589634, 
 9215591, 
 1, 
 10998457442, 
 4,
 5, 
 6, 
 13, 
 15, 
 15,
 684720, 
 134236, 
 (SELECT id FROM stat_types WHERE code = 'HP_PCT'), 
 63,
 (SELECT id FROM stat_types WHERE code = 'RES'), 
 4, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    11,
    1,
    4
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND 4 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    11,
    0,
    11
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 11 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    12,
    0,
    12
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 12 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ACC'),
    16,
    0,
    16
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ACC')
    AND is_ancient = 0
    AND 16 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 21814)
AND slot_number = 4;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 21814), 
    @last_rune_id, 
    4
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 21814);

-- Rune ID: 43386364794

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 5 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(43386364794, 
 9215591, 
 1, 
 10998457442, 
 5,
 5, 
 6, 
 13, 
 15, 
 12,
 608640, 
 66432, 
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 1800,
 (SELECT id FROM stat_types WHERE code = 'DEF_PCT'), 
 8, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    12,
    0,
    9
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 9 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    5,
    0,
    5
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 5 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    24,
    0,
    17
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 17 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'RES'),
    5,
    0,
    5
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'RES')
    AND is_ancient = 0
    AND 5 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 21814)
AND slot_number = 5;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 21814), 
    @last_rune_id, 
    5
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 21814);

-- Rune ID: 18551827569

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 6 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(18551827569, 
 9215591, 
 1, 
 10998457442, 
 6,
 5, 
 6, 
 13, 
 15, 
 15,
 592790, 
 129639, 
 (SELECT id FROM stat_types WHERE code = 'HP_PCT'), 
 63,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    6,
    0,
    3
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 3 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ACC'),
    23,
    0,
    23
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ACC')
    AND is_ancient = 0
    AND 23 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    14,
    0,
    7
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 7 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    9,
    1,
    3
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND 3 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_upgrades 
(rune_id, level_reached, stat_type_id, old_value, new_value, upgrade_date)
SELECT 
    @last_rune_id,
    3,
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    3.0,
    9.0,
    NOW();

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 21814)
AND slot_number = 6;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 21814), 
    @last_rune_id, 
    6
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 21814);

-- Rune ID: 40994927125

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 1 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(40994927125, 
 9215591, 
 1, 
 13664974558, 
 1,
 5, 
 6, 
 14, 
 15, 
 12,
 602300, 
 68251, 
 (SELECT id FROM stat_types WHERE code = 'ATK_FLAT'), 
 118,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    20,
    0,
    16
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 16 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    7,
    1,
    1
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 1 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    7,
    0,
    1
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 1 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ACC'),
    4,
    0,
    4
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ACC')
    AND is_ancient = 0
    AND 4 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 19114)
AND slot_number = 1;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 19114), 
    @last_rune_id, 
    1
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 19114);

-- Rune ID: 39967306314

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 3 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(39967306314, 
 9215591, 
 1, 
 13664974558, 
 3,
 5, 
 6, 
 13, 
 15, 
 12,
 523050, 
 62152, 
 (SELECT id FROM stat_types WHERE code = 'DEF_FLAT'), 
 118,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ACC'),
    12,
    0,
    12
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ACC')
    AND is_ancient = 0
    AND 12 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    7,
    0,
    7
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 7 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    16,
    0,
    16
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 16 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    12,
    1,
    7
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND 7 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_upgrades 
(rune_id, level_reached, stat_type_id, old_value, new_value, upgrade_date)
SELECT 
    @last_rune_id,
    3,
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    7.0,
    12.0,
    NOW();

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 19114)
AND slot_number = 3;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 19114), 
    @last_rune_id, 
    3
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 19114);

-- Rune ID: 44022366177

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 5 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(44022366177, 
 9215591, 
 1, 
 13664974558, 
 5,
 5, 
 6, 
 8, 
 15, 
 12,
 380400, 
 63098, 
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 1800,
 (SELECT id FROM stat_types WHERE code = 'DEF_FLAT'), 
 14, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    16,
    0,
    16
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 16 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ACC'),
    5,
    0,
    5
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ACC')
    AND is_ancient = 0
    AND 5 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    13,
    0,
    13
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 13 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    5,
    0,
    5
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 5 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 19114)
AND slot_number = 5;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 19114), 
    @last_rune_id, 
    5
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 19114);

-- Rune ID: 40991473911

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 1 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(40991473911, 
 9215591, 
 1, 
 13831751619, 
 1,
 5, 
 6, 
 15, 
 15, 
 12,
 602300, 
 68251, 
 (SELECT id FROM stat_types WHERE code = 'ATK_FLAT'), 
 118,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    12,
    0,
    8
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 8 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_FLAT'),
    210,
    0,
    210
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_FLAT')
    AND is_ancient = 0
    AND 210 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    15,
    0,
    12
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 12 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    8,
    0,
    3
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 3 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 21314)
AND slot_number = 1;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 21314), 
    @last_rune_id, 
    1
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 21314);

-- Rune ID: 26506790844

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 3 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(26506790844, 
 9215591, 
 1, 
 13831751619, 
 3,
 5, 
 6, 
 15, 
 15, 
 15,
 475500, 
 125461, 
 (SELECT id FROM stat_types WHERE code = 'DEF_FLAT'), 
 160,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    11,
    1,
    6
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 6 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    6,
    0,
    3
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 3 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ACC'),
    26,
    0,
    26
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ACC')
    AND is_ancient = 0
    AND 26 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_FLAT'),
    192,
    0,
    -256
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_FLAT')
    AND is_ancient = 0
    AND -256 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 21314)
AND slot_number = 3;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 21314), 
    @last_rune_id, 
    3
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 21314);

-- Rune ID: 45649957022

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 5 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(45649957022, 
 9215591, 
 1, 
 13831751619, 
 5,
 5, 
 6, 
 17, 
 15, 
 12,
 557920, 
 65875, 
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 1800,
 (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'), 
 5, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    21,
    0,
    21
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 21 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_FLAT'),
    10,
    0,
    10
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_FLAT')
    AND is_ancient = 0
    AND 10 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    8,
    0,
    8
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND 8 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ACC'),
    6,
    0,
    6
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ACC')
    AND is_ancient = 0
    AND 6 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 21314)
AND slot_number = 5;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 21314), 
    @last_rune_id, 
    5
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 21314);

-- Rune ID: 28318352030

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 1 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(28318352030, 
 9215591, 
 1, 
 13866083437, 
 1,
 5, 
 6, 
 4, 
 15, 
 15,
 451725, 
 132179, 
 (SELECT id FROM stat_types WHERE code = 'ATK_FLAT'), 
 160,
 (SELECT id FROM stat_types WHERE code = 'SPD'), 
 5, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'),
    6,
    0,
    6
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_DMG')
    AND is_ancient = 0
    AND 6 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    19,
    0,
    14
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 14 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    16,
    0,
    16
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 16 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    11,
    1,
    5
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 5 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_upgrades 
(rune_id, level_reached, stat_type_id, old_value, new_value, upgrade_date)
SELECT 
    @last_rune_id,
    3,
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    5.0,
    11.0,
    NOW();

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 11534)
AND slot_number = 1;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 11534), 
    @last_rune_id, 
    1
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 11534);

-- Rune ID: 35876567425

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 4 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_DMG')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(35876567425, 
 9215591, 
 1, 
 13866083437, 
 4,
 5, 
 6, 
 5, 
 15, 
 15,
 627660, 
 131383, 
 (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'), 
 80,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    10,
    0,
    10
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 10 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    11,
    0,
    7
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 7 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    11,
    0,
    4
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 4 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    7,
    0,
    0
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 0 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 11534)
AND slot_number = 4;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 11534), 
    @last_rune_id, 
    4
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 11534);

-- Rune ID: 33047071970

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 5 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(33047071970, 
 9215591, 
 1, 
 13866083437, 
 5,
 5, 
 6, 
 5, 
 15, 
 15,
 608640, 
 130432, 
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 2448,
 (SELECT id FROM stat_types WHERE code = 'ATK_FLAT'), 
 20, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    10,
    0,
    10
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 10 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'),
    18,
    0,
    18
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_DMG')
    AND is_ancient = 0
    AND 18 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    5,
    0,
    1
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 1 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    8,
    1,
    1
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 1 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_upgrades 
(rune_id, level_reached, stat_type_id, old_value, new_value, upgrade_date)
SELECT 
    @last_rune_id,
    3,
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    1.0,
    8.0,
    NOW();

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 11534)
AND slot_number = 5;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 11534), 
    @last_rune_id, 
    5
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 11534);

-- Rune ID: 43013035717

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 6 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(43013035717, 
 9215591, 
 1, 
 13866083437, 
 6,
 5, 
 6, 
 4, 
 15, 
 15,
 350285, 
 124953, 
 (SELECT id FROM stat_types WHERE code = 'ATK_PCT'), 
 63,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_FLAT'),
    48,
    0,
    33
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_FLAT')
    AND is_ancient = 0
    AND 33 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'),
    11,
    0,
    11
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_DMG')
    AND is_ancient = 0
    AND 11 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    6,
    0,
    6
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 6 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    6,
    1,
    2
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 2 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_upgrades 
(rune_id, level_reached, stat_type_id, old_value, new_value, upgrade_date)
SELECT 
    @last_rune_id,
    3,
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    2.0,
    6.0,
    NOW();

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 11534)
AND slot_number = 6;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 11534), 
    @last_rune_id, 
    6
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 11534);

-- Rune ID: 39185877670

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 1 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(39185877670, 
 9215591, 
 1, 
 13931614598, 
 1,
 5, 
 6, 
 4, 
 15, 
 15,
 391495, 
 127889, 
 (SELECT id FROM stat_types WHERE code = 'ATK_FLAT'), 
 160,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    10,
    0,
    6
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 6 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    15,
    0,
    15
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 15 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    6,
    0,
    1
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 1 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'),
    7,
    1,
    7
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_DMG')
    AND is_ancient = 0
    AND 7 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_upgrades 
(rune_id, level_reached, stat_type_id, old_value, new_value, upgrade_date)
SELECT 
    @last_rune_id,
    3,
    (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'),
    7.0,
    7.0,
    NOW();

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 15934)
AND slot_number = 1;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 15934), 
    @last_rune_id, 
    1
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 15934);

-- Rune ID: 18386249134

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 2 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(18386249134, 
 9215591, 
 1, 
 13931614598, 
 2,
 5, 
 6, 
 4, 
 15, 
 15,
 475500, 
 133873, 
 (SELECT id FROM stat_types WHERE code = 'DEF_PCT'), 
 63,
 (SELECT id FROM stat_types WHERE code = 'SPD'), 
 5, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    7,
    0,
    2
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 2 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ACC'),
    19,
    0,
    19
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ACC')
    AND is_ancient = 0
    AND 19 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'),
    16,
    0,
    16
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_DMG')
    AND is_ancient = 0
    AND 16 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    5,
    0,
    5
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 5 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 15934)
AND slot_number = 2;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 15934), 
    @last_rune_id, 
    2
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 15934);

-- Rune ID: 39507877258

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 3 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(39507877258, 
 9215591, 
 1, 
 13931614598, 
 3,
 5, 
 6, 
 4, 
 15, 
 15,
 356625, 
 125405, 
 (SELECT id FROM stat_types WHERE code = 'DEF_FLAT'), 
 160,
 (SELECT id FROM stat_types WHERE code = 'RES'), 
 5, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    16,
    0,
    16
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 16 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    10,
    0,
    7
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 7 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    6,
    0,
    0
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 0 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ACC'),
    6,
    0,
    6
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ACC')
    AND is_ancient = 0
    AND 6 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 15934)
AND slot_number = 3;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 15934), 
    @last_rune_id, 
    3
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 15934);

-- Rune ID: 44857543673

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 4 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(44857543673, 
 9215591, 
 1, 
 13931614598, 
 4,
 5, 
 6, 
 15, 
 15, 
 12,
 627660, 
 69609, 
 (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'), 
 43,
 (SELECT id FROM stat_types WHERE code = 'ACC'), 
 8, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_FLAT'),
    873,
    0,
    873
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_FLAT')
    AND is_ancient = 0
    AND 873 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'),
    7,
    0,
    7
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_DMG')
    AND is_ancient = 0
    AND 7 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    16,
    0,
    16
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 16 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    11,
    0,
    11
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 11 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 15934)
AND slot_number = 4;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 15934), 
    @last_rune_id, 
    4
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 15934);

-- Rune ID: 44186096093

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 5 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(44186096093, 
 9215591, 
 1, 
 13931614598, 
 5,
 5, 
 6, 
 17, 
 15, 
 12,
 557920, 
 65875, 
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 1800,
 (SELECT id FROM stat_types WHERE code = 'ACC'), 
 8, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    4,
    0,
    4
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 4 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    14,
    0,
    14
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 14 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    11,
    0,
    11
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 11 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'),
    15,
    0,
    15
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_DMG')
    AND is_ancient = 0
    AND 15 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 15934)
AND slot_number = 5;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 15934), 
    @last_rune_id, 
    5
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 15934);

-- Rune ID: 44125734562

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 1 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(44125734562, 
 9215591, 
 1, 
 13932887506, 
 1,
 5, 
 6, 
 10, 
 15, 
 12,
 722760, 
 72138, 
 (SELECT id FROM stat_types WHERE code = 'ATK_FLAT'), 
 118,
 (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'), 
 4, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    20,
    0,
    16
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 16 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'RES'),
    6,
    0,
    6
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'RES')
    AND is_ancient = 0
    AND 6 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    8,
    0,
    4
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 4 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ACC'),
    6,
    0,
    6
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ACC')
    AND is_ancient = 0
    AND 6 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 19614)
AND slot_number = 1;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 19614), 
    @last_rune_id, 
    1
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 19614);

-- Rune ID: 35126055986

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 3 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(35126055986, 
 9215591, 
 1, 
 13932887506, 
 3,
 5, 
 6, 
 10, 
 15, 
 12,
 570600, 
 64530, 
 (SELECT id FROM stat_types WHERE code = 'DEF_FLAT'), 
 118,
 (SELECT id FROM stat_types WHERE code = 'ACC'), 
 6, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    17,
    0,
    14
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 14 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'RES'),
    14,
    0,
    14
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'RES')
    AND is_ancient = 0
    AND 14 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_FLAT'),
    347,
    0,
    -44
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_FLAT')
    AND is_ancient = 0
    AND -44 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    5,
    0,
    -2
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND -2 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 19614)
AND slot_number = 3;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 19614), 
    @last_rune_id, 
    3
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 19614);

-- Rune ID: 43445077624

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 5 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(43445077624, 
 9215591, 
 1, 
 13932887506, 
 5,
 5, 
 6, 
 17, 
 15, 
 12,
 557920, 
 65875, 
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 1800,
 (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'), 
 7, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    20,
    0,
    20
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 20 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'RES'),
    11,
    0,
    11
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'RES')
    AND is_ancient = 0
    AND 11 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_FLAT'),
    27,
    0,
    27
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_FLAT')
    AND is_ancient = 0
    AND 27 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    5,
    0,
    5
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 5 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 19614)
AND slot_number = 5;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 19614), 
    @last_rune_id, 
    5
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 19614);

-- Rune ID: 41318200224

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 1 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(41318200224, 
 9215591, 
 1, 
 13983535512, 
 1,
 5, 
 6, 
 16, 
 15, 
 12,
 602300, 
 68251, 
 (SELECT id FROM stat_types WHERE code = 'ATK_FLAT'), 
 118,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    16,
    0,
    12
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 12 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_FLAT'),
    346,
    0,
    35
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_FLAT')
    AND is_ancient = 0
    AND 35 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ACC'),
    11,
    0,
    11
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ACC')
    AND is_ancient = 0
    AND 11 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    15,
    0,
    8
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 8 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 23914)
AND slot_number = 1;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 23914), 
    @last_rune_id, 
    1
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 23914);

-- Rune ID: 41363353536

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 3 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(41363353536, 
 9215591, 
 1, 
 13983535512, 
 3,
 5, 
 6, 
 16, 
 15, 
 12,
 475500, 
 61461, 
 (SELECT id FROM stat_types WHERE code = 'DEF_FLAT'), 
 118,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    5,
    0,
    5
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 5 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    11,
    0,
    7
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 7 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    20,
    0,
    14
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 14 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'RES'),
    12,
    0,
    12
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'RES')
    AND is_ancient = 0
    AND 12 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 23914)
AND slot_number = 3;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 23914), 
    @last_rune_id, 
    3
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 23914);

-- Rune ID: 32873347002

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 5 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(32873347002, 
 9215591, 
 1, 
 13983535512, 
 5,
 5, 
 6, 
 19, 
 15, 
 12,
 557920, 
 65875, 
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 1800,
 (SELECT id FROM stat_types WHERE code = 'DEF_FLAT'), 
 12, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'RES'),
    14,
    0,
    14
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'RES')
    AND is_ancient = 0
    AND 14 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ACC'),
    23,
    0,
    23
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ACC')
    AND is_ancient = 0
    AND 23 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    6,
    0,
    6
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND 6 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    4,
    0,
    4
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 4 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 23914)
AND slot_number = 5;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 23914), 
    @last_rune_id, 
    5
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 23914);

-- Rune ID: 44306993050

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 1 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(44306993050, 
 9215591, 
 1, 
 13983535513, 
 1,
 5, 
 6, 
 4, 
 15, 
 12,
 391495, 
 63889, 
 (SELECT id FROM stat_types WHERE code = 'ATK_FLAT'), 
 118,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    12,
    0,
    12
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 12 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    17,
    0,
    17
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 17 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    8,
    0,
    8
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 8 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_FLAT'),
    290,
    0,
    290
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_FLAT')
    AND is_ancient = 0
    AND 290 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 16914)
AND slot_number = 1;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 16914), 
    @last_rune_id, 
    1
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 16914);

-- Rune ID: 41923660906

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 3 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(41923660906, 
 9215591, 
 1, 
 13983535513, 
 3,
 5, 
 6, 
 4, 
 15, 
 12,
 309075, 
 58017, 
 (SELECT id FROM stat_types WHERE code = 'DEF_FLAT'), 
 118,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    16,
    0,
    16
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 16 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    14,
    0,
    7
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND 7 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_FLAT'),
    152,
    0,
    152
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_FLAT')
    AND is_ancient = 0
    AND 152 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'),
    10,
    0,
    10
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_DMG')
    AND is_ancient = 0
    AND 10 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 16914)
AND slot_number = 3;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 16914), 
    @last_rune_id, 
    3
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 16914);

-- Rune ID: 40967111506

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 5 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(40967111506, 
 9215591, 
 1, 
 13983535513, 
 5,
 5, 
 6, 
 5, 
 15, 
 12,
 557920, 
 63896, 
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 1800,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'),
    6,
    0,
    6
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_DMG')
    AND is_ancient = 0
    AND 6 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    22,
    0,
    17
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 17 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    10,
    0,
    10
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 10 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_FLAT'),
    15,
    0,
    0
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_FLAT')
    AND is_ancient = 0
    AND 0 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 16914)
AND slot_number = 5;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 16914), 
    @last_rune_id, 
    5
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 16914);

-- Rune ID: 31198422416

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 1 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(31198422416, 
 9215591, 
 1, 
 14488728137, 
 1,
 5, 
 6, 
 10, 
 15, 
 15,
 722760, 
 136138, 
 (SELECT id FROM stat_types WHERE code = 'ATK_FLAT'), 
 160,
 (SELECT id FROM stat_types WHERE code = 'ATK_PCT'), 
 5, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ACC'),
    8,
    1,
    8
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ACC')
    AND is_ancient = 0
    AND 8 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    7,
    0,
    0
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 0 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    21,
    0,
    17
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 17 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_FLAT'),
    224,
    0,
    -260
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_FLAT')
    AND is_ancient = 0
    AND -260 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 17314)
AND slot_number = 1;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 17314), 
    @last_rune_id, 
    1
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 17314);

-- Rune ID: 42327158489

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 2 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(42327158489, 
 9215591, 
 1, 
 14488728137, 
 2,
 5, 
 6, 
 10, 
 15, 
 15,
 760800, 
 138040, 
 (SELECT id FROM stat_types WHERE code = 'SPD'), 
 42,
 (SELECT id FROM stat_types WHERE code = 'DEF_FLAT'), 
 18, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    16,
    0,
    11
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 11 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ACC'),
    10,
    0,
    10
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ACC')
    AND is_ancient = 0
    AND 10 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    13,
    0,
    8
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND 8 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    11,
    1,
    6
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 6 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_upgrades 
(rune_id, level_reached, stat_type_id, old_value, new_value, upgrade_date)
SELECT 
    @last_rune_id,
    3,
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    6.0,
    11.0,
    NOW();

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 17314)
AND slot_number = 2;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 17314), 
    @last_rune_id, 
    2
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 17314);

-- Rune ID: 40785412870

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 5 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(40785412870, 
 9215591, 
 1, 
 14488728137, 
 5,
 5, 
 6, 
 14, 
 15, 
 15,
 507200, 
 127159, 
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 2448,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    7,
    1,
    0
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND 0 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    22,
    0,
    18
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 18 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    5,
    0,
    -2
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND -2 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ACC'),
    7,
    0,
    7
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ACC')
    AND is_ancient = 0
    AND 7 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 17314)
AND slot_number = 5;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 17314), 
    @last_rune_id, 
    5
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 17314);

-- Rune ID: 44035236824

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 1 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(44035236824, 
 9215591, 
 1, 
 14528265536, 
 1,
 5, 
 6, 
 3, 
 15, 
 12,
 481840, 
 68778, 
 (SELECT id FROM stat_types WHERE code = 'ATK_FLAT'), 
 118,
 (SELECT id FROM stat_types WHERE code = 'RES'), 
 5, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    24,
    0,
    19
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 19 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'),
    13,
    0,
    13
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_DMG')
    AND is_ancient = 0
    AND 13 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    5,
    0,
    2
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 2 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    5,
    1,
    5
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 5 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_upgrades 
(rune_id, level_reached, stat_type_id, old_value, new_value, upgrade_date)
SELECT 
    @last_rune_id,
    3,
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    5.0,
    5.0,
    NOW();

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 13914)
AND slot_number = 1;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 13914), 
    @last_rune_id, 
    1
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 13914);

-- Rune ID: 44048255554

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 3 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(44048255554, 
 9215591, 
 1, 
 14528265536, 
 3,
 5, 
 6, 
 4, 
 15, 
 12,
 356625, 
 61405, 
 (SELECT id FROM stat_types WHERE code = 'DEF_FLAT'), 
 118,
 (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'), 
 6, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'),
    5,
    0,
    5
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_DMG')
    AND is_ancient = 0
    AND 5 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'RES'),
    5,
    0,
    5
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'RES')
    AND is_ancient = 0
    AND 5 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    21,
    0,
    21
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 21 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    6,
    0,
    6
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND 6 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 13914)
AND slot_number = 3;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 13914), 
    @last_rune_id, 
    3
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 13914);

-- Rune ID: 44061669231

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 5 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(44061669231, 
 9215591, 
 1, 
 14528265536, 
 5,
 5, 
 6, 
 4, 
 15, 
 12,
 329680, 
 59485, 
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 1800,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    5,
    0,
    5
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 5 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'),
    16,
    0,
    16
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_DMG')
    AND is_ancient = 0
    AND 16 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    11,
    0,
    11
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 11 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    7,
    0,
    7
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 7 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 13914)
AND slot_number = 5;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 13914), 
    @last_rune_id, 
    5
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 13914);

-- Rune ID: 41607491317

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 1 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(41607491317, 
 9215591, 
 1, 
 14528265537, 
 1,
 5, 
 6, 
 11, 
 15, 
 12,
 602300, 
 68251, 
 (SELECT id FROM stat_types WHERE code = 'ATK_FLAT'), 
 118,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    17,
    0,
    14
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 14 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    12,
    0,
    6
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 6 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    11,
    1,
    6
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 6 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_FLAT'),
    330,
    0,
    20
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_FLAT')
    AND is_ancient = 0
    AND 20 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 13514)
AND slot_number = 1;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 13514), 
    @last_rune_id, 
    1
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 13514);

-- Rune ID: 41774928921

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 2 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(41774928921, 
 9215591, 
 1, 
 14528265537, 
 2,
 5, 
 6, 
 11, 
 15, 
 15,
 634000, 
 133949, 
 (SELECT id FROM stat_types WHERE code = 'SPD'), 
 42,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    13,
    0,
    6
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND 6 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    10,
    0,
    4
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 4 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    10,
    0,
    10
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 10 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    11,
    1,
    7
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 7 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_upgrades 
(rune_id, level_reached, stat_type_id, old_value, new_value, upgrade_date)
SELECT 
    @last_rune_id,
    3,
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    7.0,
    11.0,
    NOW();

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 13514)
AND slot_number = 2;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 13514), 
    @last_rune_id, 
    2
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 13514);

-- Rune ID: 24328814111

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 3 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(24328814111, 
 9215591, 
 1, 
 14528265537, 
 3,
 5, 
 6, 
 4, 
 15, 
 12,
 309075, 
 58017, 
 (SELECT id FROM stat_types WHERE code = 'DEF_FLAT'), 
 118,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    23,
    0,
    18
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 18 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    5,
    1,
    5
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 5 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    8,
    0,
    2
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 2 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'),
    7,
    0,
    7
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_DMG')
    AND is_ancient = 0
    AND 7 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 13514)
AND slot_number = 3;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 13514), 
    @last_rune_id, 
    3
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 13514);

-- Rune ID: 31022615413

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 4 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_DMG')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(31022615413, 
 9215591, 
 1, 
 14528265537, 
 4,
 5, 
 6, 
 11, 
 15, 
 15,
 570600, 
 130554, 
 (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'), 
 80,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    8,
    1,
    8
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 8 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    12,
    0,
    5
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND 5 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    20,
    0,
    13
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 13 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_FLAT'),
    11,
    0,
    -19
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_FLAT')
    AND is_ancient = 0
    AND -19 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 13514)
AND slot_number = 4;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 13514), 
    @last_rune_id, 
    4
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 13514);

-- Rune ID: 31030456615

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 5 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(31030456615, 
 9215591, 
 1, 
 14528265537, 
 5,
 5, 
 6, 
 11, 
 15, 
 12,
 557920, 
 65875, 
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 1800,
 (SELECT id FROM stat_types WHERE code = 'DEF_PCT'), 
 8, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    23,
    0,
    18
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 18 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    9,
    1,
    2
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 2 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    4,
    0,
    4
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 4 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'),
    4,
    0,
    4
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_DMG')
    AND is_ancient = 0
    AND 4 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 13514)
AND slot_number = 5;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 13514), 
    @last_rune_id, 
    5
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 13514);

-- Rune ID: 30889538488

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 6 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(30889538488, 
 9215591, 
 1, 
 14528265537, 
 6,
 5, 
 6, 
 4, 
 15, 
 15,
 350285, 
 124953, 
 (SELECT id FROM stat_types WHERE code = 'ATK_PCT'), 
 63,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'),
    5,
    0,
    5
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_DMG')
    AND is_ancient = 0
    AND 5 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    21,
    0,
    15
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 15 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    11,
    0,
    11
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 11 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    7,
    1,
    3
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 3 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_upgrades 
(rune_id, level_reached, stat_type_id, old_value, new_value, upgrade_date)
SELECT 
    @last_rune_id,
    3,
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    3.0,
    7.0,
    NOW();

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 13514)
AND slot_number = 6;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 13514), 
    @last_rune_id, 
    6
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 13514);

-- Rune ID: 45624725357

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 1 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(45624725357, 
 9215591, 
 1, 
 14990455870, 
 1,
 5, 
 6, 
 17, 
 15, 
 12,
 602300, 
 68251, 
 (SELECT id FROM stat_types WHERE code = 'ATK_FLAT'), 
 118,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'RES'),
    6,
    0,
    6
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'RES')
    AND is_ancient = 0
    AND 6 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    12,
    0,
    12
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 12 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    6,
    0,
    6
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 6 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    27,
    0,
    27
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 27 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 22914)
AND slot_number = 1;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 22914), 
    @last_rune_id, 
    1
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 22914);

-- Rune ID: 41346917451

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 3 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(41346917451, 
 9215591, 
 1, 
 14990455870, 
 3,
 5, 
 6, 
 17, 
 15, 
 15,
 475500, 
 125461, 
 (SELECT id FROM stat_types WHERE code = 'DEF_FLAT'), 
 160,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    5,
    0,
    1
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 1 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    17,
    0,
    17
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 17 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'),
    12,
    0,
    12
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_DMG')
    AND is_ancient = 0
    AND 12 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_FLAT'),
    342,
    0,
    -66
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_FLAT')
    AND is_ancient = 0
    AND -66 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 22914)
AND slot_number = 3;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 22914), 
    @last_rune_id, 
    3
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 22914);

-- Rune ID: 41532795030

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 5 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(41532795030, 
 9215591, 
 1, 
 14990455870, 
 5,
 5, 
 6, 
 15, 
 15, 
 12,
 557920, 
 65875, 
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 1800,
 (SELECT id FROM stat_types WHERE code = 'ACC'), 
 5, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'),
    22,
    0,
    22
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_DMG')
    AND is_ancient = 0
    AND 22 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    8,
    0,
    4
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 4 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    5,
    0,
    5
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 5 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    12,
    0,
    5
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND 5 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 22914)
AND slot_number = 5;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 22914), 
    @last_rune_id, 
    5
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 22914);

-- Rune ID: 41499773394

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 1 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(41499773394, 
 9215591, 
 1, 
 14990455871, 
 1,
 5, 
 6, 
 17, 
 15, 
 12,
 602300, 
 68251, 
 (SELECT id FROM stat_types WHERE code = 'ATK_FLAT'), 
 118,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    12,
    0,
    9
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 9 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_FLAT'),
    286,
    0,
    -104
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_FLAT')
    AND is_ancient = 0
    AND -104 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    21,
    0,
    14
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 14 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'),
    5,
    0,
    5
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_DMG')
    AND is_ancient = 0
    AND 5 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 14114)
AND slot_number = 1;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 14114), 
    @last_rune_id, 
    1
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 14114);

-- Rune ID: 41289463990

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 3 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(41289463990, 
 9215591, 
 1, 
 14990455871, 
 3,
 5, 
 6, 
 17, 
 15, 
 12,
 475500, 
 61461, 
 (SELECT id FROM stat_types WHERE code = 'DEF_FLAT'), 
 118,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ACC'),
    11,
    0,
    11
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ACC')
    AND is_ancient = 0
    AND 11 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_FLAT'),
    223,
    0,
    -189
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_FLAT')
    AND is_ancient = 0
    AND -189 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    16,
    0,
    14
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 14 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    5,
    0,
    -2
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND -2 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 14114)
AND slot_number = 3;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 14114), 
    @last_rune_id, 
    3
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 14114);

-- Rune ID: 32881914157

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 5 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(32881914157, 
 9215591, 
 1, 
 14990455871, 
 5,
 5, 
 6, 
 19, 
 15, 
 15,
 507200, 
 127159, 
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 2448,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_FLAT'),
    34,
    0,
    19
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_FLAT')
    AND is_ancient = 0
    AND 19 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    19,
    0,
    14
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 14 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'),
    6,
    0,
    6
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_DMG')
    AND is_ancient = 0
    AND 6 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    7,
    0,
    2
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 2 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 14114)
AND slot_number = 5;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 14114), 
    @last_rune_id, 
    5
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 14114);

-- Rune ID: 37128581267

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 1 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(37128581267, 
 9215591, 
 1, 
 15249174929, 
 1,
 5, 
 6, 
 17, 
 15, 
 15,
 662530, 
 135476, 
 (SELECT id FROM stat_types WHERE code = 'ATK_FLAT'), 
 160,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 298, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    4,
    0,
    0
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 0 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    27,
    0,
    20
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 20 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    11,
    0,
    11
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 11 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'),
    5,
    0,
    5
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_DMG')
    AND is_ancient = 0
    AND 5 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 26614)
AND slot_number = 1;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 26614), 
    @last_rune_id, 
    1
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 26614);

-- Rune ID: 34326938847

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 2 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(34326938847, 
 9215591, 
 1, 
 15249174929, 
 2,
 5, 
 6, 
 19, 
 15, 
 15,
 634000, 
 133949, 
 (SELECT id FROM stat_types WHERE code = 'DEF_PCT'), 
 63,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ACC'),
    6,
    0,
    6
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ACC')
    AND is_ancient = 0
    AND 6 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    18,
    0,
    18
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 18 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_FLAT'),
    19,
    0,
    19
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_FLAT')
    AND is_ancient = 0
    AND 19 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_FLAT'),
    15,
    0,
    15
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_FLAT')
    AND is_ancient = 0
    AND 15 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 26614)
AND slot_number = 2;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 26614), 
    @last_rune_id, 
    2
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 26614);

-- Rune ID: 40425120537

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 3 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(40425120537, 
 9215591, 
 1, 
 15249174929, 
 3,
 5, 
 6, 
 17, 
 15, 
 12,
 523050, 
 64008, 
 (SELECT id FROM stat_types WHERE code = 'DEF_FLAT'), 
 118,
 (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'), 
 5, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    6,
    0,
    3
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 3 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    29,
    0,
    23
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 23 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_FLAT'),
    240,
    0,
    -112
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_FLAT')
    AND is_ancient = 0
    AND -112 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'RES'),
    6,
    0,
    6
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'RES')
    AND is_ancient = 0
    AND 6 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 26614)
AND slot_number = 3;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 26614), 
    @last_rune_id, 
    3
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 26614);

-- Rune ID: 41620901374

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 1 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(41620901374, 
 9215591, 
 1, 
 15300691646, 
 1,
 5, 
 6, 
 15, 
 15, 
 12,
 602300, 
 68251, 
 (SELECT id FROM stat_types WHERE code = 'ATK_FLAT'), 
 118,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    16,
    0,
    12
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 12 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'),
    11,
    0,
    11
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_DMG')
    AND is_ancient = 0
    AND 11 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    5,
    0,
    -2
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND -2 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    7,
    1,
    7
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 7 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_upgrades 
(rune_id, level_reached, stat_type_id, old_value, new_value, upgrade_date)
SELECT 
    @last_rune_id,
    3,
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    7.0,
    7.0,
    NOW();

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 18814)
AND slot_number = 1;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 18814), 
    @last_rune_id, 
    1
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 18814);

-- Rune ID: 21844835515

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 5 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(21844835515, 
 9215591, 
 1, 
 15300691646, 
 5,
 15, 
 16, 
 5, 
 15, 
 15,
 669504, 
 133475, 
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 2448,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ACC'),
    6,
    0,
    6
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ACC')
    AND is_ancient = 1
    AND 6 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'),
    5,
    0,
    5
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_DMG')
    AND is_ancient = 1
    AND 5 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    29,
    0,
    23
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 1
    AND 23 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    4,
    1,
    4
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 1
    AND 4 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_upgrades 
(rune_id, level_reached, stat_type_id, old_value, new_value, upgrade_date)
SELECT 
    @last_rune_id,
    3,
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    4.0,
    4.0,
    NOW();

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 18814)
AND slot_number = 5;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 18814), 
    @last_rune_id, 
    5
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 18814);

-- Rune ID: 38110390370

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 1 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(38110390370, 
 9215591, 
 1, 
 15511654776, 
 1,
 5, 
 6, 
 18, 
 15, 
 12,
 662530, 
 71476, 
 (SELECT id FROM stat_types WHERE code = 'ATK_FLAT'), 
 118,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 233, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    15,
    0,
    15
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 15 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    5,
    0,
    -2
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND -2 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    11,
    0,
    7
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 7 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    10,
    1,
    4
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 4 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_upgrades 
(rune_id, level_reached, stat_type_id, old_value, new_value, upgrade_date)
SELECT 
    @last_rune_id,
    3,
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    4.0,
    10.0,
    NOW();

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 25414)
AND slot_number = 1;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 25414), 
    @last_rune_id, 
    1
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 25414);

-- Rune ID: 34320594796

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 2 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(34320594796, 
 9215591, 
 1, 
 15511654776, 
 2,
 5, 
 6, 
 19, 
 15, 
 15,
 697400, 
 137344, 
 (SELECT id FROM stat_types WHERE code = 'DEF_PCT'), 
 63,
 (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'), 
 5, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ACC'),
    11,
    0,
    11
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ACC')
    AND is_ancient = 0
    AND 11 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    9,
    0,
    6
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 6 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_FLAT'),
    288,
    0,
    288
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_FLAT')
    AND is_ancient = 0
    AND 288 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_FLAT'),
    11,
    0,
    11
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_FLAT')
    AND is_ancient = 0
    AND 11 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 25414)
AND slot_number = 2;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 25414), 
    @last_rune_id, 
    2
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 25414);

-- Rune ID: 34319725042

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 3 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(34319725042, 
 9215591, 
 1, 
 15511654776, 
 3,
 5, 
 6, 
 19, 
 15, 
 12,
 475500, 
 61461, 
 (SELECT id FROM stat_types WHERE code = 'DEF_FLAT'), 
 118,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'),
    4,
    0,
    4
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_DMG')
    AND is_ancient = 0
    AND 4 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ACC'),
    9,
    0,
    9
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ACC')
    AND is_ancient = 0
    AND 9 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    22,
    0,
    15
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 15 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    6,
    0,
    6
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 6 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 25414)
AND slot_number = 3;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 25414), 
    @last_rune_id, 
    3
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 25414);

-- Rune ID: 34308136464

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 5 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(34308136464, 
 9215591, 
 1, 
 15511654776, 
 5,
 5, 
 6, 
 19, 
 15, 
 12,
 507200, 
 63159, 
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 1800,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    13,
    0,
    7
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND 7 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'RES'),
    17,
    0,
    17
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'RES')
    AND is_ancient = 0
    AND 17 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    6,
    0,
    6
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 6 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    6,
    0,
    6
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 6 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 25414)
AND slot_number = 5;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 25414), 
    @last_rune_id, 
    5
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 25414);

-- Rune ID: 39849054954

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 1 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(39849054954, 
 9215591, 
 1, 
 15532873323, 
 1,
 5, 
 6, 
 6, 
 15, 
 12,
 481840, 
 68778, 
 (SELECT id FROM stat_types WHERE code = 'ATK_FLAT'), 
 118,
 (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'), 
 6, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ACC'),
    20,
    0,
    20
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ACC')
    AND is_ancient = 0
    AND 20 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    5,
    0,
    -1
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND -1 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    11,
    0,
    7
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 7 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_FLAT'),
    164,
    0,
    -242
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_FLAT')
    AND is_ancient = 0
    AND -242 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 18114)
AND slot_number = 1;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 18114), 
    @last_rune_id, 
    1
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 18114);

-- Rune ID: 42385997933

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 3 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(42385997933, 
 9215591, 
 1, 
 15532873323, 
 3,
 5, 
 6, 
 6, 
 15, 
 12,
 332850, 
 58642, 
 (SELECT id FROM stat_types WHERE code = 'DEF_FLAT'), 
 118,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ACC'),
    6,
    0,
    6
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ACC')
    AND is_ancient = 0
    AND 6 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    21,
    0,
    17
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 17 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_FLAT'),
    263,
    0,
    -275
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_FLAT')
    AND is_ancient = 0
    AND -275 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    7,
    0,
    1
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 1 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 18114)
AND slot_number = 3;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 18114), 
    @last_rune_id, 
    3
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 18114);

-- Rune ID: 31701069481

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 5 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(31701069481, 
 9215591, 
 1, 
 15532873323, 
 5,
 5, 
 6, 
 8, 
 15, 
 12,
 380400, 
 63098, 
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 1800,
 (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'), 
 6, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    15,
    0,
    15
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 15 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    16,
    0,
    14
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 14 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    4,
    0,
    4
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 4 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_FLAT'),
    26,
    1,
    26
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_FLAT')
    AND is_ancient = 0
    AND 26 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_upgrades 
(rune_id, level_reached, stat_type_id, old_value, new_value, upgrade_date)
SELECT 
    @last_rune_id,
    3,
    (SELECT id FROM stat_types WHERE code = 'ATK_FLAT'),
    26.0,
    26.0,
    NOW();

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 18114)
AND slot_number = 5;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 18114), 
    @last_rune_id, 
    5
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 18114);

-- Rune ID: 23667220001

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 3 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(23667220001, 
 9215591, 
 1, 
 15938022141, 
 3,
 5, 
 6, 
 16, 
 15, 
 12,
 475500, 
 61461, 
 (SELECT id FROM stat_types WHERE code = 'DEF_FLAT'), 
 118,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'),
    6,
    0,
    6
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_DMG')
    AND is_ancient = 0
    AND 6 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    8,
    0,
    2
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND 2 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    19,
    0,
    15
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 15 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    6,
    0,
    6
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 6 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 22414)
AND slot_number = 3;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 22414), 
    @last_rune_id, 
    3
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 22414);

-- Rune ID: 45467398564

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 5 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(45467398564, 
 9215591, 
 1, 
 15938022141, 
 5,
 5, 
 6, 
 8, 
 15, 
 12,
 380400, 
 63098, 
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 1800,
 (SELECT id FROM stat_types WHERE code = 'SPD'), 
 5, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_FLAT'),
    27,
    0,
    27
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_FLAT')
    AND is_ancient = 0
    AND 27 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'),
    13,
    0,
    13
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_DMG')
    AND is_ancient = 0
    AND 13 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_FLAT'),
    14,
    0,
    14
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_FLAT')
    AND is_ancient = 0
    AND 14 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    15,
    0,
    15
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 15 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 22414)
AND slot_number = 5;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 22414), 
    @last_rune_id, 
    5
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 22414);

-- Rune ID: 40670086336

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 1 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(40670086336, 
 9215591, 
 1, 
 16000267783, 
 1,
 5, 
 6, 
 18, 
 15, 
 12,
 602300, 
 68251, 
 (SELECT id FROM stat_types WHERE code = 'ATK_FLAT'), 
 118,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    10,
    1,
    10
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 10 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    5,
    0,
    1
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 1 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    10,
    0,
    10
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 10 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    26,
    0,
    19
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 19 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 27514)
AND slot_number = 1;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 27514), 
    @last_rune_id, 
    1
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 27514);

-- Rune ID: 34326938852

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 2 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(34326938852, 
 9215591, 
 1, 
 16000267783, 
 2,
 5, 
 6, 
 19, 
 15, 
 15,
 634000, 
 133949, 
 (SELECT id FROM stat_types WHERE code = 'DEF_PCT'), 
 63,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_FLAT'),
    31,
    0,
    5
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_FLAT')
    AND is_ancient = 0
    AND 5 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    11,
    0,
    7
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 7 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ACC'),
    5,
    1,
    5
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ACC')
    AND is_ancient = 0
    AND 5 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    7,
    0,
    0
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 0 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 27514)
AND slot_number = 2;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 27514), 
    @last_rune_id, 
    2
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 27514);

-- Rune ID: 34303510696

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 3 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(34303510696, 
 9215591, 
 1, 
 16000267783, 
 3,
 5, 
 6, 
 22, 
 15, 
 15,
 475500, 
 125461, 
 (SELECT id FROM stat_types WHERE code = 'DEF_FLAT'), 
 160,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ACC'),
    8,
    0,
    8
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ACC')
    AND is_ancient = 0
    AND 8 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    23,
    0,
    16
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND 16 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    12,
    0,
    7
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 7 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'),
    7,
    0,
    7
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_DMG')
    AND is_ancient = 0
    AND 7 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 27514)
AND slot_number = 3;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 27514), 
    @last_rune_id, 
    3
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 27514);

-- Rune ID: 44288123601

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 5 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(44288123601, 
 9215591, 
 1, 
 16000267783, 
 5,
 5, 
 6, 
 18, 
 15, 
 12,
 557920, 
 65875, 
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 1800,
 (SELECT id FROM stat_types WHERE code = 'ACC'), 
 4, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    13,
    0,
    13
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 13 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    18,
    0,
    18
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 18 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    5,
    0,
    5
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 5 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    7,
    0,
    7
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND 7 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 27514)
AND slot_number = 5;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 27514), 
    @last_rune_id, 
    5
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 27514);

-- Rune ID: 41009464616

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 1 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(41009464616, 
 9215591, 
 1, 
 16026900752, 
 1,
 5, 
 6, 
 15, 
 15, 
 12,
 602300, 
 68251, 
 (SELECT id FROM stat_types WHERE code = 'ATK_FLAT'), 
 118,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    16,
    0,
    9
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 9 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    10,
    0,
    7
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 7 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    14,
    0,
    9
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 9 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_FLAT'),
    538,
    0,
    295
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_FLAT')
    AND is_ancient = 0
    AND 295 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 27314)
AND slot_number = 1;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 27314), 
    @last_rune_id, 
    1
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 27314);

-- Rune ID: 34339795037

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 2 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(34339795037, 
 9215591, 
 1, 
 16026900752, 
 2,
 5, 
 6, 
 19, 
 15, 
 15,
 634000, 
 133949, 
 (SELECT id FROM stat_types WHERE code = 'DEF_PCT'), 
 63,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'RES'),
    23,
    0,
    23
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'RES')
    AND is_ancient = 0
    AND 23 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    6,
    0,
    6
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 6 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    4,
    0,
    4
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 4 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    8,
    0,
    8
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 8 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 27314)
AND slot_number = 2;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 27314), 
    @last_rune_id, 
    2
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 27314);

-- Rune ID: 30492847187

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 3 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(30492847187, 
 9215591, 
 1, 
 16026900752, 
 3,
 5, 
 6, 
 15, 
 15, 
 15,
 523050, 
 128008, 
 (SELECT id FROM stat_types WHERE code = 'DEF_FLAT'), 
 160,
 (SELECT id FROM stat_types WHERE code = 'DEF_PCT'), 
 6, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'),
    11,
    0,
    11
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_DMG')
    AND is_ancient = 0
    AND 11 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    17,
    0,
    14
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 14 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    11,
    1,
    11
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 11 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    5,
    0,
    5
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 5 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 27314)
AND slot_number = 3;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 27314), 
    @last_rune_id, 
    3
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 27314);

-- Rune ID: 32074245268

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 5 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(32074245268, 
 9215591, 
 1, 
 16026900752, 
 5,
 15, 
 16, 
 23, 
 15, 
 12,
 608640, 
 68591, 
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 1800,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    16,
    0,
    16
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 1
    AND 16 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'RES'),
    15,
    0,
    15
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'RES')
    AND is_ancient = 1
    AND 15 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    5,
    0,
    5
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 1
    AND 5 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    16,
    0,
    16
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 1
    AND 16 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 27314)
AND slot_number = 5;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 27314), 
    @last_rune_id, 
    5
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 27314);

-- Rune ID: 20911505060

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 1 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(20911505060, 
 9215591, 
 1, 
 16253592241, 
 1,
 5, 
 6, 
 15, 
 15, 
 15,
 662530, 
 135476, 
 (SELECT id FROM stat_types WHERE code = 'ATK_FLAT'), 
 160,
 (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'), 
 4, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    10,
    1,
    3
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 3 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    21,
    0,
    17
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 17 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_FLAT'),
    283,
    0,
    -235
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_FLAT')
    AND is_ancient = 0
    AND -235 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ACC'),
    6,
    0,
    6
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ACC')
    AND is_ancient = 0
    AND 6 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 27614)
AND slot_number = 1;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 27614), 
    @last_rune_id, 
    1
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 27614);

-- Rune ID: 42632637732

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 2 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(42632637732, 
 9215591, 
 1, 
 16253592241, 
 2,
 5, 
 6, 
 19, 
 15, 
 12,
 697400, 
 73344, 
 (SELECT id FROM stat_types WHERE code = 'DEF_PCT'), 
 47,
 (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'), 
 6, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    8,
    0,
    4
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 4 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    22,
    0,
    22
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 22 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_FLAT'),
    16,
    0,
    16
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_FLAT')
    AND is_ancient = 0
    AND 16 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_FLAT'),
    356,
    0,
    356
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_FLAT')
    AND is_ancient = 0
    AND 356 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 27614)
AND slot_number = 2;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 27614), 
    @last_rune_id, 
    2
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 27614);

-- Rune ID: 35803117798

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 3 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(35803117798, 
 9215591, 
 1, 
 16253592241, 
 3,
 5, 
 6, 
 15, 
 15, 
 12,
 475500, 
 61461, 
 (SELECT id FROM stat_types WHERE code = 'DEF_FLAT'), 
 118,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    7,
    0,
    1
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 1 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    12,
    0,
    8
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND 8 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    17,
    0,
    14
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 14 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ACC'),
    6,
    1,
    6
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ACC')
    AND is_ancient = 0
    AND 6 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_upgrades 
(rune_id, level_reached, stat_type_id, old_value, new_value, upgrade_date)
SELECT 
    @last_rune_id,
    3,
    (SELECT id FROM stat_types WHERE code = 'ACC'),
    6.0,
    6.0,
    NOW();

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 27614)
AND slot_number = 3;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 27614), 
    @last_rune_id, 
    3
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 27614);

-- Rune ID: 45606051330

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 5 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(45606051330, 
 9215591, 
 1, 
 16253592241, 
 5,
 15, 
 16, 
 22, 
 15, 
 12,
 608640, 
 68591, 
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 1800,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    16,
    0,
    16
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 1
    AND 16 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'RES'),
    12,
    0,
    12
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'RES')
    AND is_ancient = 1
    AND 12 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    20,
    0,
    20
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 1
    AND 20 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    7,
    0,
    7
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 1
    AND 7 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 27614)
AND slot_number = 5;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 27614), 
    @last_rune_id, 
    5
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 27614);

-- Rune ID: 24181039826

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 1 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(24181039826, 
 9215591, 
 1, 
 16883215488, 
 1,
 5, 
 6, 
 13, 
 15, 
 15,
 722760, 
 136138, 
 (SELECT id FROM stat_types WHERE code = 'ATK_FLAT'), 
 160,
 (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'), 
 4, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    11,
    1,
    5
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 5 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ACC'),
    4,
    0,
    4
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ACC')
    AND is_ancient = 0
    AND 4 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    10,
    0,
    6
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 6 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    29,
    0,
    20
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 20 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 23514)
AND slot_number = 1;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 23514), 
    @last_rune_id, 
    1
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 23514);

-- Rune ID: 16021343878

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 2 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(16021343878, 
 9215591, 
 1, 
 16883215488, 
 2,
 5, 
 6, 
 13, 
 15, 
 15,
 697400, 
 134870, 
 (SELECT id FROM stat_types WHERE code = 'SPD'), 
 42,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    15,
    0,
    7
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 7 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    11,
    0,
    2
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND 2 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ACC'),
    8,
    1,
    8
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ACC')
    AND is_ancient = 0
    AND 8 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    21,
    0,
    13
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 13 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 23514)
AND slot_number = 2;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 23514), 
    @last_rune_id, 
    2
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 23514);

-- Rune ID: 41289871993

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 3 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(41289871993, 
 9215591, 
 1, 
 16883215488, 
 3,
 5, 
 6, 
 13, 
 15, 
 15,
 570600, 
 128530, 
 (SELECT id FROM stat_types WHERE code = 'DEF_FLAT'), 
 160,
 (SELECT id FROM stat_types WHERE code = 'ACC'), 
 8, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    10,
    1,
    6
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND 6 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    20,
    0,
    15
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 15 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    10,
    0,
    10
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 10 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    7,
    0,
    1
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 1 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 23514)
AND slot_number = 3;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 23514), 
    @last_rune_id, 
    3
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 23514);

-- Rune ID: 34983530639

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 4 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(34983530639, 
 9215591, 
 1, 
 16883215488, 
 4,
 5, 
 6, 
 13, 
 15, 
 15,
 684720, 
 134236, 
 (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'), 
 58,
 (SELECT id FROM stat_types WHERE code = 'ACC'), 
 8, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    7,
    0,
    0
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 0 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    6,
    0,
    -3
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND -3 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    26,
    0,
    21
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 21 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    9,
    1,
    2
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 2 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_upgrades 
(rune_id, level_reached, stat_type_id, old_value, new_value, upgrade_date)
SELECT 
    @last_rune_id,
    3,
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    2.0,
    9.0,
    NOW();

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 23514)
AND slot_number = 4;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 23514), 
    @last_rune_id, 
    4
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 23514);

-- Rune ID: 40167726452

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 5 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(40167726452, 
 9215591, 
 1, 
 16883215488, 
 5,
 5, 
 6, 
 15, 
 15, 
 15,
 507200, 
 127159, 
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 2448,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    11,
    0,
    8
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 8 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    22,
    0,
    15
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 15 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    11,
    1,
    6
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND 6 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    7,
    0,
    1
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 1 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 23514)
AND slot_number = 5;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 23514), 
    @last_rune_id, 
    5
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 23514);

-- Rune ID: 32369887093

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 6 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(32369887093, 
 9215591, 
 1, 
 16883215488, 
 6,
 5, 
 6, 
 15, 
 15, 
 15,
 538900, 
 128856, 
 (SELECT id FROM stat_types WHERE code = 'HP_PCT'), 
 63,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    11,
    0,
    4
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 4 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    24,
    0,
    19
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 19 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ACC'),
    11,
    1,
    11
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ACC')
    AND is_ancient = 0
    AND 11 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    8,
    0,
    -2
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND -2 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 23514)
AND slot_number = 6;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 23514), 
    @last_rune_id, 
    6
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 23514);

-- Rune ID: 41688592917

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 1 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(41688592917, 
 9215591, 
 1, 
 16889147832, 
 1,
 5, 
 6, 
 17, 
 15, 
 12,
 602300, 
 68251, 
 (SELECT id FROM stat_types WHERE code = 'ATK_FLAT'), 
 118,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    12,
    0,
    6
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 6 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    18,
    0,
    14
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 14 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_FLAT'),
    208,
    0,
    -82
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_FLAT')
    AND is_ancient = 0
    AND -82 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    5,
    0,
    5
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 5 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 13414)
AND slot_number = 1;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 13414), 
    @last_rune_id, 
    1
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 13414);

-- Rune ID: 44828573729

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 3 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(44828573729, 
 9215591, 
 1, 
 16889147832, 
 3,
 5, 
 6, 
 17, 
 15, 
 12,
 523050, 
 64008, 
 (SELECT id FROM stat_types WHERE code = 'DEF_FLAT'), 
 118,
 (SELECT id FROM stat_types WHERE code = 'SPD'), 
 5, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    15,
    0,
    15
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 15 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    13,
    0,
    13
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 13 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'RES'),
    4,
    0,
    4
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'RES')
    AND is_ancient = 0
    AND 4 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    13,
    0,
    13
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND 13 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 13414)
AND slot_number = 3;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 13414), 
    @last_rune_id, 
    3
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 13414);

-- Rune ID: 34326951094

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 5 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(34326951094, 
 9215591, 
 1, 
 16889147832, 
 5,
 5, 
 6, 
 19, 
 15, 
 12,
 507200, 
 63159, 
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 1800,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    7,
    0,
    0
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND 0 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_FLAT'),
    36,
    0,
    23
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_FLAT')
    AND is_ancient = 0
    AND 23 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ACC'),
    13,
    0,
    13
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ACC')
    AND is_ancient = 0
    AND 13 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'),
    18,
    0,
    18
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_DMG')
    AND is_ancient = 0
    AND 18 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 13414)
AND slot_number = 5;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 13414), 
    @last_rune_id, 
    5
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 13414);

-- Rune ID: 43038115116

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 3 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(43038115116, 
 9215591, 
 1, 
 16904099543, 
 3,
 5, 
 6, 
 3, 
 15, 
 12,
 380400, 
 61877, 
 (SELECT id FROM stat_types WHERE code = 'DEF_FLAT'), 
 118,
 (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'), 
 5, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    20,
    0,
    16
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 16 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    7,
    0,
    2
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND 2 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_FLAT'),
    245,
    0,
    -300
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_FLAT')
    AND is_ancient = 0
    AND -300 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    6,
    1,
    1
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 1 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_upgrades 
(rune_id, level_reached, stat_type_id, old_value, new_value, upgrade_date)
SELECT 
    @last_rune_id,
    3,
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    1.0,
    6.0,
    NOW();

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 21014)
AND slot_number = 3;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 21014), 
    @last_rune_id, 
    3
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 21014);

-- Rune ID: 26609603691

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 4 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(26609603691, 
 9215591, 
 1, 
 16904099543, 
 4,
 5, 
 6, 
 18, 
 15, 
 15,
 570600, 
 130554, 
 (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'), 
 58,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    22,
    0,
    18
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 18 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ACC'),
    5,
    0,
    5
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ACC')
    AND is_ancient = 0
    AND 5 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    11,
    1,
    4
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 4 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    5,
    0,
    -2
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND -2 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 21014)
AND slot_number = 4;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 21014), 
    @last_rune_id, 
    4
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 21014);

-- Rune ID: 41621296768

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 5 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(41621296768, 
 9215591, 
 1, 
 16904099543, 
 5,
 5, 
 6, 
 14, 
 15, 
 15,
 557920, 
 129875, 
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 2448,
 (SELECT id FROM stat_types WHERE code = 'DEF_FLAT'), 
 13, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    27,
    0,
    22
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 22 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    9,
    1,
    1
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 1 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_FLAT'),
    13,
    0,
    -10
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_FLAT')
    AND is_ancient = 0
    AND -10 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    8,
    0,
    0
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 0 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 21014)
AND slot_number = 5;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 21014), 
    @last_rune_id, 
    5
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 21014);

-- Rune ID: 33636665856

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 3 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(33636665856, 
 9215591, 
 1, 
 16998820505, 
 3,
 5, 
 6, 
 7, 
 15, 
 12,
 332850, 
 58642, 
 (SELECT id FROM stat_types WHERE code = 'DEF_FLAT'), 
 118,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    20,
    0,
    16
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 16 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ACC'),
    8,
    0,
    8
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ACC')
    AND is_ancient = 0
    AND 8 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    12,
    1,
    6
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 6 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_FLAT'),
    314,
    0,
    -122
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_FLAT')
    AND is_ancient = 0
    AND -122 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 13314)
AND slot_number = 3;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 13314), 
    @last_rune_id, 
    3
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 13314);

-- Rune ID: 40858257754

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 5 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(40858257754, 
 9215591, 
 1, 
 16998820505, 
 5,
 5, 
 6, 
 5, 
 15, 
 12,
 608640, 
 66432, 
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 1800,
 (SELECT id FROM stat_types WHERE code = 'HP_PCT'), 
 6, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'),
    10,
    0,
    10
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_DMG')
    AND is_ancient = 0
    AND 10 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_FLAT'),
    33,
    0,
    15
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_FLAT')
    AND is_ancient = 0
    AND 15 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    11,
    0,
    4
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 4 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    7,
    1,
    7
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 7 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_upgrades 
(rune_id, level_reached, stat_type_id, old_value, new_value, upgrade_date)
SELECT 
    @last_rune_id,
    3,
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    7.0,
    7.0,
    NOW();

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 13314)
AND slot_number = 5;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 13314), 
    @last_rune_id, 
    5
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 13314);

-- Rune ID: 22021369167

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 1 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(22021369167, 
 9215591, 
 1, 
 17234001551, 
 1,
 5, 
 6, 
 10, 
 15, 
 15,
 722760, 
 136138, 
 (SELECT id FROM stat_types WHERE code = 'ATK_FLAT'), 
 160,
 (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'), 
 5, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    24,
    0,
    17
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 17 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    10,
    0,
    5
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 5 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_FLAT'),
    317,
    0,
    -227
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_FLAT')
    AND is_ancient = 0
    AND -227 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    10,
    1,
    1
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 1 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_upgrades 
(rune_id, level_reached, stat_type_id, old_value, new_value, upgrade_date)
SELECT 
    @last_rune_id,
    3,
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    1.0,
    10.0,
    NOW();

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 19814)
AND slot_number = 1;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 19814), 
    @last_rune_id, 
    1
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 19814);

-- Rune ID: 24427898535

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 3 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(24427898535, 
 9215591, 
 1, 
 17234001551, 
 3,
 5, 
 6, 
 17, 
 15, 
 15,
 523050, 
 128008, 
 (SELECT id FROM stat_types WHERE code = 'DEF_FLAT'), 
 160,
 (SELECT id FROM stat_types WHERE code = 'RES'), 
 6, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    24,
    0,
    17
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 17 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    7,
    1,
    7
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 7 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    13,
    0,
    8
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 8 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    8,
    0,
    -1
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND -1 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 19814)
AND slot_number = 3;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 19814), 
    @last_rune_id, 
    3
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 19814);

-- Rune ID: 43833488255

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 4 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(43833488255, 
 9215591, 
 1, 
 17234001551, 
 4,
 5, 
 6, 
 10, 
 15, 
 15,
 627660, 
 131383, 
 (SELECT id FROM stat_types WHERE code = 'HP_PCT'), 
 63,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    14,
    0,
    7
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 7 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'RES'),
    8,
    0,
    8
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'RES')
    AND is_ancient = 0
    AND 8 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    9,
    1,
    4
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND 4 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    22,
    0,
    17
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 17 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 19814)
AND slot_number = 4;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 19814), 
    @last_rune_id, 
    4
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 19814);

-- Rune ID: 39807592000

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 5 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(39807592000, 
 9215591, 
 1, 
 17234001551, 
 5,
 15, 
 16, 
 10, 
 15, 
 15,
 730368, 
 136518, 
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 2448,
 (SELECT id FROM stat_types WHERE code = 'ATK_FLAT'), 
 18, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    13,
    1,
    4
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 1
    AND 4 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    18,
    0,
    13
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 1
    AND 13 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'RES'),
    16,
    0,
    16
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'RES')
    AND is_ancient = 1
    AND 16 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    17,
    0,
    12
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 1
    AND 12 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 19814)
AND slot_number = 5;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 19814), 
    @last_rune_id, 
    5
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 19814);

-- Rune ID: 32701422351

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 6 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(32701422351, 
 9215591, 
 1, 
 17234001551, 
 6,
 5, 
 6, 
 17, 
 15, 
 15,
 538900, 
 128856, 
 (SELECT id FROM stat_types WHERE code = 'HP_PCT'), 
 63,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    10,
    1,
    0
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 0 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    17,
    0,
    12
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 12 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    14,
    0,
    7
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND 7 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ACC'),
    8,
    0,
    8
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ACC')
    AND is_ancient = 0
    AND 8 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 19814)
AND slot_number = 6;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 19814), 
    @last_rune_id, 
    6
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 19814);

-- Rune ID: 31921311882

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 1 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(31921311882, 
 9215591, 
 1, 
 17365944274, 
 1,
 5, 
 6, 
 3, 
 15, 
 12,
 481840, 
 68778, 
 (SELECT id FROM stat_types WHERE code = 'ATK_FLAT'), 
 118,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 201, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'RES'),
    9,
    0,
    9
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'RES')
    AND is_ancient = 0
    AND 9 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ACC'),
    7,
    0,
    7
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ACC')
    AND is_ancient = 0
    AND 7 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    11,
    1,
    5
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 5 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    21,
    0,
    17
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 17 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 20114)
AND slot_number = 1;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 20114), 
    @last_rune_id, 
    1
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 20114);

-- Rune ID: 42045032144

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 2 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(42045032144, 
 9215591, 
 1, 
 17365944274, 
 2,
 5, 
 6, 
 3, 
 15, 
 15,
 507200, 
 134503, 
 (SELECT id FROM stat_types WHERE code = 'SPD'), 
 42,
 (SELECT id FROM stat_types WHERE code = 'DEF_FLAT'), 
 11, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    12,
    0,
    12
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND 12 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'RES'),
    18,
    0,
    18
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'RES')
    AND is_ancient = 0
    AND 18 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ACC'),
    7,
    0,
    7
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ACC')
    AND is_ancient = 0
    AND 7 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    12,
    0,
    12
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 12 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 20114)
AND slot_number = 2;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 20114), 
    @last_rune_id, 
    2
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 20114);

-- Rune ID: 40854343438

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 3 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(40854343438, 
 9215591, 
 1, 
 17365944274, 
 3,
 5, 
 6, 
 15, 
 15, 
 12,
 523050, 
 64008, 
 (SELECT id FROM stat_types WHERE code = 'DEF_FLAT'), 
 118,
 (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'), 
 5, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    16,
    0,
    13
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 13 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    11,
    1,
    6
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND 6 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'RES'),
    12,
    0,
    12
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'RES')
    AND is_ancient = 0
    AND 12 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_FLAT'),
    369,
    0,
    -81
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_FLAT')
    AND is_ancient = 0
    AND -81 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 20114)
AND slot_number = 3;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 20114), 
    @last_rune_id, 
    3
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 20114);

-- Rune ID: 40307619201

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 4 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(40307619201, 
 9215591, 
 1, 
 17365944274, 
 4,
 15, 
 16, 
 7, 
 15, 
 15,
 479304, 
 132605, 
 (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'), 
 58,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    22,
    0,
    16
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 1
    AND 16 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    12,
    1,
    3
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 1
    AND 3 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'RES'),
    6,
    0,
    6
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'RES')
    AND is_ancient = 1
    AND 6 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    7,
    0,
    -2
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 1
    AND -2 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 20114)
AND slot_number = 4;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 20114), 
    @last_rune_id, 
    4
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 20114);

-- Rune ID: 44174171772

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 5 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(44174171772, 
 9215591, 
 1, 
 17365944274, 
 5,
 5, 
 6, 
 3, 
 15, 
 12,
 355040, 
 60152, 
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 1800,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    12,
    1,
    6
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 6 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ACC'),
    13,
    0,
    13
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ACC')
    AND is_ancient = 0
    AND 13 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    6,
    0,
    0
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND 0 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    21,
    0,
    16
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 16 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 20114)
AND slot_number = 5;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 20114), 
    @last_rune_id, 
    5
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 20114);

-- Rune ID: 30932377888

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 6 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(30932377888, 
 9215591, 
 1, 
 17365944274, 
 6,
 5, 
 6, 
 3, 
 15, 
 15,
 431120, 
 129327, 
 (SELECT id FROM stat_types WHERE code = 'ATK_FLAT'), 
 160,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 186, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    5,
    0,
    -1
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND -1 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    23,
    0,
    18
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 18 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    6,
    0,
    0
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 0 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    6,
    0,
    6
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 6 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 20114)
AND slot_number = 6;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 20114), 
    @last_rune_id, 
    6
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 20114);

-- Rune ID: 40925922663

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 1 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(40925922663, 
 9215591, 
 1, 
 17953926812, 
 1,
 5, 
 6, 
 18, 
 15, 
 12,
 602300, 
 68251, 
 (SELECT id FROM stat_types WHERE code = 'ATK_FLAT'), 
 118,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    9,
    1,
    3
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 3 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    16,
    0,
    13
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 13 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ACC'),
    16,
    0,
    16
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ACC')
    AND is_ancient = 0
    AND 16 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_FLAT'),
    206,
    0,
    -193
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_FLAT')
    AND is_ancient = 0
    AND -193 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 22114)
AND slot_number = 1;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 22114), 
    @last_rune_id, 
    1
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 22114);

-- Rune ID: 42050037282

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 3 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(42050037282, 
 9215591, 
 1, 
 17953926812, 
 3,
 5, 
 6, 
 10, 
 15, 
 12,
 523050, 
 62152, 
 (SELECT id FROM stat_types WHERE code = 'DEF_FLAT'), 
 118,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'RES'),
    26,
    0,
    26
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'RES')
    AND is_ancient = 0
    AND 26 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ACC'),
    8,
    0,
    8
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ACC')
    AND is_ancient = 0
    AND 8 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    6,
    0,
    -1
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND -1 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    10,
    0,
    10
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 10 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 22114)
AND slot_number = 3;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 22114), 
    @last_rune_id, 
    3
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 22114);

-- Rune ID: 45622237863

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 5 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(45622237863, 
 9215591, 
 1, 
 17953926812, 
 5,
 5, 
 6, 
 6, 
 15, 
 12,
 355040, 
 60152, 
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 1800,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    11,
    0,
    11
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 11 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_FLAT'),
    13,
    0,
    13
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_FLAT')
    AND is_ancient = 0
    AND 13 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'RES'),
    27,
    0,
    27
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'RES')
    AND is_ancient = 0
    AND 27 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'),
    4,
    0,
    4
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_DMG')
    AND is_ancient = 0
    AND 4 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 22114)
AND slot_number = 5;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 22114), 
    @last_rune_id, 
    5
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 22114);

-- Rune ID: 31674743424

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 1 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(31674743424, 
 9215591, 
 1, 
 18387818598, 
 1,
 5, 
 6, 
 15, 
 15, 
 12,
 602300, 
 68251, 
 (SELECT id FROM stat_types WHERE code = 'ATK_FLAT'), 
 118,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    10,
    0,
    7
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 7 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    20,
    0,
    15
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 15 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    5,
    0,
    0
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 0 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'RES'),
    8,
    0,
    8
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'RES')
    AND is_ancient = 0
    AND 8 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 29414)
AND slot_number = 1;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 29414), 
    @last_rune_id, 
    1
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 29414);

-- Rune ID: 31509175748

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 3 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(31509175748, 
 9215591, 
 1, 
 18387818598, 
 3,
 5, 
 6, 
 15, 
 15, 
 12,
 523050, 
 64008, 
 (SELECT id FROM stat_types WHERE code = 'DEF_FLAT'), 
 118,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 188, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'RES'),
    12,
    0,
    12
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'RES')
    AND is_ancient = 0
    AND 12 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    22,
    0,
    17
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 17 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    5,
    0,
    2
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 2 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    6,
    0,
    0
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND 0 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 29414)
AND slot_number = 3;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 29414), 
    @last_rune_id, 
    3
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 29414);

-- Rune ID: 41114529081

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 5 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(41114529081, 
 9215591, 
 1, 
 18387818598, 
 5,
 5, 
 6, 
 15, 
 15, 
 12,
 557920, 
 65875, 
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 1800,
 (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'), 
 7, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    6,
    0,
    6
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 6 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    15,
    0,
    15
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 15 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    10,
    0,
    10
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 10 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'RES'),
    16,
    0,
    16
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'RES')
    AND is_ancient = 0
    AND 16 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 29414)
AND slot_number = 5;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 29414), 
    @last_rune_id, 
    5
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 29414);

-- Rune ID: 38051995927

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 1 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(38051995927, 
 9215591, 
 1, 
 18851703621, 
 1,
 5, 
 6, 
 10, 
 15, 
 12,
 662530, 
 69126, 
 (SELECT id FROM stat_types WHERE code = 'ATK_FLAT'), 
 118,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    7,
    0,
    1
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 1 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    15,
    0,
    9
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 9 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    16,
    0,
    13
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 13 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_FLAT'),
    302,
    0,
    -46
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_FLAT')
    AND is_ancient = 0
    AND -46 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 20714)
AND slot_number = 1;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 20714), 
    @last_rune_id, 
    1
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 20714);

-- Rune ID: 32709464116

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 3 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(32709464116, 
 9215591, 
 1, 
 18851703621, 
 3,
 5, 
 6, 
 20, 
 15, 
 12,
 475500, 
 61461, 
 (SELECT id FROM stat_types WHERE code = 'DEF_FLAT'), 
 118,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    10,
    0,
    10
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 10 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    6,
    0,
    -1
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND -1 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'),
    19,
    0,
    19
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_DMG')
    AND is_ancient = 0
    AND 19 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    5,
    1,
    1
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 1 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_upgrades 
(rune_id, level_reached, stat_type_id, old_value, new_value, upgrade_date)
SELECT 
    @last_rune_id,
    3,
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    1.0,
    5.0,
    NOW();

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 20714)
AND slot_number = 3;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 20714), 
    @last_rune_id, 
    3
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 20714);

-- Rune ID: 41738205885

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 4 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_DMG')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(41738205885, 
 9215591, 
 1, 
 18851703621, 
 4,
 5, 
 6, 
 25, 
 15, 
 15,
 684720, 
 134236, 
 (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'), 
 80,
 (SELECT id FROM stat_types WHERE code = 'HP_PCT'), 
 8, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    21,
    0,
    15
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 15 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    10,
    0,
    10
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 10 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    5,
    0,
    3
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 3 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_FLAT'),
    23,
    1,
    7
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_FLAT')
    AND is_ancient = 0
    AND 7 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_upgrades 
(rune_id, level_reached, stat_type_id, old_value, new_value, upgrade_date)
SELECT 
    @last_rune_id,
    3,
    (SELECT id FROM stat_types WHERE code = 'ATK_FLAT'),
    7.0,
    23.0,
    NOW();

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 20714)
AND slot_number = 4;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 20714), 
    @last_rune_id, 
    4
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 20714);

-- Rune ID: 41876830761

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 5 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(41876830761, 
 9215591, 
 1, 
 18851703621, 
 5,
 5, 
 6, 
 8, 
 15, 
 12,
 380400, 
 63098, 
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 1800,
 (SELECT id FROM stat_types WHERE code = 'DEF_PCT'), 
 6, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    6,
    0,
    2
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 2 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    5,
    0,
    5
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 5 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'),
    17,
    0,
    17
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_DMG')
    AND is_ancient = 0
    AND 17 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_FLAT'),
    47,
    0,
    32
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_FLAT')
    AND is_ancient = 0
    AND 32 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 20714)
AND slot_number = 5;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 20714), 
    @last_rune_id, 
    5
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 20714);

-- Rune ID: 44303202315

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 6 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(44303202315, 
 9215591, 
 1, 
 18851703621, 
 6,
 5, 
 6, 
 3, 
 15, 
 12,
 431120, 
 65327, 
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 1800,
 (SELECT id FROM stat_types WHERE code = 'DEF_PCT'), 
 6, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ACC'),
    5,
    0,
    5
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ACC')
    AND is_ancient = 0
    AND 5 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    22,
    0,
    22
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 22 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    5,
    0,
    5
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 5 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    7,
    0,
    7
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 7 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 20714)
AND slot_number = 6;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 20714), 
    @last_rune_id, 
    6
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 20714);

-- Rune ID: 40229263630

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 1 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(40229263630, 
 9215591, 
 1, 
 18931955138, 
 1,
 5, 
 6, 
 6, 
 15, 
 12,
 481840, 
 68778, 
 (SELECT id FROM stat_types WHERE code = 'ATK_FLAT'), 
 118,
 (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'), 
 5, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    5,
    0,
    1
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 1 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'RES'),
    6,
    0,
    6
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'RES')
    AND is_ancient = 0
    AND 6 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    27,
    0,
    20
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 20 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_FLAT'),
    140,
    0,
    -277
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_FLAT')
    AND is_ancient = 0
    AND -277 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 19604)
AND slot_number = 1;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 19604), 
    @last_rune_id, 
    1
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 19604);

-- Rune ID: 42441537557

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 2 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(42441537557, 
 9215591, 
 1, 
 18931955138, 
 2,
 5, 
 6, 
 25, 
 15, 
 15,
 760800, 
 138040, 
 (SELECT id FROM stat_types WHERE code = 'ATK_PCT'), 
 63,
 (SELECT id FROM stat_types WHERE code = 'RES'), 
 4, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    21,
    0,
    21
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 21 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_FLAT'),
    12,
    0,
    12
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_FLAT')
    AND is_ancient = 0
    AND 12 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_FLAT'),
    246,
    0,
    246
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_FLAT')
    AND is_ancient = 0
    AND 246 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    8,
    0,
    5
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND 5 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 19604)
AND slot_number = 2;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 19604), 
    @last_rune_id, 
    2
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 19604);

-- Rune ID: 41723971351

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 5 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(41723971351, 
 9215591, 
 1, 
 18931955138, 
 5,
 5, 
 6, 
 5, 
 15, 
 12,
 608640, 
 66432, 
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 1800,
 (SELECT id FROM stat_types WHERE code = 'ACC'), 
 4, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_FLAT'),
    28,
    0,
    15
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_FLAT')
    AND is_ancient = 0
    AND 15 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'),
    18,
    0,
    18
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_DMG')
    AND is_ancient = 0
    AND 18 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    7,
    1,
    7
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 7 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    6,
    0,
    1
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 1 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 19604)
AND slot_number = 5;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 19604), 
    @last_rune_id, 
    5
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 19604);

-- Rune ID: 41498303951

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 1 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(41498303951, 
 9215591, 
 1, 
 18958090997, 
 1,
 5, 
 6, 
 7, 
 15, 
 12,
 421610, 
 64680, 
 (SELECT id FROM stat_types WHERE code = 'ATK_FLAT'), 
 118,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    13,
    0,
    6
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 6 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    16,
    0,
    12
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 12 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_FLAT'),
    371,
    0,
    17
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_FLAT')
    AND is_ancient = 0
    AND 17 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    9,
    1,
    2
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 2 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_upgrades 
(rune_id, level_reached, stat_type_id, old_value, new_value, upgrade_date)
SELECT 
    @last_rune_id,
    3,
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    2.0,
    9.0,
    NOW();

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 29014)
AND slot_number = 1;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 29014), 
    @last_rune_id, 
    1
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 29014);

-- Rune ID: 35291041314

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 3 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(35291041314, 
 9215591, 
 1, 
 18958090997, 
 3,
 5, 
 6, 
 20, 
 15, 
 15,
 475500, 
 125461, 
 (SELECT id FROM stat_types WHERE code = 'DEF_FLAT'), 
 160,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'RES'),
    4,
    0,
    4
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'RES')
    AND is_ancient = 0
    AND 4 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    22,
    0,
    17
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND 17 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    7,
    0,
    0
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 0 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    10,
    0,
    6
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 6 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 29014)
AND slot_number = 3;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 29014), 
    @last_rune_id, 
    3
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 29014);

-- Rune ID: 30860012943

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 5 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(30860012943, 
 9215591, 
 1, 
 18958090997, 
 5,
 5, 
 6, 
 20, 
 15, 
 12,
 557920, 
 65875, 
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 1800,
 (SELECT id FROM stat_types WHERE code = 'DEF_PCT'), 
 8, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    12,
    0,
    8
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 8 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_FLAT'),
    25,
    0,
    8
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_FLAT')
    AND is_ancient = 0
    AND 8 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'),
    11,
    0,
    11
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_DMG')
    AND is_ancient = 0
    AND 11 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'RES'),
    14,
    0,
    14
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'RES')
    AND is_ancient = 0
    AND 14 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 29014)
AND slot_number = 5;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 29014), 
    @last_rune_id, 
    5
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 29014);

-- Rune ID: 31515201279

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 1 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(31515201279, 
 9215591, 
 1, 
 7589042817, 
 1,
 5, 
 6, 
 8, 
 15, 
 12,
 451725, 
 68179, 
 (SELECT id FROM stat_types WHERE code = 'ATK_FLAT'), 
 118,
 (SELECT id FROM stat_types WHERE code = 'ACC'), 
 8, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    5,
    0,
    0
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 0 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    10,
    0,
    10
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 10 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    16,
    0,
    13
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 13 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'),
    6,
    1,
    6
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_DMG')
    AND is_ancient = 0
    AND 6 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_upgrades 
(rune_id, level_reached, stat_type_id, old_value, new_value, upgrade_date)
SELECT 
    @last_rune_id,
    3,
    (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'),
    6.0,
    6.0,
    NOW();

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 23015)
AND slot_number = 1;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 23015), 
    @last_rune_id, 
    1
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 23015);

-- Rune ID: 44802373809

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 3 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(44802373809, 
 9215591, 
 1, 
 7589042817, 
 3,
 5, 
 6, 
 15, 
 15, 
 15,
 475500, 
 125461, 
 (SELECT id FROM stat_types WHERE code = 'DEF_FLAT'), 
 160,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    6,
    0,
    6
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 6 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    22,
    0,
    18
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 18 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'RES'),
    11,
    0,
    11
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'RES')
    AND is_ancient = 0
    AND 11 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'),
    4,
    0,
    4
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_DMG')
    AND is_ancient = 0
    AND 4 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 23015)
AND slot_number = 3;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 23015), 
    @last_rune_id, 
    3
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 23015);

-- Rune ID: 45468517342

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 1 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(45468517342, 
 9215591, 
 1, 
 7639750351, 
 1,
 5, 
 6, 
 8, 
 15, 
 12,
 451725, 
 68179, 
 (SELECT id FROM stat_types WHERE code = 'ATK_FLAT'), 
 118,
 (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'), 
 6, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ACC'),
    15,
    0,
    15
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ACC')
    AND is_ancient = 0
    AND 15 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'),
    11,
    0,
    11
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_DMG')
    AND is_ancient = 0
    AND 11 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    4,
    0,
    4
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 4 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    21,
    0,
    21
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 21 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 13315)
AND slot_number = 1;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 13315), 
    @last_rune_id, 
    1
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 13315);

-- Rune ID: 44314737146

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 3 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(44314737146, 
 9215591, 
 1, 
 7639750351, 
 3,
 5, 
 6, 
 13, 
 15, 
 12,
 570600, 
 64530, 
 (SELECT id FROM stat_types WHERE code = 'DEF_FLAT'), 
 118,
 (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'), 
 6, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    21,
    0,
    18
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 18 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_FLAT'),
    250,
    0,
    -173
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_FLAT')
    AND is_ancient = 0
    AND -173 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'RES'),
    8,
    0,
    8
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'RES')
    AND is_ancient = 0
    AND 8 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ACC'),
    5,
    0,
    5
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ACC')
    AND is_ancient = 0
    AND 5 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 13315)
AND slot_number = 3;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 13315), 
    @last_rune_id, 
    3
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 13315);

-- Rune ID: 33160764418

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 1 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(33160764418, 
 9215591, 
 1, 
 7650549990, 
 1,
 5, 
 6, 
 13, 
 15, 
 15,
 662530, 
 133126, 
 (SELECT id FROM stat_types WHERE code = 'ATK_FLAT'), 
 160,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    9,
    1,
    2
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 2 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    12,
    0,
    9
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 9 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    16,
    0,
    16
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 16 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    6,
    0,
    1
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 1 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 19215)
AND slot_number = 1;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 19215), 
    @last_rune_id, 
    1
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 19215);

-- Rune ID: 41521943264

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 2 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(41521943264, 
 9215591, 
 1, 
 7650549990, 
 2,
 5, 
 6, 
 13, 
 15, 
 15,
 697400, 
 134870, 
 (SELECT id FROM stat_types WHERE code = 'SPD'), 
 42,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    11,
    0,
    6
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND 6 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    8,
    1,
    3
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 3 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    19,
    0,
    15
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 15 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ACC'),
    15,
    0,
    15
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ACC')
    AND is_ancient = 0
    AND 15 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 19215)
AND slot_number = 2;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 19215), 
    @last_rune_id, 
    2
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 19215);

-- Rune ID: 39966757985

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 3 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(39966757985, 
 9215591, 
 1, 
 7650549990, 
 3,
 5, 
 6, 
 13, 
 15, 
 15,
 523050, 
 126152, 
 (SELECT id FROM stat_types WHERE code = 'DEF_FLAT'), 
 160,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    15,
    0,
    12
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 12 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    9,
    1,
    5
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 5 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ACC'),
    8,
    0,
    8
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ACC')
    AND is_ancient = 0
    AND 8 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    16,
    0,
    16
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 16 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 19215)
AND slot_number = 3;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 19215), 
    @last_rune_id, 
    3
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 19215);

-- Rune ID: 30471236694

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 4 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(30471236694, 
 9215591, 
 1, 
 7650549990, 
 4,
 5, 
 6, 
 1, 
 15, 
 15,
 342360, 
 125597, 
 (SELECT id FROM stat_types WHERE code = 'HP_PCT'), 
 63,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ACC'),
    21,
    0,
    21
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ACC')
    AND is_ancient = 0
    AND 21 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    11,
    1,
    4
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 4 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    11,
    0,
    7
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 7 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    6,
    0,
    -4
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND -4 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 19215)
AND slot_number = 4;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 19215), 
    @last_rune_id, 
    4
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 19215);

-- Rune ID: 31543446058

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 5 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(31543446058, 
 9215591, 
 1, 
 7650549990, 
 5,
 5, 
 6, 
 1, 
 15, 
 15,
 304320, 
 122752, 
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 2448,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    11,
    1,
    5
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 5 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    21,
    0,
    16
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 16 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    11,
    0,
    3
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 3 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    8,
    0,
    1
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND 1 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 19215)
AND slot_number = 5;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 19215), 
    @last_rune_id, 
    5
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 19215);

-- Rune ID: 25939286236

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 6 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(25939286236, 
 9215591, 
 1, 
 7650549990, 
 6,
 5, 
 6, 
 13, 
 15, 
 15,
 646680, 
 132334, 
 (SELECT id FROM stat_types WHERE code = 'HP_PCT'), 
 63,
 (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'), 
 4, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_FLAT'),
    33,
    0,
    11
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_FLAT')
    AND is_ancient = 0
    AND 11 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    16,
    0,
    13
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 13 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ACC'),
    6,
    0,
    6
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ACC')
    AND is_ancient = 0
    AND 6 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    7,
    1,
    3
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND 3 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_upgrades 
(rune_id, level_reached, stat_type_id, old_value, new_value, upgrade_date)
SELECT 
    @last_rune_id,
    3,
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    3.0,
    7.0,
    NOW();

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 19215)
AND slot_number = 6;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 19215), 
    @last_rune_id, 
    6
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 19215);

-- Rune ID: 23357855324

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 1 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(23357855324, 
 9215591, 
 1, 
 7977619996, 
 1,
 5, 
 6, 
 6, 
 15, 
 12,
 421610, 
 64680, 
 (SELECT id FROM stat_types WHERE code = 'ATK_FLAT'), 
 118,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ACC'),
    7,
    0,
    7
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ACC')
    AND is_ancient = 0
    AND 7 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    19,
    0,
    15
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 15 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_FLAT'),
    270,
    0,
    -109
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_FLAT')
    AND is_ancient = 0
    AND -109 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    7,
    1,
    0
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 0 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_upgrades 
(rune_id, level_reached, stat_type_id, old_value, new_value, upgrade_date)
SELECT 
    @last_rune_id,
    3,
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    0.0,
    7.0,
    NOW();

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 19015)
AND slot_number = 1;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 19015), 
    @last_rune_id, 
    1
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 19015);

-- Rune ID: 44795246277

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 3 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(44795246277, 
 9215591, 
 1, 
 7977619996, 
 3,
 5, 
 6, 
 13, 
 15, 
 12,
 523050, 
 62152, 
 (SELECT id FROM stat_types WHERE code = 'DEF_FLAT'), 
 118,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'RES'),
    22,
    0,
    22
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'RES')
    AND is_ancient = 0
    AND 22 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    22,
    0,
    22
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 22 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    6,
    0,
    6
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 6 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'),
    4,
    0,
    4
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_DMG')
    AND is_ancient = 0
    AND 4 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 19015)
AND slot_number = 3;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 19015), 
    @last_rune_id, 
    3
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 19015);

-- Rune ID: 32990930380

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 1 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(32990930380, 
 9215591, 
 1, 
 8129947918, 
 1,
 5, 
 6, 
 5, 
 15, 
 15,
 722760, 
 136138, 
 (SELECT id FROM stat_types WHERE code = 'ATK_FLAT'), 
 160,
 (SELECT id FROM stat_types WHERE code = 'SPD'), 
 4, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    7,
    0,
    0
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 0 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    18,
    0,
    18
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 18 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    11,
    0,
    4
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 4 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'),
    6,
    1,
    6
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_DMG')
    AND is_ancient = 0
    AND 6 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_upgrades 
(rune_id, level_reached, stat_type_id, old_value, new_value, upgrade_date)
SELECT 
    @last_rune_id,
    3,
    (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'),
    6.0,
    6.0,
    NOW();

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 11035)
AND slot_number = 1;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 11035), 
    @last_rune_id, 
    1
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 11035);

-- Rune ID: 32369897353

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 2 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(32369897353, 
 9215591, 
 1, 
 8129947918, 
 2,
 5, 
 6, 
 4, 
 15, 
 15,
 412100, 
 129357, 
 (SELECT id FROM stat_types WHERE code = 'ATK_PCT'), 
 63,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'),
    10,
    0,
    10
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_DMG')
    AND is_ancient = 0
    AND 10 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    4,
    0,
    0
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 0 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    14,
    0,
    14
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 14 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    6,
    0,
    -2
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND -2 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 11035)
AND slot_number = 2;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 11035), 
    @last_rune_id, 
    2
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 11035);

-- Rune ID: 21895865596

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 4 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_DMG')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(21895865596, 
 9215591, 
 1, 
 8129947918, 
 4,
 5, 
 6, 
 5, 
 15, 
 15,
 627660, 
 131383, 
 (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'), 
 80,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    13,
    0,
    6
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 6 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    14,
    0,
    8
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 8 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ACC'),
    12,
    0,
    12
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ACC')
    AND is_ancient = 0
    AND 12 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    6,
    1,
    6
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 6 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_upgrades 
(rune_id, level_reached, stat_type_id, old_value, new_value, upgrade_date)
SELECT 
    @last_rune_id,
    3,
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    6.0,
    6.0,
    NOW();

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 11035)
AND slot_number = 4;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 11035), 
    @last_rune_id, 
    4
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 11035);

-- Rune ID: 24200198439

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 5 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(24200198439, 
 9215591, 
 1, 
 8129947918, 
 5,
 15, 
 16, 
 4, 
 15, 
 15,
 395616, 
 128182, 
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 2448,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    12,
    1,
    4
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 1
    AND 4 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'),
    25,
    0,
    25
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_DMG')
    AND is_ancient = 1
    AND 25 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    14,
    0,
    14
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 1
    AND 14 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ACC'),
    8,
    0,
    8
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ACC')
    AND is_ancient = 1
    AND 8 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 11035)
AND slot_number = 5;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 11035), 
    @last_rune_id, 
    5
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 11035);

-- Rune ID: 26530002999

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 6 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(26530002999, 
 9215591, 
 1, 
 8129947918, 
 6,
 5, 
 6, 
 5, 
 15, 
 15,
 646680, 
 132334, 
 (SELECT id FROM stat_types WHERE code = 'ATK_PCT'), 
 63,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 369, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_FLAT'),
    29,
    0,
    9
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_FLAT')
    AND is_ancient = 0
    AND 9 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'RES'),
    10,
    0,
    10
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'RES')
    AND is_ancient = 0
    AND 10 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    11,
    0,
    7
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 7 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'),
    9,
    0,
    9
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_DMG')
    AND is_ancient = 0
    AND 9 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 11035)
AND slot_number = 6;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 11035), 
    @last_rune_id, 
    6
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 11035);

-- Rune ID: 23126339087

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 1 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(23126339087, 
 9215591, 
 1, 
 8149235825, 
 1,
 5, 
 5, 
 19, 
 15, 
 15,
 319770, 
 69062, 
 (SELECT id FROM stat_types WHERE code = 'ATK_FLAT'), 
 135,
 (SELECT id FROM stat_types WHERE code = 'RES'), 
 5, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    12,
    0,
    5
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 5 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    10,
    0,
    7
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 7 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'),
    3,
    0,
    3
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_DMG')
    AND is_ancient = 0
    AND 3 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_FLAT'),
    188,
    0,
    -56
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_FLAT')
    AND is_ancient = 0
    AND -56 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 14815)
AND slot_number = 1;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 14815), 
    @last_rune_id, 
    1
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 14815);

-- Rune ID: 34326942996

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 3 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(34326942996, 
 9215591, 
 1, 
 8149235825, 
 3,
 5, 
 6, 
 19, 
 15, 
 12,
 475500, 
 61461, 
 (SELECT id FROM stat_types WHERE code = 'DEF_FLAT'), 
 118,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'RES'),
    5,
    0,
    5
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'RES')
    AND is_ancient = 0
    AND 5 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    14,
    0,
    7
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 7 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    12,
    0,
    5
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND 5 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_FLAT'),
    671,
    0,
    250
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_FLAT')
    AND is_ancient = 0
    AND 250 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 14815)
AND slot_number = 3;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 14815), 
    @last_rune_id, 
    3
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 14815);

-- Rune ID: 22955336924

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 4 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(22955336924, 
 9215591, 
 1, 
 8149235825, 
 4,
 5, 
 5, 
 19, 
 15, 
 12,
 275400, 
 35617, 
 (SELECT id FROM stat_types WHERE code = 'DEF_FLAT'), 
 99,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_FLAT'),
    256,
    0,
    -150
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_FLAT')
    AND is_ancient = 0
    AND -150 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    17,
    0,
    11
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND 11 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_FLAT'),
    11,
    0,
    11
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_FLAT')
    AND is_ancient = 0
    AND 11 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    13,
    0,
    9
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 9 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 14815)
AND slot_number = 4;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 14815), 
    @last_rune_id, 
    4
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 14815);

-- Rune ID: 18237467816

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 5 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(18237467816, 
 9215591, 
 1, 
 8149235825, 
 5,
 5, 
 6, 
 19, 
 15, 
 15,
 507200, 
 127159, 
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 2448,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    13,
    0,
    9
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 9 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_FLAT'),
    27,
    0,
    27
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_FLAT')
    AND is_ancient = 0
    AND 27 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'RES'),
    19,
    0,
    19
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'RES')
    AND is_ancient = 0
    AND 19 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    4,
    0,
    4
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 4 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 14815)
AND slot_number = 5;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 14815), 
    @last_rune_id, 
    5
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 14815);

-- Rune ID: 34332996689

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 6 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(34332996689, 
 9215591, 
 1, 
 8149235825, 
 6,
 5, 
 6, 
 19, 
 15, 
 15,
 538900, 
 128856, 
 (SELECT id FROM stat_types WHERE code = 'DEF_PCT'), 
 63,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'),
    11,
    0,
    11
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_DMG')
    AND is_ancient = 0
    AND 11 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    9,
    0,
    9
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 9 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    8,
    0,
    4
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 4 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ACC'),
    8,
    0,
    8
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ACC')
    AND is_ancient = 0
    AND 8 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 14815)
AND slot_number = 6;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 14815), 
    @last_rune_id, 
    6
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 14815);

-- Rune ID: 42072004515

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 1 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(42072004515, 
 9215591, 
 1, 
 8350265072, 
 1,
 5, 
 6, 
 8, 
 15, 
 12,
 391495, 
 63889, 
 (SELECT id FROM stat_types WHERE code = 'ATK_FLAT'), 
 118,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    14,
    0,
    7
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 7 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    10,
    0,
    10
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 10 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'),
    10,
    0,
    10
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_DMG')
    AND is_ancient = 0
    AND 10 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    7,
    1,
    3
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 3 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_upgrades 
(rune_id, level_reached, stat_type_id, old_value, new_value, upgrade_date)
SELECT 
    @last_rune_id,
    3,
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    3.0,
    7.0,
    NOW();

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 18815)
AND slot_number = 1;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 18815), 
    @last_rune_id, 
    1
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 18815);

-- Rune ID: 44818857937

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 3 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(44818857937, 
 9215591, 
 1, 
 8350265072, 
 3,
 5, 
 6, 
 15, 
 15, 
 12,
 475500, 
 61461, 
 (SELECT id FROM stat_types WHERE code = 'DEF_FLAT'), 
 118,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    8,
    0,
    8
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 8 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    6,
    0,
    6
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 6 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    20,
    0,
    20
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 20 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    8,
    0,
    8
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND 8 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 18815)
AND slot_number = 3;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 18815), 
    @last_rune_id, 
    3
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 18815);

-- Rune ID: 31387513167

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 1 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(31387513167, 
 9215591, 
 1, 
 8564079458, 
 1,
 5, 
 6, 
 16, 
 15, 
 12,
 602300, 
 68251, 
 (SELECT id FROM stat_types WHERE code = 'ATK_FLAT'), 
 118,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    11,
    0,
    7
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 7 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    8,
    0,
    1
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 1 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    17,
    0,
    17
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 17 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_FLAT'),
    218,
    0,
    218
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_FLAT')
    AND is_ancient = 0
    AND 218 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 23315)
AND slot_number = 1;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 23315), 
    @last_rune_id, 
    1
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 23315);

-- Rune ID: 41635013605

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 3 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(41635013605, 
 9215591, 
 1, 
 8564079458, 
 3,
 5, 
 6, 
 15, 
 15, 
 12,
 523050, 
 64008, 
 (SELECT id FROM stat_types WHERE code = 'DEF_FLAT'), 
 118,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 180, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'),
    7,
    1,
    7
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_DMG')
    AND is_ancient = 0
    AND 7 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    21,
    0,
    21
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 21 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    5,
    0,
    0
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND 0 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    8,
    0,
    8
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 8 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 23315)
AND slot_number = 3;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 23315), 
    @last_rune_id, 
    3
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 23315);

-- Rune ID: 35617856331

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 1 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(35617856331, 
 9215591, 
 1, 
 9073458261, 
 1,
 5, 
 6, 
 11, 
 15, 
 15,
 662530, 
 135476, 
 (SELECT id FROM stat_types WHERE code = 'ATK_FLAT'), 
 160,
 (SELECT id FROM stat_types WHERE code = 'ACC'), 
 7, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    15,
    0,
    15
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 15 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    12,
    0,
    8
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 8 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'),
    7,
    0,
    7
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_DMG')
    AND is_ancient = 0
    AND 7 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    11,
    1,
    2
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 2 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_upgrades 
(rune_id, level_reached, stat_type_id, old_value, new_value, upgrade_date)
SELECT 
    @last_rune_id,
    3,
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    2.0,
    11.0,
    NOW();

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 15035)
AND slot_number = 1;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 15035), 
    @last_rune_id, 
    1
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 15035);

-- Rune ID: 40816306901

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 2 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(40816306901, 
 9215591, 
 1, 
 9073458261, 
 2,
 5, 
 6, 
 11, 
 15, 
 15,
 697400, 
 137344, 
 (SELECT id FROM stat_types WHERE code = 'ATK_PCT'), 
 63,
 (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'), 
 4, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    4,
    0,
    4
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 4 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    22,
    0,
    15
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 15 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    12,
    0,
    8
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 8 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_FLAT'),
    298,
    0,
    58
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_FLAT')
    AND is_ancient = 0
    AND 58 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 15035)
AND slot_number = 2;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 15035), 
    @last_rune_id, 
    2
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 15035);

-- Rune ID: 27099519828

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 3 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(27099519828, 
 9215591, 
 1, 
 9073458261, 
 3,
 5, 
 6, 
 11, 
 15, 
 15,
 523050, 
 128008, 
 (SELECT id FROM stat_types WHERE code = 'DEF_FLAT'), 
 160,
 (SELECT id FROM stat_types WHERE code = 'SPD'), 
 5, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    23,
    0,
    23
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 23 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'),
    7,
    0,
    7
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_DMG')
    AND is_ancient = 0
    AND 7 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    8,
    0,
    1
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 1 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    6,
    0,
    -1
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND -1 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 15035)
AND slot_number = 3;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 15035), 
    @last_rune_id, 
    3
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 15035);

-- Rune ID: 34480901316

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 4 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_DMG')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(34480901316, 
 9215591, 
 1, 
 9073458261, 
 4,
 5, 
 6, 
 7, 
 15, 
 15,
 456480, 
 131053, 
 (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'), 
 80,
 (SELECT id FROM stat_types WHERE code = 'DEF_FLAT'), 
 16, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    5,
    0,
    1
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 1 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    23,
    0,
    16
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 16 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    9,
    1,
    2
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 2 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'RES'),
    22,
    0,
    22
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'RES')
    AND is_ancient = 0
    AND 22 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 15035)
AND slot_number = 4;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 15035), 
    @last_rune_id, 
    4
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 15035);

-- Rune ID: 27279452228

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 5 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(27279452228, 
 9215591, 
 1, 
 9073458261, 
 5,
 5, 
 6, 
 7, 
 15, 
 12,
 355040, 
 60152, 
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 1800,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    11,
    1,
    2
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND 2 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    8,
    0,
    0
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 0 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    16,
    0,
    8
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 8 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    21,
    0,
    21
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 21 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 15035)
AND slot_number = 5;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 15035), 
    @last_rune_id, 
    5
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 15035);

-- Rune ID: 38117634352

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 6 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(38117634352, 
 9215591, 
 1, 
 9073458261, 
 6,
 5, 
 6, 
 11, 
 15, 
 15,
 538900, 
 128856, 
 (SELECT id FROM stat_types WHERE code = 'ATK_PCT'), 
 63,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    12,
    0,
    12
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 12 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'),
    18,
    0,
    18
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_DMG')
    AND is_ancient = 0
    AND 18 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    4,
    0,
    0
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 0 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    10,
    1,
    0
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 0 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_upgrades 
(rune_id, level_reached, stat_type_id, old_value, new_value, upgrade_date)
SELECT 
    @last_rune_id,
    3,
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    0.0,
    10.0,
    NOW();

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 15035)
AND slot_number = 6;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 15035), 
    @last_rune_id, 
    6
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 15035);

-- Rune ID: 35231915220

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 1 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(35231915220, 
 9215591, 
 1, 
 9394364152, 
 1,
 5, 
 6, 
 10, 
 15, 
 12,
 662530, 
 69126, 
 (SELECT id FROM stat_types WHERE code = 'ATK_FLAT'), 
 118,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    12,
    0,
    7
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 7 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_FLAT'),
    292,
    0,
    -101
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_FLAT')
    AND is_ancient = 0
    AND -101 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    16,
    0,
    13
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 13 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    10,
    1,
    5
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 5 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_upgrades 
(rune_id, level_reached, stat_type_id, old_value, new_value, upgrade_date)
SELECT 
    @last_rune_id,
    3,
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    5.0,
    10.0,
    NOW();

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 1000215)
AND slot_number = 1;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 1000215), 
    @last_rune_id, 
    1
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 1000215);

-- Rune ID: 40784116221

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 3 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(40784116221, 
 9215591, 
 1, 
 9394364152, 
 3,
 5, 
 6, 
 15, 
 15, 
 12,
 523050, 
 64008, 
 (SELECT id FROM stat_types WHERE code = 'DEF_FLAT'), 
 118,
 (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'), 
 7, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ACC'),
    14,
    0,
    14
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ACC')
    AND is_ancient = 0
    AND 14 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'RES'),
    19,
    0,
    19
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'RES')
    AND is_ancient = 0
    AND 19 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    10,
    0,
    10
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 10 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    5,
    0,
    5
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 5 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 1000215)
AND slot_number = 3;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 1000215), 
    @last_rune_id, 
    3
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 1000215);

-- Rune ID: 39905792644

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 5 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(39905792644, 
 9215591, 
 1, 
 9394364152, 
 5,
 5, 
 6, 
 25, 
 15, 
 15,
 608640, 
 130432, 
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 2448,
 (SELECT id FROM stat_types WHERE code = 'HP_PCT'), 
 7, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    22,
    0,
    22
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 22 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'),
    8,
    1,
    8
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_DMG')
    AND is_ancient = 0
    AND 8 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    6,
    0,
    1
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 1 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    4,
    0,
    2
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 2 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 1000215)
AND slot_number = 5;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 1000215), 
    @last_rune_id, 
    5
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 1000215);

-- Rune ID: 41686942513

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 1 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(41686942513, 
 9215591, 
 1, 
 9834198508, 
 1,
 5, 
 6, 
 13, 
 15, 
 12,
 662530, 
 69126, 
 (SELECT id FROM stat_types WHERE code = 'ATK_FLAT'), 
 118,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    19,
    0,
    19
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 19 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    8,
    0,
    8
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 8 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    6,
    0,
    6
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 6 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ACC'),
    19,
    0,
    19
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ACC')
    AND is_ancient = 0
    AND 19 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 18115)
AND slot_number = 1;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 18115), 
    @last_rune_id, 
    1
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 18115);

-- Rune ID: 45652176482

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 3 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(45652176482, 
 9215591, 
 1, 
 9834198508, 
 3,
 5, 
 6, 
 15, 
 15, 
 12,
 523050, 
 64008, 
 (SELECT id FROM stat_types WHERE code = 'DEF_FLAT'), 
 118,
 (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'), 
 5, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_FLAT'),
    346,
    0,
    346
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_FLAT')
    AND is_ancient = 0
    AND 346 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    25,
    0,
    25
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 25 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    5,
    0,
    5
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 5 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    11,
    0,
    11
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND 11 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 18115)
AND slot_number = 3;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 18115), 
    @last_rune_id, 
    3
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 18115);

-- Rune ID: 37017805997

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 1 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(37017805997, 
 9215591, 
 1, 
 10283634248, 
 1,
 5, 
 6, 
 1, 
 15, 
 15,
 361380, 
 127019, 
 (SELECT id FROM stat_types WHERE code = 'ATK_FLAT'), 
 160,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    21,
    0,
    17
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 17 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    10,
    1,
    4
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 4 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_FLAT'),
    645,
    0,
    217
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_FLAT')
    AND is_ancient = 0
    AND 217 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    8,
    0,
    1
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 1 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 14035)
AND slot_number = 1;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 14035), 
    @last_rune_id, 
    1
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 14035);

-- Rune ID: 43273838435

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 2 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(43273838435, 
 9215591, 
 1, 
 10283634248, 
 2,
 5, 
 6, 
 17, 
 15, 
 15,
 697400, 
 137344, 
 (SELECT id FROM stat_types WHERE code = 'HP_PCT'), 
 63,
 (SELECT id FROM stat_types WHERE code = 'ATK_PCT'), 
 6, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    4,
    0,
    4
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 4 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    20,
    0,
    16
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 16 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_FLAT'),
    230,
    0,
    -304
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_FLAT')
    AND is_ancient = 0
    AND -304 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ACC'),
    6,
    0,
    6
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ACC')
    AND is_ancient = 0
    AND 6 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 14035)
AND slot_number = 2;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 14035), 
    @last_rune_id, 
    2
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 14035);

-- Rune ID: 30977603833

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 3 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(30977603833, 
 9215591, 
 1, 
 10283634248, 
 3,
 5, 
 6, 
 1, 
 15, 
 12,
 285300, 
 57330, 
 (SELECT id FROM stat_types WHERE code = 'DEF_FLAT'), 
 118,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'RES'),
    11,
    0,
    11
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'RES')
    AND is_ancient = 0
    AND 11 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    11,
    1,
    4
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 4 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    7,
    0,
    0
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND 0 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    22,
    0,
    18
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 18 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 14035)
AND slot_number = 3;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 14035), 
    @last_rune_id, 
    3
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 14035);

-- Rune ID: 35171181932

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 5 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(35171181932, 
 9215591, 
 1, 
 10283634248, 
 5,
 5, 
 6, 
 1, 
 15, 
 15,
 304320, 
 122752, 
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 2448,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    8,
    0,
    -2
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND -2 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    22,
    0,
    17
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 17 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    11,
    1,
    5
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 5 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ACC'),
    8,
    0,
    8
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ACC')
    AND is_ancient = 0
    AND 8 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 14035)
AND slot_number = 5;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 14035), 
    @last_rune_id, 
    5
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 14035);

-- Rune ID: 38134242799

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 3 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(38134242799, 
 9215591, 
 1, 
 11101349993, 
 3,
 5, 
 6, 
 15, 
 15, 
 12,
 523050, 
 64008, 
 (SELECT id FROM stat_types WHERE code = 'DEF_FLAT'), 
 118,
 (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'), 
 7, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'RES'),
    21,
    0,
    21
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'RES')
    AND is_ancient = 0
    AND 21 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    6,
    0,
    6
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 6 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    16,
    0,
    16
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 16 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_FLAT'),
    607,
    0,
    607
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_FLAT')
    AND is_ancient = 0
    AND 607 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 22415)
AND slot_number = 3;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 22415), 
    @last_rune_id, 
    3
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 22415);

-- Rune ID: 31596399834

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 1 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(31596399834, 
 9215591, 
 1, 
 12330192155, 
 1,
 5, 
 6, 
 20, 
 15, 
 12,
 602300, 
 68251, 
 (SELECT id FROM stat_types WHERE code = 'ATK_FLAT'), 
 118,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ACC'),
    13,
    0,
    13
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ACC')
    AND is_ancient = 0
    AND 13 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    5,
    0,
    1
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 1 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    22,
    0,
    15
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 15 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    5,
    0,
    5
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 5 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 16035)
AND slot_number = 1;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 16035), 
    @last_rune_id, 
    1
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 16035);

-- Rune ID: 41610432938

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 2 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(41610432938, 
 9215591, 
 1, 
 12330192155, 
 2,
 5, 
 6, 
 25, 
 15, 
 15,
 697400, 
 134870, 
 (SELECT id FROM stat_types WHERE code = 'ATK_PCT'), 
 63,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    10,
    0,
    10
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 10 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'),
    8,
    1,
    8
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_DMG')
    AND is_ancient = 0
    AND 8 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    14,
    0,
    14
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 14 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    8,
    0,
    8
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 8 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 16035)
AND slot_number = 2;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 16035), 
    @last_rune_id, 
    2
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 16035);

-- Rune ID: 41985772778

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 3 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(41985772778, 
 9215591, 
 1, 
 12330192155, 
 3,
 5, 
 6, 
 8, 
 15, 
 12,
 309075, 
 58017, 
 (SELECT id FROM stat_types WHERE code = 'DEF_FLAT'), 
 118,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    6,
    0,
    2
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 2 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    5,
    0,
    5
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 5 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    20,
    0,
    17
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 17 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ACC'),
    8,
    0,
    8
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ACC')
    AND is_ancient = 0
    AND 8 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 16035)
AND slot_number = 3;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 16035), 
    @last_rune_id, 
    3
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 16035);

-- Rune ID: 39287708613

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 1 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(39287708613, 
 9215591, 
 1, 
 13685949174, 
 1,
 5, 
 6, 
 3, 
 15, 
 12,
 421610, 
 64680, 
 (SELECT id FROM stat_types WHERE code = 'ATK_FLAT'), 
 118,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_FLAT'),
    141,
    0,
    -300
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_FLAT')
    AND is_ancient = 0
    AND -300 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    7,
    1,
    0
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 0 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    21,
    0,
    17
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 17 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'RES'),
    7,
    0,
    7
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'RES')
    AND is_ancient = 0
    AND 7 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 19615)
AND slot_number = 1;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 19615), 
    @last_rune_id, 
    1
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 19615);

-- Rune ID: 41001173856

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 3 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(41001173856, 
 9215591, 
 1, 
 13685949174, 
 3,
 5, 
 6, 
 15, 
 15, 
 12,
 523050, 
 64008, 
 (SELECT id FROM stat_types WHERE code = 'DEF_FLAT'), 
 118,
 (SELECT id FROM stat_types WHERE code = 'DEF_PCT'), 
 8, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    27,
    0,
    22
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 22 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'RES'),
    4,
    0,
    4
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'RES')
    AND is_ancient = 0
    AND 4 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    4,
    0,
    4
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 4 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_FLAT'),
    209,
    0,
    -135
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_FLAT')
    AND is_ancient = 0
    AND -135 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 19615)
AND slot_number = 3;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 19615), 
    @last_rune_id, 
    3
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 19615);

-- Rune ID: 30798122401

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 1 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(30798122401, 
 9215591, 
 1, 
 13831007799, 
 1,
 5, 
 6, 
 8, 
 15, 
 15,
 451725, 
 132179, 
 (SELECT id FROM stat_types WHERE code = 'ATK_FLAT'), 
 160,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 282, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    15,
    0,
    8
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 8 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    16,
    0,
    12
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 12 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'),
    6,
    0,
    6
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_DMG')
    AND is_ancient = 0
    AND 6 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    9,
    1,
    9
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 9 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_upgrades 
(rune_id, level_reached, stat_type_id, old_value, new_value, upgrade_date)
SELECT 
    @last_rune_id,
    3,
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    9.0,
    9.0,
    NOW();

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 25115)
AND slot_number = 1;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 25115), 
    @last_rune_id, 
    1
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 25115);

-- Rune ID: 30903386566

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 2 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(30903386566, 
 9215591, 
 1, 
 13831007799, 
 2,
 5, 
 6, 
 8, 
 15, 
 15,
 412100, 
 129357, 
 (SELECT id FROM stat_types WHERE code = 'ATK_PCT'), 
 63,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    14,
    0,
    10
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 10 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    5,
    1,
    5
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 5 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'),
    13,
    0,
    13
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_DMG')
    AND is_ancient = 0
    AND 13 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    5,
    0,
    -2
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND -2 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 25115)
AND slot_number = 2;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 25115), 
    @last_rune_id, 
    2
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 25115);

-- Rune ID: 42562227402

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 3 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(42562227402, 
 9215591, 
 1, 
 13831007799, 
 3,
 5, 
 6, 
 8, 
 15, 
 12,
 309075, 
 58017, 
 (SELECT id FROM stat_types WHERE code = 'DEF_FLAT'), 
 118,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'),
    6,
    0,
    6
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_DMG')
    AND is_ancient = 0
    AND 6 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    6,
    0,
    -1
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND -1 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    22,
    0,
    18
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 18 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    5,
    1,
    5
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 5 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_upgrades 
(rune_id, level_reached, stat_type_id, old_value, new_value, upgrade_date)
SELECT 
    @last_rune_id,
    3,
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    5.0,
    5.0,
    NOW();

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 25115)
AND slot_number = 3;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 25115), 
    @last_rune_id, 
    3
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 25115);

-- Rune ID: 43798761065

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 4 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(43798761065, 
 9215591, 
 1, 
 13831007799, 
 4,
 5, 
 6, 
 15, 
 15, 
 15,
 627660, 
 133609, 
 (SELECT id FROM stat_types WHERE code = 'ATK_PCT'), 
 63,
 (SELECT id FROM stat_types WHERE code = 'DEF_PCT'), 
 8, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    21,
    0,
    17
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 17 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    6,
    0,
    6
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 6 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_FLAT'),
    18,
    0,
    -12
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_FLAT')
    AND is_ancient = 0
    AND -12 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_FLAT'),
    210,
    0,
    -223
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_FLAT')
    AND is_ancient = 0
    AND -223 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 25115)
AND slot_number = 4;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 25115), 
    @last_rune_id, 
    4
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 25115);

-- Rune ID: 31241339464

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 5 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(31241339464, 
 9215591, 
 1, 
 13831007799, 
 5,
 5, 
 6, 
 10, 
 15, 
 15,
 557920, 
 127896, 
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 2448,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    28,
    0,
    21
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 21 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    5,
    0,
    5
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 5 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    12,
    0,
    8
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 8 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    12,
    1,
    5
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 5 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_upgrades 
(rune_id, level_reached, stat_type_id, old_value, new_value, upgrade_date)
SELECT 
    @last_rune_id,
    3,
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    5.0,
    12.0,
    NOW();

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 25115)
AND slot_number = 5;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 25115), 
    @last_rune_id, 
    5
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 25115);

-- Rune ID: 38019577142

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 6 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(38019577142, 
 9215591, 
 1, 
 13831007799, 
 6,
 5, 
 6, 
 8, 
 15, 
 15,
 350285, 
 124953, 
 (SELECT id FROM stat_types WHERE code = 'ATK_PCT'), 
 63,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    17,
    0,
    13
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 13 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ACC'),
    14,
    0,
    14
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ACC')
    AND is_ancient = 0
    AND 14 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_FLAT'),
    17,
    0,
    0
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_FLAT')
    AND is_ancient = 0
    AND 0 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_FLAT'),
    372,
    0,
    -45
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_FLAT')
    AND is_ancient = 0
    AND -45 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 25115)
AND slot_number = 6;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 25115), 
    @last_rune_id, 
    6
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 25115);

-- Rune ID: 43019714260

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 1 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(43019714260, 
 9215591, 
 1, 
 13962525027, 
 1,
 5, 
 6, 
 10, 
 15, 
 12,
 722760, 
 72138, 
 (SELECT id FROM stat_types WHERE code = 'ATK_FLAT'), 
 118,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 369, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    17,
    0,
    14
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 14 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    14,
    0,
    14
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 14 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ACC'),
    8,
    0,
    8
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ACC')
    AND is_ancient = 0
    AND 8 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    4,
    0,
    4
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 4 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 20915)
AND slot_number = 1;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 20915), 
    @last_rune_id, 
    1
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 20915);

-- Rune ID: 41290572381

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 3 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(41290572381, 
 9215591, 
 1, 
 13962525027, 
 3,
 5, 
 6, 
 13, 
 15, 
 12,
 523050, 
 62152, 
 (SELECT id FROM stat_types WHERE code = 'DEF_FLAT'), 
 118,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    11,
    0,
    11
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 11 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    11,
    0,
    11
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND 11 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    14,
    0,
    14
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 14 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    5,
    0,
    5
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 5 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 20915)
AND slot_number = 3;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 20915), 
    @last_rune_id, 
    3
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 20915);

-- Rune ID: 42430873085

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 1 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(42430873085, 
 9215591, 
 1, 
 13983535514, 
 1,
 5, 
 6, 
 10, 
 15, 
 12,
 722760, 
 72138, 
 (SELECT id FROM stat_types WHERE code = 'ATK_FLAT'), 
 118,
 (SELECT id FROM stat_types WHERE code = 'ACC'), 
 8, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    6,
    0,
    6
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 6 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    14,
    0,
    7
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 7 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    16,
    0,
    16
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 16 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_FLAT'),
    355,
    0,
    13
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_FLAT')
    AND is_ancient = 0
    AND 13 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 24915)
AND slot_number = 1;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 24915), 
    @last_rune_id, 
    1
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 24915);

-- Rune ID: 41707531099

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 3 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(41707531099, 
 9215591, 
 1, 
 13983535514, 
 3,
 5, 
 6, 
 5, 
 15, 
 12,
 570600, 
 64530, 
 (SELECT id FROM stat_types WHERE code = 'DEF_FLAT'), 
 118,
 (SELECT id FROM stat_types WHERE code = 'SPD'), 
 6, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    20,
    0,
    20
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 20 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'),
    6,
    1,
    6
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_DMG')
    AND is_ancient = 0
    AND 6 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ACC'),
    4,
    0,
    4
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ACC')
    AND is_ancient = 0
    AND 4 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    5,
    0,
    -2
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND -2 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 24915)
AND slot_number = 3;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 24915), 
    @last_rune_id, 
    3
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 24915);

-- Rune ID: 41114418521

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 1 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(41114418521, 
 9215591, 
 1, 
 14217628397, 
 1,
 5, 
 6, 
 1, 
 15, 
 12,
 421610, 
 67522, 
 (SELECT id FROM stat_types WHERE code = 'ATK_FLAT'), 
 118,
 (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'), 
 7, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'RES'),
    22,
    0,
    22
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'RES')
    AND is_ancient = 0
    AND 22 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ACC'),
    12,
    0,
    12
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ACC')
    AND is_ancient = 0
    AND 12 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    10,
    1,
    4
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 4 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    12,
    0,
    8
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 8 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 16215)
AND slot_number = 1;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 16215), 
    @last_rune_id, 
    1
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 16215);

-- Rune ID: 41425780013

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 2 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(41425780013, 
 9215591, 
 1, 
 14217628397, 
 2,
 5, 
 6, 
 7, 
 15, 
 15,
 507200, 
 134503, 
 (SELECT id FROM stat_types WHERE code = 'HP_PCT'), 
 63,
 (SELECT id FROM stat_types WHERE code = 'DEF_PCT'), 
 5, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'),
    6,
    0,
    6
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_DMG')
    AND is_ancient = 0
    AND 6 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_FLAT'),
    284,
    0,
    -95
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_FLAT')
    AND is_ancient = 0
    AND -95 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    22,
    0,
    18
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 18 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_FLAT'),
    34,
    0,
    12
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_FLAT')
    AND is_ancient = 0
    AND 12 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 16215)
AND slot_number = 2;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 16215), 
    @last_rune_id, 
    2
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 16215);

-- Rune ID: 21249031186

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 3 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(21249031186, 
 9215591, 
 1, 
 14217628397, 
 3,
 5, 
 6, 
 2, 
 15, 
 15,
 380400, 
 125877, 
 (SELECT id FROM stat_types WHERE code = 'DEF_FLAT'), 
 160,
 (SELECT id FROM stat_types WHERE code = 'ACC'), 
 5, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    18,
    0,
    14
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 14 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_FLAT'),
    548,
    0,
    138
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_FLAT')
    AND is_ancient = 0
    AND 138 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    7,
    0,
    -2
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND -2 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    11,
    1,
    4
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 4 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_upgrades 
(rune_id, level_reached, stat_type_id, old_value, new_value, upgrade_date)
SELECT 
    @last_rune_id,
    3,
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    4.0,
    11.0,
    NOW();

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 16215)
AND slot_number = 3;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 16215), 
    @last_rune_id, 
    3
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 16215);

-- Rune ID: 41353089863

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 5 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(41353089863, 
 9215591, 
 1, 
 14217628397, 
 5,
 5, 
 6, 
 2, 
 15, 
 14,
 405760, 
 98602, 
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 2040,
 (SELECT id FROM stat_types WHERE code = 'ATK_FLAT'), 
 11, 
 'legendary',
 14,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    5,
    0,
    -2
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND -2 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    30,
    0,
    23
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 23 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    8,
    1,
    4
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 4 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    8,
    0,
    2
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND 2 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 16215)
AND slot_number = 5;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 16215), 
    @last_rune_id, 
    5
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 16215);

-- Rune ID: 34309298153

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 1 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(34309298153, 
 9215591, 
 1, 
 14422757610, 
 1,
 5, 
 6, 
 19, 
 15, 
 15,
 602300, 
 132251, 
 (SELECT id FROM stat_types WHERE code = 'ATK_FLAT'), 
 160,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    13,
    0,
    13
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 13 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'),
    6,
    0,
    6
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_DMG')
    AND is_ancient = 0
    AND 6 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    7,
    0,
    0
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 0 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    10,
    1,
    6
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 6 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_upgrades 
(rune_id, level_reached, stat_type_id, old_value, new_value, upgrade_date)
SELECT 
    @last_rune_id,
    3,
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    6.0,
    10.0,
    NOW();

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 25815)
AND slot_number = 1;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 25815), 
    @last_rune_id, 
    1
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 25815);

-- Rune ID: 34340647475

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 2 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(34340647475, 
 9215591, 
 1, 
 14422757610, 
 2,
 5, 
 6, 
 19, 
 15, 
 15,
 697400, 
 137344, 
 (SELECT id FROM stat_types WHERE code = 'ATK_PCT'), 
 63,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 264, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'),
    19,
    0,
    19
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_DMG')
    AND is_ancient = 0
    AND 19 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ACC'),
    11,
    0,
    11
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ACC')
    AND is_ancient = 0
    AND 11 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_FLAT'),
    16,
    0,
    0
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_FLAT')
    AND is_ancient = 0
    AND 0 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    11,
    0,
    11
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 11 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 25815)
AND slot_number = 2;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 25815), 
    @last_rune_id, 
    2
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 25815);

-- Rune ID: 34288867169

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 3 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(34288867169, 
 9215591, 
 1, 
 14422757610, 
 3,
 5, 
 6, 
 19, 
 15, 
 12,
 475500, 
 61461, 
 (SELECT id FROM stat_types WHERE code = 'DEF_FLAT'), 
 118,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    13,
    0,
    8
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND 8 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'),
    12,
    0,
    12
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_DMG')
    AND is_ancient = 0
    AND 12 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    9,
    0,
    9
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 9 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ACC'),
    8,
    1,
    8
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ACC')
    AND is_ancient = 0
    AND 8 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_upgrades 
(rune_id, level_reached, stat_type_id, old_value, new_value, upgrade_date)
SELECT 
    @last_rune_id,
    3,
    (SELECT id FROM stat_types WHERE code = 'ACC'),
    8.0,
    8.0,
    NOW();

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 25815)
AND slot_number = 3;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 25815), 
    @last_rune_id, 
    3
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 25815);

-- Rune ID: 34326935081

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 4 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(34326935081, 
 9215591, 
 1, 
 14422757610, 
 4,
 5, 
 6, 
 19, 
 15, 
 15,
 627660, 
 133609, 
 (SELECT id FROM stat_types WHERE code = 'DEF_PCT'), 
 63,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 153, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    4,
    0,
    1
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 1 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    10,
    0,
    10
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 10 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'RES'),
    16,
    0,
    16
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'RES')
    AND is_ancient = 0
    AND 16 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'),
    7,
    0,
    7
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_DMG')
    AND is_ancient = 0
    AND 7 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 25815)
AND slot_number = 4;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 25815), 
    @last_rune_id, 
    4
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 25815);

-- Rune ID: 31671289979

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 5 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(31671289979, 
 9215591, 
 1, 
 14422757610, 
 5,
 5, 
 6, 
 19, 
 15, 
 12,
 507200, 
 63159, 
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 1800,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'),
    14,
    0,
    14
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_DMG')
    AND is_ancient = 0
    AND 14 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    11,
    0,
    7
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 7 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    8,
    0,
    8
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 8 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    8,
    1,
    1
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 1 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_upgrades 
(rune_id, level_reached, stat_type_id, old_value, new_value, upgrade_date)
SELECT 
    @last_rune_id,
    3,
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    1.0,
    8.0,
    NOW();

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 25815)
AND slot_number = 5;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 25815), 
    @last_rune_id, 
    5
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 25815);

-- Rune ID: 39409030190

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 6 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(39409030190, 
 9215591, 
 1, 
 14422757610, 
 6,
 5, 
 6, 
 19, 
 15, 
 15,
 538900, 
 128856, 
 (SELECT id FROM stat_types WHERE code = 'ATK_PCT'), 
 63,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_FLAT'),
    261,
    0,
    -52
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_FLAT')
    AND is_ancient = 0
    AND -52 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    15,
    0,
    11
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 11 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'),
    11,
    0,
    11
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_DMG')
    AND is_ancient = 0
    AND 11 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    4,
    0,
    4
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 4 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 25815)
AND slot_number = 6;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 25815), 
    @last_rune_id, 
    6
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 25815);

-- Rune ID: 39376596607

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 1 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(39376596607, 
 9215591, 
 1, 
 14528265539, 
 1,
 5, 
 6, 
 8, 
 15, 
 12,
 451725, 
 68179, 
 (SELECT id FROM stat_types WHERE code = 'ATK_FLAT'), 
 118,
 (SELECT id FROM stat_types WHERE code = 'RES'), 
 5, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    11,
    0,
    11
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 11 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'),
    10,
    0,
    10
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_DMG')
    AND is_ancient = 0
    AND 10 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    14,
    0,
    8
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 8 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    4,
    0,
    0
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 0 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 16915)
AND slot_number = 1;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 16915), 
    @last_rune_id, 
    1
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 16915);

-- Rune ID: 41563123668

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 1 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(41563123668, 
 9215591, 
 1, 
 14554722598, 
 1,
 5, 
 6, 
 18, 
 15, 
 12,
 602300, 
 68251, 
 (SELECT id FROM stat_types WHERE code = 'ATK_FLAT'), 
 118,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    10,
    1,
    6
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 6 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    16,
    0,
    12
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 12 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    14,
    0,
    10
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 10 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_FLAT'),
    688,
    0,
    317
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_FLAT')
    AND is_ancient = 0
    AND 317 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 15935)
AND slot_number = 1;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 15935), 
    @last_rune_id, 
    1
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 15935);

-- Rune ID: 43017777306

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 3 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(43017777306, 
 9215591, 
 1, 
 14554722598, 
 3,
 5, 
 6, 
 8, 
 15, 
 15,
 309075, 
 122017, 
 (SELECT id FROM stat_types WHERE code = 'DEF_FLAT'), 
 160,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    16,
    0,
    16
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 16 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    11,
    0,
    8
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 8 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ACC'),
    6,
    0,
    6
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ACC')
    AND is_ancient = 0
    AND 6 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    7,
    0,
    3
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND 3 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 15935)
AND slot_number = 3;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 15935), 
    @last_rune_id, 
    3
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 15935);

-- Rune ID: 40827704422

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 4 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_DMG')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(40827704422, 
 9215591, 
 1, 
 14554722598, 
 4,
 5, 
 6, 
 25, 
 15, 
 15,
 684720, 
 134236, 
 (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'), 
 80,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 157, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    6,
    0,
    2
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND 2 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    10,
    0,
    10
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 10 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    14,
    0,
    11
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 11 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    11,
    1,
    5
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 5 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_upgrades 
(rune_id, level_reached, stat_type_id, old_value, new_value, upgrade_date)
SELECT 
    @last_rune_id,
    3,
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    5.0,
    11.0,
    NOW();

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 15935)
AND slot_number = 4;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 15935), 
    @last_rune_id, 
    4
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 15935);

-- Rune ID: 41001248436

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 1 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(41001248436, 
 9215591, 
 1, 
 14699663573, 
 1,
 5, 
 6, 
 18, 
 15, 
 12,
 602300, 
 68251, 
 (SELECT id FROM stat_types WHERE code = 'ATK_FLAT'), 
 118,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    15,
    0,
    10
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 10 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_FLAT'),
    315,
    0,
    -45
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_FLAT')
    AND is_ancient = 0
    AND -45 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    15,
    0,
    12
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 12 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    10,
    1,
    5
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 5 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_upgrades 
(rune_id, level_reached, stat_type_id, old_value, new_value, upgrade_date)
SELECT 
    @last_rune_id,
    3,
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    5.0,
    10.0,
    NOW();

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 15235)
AND slot_number = 1;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 15235), 
    @last_rune_id, 
    1
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 15235);

-- Rune ID: 42554961192

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 3 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(42554961192, 
 9215591, 
 1, 
 14699663573, 
 3,
 5, 
 6, 
 10, 
 15, 
 12,
 523050, 
 62152, 
 (SELECT id FROM stat_types WHERE code = 'DEF_FLAT'), 
 118,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_FLAT'),
    293,
    0,
    -201
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_FLAT')
    AND is_ancient = 0
    AND -201 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    5,
    0,
    -3
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND -3 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    23,
    0,
    19
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 19 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    4,
    0,
    4
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 4 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 15235)
AND slot_number = 3;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 15235), 
    @last_rune_id, 
    3
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 15235);

-- Rune ID: 45667419436

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 1 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(45667419436, 
 9215591, 
 1, 
 14990455872, 
 1,
 15, 
 16, 
 15, 
 15, 
 12,
 795036, 
 78572, 
 (SELECT id FROM stat_types WHERE code = 'ATK_FLAT'), 
 118,
 (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'), 
 5, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_FLAT'),
    292,
    0,
    292
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_FLAT')
    AND is_ancient = 1
    AND 292 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'RES'),
    23,
    0,
    23
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'RES')
    AND is_ancient = 1
    AND 23 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ACC'),
    6,
    0,
    6
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ACC')
    AND is_ancient = 1
    AND 6 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    17,
    0,
    17
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 1
    AND 17 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 21315)
AND slot_number = 1;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 21315), 
    @last_rune_id, 
    1
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 21315);

-- Rune ID: 44802373812

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 3 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(44802373812, 
 9215591, 
 1, 
 14990455872, 
 3,
 5, 
 6, 
 15, 
 15, 
 12,
 475500, 
 61461, 
 (SELECT id FROM stat_types WHERE code = 'DEF_FLAT'), 
 118,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    15,
    0,
    15
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 15 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ACC'),
    6,
    0,
    6
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ACC')
    AND is_ancient = 0
    AND 6 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    21,
    0,
    21
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND 21 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'RES'),
    7,
    0,
    7
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'RES')
    AND is_ancient = 0
    AND 7 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 21315)
AND slot_number = 3;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 21315), 
    @last_rune_id, 
    3
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 21315);

-- Rune ID: 45604066347

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 1 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(45604066347, 
 9215591, 
 1, 
 15300691647, 
 1,
 15, 
 16, 
 15, 
 15, 
 12,
 722760, 
 74702, 
 (SELECT id FROM stat_types WHERE code = 'ATK_FLAT'), 
 118,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    10,
    0,
    10
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 1
    AND 10 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'),
    7,
    0,
    7
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_DMG')
    AND is_ancient = 1
    AND 7 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    25,
    0,
    25
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 1
    AND 25 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ACC'),
    4,
    0,
    4
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ACC')
    AND is_ancient = 1
    AND 4 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 26515)
AND slot_number = 1;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 26515), 
    @last_rune_id, 
    1
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 26515);

-- Rune ID: 41627314931

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 3 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(41627314931, 
 9215591, 
 1, 
 15300691647, 
 3,
 5, 
 6, 
 15, 
 15, 
 12,
 475500, 
 61461, 
 (SELECT id FROM stat_types WHERE code = 'DEF_FLAT'), 
 118,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    20,
    0,
    16
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 16 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ACC'),
    8,
    0,
    8
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ACC')
    AND is_ancient = 0
    AND 8 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    10,
    0,
    10
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 10 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_FLAT'),
    221,
    0,
    -63
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_FLAT')
    AND is_ancient = 0
    AND -63 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 26515)
AND slot_number = 3;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 26515), 
    @last_rune_id, 
    3
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 26515);

-- Rune ID: 41645240517

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 1 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(41645240517, 
 9215591, 
 1, 
 15300691648, 
 1,
 5, 
 6, 
 18, 
 15, 
 12,
 602300, 
 68251, 
 (SELECT id FROM stat_types WHERE code = 'ATK_FLAT'), 
 118,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    16,
    0,
    16
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 16 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    8,
    0,
    3
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 3 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    12,
    0,
    8
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 8 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'),
    5,
    0,
    5
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_DMG')
    AND is_ancient = 0
    AND 5 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 21915)
AND slot_number = 1;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 21915), 
    @last_rune_id, 
    1
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 21915);

-- Rune ID: 45534404004

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 3 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(45534404004, 
 9215591, 
 1, 
 15300691648, 
 3,
 5, 
 6, 
 8, 
 15, 
 12,
 356625, 
 61405, 
 (SELECT id FROM stat_types WHERE code = 'DEF_FLAT'), 
 118,
 (SELECT id FROM stat_types WHERE code = 'HP_PCT'), 
 5, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_FLAT'),
    266,
    0,
    266
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_FLAT')
    AND is_ancient = 0
    AND 266 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    16,
    0,
    16
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 16 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'),
    18,
    0,
    18
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_DMG')
    AND is_ancient = 0
    AND 18 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'RES'),
    5,
    0,
    5
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'RES')
    AND is_ancient = 0
    AND 5 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 21915)
AND slot_number = 3;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 21915), 
    @last_rune_id, 
    3
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 21915);

-- Rune ID: 32845875131

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 1 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(32845875131, 
 9215591, 
 1, 
 15378078367, 
 1,
 5, 
 6, 
 13, 
 15, 
 15,
 722760, 
 136138, 
 (SELECT id FROM stat_types WHERE code = 'ATK_FLAT'), 
 160,
 (SELECT id FROM stat_types WHERE code = 'ATK_PCT'), 
 5, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    21,
    0,
    17
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 17 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_FLAT'),
    239,
    0,
    -199
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_FLAT')
    AND is_ancient = 0
    AND -199 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'RES'),
    4,
    0,
    4
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'RES')
    AND is_ancient = 0
    AND 4 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    10,
    1,
    4
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 4 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_upgrades 
(rune_id, level_reached, stat_type_id, old_value, new_value, upgrade_date)
SELECT 
    @last_rune_id,
    3,
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    4.0,
    10.0,
    NOW();

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 20115)
AND slot_number = 1;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 20115), 
    @last_rune_id, 
    1
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 20115);

-- Rune ID: 24229861909

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 2 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(24229861909, 
 9215591, 
 1, 
 15378078367, 
 2,
 5, 
 6, 
 13, 
 15, 
 15,
 760800, 
 138040, 
 (SELECT id FROM stat_types WHERE code = 'SPD'), 
 42,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 202, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    23,
    0,
    16
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND 16 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    8,
    0,
    2
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 2 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    7,
    1,
    0
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 0 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    11,
    0,
    11
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 11 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 20115)
AND slot_number = 2;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 20115), 
    @last_rune_id, 
    2
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 20115);

-- Rune ID: 34200599485

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 3 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(34200599485, 
 9215591, 
 1, 
 15378078367, 
 3,
 5, 
 6, 
 13, 
 15, 
 15,
 570600, 
 128530, 
 (SELECT id FROM stat_types WHERE code = 'DEF_FLAT'), 
 160,
 (SELECT id FROM stat_types WHERE code = 'ACC'), 
 4, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    22,
    0,
    18
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 18 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    6,
    0,
    0
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 0 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_FLAT'),
    420,
    1,
    -23
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_FLAT')
    AND is_ancient = 0
    AND -23 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    12,
    0,
    5
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND 5 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 20115)
AND slot_number = 3;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 20115), 
    @last_rune_id, 
    3
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 20115);

-- Rune ID: 32542523680

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 4 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(32542523680, 
 9215591, 
 1, 
 15378078367, 
 4,
 15, 
 16, 
 15, 
 15, 
 15,
 684720, 
 136665, 
 (SELECT id FROM stat_types WHERE code = 'HP_PCT'), 
 63,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_FLAT'),
    24,
    0,
    -10
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_FLAT')
    AND is_ancient = 1
    AND -10 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    14,
    1,
    3
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 1
    AND 3 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    28,
    0,
    23
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 1
    AND 23 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_FLAT'),
    14,
    0,
    -9
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_FLAT')
    AND is_ancient = 1
    AND -9 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 20115)
AND slot_number = 4;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 20115), 
    @last_rune_id, 
    4
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 20115);

-- Rune ID: 25358103750

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 5 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(25358103750, 
 9215591, 
 1, 
 15378078367, 
 5,
 5, 
 6, 
 13, 
 15, 
 15,
 608640, 
 130432, 
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 2448,
 (SELECT id FROM stat_types WHERE code = 'ACC'), 
 6, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    11,
    1,
    1
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 1 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    23,
    0,
    18
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 18 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    12,
    0,
    2
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND 2 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    8,
    0,
    -2
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND -2 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 20115)
AND slot_number = 5;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 20115), 
    @last_rune_id, 
    5
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 20115);

-- Rune ID: 34515911981

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 6 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(34515911981, 
 9215591, 
 1, 
 15378078367, 
 6,
 5, 
 6, 
 11, 
 15, 
 15,
 538900, 
 128856, 
 (SELECT id FROM stat_types WHERE code = 'HP_PCT'), 
 63,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    12,
    1,
    4
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND 4 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    27,
    0,
    22
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 22 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    6,
    0,
    -2
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND -2 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_FLAT'),
    18,
    0,
    -9
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_FLAT')
    AND is_ancient = 0
    AND -9 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 20115)
AND slot_number = 6;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 20115), 
    @last_rune_id, 
    6
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 20115);

-- Rune ID: 41509268510

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 1 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(41509268510, 
 9215591, 
 1, 
 15501021214, 
 1,
 5, 
 6, 
 5, 
 15, 
 12,
 722760, 
 72138, 
 (SELECT id FROM stat_types WHERE code = 'ATK_FLAT'), 
 118,
 (SELECT id FROM stat_types WHERE code = 'ACC'), 
 6, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    20,
    0,
    14
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 14 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    10,
    0,
    6
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 6 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    5,
    0,
    5
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 5 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'),
    4,
    0,
    4
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_DMG')
    AND is_ancient = 0
    AND 4 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 25415)
AND slot_number = 1;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 25415), 
    @last_rune_id, 
    1
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 25415);

-- Rune ID: 43115758159

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 3 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(43115758159, 
 9215591, 
 1, 
 15501021214, 
 3,
 5, 
 6, 
 10, 
 15, 
 12,
 570600, 
 64530, 
 (SELECT id FROM stat_types WHERE code = 'DEF_FLAT'), 
 118,
 (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'), 
 6, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    13,
    0,
    13
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND 13 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    22,
    0,
    22
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 22 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_FLAT'),
    458,
    0,
    458
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_FLAT')
    AND is_ancient = 0
    AND 458 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    6,
    0,
    6
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 6 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 25415)
AND slot_number = 3;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 25415), 
    @last_rune_id, 
    3
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 25415);

-- Rune ID: 38534907306

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 3 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(38534907306, 
 9215591, 
 1, 
 15576506479, 
 3,
 15, 
 16, 
 15, 
 15, 
 15,
 627660, 
 133609, 
 (SELECT id FROM stat_types WHERE code = 'DEF_FLAT'), 
 160,
 (SELECT id FROM stat_types WHERE code = 'RES'), 
 7, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    18,
    0,
    18
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 1
    AND 18 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ACC'),
    11,
    0,
    11
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ACC')
    AND is_ancient = 1
    AND 11 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'),
    6,
    0,
    6
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_DMG')
    AND is_ancient = 1
    AND 6 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_FLAT'),
    232,
    0,
    -233
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_FLAT')
    AND is_ancient = 1
    AND -233 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 13415)
AND slot_number = 3;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 13415), 
    @last_rune_id, 
    3
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 13415);

-- Rune ID: 32376826378

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 1 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(32376826378, 
 9215591, 
 1, 
 15938022142, 
 1,
 5, 
 6, 
 3, 
 15, 
 15,
 481840, 
 132778, 
 (SELECT id FROM stat_types WHERE code = 'ATK_FLAT'), 
 160,
 (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'), 
 5, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ACC'),
    7,
    0,
    7
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ACC')
    AND is_ancient = 0
    AND 7 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    21,
    0,
    16
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 16 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    8,
    1,
    1
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 1 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    10,
    0,
    10
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 10 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 15415)
AND slot_number = 1;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 15415), 
    @last_rune_id, 
    1
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 15415);

-- Rune ID: 34995606542

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 2 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(34995606542, 
 9215591, 
 1, 
 15938022142, 
 2,
 5, 
 6, 
 3, 
 15, 
 15,
 507200, 
 134503, 
 (SELECT id FROM stat_types WHERE code = 'SPD'), 
 42,
 (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'), 
 4, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    11,
    0,
    11
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 11 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    13,
    0,
    7
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 7 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ACC'),
    9,
    0,
    9
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ACC')
    AND is_ancient = 0
    AND 9 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    8,
    1,
    2
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 2 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_upgrades 
(rune_id, level_reached, stat_type_id, old_value, new_value, upgrade_date)
SELECT 
    @last_rune_id,
    3,
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    2.0,
    8.0,
    NOW();

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 15415)
AND slot_number = 2;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 15415), 
    @last_rune_id, 
    2
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 15415);

-- Rune ID: 30766518429

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 3 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(30766518429, 
 9215591, 
 1, 
 15938022142, 
 3,
 5, 
 6, 
 8, 
 15, 
 12,
 356625, 
 61405, 
 (SELECT id FROM stat_types WHERE code = 'DEF_FLAT'), 
 118,
 (SELECT id FROM stat_types WHERE code = 'ACC'), 
 4, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'),
    7,
    0,
    7
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_DMG')
    AND is_ancient = 0
    AND 7 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    21,
    0,
    16
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 16 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    10,
    1,
    4
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 4 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    10,
    0,
    10
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 10 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 15415)
AND slot_number = 3;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 15415), 
    @last_rune_id, 
    3
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 15415);

-- Rune ID: 32630804736

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 4 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_DMG')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(32630804736, 
 9215591, 
 1, 
 15938022142, 
 4,
 5, 
 6, 
 3, 
 15, 
 15,
 456480, 
 131053, 
 (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'), 
 80,
 (SELECT id FROM stat_types WHERE code = 'HP_PCT'), 
 8, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    11,
    0,
    1
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 1 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    17,
    0,
    17
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 17 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    6,
    0,
    2
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 2 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_FLAT'),
    13,
    0,
    -8
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_FLAT')
    AND is_ancient = 0
    AND -8 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 15415)
AND slot_number = 4;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 15415), 
    @last_rune_id, 
    4
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 15415);

-- Rune ID: 18437686976

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 5 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(18437686976, 
 9215591, 
 1, 
 15938022142, 
 5,
 5, 
 6, 
 3, 
 15, 
 15,
 405760, 
 127602, 
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 2448,
 (SELECT id FROM stat_types WHERE code = 'ATK_FLAT'), 
 11, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    27,
    0,
    27
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 27 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    10,
    1,
    2
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 2 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    4,
    0,
    1
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 1 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    6,
    0,
    0
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND 0 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 15415)
AND slot_number = 5;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 15415), 
    @last_rune_id, 
    5
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 15415);

-- Rune ID: 44857619121

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 6 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(44857619121, 
 9215591, 
 1, 
 15938022142, 
 6,
 5, 
 6, 
 8, 
 15, 
 15,
 350285, 
 124953, 
 (SELECT id FROM stat_types WHERE code = 'ATK_PCT'), 
 63,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'),
    10,
    0,
    10
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_DMG')
    AND is_ancient = 0
    AND 10 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    10,
    0,
    10
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 10 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    15,
    0,
    11
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 11 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_FLAT'),
    30,
    1,
    12
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_FLAT')
    AND is_ancient = 0
    AND 12 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_upgrades 
(rune_id, level_reached, stat_type_id, old_value, new_value, upgrade_date)
SELECT 
    @last_rune_id,
    3,
    (SELECT id FROM stat_types WHERE code = 'ATK_FLAT'),
    12.0,
    30.0,
    NOW();

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 15415)
AND slot_number = 6;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 15415), 
    @last_rune_id, 
    6
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 15415);

-- Rune ID: 31918156340

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 1 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(31918156340, 
 9215591, 
 1, 
 16054169251, 
 1,
 5, 
 6, 
 8, 
 15, 
 15,
 451725, 
 132179, 
 (SELECT id FROM stat_types WHERE code = 'ATK_FLAT'), 
 160,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 276, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    16,
    0,
    13
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 13 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    6,
    0,
    6
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 6 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    13,
    0,
    6
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 6 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'),
    7,
    1,
    7
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_DMG')
    AND is_ancient = 0
    AND 7 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_upgrades 
(rune_id, level_reached, stat_type_id, old_value, new_value, upgrade_date)
SELECT 
    @last_rune_id,
    3,
    (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'),
    7.0,
    7.0,
    NOW();

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 22015)
AND slot_number = 1;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 22015), 
    @last_rune_id, 
    1
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 22015);

-- Rune ID: 42880212621

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 3 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(42880212621, 
 9215591, 
 1, 
 16054169251, 
 3,
 5, 
 6, 
 13, 
 15, 
 12,
 523050, 
 62152, 
 (SELECT id FROM stat_types WHERE code = 'DEF_FLAT'), 
 118,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    4,
    0,
    4
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 4 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'),
    11,
    0,
    11
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_DMG')
    AND is_ancient = 0
    AND 11 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    20,
    0,
    16
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 16 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_FLAT'),
    188,
    0,
    -48
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_FLAT')
    AND is_ancient = 0
    AND -48 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 22015)
AND slot_number = 3;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 22015), 
    @last_rune_id, 
    3
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 22015);

-- Rune ID: 35379947272

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 1 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(35379947272, 
 9215591, 
 1, 
 16097733054, 
 1,
 5, 
 6, 
 8, 
 15, 
 12,
 391495, 
 63889, 
 (SELECT id FROM stat_types WHERE code = 'ATK_FLAT'), 
 118,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    17,
    0,
    13
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 13 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    6,
    0,
    1
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 1 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'),
    12,
    0,
    12
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_DMG')
    AND is_ancient = 0
    AND 12 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    7,
    1,
    7
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 7 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_upgrades 
(rune_id, level_reached, stat_type_id, old_value, new_value, upgrade_date)
SELECT 
    @last_rune_id,
    3,
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    7.0,
    7.0,
    NOW();

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 26015)
AND slot_number = 1;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 26015), 
    @last_rune_id, 
    1
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 26015);

-- Rune ID: 33898407078

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 3 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(33898407078, 
 9215591, 
 1, 
 16097733054, 
 3,
 5, 
 6, 
 13, 
 15, 
 12,
 570600, 
 64530, 
 (SELECT id FROM stat_types WHERE code = 'DEF_FLAT'), 
 118,
 (SELECT id FROM stat_types WHERE code = 'RES'), 
 6, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    16,
    0,
    14
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 14 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    12,
    0,
    12
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 12 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    8,
    1,
    4
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND 4 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_FLAT'),
    342,
    0,
    142
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_FLAT')
    AND is_ancient = 0
    AND 142 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 26015)
AND slot_number = 3;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 26015), 
    @last_rune_id, 
    3
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 26015);

-- Rune ID: 36346402235

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 1 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(36346402235, 
 9215591, 
 1, 
 16138162566, 
 1,
 5, 
 6, 
 8, 
 15, 
 12,
 391495, 
 63889, 
 (SELECT id FROM stat_types WHERE code = 'ATK_FLAT'), 
 118,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    12,
    0,
    5
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 5 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'),
    4,
    0,
    4
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_DMG')
    AND is_ancient = 0
    AND 4 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    18,
    0,
    18
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 18 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    6,
    1,
    2
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 2 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_upgrades 
(rune_id, level_reached, stat_type_id, old_value, new_value, upgrade_date)
SELECT 
    @last_rune_id,
    3,
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    2.0,
    6.0,
    NOW();

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 11035)
AND slot_number = 1;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 11035), 
    @last_rune_id, 
    1
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 11035);

-- Rune ID: 45488323964

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 3 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(45488323964, 
 9215591, 
 1, 
 16138162566, 
 3,
 5, 
 6, 
 8, 
 15, 
 12,
 356625, 
 61405, 
 (SELECT id FROM stat_types WHERE code = 'DEF_FLAT'), 
 118,
 (SELECT id FROM stat_types WHERE code = 'HP_PCT'), 
 8, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ACC'),
    6,
    0,
    6
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ACC')
    AND is_ancient = 0
    AND 6 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'),
    18,
    0,
    18
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_DMG')
    AND is_ancient = 0
    AND 18 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    10,
    0,
    10
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 10 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    9,
    0,
    5
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 5 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 11035)
AND slot_number = 3;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 11035), 
    @last_rune_id, 
    3
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 11035);

-- Rune ID: 41707740025

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 5 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(41707740025, 
 9215591, 
 1, 
 16138162566, 
 5,
 5, 
 6, 
 25, 
 15, 
 12,
 608640, 
 66432, 
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 1800,
 (SELECT id FROM stat_types WHERE code = 'ACC'), 
 4, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_FLAT'),
    13,
    0,
    -2
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_FLAT')
    AND is_ancient = 0
    AND -2 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    19,
    0,
    16
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 16 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    11,
    1,
    6
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 6 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    7,
    0,
    1
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 1 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 11035)
AND slot_number = 5;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 11035), 
    @last_rune_id, 
    5
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 11035);

-- Rune ID: 31520910271

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 1 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(31520910271, 
 9215591, 
 1, 
 16371366429, 
 1,
 5, 
 6, 
 8, 
 15, 
 12,
 451725, 
 68179, 
 (SELECT id FROM stat_types WHERE code = 'ATK_FLAT'), 
 118,
 (SELECT id FROM stat_types WHERE code = 'ACC'), 
 6, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    12,
    0,
    5
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 5 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    4,
    0,
    0
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 0 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    16,
    0,
    16
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 16 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'),
    6,
    0,
    6
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_DMG')
    AND is_ancient = 0
    AND 6 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 19415)
AND slot_number = 1;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 19415), 
    @last_rune_id, 
    1
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 19415);

-- Rune ID: 41459568533

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 3 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(41459568533, 
 9215591, 
 1, 
 16371366429, 
 3,
 5, 
 6, 
 13, 
 15, 
 12,
 523050, 
 62152, 
 (SELECT id FROM stat_types WHERE code = 'DEF_FLAT'), 
 118,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    22,
    0,
    22
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND 22 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    13,
    0,
    13
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 13 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'RES'),
    8,
    0,
    8
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'RES')
    AND is_ancient = 0
    AND 8 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ACC'),
    8,
    0,
    8
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ACC')
    AND is_ancient = 0
    AND 8 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 19415)
AND slot_number = 3;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 19415), 
    @last_rune_id, 
    3
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 19415);

-- Rune ID: 39207124589

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 1 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(39207124589, 
 9215591, 
 1, 
 16832561370, 
 1,
 5, 
 6, 
 3, 
 15, 
 12,
 421610, 
 64680, 
 (SELECT id FROM stat_types WHERE code = 'ATK_FLAT'), 
 118,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'),
    24,
    0,
    24
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_DMG')
    AND is_ancient = 0
    AND 24 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    8,
    0,
    1
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 1 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    4,
    0,
    4
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 4 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    6,
    1,
    2
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 2 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_upgrades 
(rune_id, level_reached, stat_type_id, old_value, new_value, upgrade_date)
SELECT 
    @last_rune_id,
    3,
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    2.0,
    6.0,
    NOW();

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 19915)
AND slot_number = 1;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 19915), 
    @last_rune_id, 
    1
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 19915);

-- Rune ID: 42856738427

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 3 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(42856738427, 
 9215591, 
 1, 
 16832561370, 
 3,
 5, 
 6, 
 8, 
 15, 
 12,
 356625, 
 61405, 
 (SELECT id FROM stat_types WHERE code = 'DEF_FLAT'), 
 118,
 (SELECT id FROM stat_types WHERE code = 'RES'), 
 4, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'),
    12,
    0,
    12
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_DMG')
    AND is_ancient = 0
    AND 12 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    17,
    0,
    17
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 17 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    5,
    0,
    5
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND 5 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    5,
    0,
    5
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 5 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 19915)
AND slot_number = 3;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 19915), 
    @last_rune_id, 
    3
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 19915);

-- Rune ID: 33714623578

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 1 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(33714623578, 
 9215591, 
 1, 
 17163369449, 
 1,
 5, 
 6, 
 18, 
 15, 
 12,
 602300, 
 68251, 
 (SELECT id FROM stat_types WHERE code = 'ATK_FLAT'), 
 118,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'),
    6,
    0,
    6
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_DMG')
    AND is_ancient = 0
    AND 6 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    20,
    0,
    17
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 17 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    10,
    1,
    4
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 4 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    6,
    0,
    6
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 6 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 22015)
AND slot_number = 1;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 22015), 
    @last_rune_id, 
    1
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 22015);

-- Rune ID: 34974212508

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 3 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(34974212508, 
 9215591, 
 1, 
 17163369449, 
 3,
 5, 
 6, 
 8, 
 15, 
 12,
 309075, 
 58017, 
 (SELECT id FROM stat_types WHERE code = 'DEF_FLAT'), 
 118,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'),
    13,
    0,
    13
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_DMG')
    AND is_ancient = 0
    AND 13 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_FLAT'),
    188,
    0,
    -221
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_FLAT')
    AND is_ancient = 0
    AND -221 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    16,
    0,
    16
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 16 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    7,
    1,
    3
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 3 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_upgrades 
(rune_id, level_reached, stat_type_id, old_value, new_value, upgrade_date)
SELECT 
    @last_rune_id,
    3,
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    3.0,
    7.0,
    NOW();

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 22015)
AND slot_number = 3;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 22015), 
    @last_rune_id, 
    3
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 22015);

-- Rune ID: 36171090899

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 1 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(36171090899, 
 9215591, 
 1, 
 17194780952, 
 1,
 15, 
 16, 
 14, 
 15, 
 12,
 722760, 
 74702, 
 (SELECT id FROM stat_types WHERE code = 'ATK_FLAT'), 
 118,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    16,
    0,
    13
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 1
    AND 13 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    5,
    1,
    5
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 1
    AND 5 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    13,
    0,
    5
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 1
    AND 5 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ACC'),
    6,
    0,
    6
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ACC')
    AND is_ancient = 1
    AND 6 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 25415)
AND slot_number = 1;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 25415), 
    @last_rune_id, 
    1
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 25415);

-- Rune ID: 45617844288

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 3 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(45617844288, 
 9215591, 
 1, 
 17194780952, 
 3,
 5, 
 6, 
 16, 
 15, 
 12,
 523050, 
 64008, 
 (SELECT id FROM stat_types WHERE code = 'DEF_FLAT'), 
 118,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 349, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    13,
    0,
    13
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 13 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    10,
    0,
    10
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 10 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    20,
    0,
    20
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND 20 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    4,
    0,
    4
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 4 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 25415)
AND slot_number = 3;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 25415), 
    @last_rune_id, 
    3
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 25415);

-- Rune ID: 36180619264

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 1 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(36180619264, 
 9215591, 
 1, 
 17317369439, 
 1,
 15, 
 16, 
 15, 
 15, 
 15,
 722760, 
 138702, 
 (SELECT id FROM stat_types WHERE code = 'ATK_FLAT'), 
 160,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    23,
    0,
    19
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 1
    AND 19 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    7,
    0,
    7
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 1
    AND 7 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    13,
    1,
    4
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 1
    AND 4 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ACC'),
    9,
    0,
    9
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ACC')
    AND is_ancient = 1
    AND 9 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 16535)
AND slot_number = 1;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 16535), 
    @last_rune_id, 
    1
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 16535);

-- Rune ID: 41618926538

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 2 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(41618926538, 
 9215591, 
 1, 
 17317369439, 
 2,
 5, 
 6, 
 5, 
 15, 
 15,
 760800, 
 138040, 
 (SELECT id FROM stat_types WHERE code = 'DEF_PCT'), 
 63,
 (SELECT id FROM stat_types WHERE code = 'ACC'), 
 8, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'),
    13,
    0,
    13
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_DMG')
    AND is_ancient = 0
    AND 13 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_FLAT'),
    30,
    1,
    8
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_FLAT')
    AND is_ancient = 0
    AND 8 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    17,
    0,
    17
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 17 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    11,
    0,
    7
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 7 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 16535)
AND slot_number = 2;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 16535), 
    @last_rune_id, 
    2
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 16535);

-- Rune ID: 36173226143

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 3 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(36173226143, 
 9215591, 
 1, 
 17317369439, 
 3,
 15, 
 16, 
 15, 
 15, 
 15,
 570600, 
 130554, 
 (SELECT id FROM stat_types WHERE code = 'DEF_FLAT'), 
 160,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    27,
    0,
    27
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 1
    AND 27 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    10,
    1,
    7
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 1
    AND 7 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    8,
    0,
    0
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 1
    AND 0 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ACC'),
    8,
    0,
    8
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ACC')
    AND is_ancient = 1
    AND 8 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 16535)
AND slot_number = 3;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 16535), 
    @last_rune_id, 
    3
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 16535);

-- Rune ID: 31262140586

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 4 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_DMG')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(31262140586, 
 9215591, 
 1, 
 17317369439, 
 4,
 15, 
 16, 
 18, 
 15, 
 15,
 684720, 
 136665, 
 (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'), 
 80,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    12,
    1,
    3
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 1
    AND 3 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    26,
    0,
    17
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 1
    AND 17 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    11,
    0,
    11
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 1
    AND 11 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    11,
    0,
    7
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 1
    AND 7 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 16535)
AND slot_number = 4;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 16535), 
    @last_rune_id, 
    4
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 16535);

-- Rune ID: 38953995365

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 5 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(38953995365, 
 9215591, 
 1, 
 17317369439, 
 5,
 15, 
 16, 
 15, 
 15, 
 15,
 669504, 
 135850, 
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 2448,
 (SELECT id FROM stat_types WHERE code = 'RES'), 
 7, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ACC'),
    22,
    0,
    22
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ACC')
    AND is_ancient = 1
    AND 22 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_FLAT'),
    23,
    0,
    23
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_FLAT')
    AND is_ancient = 1
    AND 23 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    7,
    1,
    3
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 1
    AND 3 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    25,
    0,
    16
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 1
    AND 16 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 16535)
AND slot_number = 5;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 16535), 
    @last_rune_id, 
    5
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 16535);

-- Rune ID: 23268639669

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 6 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(23268639669, 
 9215591, 
 1, 
 17317369439, 
 6,
 5, 
 6, 
 15, 
 15, 
 15,
 538900, 
 128856, 
 (SELECT id FROM stat_types WHERE code = 'DEF_PCT'), 
 63,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    7,
    1,
    7
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 7 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    8,
    0,
    4
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 4 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'),
    21,
    0,
    21
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_DMG')
    AND is_ancient = 0
    AND 21 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    7,
    0,
    1
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 1 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 16535)
AND slot_number = 6;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 16535), 
    @last_rune_id, 
    6
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 16535);

-- Rune ID: 42905418013

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 1 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(42905418013, 
 9215591, 
 1, 
 17402732772, 
 1,
 5, 
 6, 
 8, 
 15, 
 12,
 451725, 
 68179, 
 (SELECT id FROM stat_types WHERE code = 'ATK_FLAT'), 
 118,
 (SELECT id FROM stat_types WHERE code = 'ACC'), 
 5, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    16,
    0,
    16
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 16 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    10,
    0,
    5
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 5 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'),
    6,
    0,
    6
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_DMG')
    AND is_ancient = 0
    AND 6 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    8,
    1,
    5
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 5 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_upgrades 
(rune_id, level_reached, stat_type_id, old_value, new_value, upgrade_date)
SELECT 
    @last_rune_id,
    3,
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    5.0,
    8.0,
    NOW();

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 17315)
AND slot_number = 1;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 17315), 
    @last_rune_id, 
    1
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 17315);

-- Rune ID: 31369997096

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 3 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(31369997096, 
 9215591, 
 1, 
 17402732772, 
 3,
 5, 
 6, 
 13, 
 15, 
 15,
 570600, 
 128530, 
 (SELECT id FROM stat_types WHERE code = 'DEF_FLAT'), 
 160,
 (SELECT id FROM stat_types WHERE code = 'ACC'), 
 5, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    22,
    0,
    22
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 22 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'),
    4,
    0,
    4
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_DMG')
    AND is_ancient = 0
    AND 4 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    13,
    0,
    13
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND 13 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_FLAT'),
    151,
    0,
    151
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_FLAT')
    AND is_ancient = 0
    AND 151 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 17315)
AND slot_number = 3;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 17315), 
    @last_rune_id, 
    3
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 17315);

-- Rune ID: 40207860590

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 1 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(40207860590, 
 9215591, 
 1, 
 17507554984, 
 1,
 5, 
 6, 
 5, 
 15, 
 15,
 722760, 
 136138, 
 (SELECT id FROM stat_types WHERE code = 'ATK_FLAT'), 
 160,
 (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'), 
 7, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    21,
    0,
    21
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 21 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ACC'),
    7,
    0,
    7
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ACC')
    AND is_ancient = 0
    AND 7 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    10,
    1,
    3
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 3 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    6,
    0,
    -1
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND -1 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 18515)
AND slot_number = 1;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 18515), 
    @last_rune_id, 
    1
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 18515);

-- Rune ID: 42677544791

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 2 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(42677544791, 
 9215591, 
 1, 
 17507554984, 
 2,
 5, 
 6, 
 8, 
 15, 
 15,
 412100, 
 129357, 
 (SELECT id FROM stat_types WHERE code = 'ATK_PCT'), 
 63,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    20,
    0,
    20
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 20 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    4,
    0,
    -1
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND -1 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'),
    5,
    0,
    5
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_DMG')
    AND is_ancient = 0
    AND 5 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_FLAT'),
    38,
    1,
    19
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_FLAT')
    AND is_ancient = 0
    AND 19 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_upgrades 
(rune_id, level_reached, stat_type_id, old_value, new_value, upgrade_date)
SELECT 
    @last_rune_id,
    3,
    (SELECT id FROM stat_types WHERE code = 'ATK_FLAT'),
    19.0,
    38.0,
    NOW();

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 18515)
AND slot_number = 2;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 18515), 
    @last_rune_id, 
    2
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 18515);

-- Rune ID: 26468669334

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 3 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(26468669334, 
 9215591, 
 1, 
 17507554984, 
 3,
 5, 
 6, 
 5, 
 15, 
 15,
 570600, 
 128530, 
 (SELECT id FROM stat_types WHERE code = 'DEF_FLAT'), 
 160,
 (SELECT id FROM stat_types WHERE code = 'RES'), 
 8, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    5,
    0,
    -4
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND -4 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'),
    9,
    1,
    9
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_DMG')
    AND is_ancient = 0
    AND 9 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    22,
    0,
    22
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 22 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    6,
    0,
    -1
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND -1 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 18515)
AND slot_number = 3;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 18515), 
    @last_rune_id, 
    3
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 18515);

-- Rune ID: 32122320578

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 4 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_DMG')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(32122320578, 
 9215591, 
 1, 
 17507554984, 
 4,
 15, 
 16, 
 15, 
 15, 
 15,
 684720, 
 136665, 
 (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'), 
 80,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    7,
    0,
    3
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 1
    AND 3 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_FLAT'),
    21,
    0,
    -6
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_FLAT')
    AND is_ancient = 1
    AND -6 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    26,
    0,
    18
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 1
    AND 18 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    10,
    0,
    10
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 1
    AND 10 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 18515)
AND slot_number = 4;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 18515), 
    @last_rune_id, 
    4
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 18515);

-- Rune ID: 30507368761

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 5 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(30507368761, 
 9215591, 
 1, 
 17507554984, 
 5,
 5, 
 6, 
 5, 
 15, 
 15,
 557920, 
 127896, 
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 2448,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    13,
    0,
    6
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 6 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    29,
    0,
    19
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 19 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    6,
    0,
    6
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 6 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'),
    8,
    1,
    8
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_DMG')
    AND is_ancient = 0
    AND 8 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_upgrades 
(rune_id, level_reached, stat_type_id, old_value, new_value, upgrade_date)
SELECT 
    @last_rune_id,
    3,
    (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'),
    8.0,
    8.0,
    NOW();

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 18515)
AND slot_number = 5;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 18515), 
    @last_rune_id, 
    5
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 18515);

-- Rune ID: 22366971842

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 6 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(22366971842, 
 9215591, 
 1, 
 17507554984, 
 6,
 5, 
 6, 
 5, 
 15, 
 15,
 592790, 
 129639, 
 (SELECT id FROM stat_types WHERE code = 'ATK_PCT'), 
 63,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    7,
    1,
    7
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 7 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    14,
    0,
    6
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND 6 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'),
    22,
    0,
    22
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_DMG')
    AND is_ancient = 0
    AND 22 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    5,
    0,
    1
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 1 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 18515)
AND slot_number = 6;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 18515), 
    @last_rune_id, 
    6
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 18515);

-- Rune ID: 42318303643

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 1 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(42318303643, 
 9215591, 
 1, 
 17778845169, 
 1,
 5, 
 6, 
 10, 
 15, 
 12,
 722760, 
 72138, 
 (SELECT id FROM stat_types WHERE code = 'ATK_FLAT'), 
 118,
 (SELECT id FROM stat_types WHERE code = 'ACC'), 
 7, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    24,
    0,
    24
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 24 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    10,
    0,
    10
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 10 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'RES'),
    8,
    0,
    8
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'RES')
    AND is_ancient = 0
    AND 8 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_FLAT'),
    338,
    0,
    -38
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_FLAT')
    AND is_ancient = 0
    AND -38 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 28915)
AND slot_number = 1;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 28915), 
    @last_rune_id, 
    1
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 28915);

-- Rune ID: 45381466503

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 3 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(45381466503, 
 9215591, 
 1, 
 17778845169, 
 3,
 5, 
 6, 
 7, 
 15, 
 12,
 332850, 
 58642, 
 (SELECT id FROM stat_types WHERE code = 'DEF_FLAT'), 
 118,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    12,
    0,
    12
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND 12 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ACC'),
    15,
    0,
    15
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ACC')
    AND is_ancient = 0
    AND 15 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_FLAT'),
    195,
    0,
    195
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_FLAT')
    AND is_ancient = 0
    AND 195 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    23,
    0,
    23
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 23 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 28915)
AND slot_number = 3;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 28915), 
    @last_rune_id, 
    3
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 28915);

-- Rune ID: 30956484872

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 1 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(30956484872, 
 9215591, 
 1, 
 17906042071, 
 1,
 5, 
 6, 
 7, 
 15, 
 12,
 421610, 
 64680, 
 (SELECT id FROM stat_types WHERE code = 'ATK_FLAT'), 
 118,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    6,
    0,
    6
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 6 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_FLAT'),
    282,
    0,
    -264
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_FLAT')
    AND is_ancient = 0
    AND -264 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    22,
    0,
    17
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 17 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    8,
    1,
    1
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 1 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_upgrades 
(rune_id, level_reached, stat_type_id, old_value, new_value, upgrade_date)
SELECT 
    @last_rune_id,
    3,
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    1.0,
    8.0,
    NOW();

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 20835)
AND slot_number = 1;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 20835), 
    @last_rune_id, 
    1
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 20835);

-- Rune ID: 41671214961

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 2 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(41671214961, 
 9215591, 
 1, 
 17906042071, 
 2,
 5, 
 6, 
 25, 
 15, 
 15,
 760800, 
 138040, 
 (SELECT id FROM stat_types WHERE code = 'SPD'), 
 42,
 (SELECT id FROM stat_types WHERE code = 'ACC'), 
 4, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    5,
    0,
    5
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 5 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'),
    20,
    0,
    20
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_DMG')
    AND is_ancient = 0
    AND 20 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'RES'),
    11,
    0,
    11
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'RES')
    AND is_ancient = 0
    AND 11 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    9,
    1,
    5
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 5 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_upgrades 
(rune_id, level_reached, stat_type_id, old_value, new_value, upgrade_date)
SELECT 
    @last_rune_id,
    3,
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    5.0,
    9.0,
    NOW();

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 20835)
AND slot_number = 2;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 20835), 
    @last_rune_id, 
    2
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 20835);

-- Rune ID: 40036167308

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 3 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(40036167308, 
 9215591, 
 1, 
 17906042071, 
 3,
 5, 
 6, 
 13, 
 15, 
 12,
 523050, 
 62152, 
 (SELECT id FROM stat_types WHERE code = 'DEF_FLAT'), 
 118,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    12,
    0,
    12
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 12 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    16,
    0,
    16
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 16 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'RES'),
    7,
    0,
    7
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'RES')
    AND is_ancient = 0
    AND 7 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    11,
    1,
    7
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND 7 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_upgrades 
(rune_id, level_reached, stat_type_id, old_value, new_value, upgrade_date)
SELECT 
    @last_rune_id,
    3,
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    7.0,
    11.0,
    NOW();

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 20835)
AND slot_number = 3;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 20835), 
    @last_rune_id, 
    3
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 20835);

-- Rune ID: 44503786455

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 5 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(44503786455, 
 9215591, 
 1, 
 17906042071, 
 5,
 5, 
 6, 
 5, 
 15, 
 12,
 557920, 
 63896, 
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 1800,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'),
    12,
    0,
    12
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_DMG')
    AND is_ancient = 0
    AND 12 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    15,
    0,
    9
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 9 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_FLAT'),
    28,
    0,
    13
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_FLAT')
    AND is_ancient = 0
    AND 13 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_FLAT'),
    18,
    0,
    18
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_FLAT')
    AND is_ancient = 0
    AND 18 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 20835)
AND slot_number = 5;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 20835), 
    @last_rune_id, 
    5
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 20835);

-- Rune ID: 42973147323

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 1 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(42973147323, 
 9215591, 
 1, 
 18621209536, 
 1,
 5, 
 6, 
 8, 
 15, 
 12,
 451725, 
 68179, 
 (SELECT id FROM stat_types WHERE code = 'ATK_FLAT'), 
 118,
 (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'), 
 5, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    17,
    0,
    17
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 17 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_FLAT'),
    302,
    0,
    -49
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_FLAT')
    AND is_ancient = 0
    AND -49 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    12,
    0,
    7
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 7 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    5,
    0,
    1
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 1 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 13915)
AND slot_number = 1;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 13915), 
    @last_rune_id, 
    1
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 13915);

-- Rune ID: 42849398369

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 3 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(42849398369, 
 9215591, 
 1, 
 18621209536, 
 3,
 5, 
 6, 
 8, 
 15, 
 12,
 309075, 
 58017, 
 (SELECT id FROM stat_types WHERE code = 'DEF_FLAT'), 
 118,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'),
    7,
    0,
    7
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_DMG')
    AND is_ancient = 0
    AND 7 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    17,
    0,
    17
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 17 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    11,
    0,
    11
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 11 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'RES'),
    6,
    0,
    6
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'RES')
    AND is_ancient = 0
    AND 6 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 13915)
AND slot_number = 3;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 13915), 
    @last_rune_id, 
    3
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 13915);

-- Rune ID: 39359148023

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 1 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(39359148023, 
 9215591, 
 1, 
 18737498155, 
 1,
 5, 
 6, 
 8, 
 15, 
 12,
 451725, 
 68179, 
 (SELECT id FROM stat_types WHERE code = 'ATK_FLAT'), 
 118,
 (SELECT id FROM stat_types WHERE code = 'RES'), 
 7, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    14,
    0,
    9
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 9 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'),
    13,
    0,
    13
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_DMG')
    AND is_ancient = 0
    AND 13 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    6,
    0,
    6
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 6 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    8,
    1,
    5
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 5 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_upgrades 
(rune_id, level_reached, stat_type_id, old_value, new_value, upgrade_date)
SELECT 
    @last_rune_id,
    3,
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    5.0,
    8.0,
    NOW();

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 14115)
AND slot_number = 1;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 14115), 
    @last_rune_id, 
    1
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 14115);

-- Rune ID: 27232275631

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 3 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(27232275631, 
 9215591, 
 1, 
 18737498155, 
 3,
 5, 
 6, 
 15, 
 15, 
 15,
 523050, 
 128008, 
 (SELECT id FROM stat_types WHERE code = 'DEF_FLAT'), 
 160,
 (SELECT id FROM stat_types WHERE code = 'ACC'), 
 5, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    17,
    0,
    13
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 13 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    5,
    0,
    5
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 5 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    15,
    0,
    9
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 9 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    8,
    1,
    3
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND 3 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_upgrades 
(rune_id, level_reached, stat_type_id, old_value, new_value, upgrade_date)
SELECT 
    @last_rune_id,
    3,
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    3.0,
    8.0,
    NOW();

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 14115)
AND slot_number = 3;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 14115), 
    @last_rune_id, 
    3
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 14115);

-- Rune ID: 45341745761

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 3 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(45341745761, 
 9215591, 
 1, 
 17852521733, 
 3,
 5, 
 6, 
 13, 
 15, 
 12,
 523050, 
 62152, 
 (SELECT id FROM stat_types WHERE code = 'DEF_FLAT'), 
 118,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'),
    4,
    0,
    4
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_DMG')
    AND is_ancient = 0
    AND 4 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    19,
    0,
    19
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND 19 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_FLAT'),
    288,
    0,
    288
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_FLAT')
    AND is_ancient = 0
    AND 288 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    16,
    0,
    16
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 16 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 27113)
AND slot_number = 3;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 27113), 
    @last_rune_id, 
    3
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 27113);

-- Rune ID: 23228619084

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 5 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(23228619084, 
 9215591, 
 1, 
 17852521733, 
 5,
 5, 
 6, 
 11, 
 15, 
 15,
 507200, 
 127159, 
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 2448,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_FLAT'),
    12,
    0,
    -8
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_FLAT')
    AND is_ancient = 0
    AND -8 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    24,
    0,
    19
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 19 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    10,
    1,
    4
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 4 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    5,
    0,
    -2
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND -2 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 27113)
AND slot_number = 5;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 27113), 
    @last_rune_id, 
    5
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 27113);

-- Rune ID: 31595093391

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 1 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(31595093391, 
 9215591, 
 1, 
 18197388357, 
 1,
 5, 
 6, 
 19, 
 15, 
 15,
 662530, 
 135476, 
 (SELECT id FROM stat_types WHERE code = 'ATK_FLAT'), 
 160,
 (SELECT id FROM stat_types WHERE code = 'HP_PCT'), 
 6, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ACC'),
    5,
    0,
    5
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ACC')
    AND is_ancient = 0
    AND 5 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    12,
    0,
    7
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 7 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    14,
    0,
    14
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 14 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    5,
    0,
    0
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 0 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 10901)
AND slot_number = 1;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 10901), 
    @last_rune_id, 
    1
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 10901);

-- Rune ID: 43386298944

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 2 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(43386298944, 
 9215591, 
 1, 
 18197388357, 
 2,
 5, 
 6, 
 19, 
 15, 
 15,
 634000, 
 133949, 
 (SELECT id FROM stat_types WHERE code = 'SPD'), 
 42,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_FLAT'),
    24,
    0,
    24
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_FLAT')
    AND is_ancient = 0
    AND 24 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    8,
    0,
    8
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 8 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'),
    13,
    0,
    13
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_DMG')
    AND is_ancient = 0
    AND 13 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    12,
    0,
    12
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND 12 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 10901)
AND slot_number = 2;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 10901), 
    @last_rune_id, 
    2
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 10901);

-- Rune ID: 23080186471

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 3 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(23080186471, 
 9215591, 
 1, 
 18197388357, 
 3,
 5, 
 6, 
 19, 
 15, 
 15,
 475500, 
 125461, 
 (SELECT id FROM stat_types WHERE code = 'DEF_FLAT'), 
 160,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    5,
    0,
    5
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 5 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    17,
    0,
    17
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 17 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_FLAT'),
    218,
    0,
    11
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_FLAT')
    AND is_ancient = 0
    AND 11 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'RES'),
    4,
    0,
    4
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'RES')
    AND is_ancient = 0
    AND 4 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 10901)
AND slot_number = 3;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 10901), 
    @last_rune_id, 
    3
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 10901);

-- Rune ID: 23477619556

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 4 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(23477619556, 
 9215591, 
 1, 
 18197388357, 
 4,
 5, 
 6, 
 19, 
 15, 
 15,
 627660, 
 133609, 
 (SELECT id FROM stat_types WHERE code = 'HP_PCT'), 
 63,
 (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'), 
 5, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_FLAT'),
    39,
    0,
    21
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_FLAT')
    AND is_ancient = 0
    AND 21 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    14,
    0,
    14
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND 14 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    4,
    0,
    4
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 4 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    4,
    1,
    0
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 0 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_upgrades 
(rune_id, level_reached, stat_type_id, old_value, new_value, upgrade_date)
SELECT 
    @last_rune_id,
    3,
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    0.0,
    4.0,
    NOW();

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 10901)
AND slot_number = 4;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 10901), 
    @last_rune_id, 
    4
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 10901);

-- Rune ID: 33323766137

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 5 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(33323766137, 
 9215591, 
 1, 
 18197388357, 
 5,
 5, 
 6, 
 19, 
 15, 
 15,
 507200, 
 127159, 
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 2448,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    15,
    0,
    15
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 15 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'),
    11,
    0,
    11
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_DMG')
    AND is_ancient = 0
    AND 11 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    5,
    0,
    5
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 5 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_FLAT'),
    13,
    0,
    13
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_FLAT')
    AND is_ancient = 0
    AND 13 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 10901)
AND slot_number = 5;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 10901), 
    @last_rune_id, 
    5
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 10901);

-- Rune ID: 31607582418

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 6 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(31607582418, 
 9215591, 
 1, 
 18197388357, 
 6,
 5, 
 5, 
 19, 
 15, 
 15,
 260100, 
 65505, 
 (SELECT id FROM stat_types WHERE code = 'DEF_PCT'), 
 51,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    5,
    0,
    5
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 5 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'RES'),
    17,
    0,
    17
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'RES')
    AND is_ancient = 0
    AND 17 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    4,
    0,
    4
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 4 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'),
    4,
    0,
    4
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_DMG')
    AND is_ancient = 0
    AND 4 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 10901)
AND slot_number = 6;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 10901), 
    @last_rune_id, 
    6
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 10901);

-- Rune ID: 35696303931

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 1 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(35696303931, 
 9215591, 
 1, 
 15943523335, 
 1,
 1, 
 3, 
 15, 
 15, 
 0,
 38190, 
 3156, 
 (SELECT id FROM stat_types WHERE code = 'ATK_FLAT'), 
 7,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'rare',
 0,
 'normal',
 'normal',
 1,
 0);

SET @last_rune_id = LAST_INSERT_ID();

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 11912)
AND slot_number = 1;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 11912), 
    @last_rune_id, 
    1
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 11912);

-- Rune ID: 43923313244

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 2 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(43923313244, 
 9215591, 
 1, 
 15943523335, 
 2,
 2, 
 3, 
 19, 
 15, 
 0,
 50250, 
 4152, 
 (SELECT id FROM stat_types WHERE code = 'ATK_FLAT'), 
 7,
 (SELECT id FROM stat_types WHERE code = 'ACC'), 
 4, 
 'rare',
 0,
 'magic',
 'magic',
 2,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'),
    4,
    0,
    4
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_DMG')
    AND is_ancient = 0
    AND 4 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 11912)
AND slot_number = 2;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 11912), 
    @last_rune_id, 
    2
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 11912);

-- Rune ID: 43923313243

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 3 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(43923313243, 
 9215591, 
 1, 
 15943523335, 
 3,
 2, 
 4, 
 19, 
 15, 
 0,
 71663, 
 4817, 
 (SELECT id FROM stat_types WHERE code = 'DEF_FLAT'), 
 10,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'rare',
 0,
 'magic',
 'magic',
 2,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'),
    4,
    0,
    4
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_DMG')
    AND is_ancient = 0
    AND 4 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 11912)
AND slot_number = 3;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 11912), 
    @last_rune_id, 
    3
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 11912);

-- Rune ID: 43923318381

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 4 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(43923318381, 
 9215591, 
 1, 
 15943523335, 
 4,
 4, 
 3, 
 19, 
 15, 
 0,
 48240, 
 3986, 
 (SELECT id FROM stat_types WHERE code = 'DEF_PCT'), 
 4,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'heroic',
 0,
 'heroic',
 'heroic',
 4,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    2,
    0,
    2
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 2 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ACC'),
    3,
    0,
    3
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ACC')
    AND is_ancient = 0
    AND 3 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'RES'),
    4,
    0,
    4
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'RES')
    AND is_ancient = 0
    AND 4 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 11912)
AND slot_number = 4;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 11912), 
    @last_rune_id, 
    4
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 11912);

-- Rune ID: 43923313247

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 5 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(43923313247, 
 9215591, 
 1, 
 15943523335, 
 5,
 1, 
 3, 
 19, 
 15, 
 0,
 32160, 
 2657, 
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 100,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'rare',
 0,
 'normal',
 'normal',
 1,
 0);

SET @last_rune_id = LAST_INSERT_ID();

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 11912)
AND slot_number = 5;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 11912), 
    @last_rune_id, 
    5
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 11912);

-- Rune ID: 40614300555

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 6 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(40614300555, 
 9215591, 
 1, 
 15943523335, 
 6,
 2, 
 2, 
 15, 
 15, 
 0,
 20400, 
 2217, 
 (SELECT id FROM stat_types WHERE code = 'ATK_FLAT'), 
 5,
 (SELECT id FROM stat_types WHERE code = 'DEF_PCT'), 
 3, 
 'rare',
 0,
 'magic',
 'magic',
 2,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_FLAT'),
    83,
    0,
    83
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_FLAT')
    AND is_ancient = 0
    AND 83 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 11912)
AND slot_number = 6;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 11912), 
    @last_rune_id, 
    6
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 11912);

-- Rune ID: 41007172564

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 1 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(41007172564, 
 9215591, 
 1, 
 10507247232, 
 1,
 5, 
 6, 
 25, 
 15, 
 12,
 722760, 
 72138, 
 (SELECT id FROM stat_types WHERE code = 'ATK_FLAT'), 
 118,
 (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'), 
 5, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    10,
    0,
    10
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 10 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    16,
    0,
    10
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 10 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    13,
    0,
    8
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 8 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ACC'),
    4,
    0,
    4
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ACC')
    AND is_ancient = 0
    AND 4 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 10711)
AND slot_number = 1;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 10711), 
    @last_rune_id, 
    1
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 10711);

-- Rune ID: 38421286160

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 2 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(38421286160, 
 9215591, 
 1, 
 10507247232, 
 2,
 2, 
 4, 
 19, 
 15, 
 0,
 95550, 
 6423, 
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 160,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'rare',
 0,
 'magic',
 'magic',
 2,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    2,
    0,
    2
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 2 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 10711)
AND slot_number = 2;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 10711), 
    @last_rune_id, 
    2
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 10711);

-- Rune ID: 42627379513

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 3 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(42627379513, 
 9215591, 
 1, 
 10507247232, 
 3,
 5, 
 6, 
 19, 
 15, 
 15,
 523050, 
 128008, 
 (SELECT id FROM stat_types WHERE code = 'DEF_FLAT'), 
 160,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 252, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    11,
    0,
    8
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 8 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'),
    7,
    0,
    7
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_DMG')
    AND is_ancient = 0
    AND 7 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    19,
    0,
    19
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 19 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ACC'),
    5,
    0,
    5
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ACC')
    AND is_ancient = 0
    AND 5 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 10711)
AND slot_number = 3;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 10711), 
    @last_rune_id, 
    3
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 10711);

-- Rune ID: 25153716540

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 4 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(25153716540, 
 9215591, 
 1, 
 10507247232, 
 4,
 4, 
 4, 
 19, 
 15, 
 9,
 105840, 
 10811, 
 (SELECT id FROM stat_types WHERE code = 'HP_PCT'), 
 24,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'heroic',
 9,
 'heroic',
 'heroic',
 4,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    4,
    0,
    4
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 4 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    3,
    0,
    3
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 3 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'RES'),
    5,
    0,
    5
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'RES')
    AND is_ancient = 0
    AND 5 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 10711)
AND slot_number = 4;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 10711), 
    @last_rune_id, 
    4
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 10711);

-- Rune ID: 31595190562

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 5 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(31595190562, 
 9215591, 
 1, 
 10507247232, 
 5,
 4, 
 5, 
 19, 
 15, 
 9,
 195840, 
 17974, 
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 1215,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'heroic',
 9,
 'heroic',
 'heroic',
 4,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    9,
    0,
    9
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 9 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    14,
    0,
    14
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 14 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'),
    4,
    0,
    4
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_DMG')
    AND is_ancient = 0
    AND 4 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 10711)
AND slot_number = 5;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 10711), 
    @last_rune_id, 
    5
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 10711);

-- Rune ID: 35696311912

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 6 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(35696311912, 
 9215591, 
 1, 
 10507247232, 
 6,
 2, 
 5, 
 15, 
 15, 
 0,
 195075, 
 11628, 
 (SELECT id FROM stat_types WHERE code = 'DEF_PCT'), 
 8,
 (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'), 
 4, 
 'rare',
 0,
 'magic',
 'magic',
 2,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_FLAT'),
    9,
    0,
    9
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_FLAT')
    AND is_ancient = 0
    AND 9 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 10711)
AND slot_number = 6;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 10711), 
    @last_rune_id, 
    6
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 10711);

-- Rune ID: 31766997407

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 1 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(31766997407, 
 9215591, 
 1, 
 18233556650, 
 1,
 1, 
 4, 
 15, 
 15, 
 0,
 83790, 
 5632, 
 (SELECT id FROM stat_types WHERE code = 'ATK_FLAT'), 
 10,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'rare',
 0,
 'normal',
 'normal',
 1,
 0);

SET @last_rune_id = LAST_INSERT_ID();

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 22402)
AND slot_number = 1;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 22402), 
    @last_rune_id, 
    1
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 22402);

-- Rune ID: 31601073985

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 2 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(31601073985, 
 9215591, 
 1, 
 18233556650, 
 2,
 5, 
 6, 
 19, 
 15, 
 15,
 634000, 
 133949, 
 (SELECT id FROM stat_types WHERE code = 'HP_PCT'), 
 63,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_FLAT'),
    13,
    0,
    -6
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_FLAT')
    AND is_ancient = 0
    AND -6 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    19,
    0,
    19
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND 19 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_FLAT'),
    19,
    0,
    19
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_FLAT')
    AND is_ancient = 0
    AND 19 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ACC'),
    4,
    0,
    4
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ACC')
    AND is_ancient = 0
    AND 4 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 22402)
AND slot_number = 2;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 22402), 
    @last_rune_id, 
    2
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 22402);

-- Rune ID: 26229590309

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 3 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(26229590309, 
 9215591, 
 1, 
 18233556650, 
 3,
 4, 
 3, 
 19, 
 15, 
 9,
 45225, 
 6054, 
 (SELECT id FROM stat_types WHERE code = 'DEF_FLAT'), 
 52,
 (SELECT id FROM stat_types WHERE code = 'ACC'), 
 2, 
 'heroic',
 9,
 'heroic',
 'heroic',
 4,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'RES'),
    3,
    0,
    3
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'RES')
    AND is_ancient = 0
    AND 3 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    2,
    0,
    2
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 2 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    3,
    0,
    3
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 3 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 22402)
AND slot_number = 3;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 22402), 
    @last_rune_id, 
    3
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 22402);

-- Rune ID: 31767005177

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 4 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(31767005177, 
 9215591, 
 1, 
 18233556650, 
 4,
 1, 
 4, 
 15, 
 15, 
 0,
 79380, 
 5336, 
 (SELECT id FROM stat_types WHERE code = 'DEF_FLAT'), 
 10,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'rare',
 0,
 'normal',
 'normal',
 1,
 0);

SET @last_rune_id = LAST_INSERT_ID();

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 22402)
AND slot_number = 4;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 22402), 
    @last_rune_id, 
    4
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 22402);

-- Rune ID: 38421286161

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 5 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(38421286161, 
 9215591, 
 1, 
 18233556650, 
 5,
 4, 
 3, 
 19, 
 15, 
 0,
 42880, 
 3543, 
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 100,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'heroic',
 0,
 'heroic',
 'heroic',
 4,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_FLAT'),
    4,
    0,
    4
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_FLAT')
    AND is_ancient = 0
    AND 4 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    4,
    0,
    4
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND 4 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ACC'),
    3,
    0,
    3
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ACC')
    AND is_ancient = 0
    AND 3 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 22402)
AND slot_number = 5;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 22402), 
    @last_rune_id, 
    5
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 22402);

-- Rune ID: 38421286169

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 6 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(38421286169, 
 9215591, 
 1, 
 18233556650, 
 6,
 4, 
 4, 
 19, 
 15, 
 0,
 99960, 
 6720, 
 (SELECT id FROM stat_types WHERE code = 'DEF_FLAT'), 
 10,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'heroic',
 0,
 'heroic',
 'heroic',
 4,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'),
    5,
    0,
    5
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_DMG')
    AND is_ancient = 0
    AND 5 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_FLAT'),
    5,
    0,
    5
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_FLAT')
    AND is_ancient = 0
    AND 5 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ACC'),
    3,
    0,
    3
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ACC')
    AND is_ancient = 0
    AND 3 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 22402)
AND slot_number = 6;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 22402), 
    @last_rune_id, 
    6
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 22402);


COMMIT;

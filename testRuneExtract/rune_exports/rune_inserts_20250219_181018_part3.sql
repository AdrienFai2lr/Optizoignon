START TRANSACTION;

-- Rune ID: 40964756894

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 5 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(40964756894, 
 9215591, 
 1, 
 13928684918, 
 5,
 5, 
 6, 
 5, 
 15, 
 12,
 608640, 
 66432, 
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 1800,
 (SELECT id FROM stat_types WHERE code = 'DEF_FLAT'), 
 10, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'),
    6,
    0,
    6
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_DMG')
    AND is_ancient = 0
    AND 6 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    15,
    0,
    9
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 9 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    17,
    0,
    17
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 17 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    8,
    1,
    3
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 3 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_upgrades 
(rune_id, level_reached, stat_type_id, old_value, new_value, upgrade_date)
SELECT 
    @last_rune_id,
    3,
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    3.0,
    8.0,
    NOW();

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 14712)
AND slot_number = 5;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 14712), 
    @last_rune_id, 
    5
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 14712);

-- Rune ID: 34890695910

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 1 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(34890695910, 
 9215591, 
 1, 
 13982368531, 
 1,
 5, 
 6, 
 11, 
 15, 
 15,
 662530, 
 135476, 
 (SELECT id FROM stat_types WHERE code = 'ATK_FLAT'), 
 160,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 340, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    7,
    0,
    1
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 1 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    22,
    0,
    22
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 22 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'),
    4,
    0,
    4
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_DMG')
    AND is_ancient = 0
    AND 4 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    4,
    0,
    0
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 0 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 24512)
AND slot_number = 1;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 24512), 
    @last_rune_id, 
    1
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 24512);

-- Rune ID: 41522121750

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 2 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(41522121750, 
 9215591, 
 1, 
 13982368531, 
 2,
 5, 
 6, 
 11, 
 15, 
 15,
 634000, 
 133949, 
 (SELECT id FROM stat_types WHERE code = 'ATK_PCT'), 
 63,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_FLAT'),
    35,
    0,
    35
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_FLAT')
    AND is_ancient = 0
    AND 35 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    6,
    0,
    6
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 6 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_FLAT'),
    60,
    0,
    60
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_FLAT')
    AND is_ancient = 0
    AND 60 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    6,
    0,
    6
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 6 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 24512)
AND slot_number = 2;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 24512), 
    @last_rune_id, 
    2
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 24512);

-- Rune ID: 40806635068

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 3 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(40806635068, 
 9215591, 
 1, 
 13982368531, 
 3,
 5, 
 6, 
 11, 
 15, 
 12,
 475500, 
 61461, 
 (SELECT id FROM stat_types WHERE code = 'DEF_FLAT'), 
 118,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    9,
    0,
    5
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 5 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    16,
    0,
    16
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 16 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'),
    6,
    0,
    6
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_DMG')
    AND is_ancient = 0
    AND 6 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    5,
    0,
    -2
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND -2 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 24512)
AND slot_number = 3;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 24512), 
    @last_rune_id, 
    3
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 24512);

-- Rune ID: 27291395453

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 4 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_DMG')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(27291395453, 
 9215591, 
 1, 
 13982368531, 
 4,
 5, 
 6, 
 14, 
 15, 
 12,
 627660, 
 69609, 
 (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'), 
 59,
 (SELECT id FROM stat_types WHERE code = 'ACC'), 
 5, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    7,
    1,
    1
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 1 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    10,
    0,
    6
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 6 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    21,
    0,
    14
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 14 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    4,
    0,
    4
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 4 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 24512)
AND slot_number = 4;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 24512), 
    @last_rune_id, 
    4
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 24512);

-- Rune ID: 31078715847

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 5 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(31078715847, 
 9215591, 
 1, 
 13982368531, 
 5,
 5, 
 6, 
 14, 
 15, 
 12,
 507200, 
 63159, 
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 1800,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    5,
    0,
    -2
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND -2 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    6,
    0,
    6
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 6 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    21,
    0,
    17
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 17 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    9,
    1,
    2
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 2 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_upgrades 
(rune_id, level_reached, stat_type_id, old_value, new_value, upgrade_date)
SELECT 
    @last_rune_id,
    3,
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    2.0,
    9.0,
    NOW();

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 24512)
AND slot_number = 5;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 24512), 
    @last_rune_id, 
    5
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 24512);

-- Rune ID: 43843315535

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 1 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(43843315535, 
 9215591, 
 1, 
 13985865085, 
 1,
 5, 
 6, 
 13, 
 15, 
 12,
 722760, 
 72138, 
 (SELECT id FROM stat_types WHERE code = 'ATK_FLAT'), 
 118,
 (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'), 
 6, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ACC'),
    6,
    0,
    6
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ACC')
    AND is_ancient = 0
    AND 6 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    20,
    0,
    20
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 20 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    5,
    0,
    5
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 5 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    19,
    0,
    19
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 19 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 25312)
AND slot_number = 1;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 25312), 
    @last_rune_id, 
    1
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 25312);

-- Rune ID: 45686403638

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 2 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(45686403638, 
 9215591, 
 1, 
 13985865085, 
 2,
 5, 
 6, 
 15, 
 15, 
 12,
 634000, 
 69949, 
 (SELECT id FROM stat_types WHERE code = 'SPD'), 
 31,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'),
    7,
    0,
    7
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_DMG')
    AND is_ancient = 0
    AND 7 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ACC'),
    18,
    0,
    18
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ACC')
    AND is_ancient = 0
    AND 18 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    10,
    0,
    10
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 10 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    15,
    0,
    15
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND 15 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 25312)
AND slot_number = 2;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 25312), 
    @last_rune_id, 
    2
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 25312);

-- Rune ID: 44260017803

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 4 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(44260017803, 
 9215591, 
 1, 
 13985865085, 
 4,
 5, 
 6, 
 15, 
 15, 
 12,
 627660, 
 69609, 
 (SELECT id FROM stat_types WHERE code = 'ATK_PCT'), 
 47,
 (SELECT id FROM stat_types WHERE code = 'HP_PCT'), 
 5, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    5,
    0,
    5
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND 5 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    16,
    0,
    16
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 16 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    11,
    0,
    11
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 11 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'),
    4,
    0,
    4
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_DMG')
    AND is_ancient = 0
    AND 4 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 25312)
AND slot_number = 4;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 25312), 
    @last_rune_id, 
    4
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 25312);

-- Rune ID: 41496739832

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 6 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'ACC')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(41496739832, 
 9215591, 
 1, 
 13985865085, 
 6,
 5, 
 6, 
 13, 
 15, 
 15,
 646680, 
 132334, 
 (SELECT id FROM stat_types WHERE code = 'ACC'), 
 64,
 (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'), 
 7, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    11,
    0,
    11
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 11 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    21,
    0,
    21
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 21 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'RES'),
    7,
    0,
    7
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'RES')
    AND is_ancient = 0
    AND 7 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_FLAT'),
    18,
    0,
    1
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_FLAT')
    AND is_ancient = 0
    AND 1 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 25312)
AND slot_number = 6;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 25312), 
    @last_rune_id, 
    6
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 25312);

-- Rune ID: 24321441966

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 1 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(24321441966, 
 9215591, 
 1, 
 14434992917, 
 1,
 5, 
 6, 
 10, 
 15, 
 15,
 662530, 
 133126, 
 (SELECT id FROM stat_types WHERE code = 'ATK_FLAT'), 
 160,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    8,
    0,
    3
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 3 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ACC'),
    15,
    0,
    15
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ACC')
    AND is_ancient = 0
    AND 15 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    16,
    0,
    13
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 13 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    7,
    1,
    1
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 1 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_upgrades 
(rune_id, level_reached, stat_type_id, old_value, new_value, upgrade_date)
SELECT 
    @last_rune_id,
    3,
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    1.0,
    7.0,
    NOW();

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 25412)
AND slot_number = 1;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 25412), 
    @last_rune_id, 
    1
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 25412);

-- Rune ID: 40962041946

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 2 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(40962041946, 
 9215591, 
 1, 
 14434992917, 
 2,
 5, 
 6, 
 14, 
 15, 
 12,
 634000, 
 69949, 
 (SELECT id FROM stat_types WHERE code = 'HP_PCT'), 
 47,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ACC'),
    12,
    0,
    12
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ACC')
    AND is_ancient = 0
    AND 12 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    12,
    0,
    8
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 8 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    9,
    1,
    4
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND 4 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    16,
    0,
    16
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 16 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 25412)
AND slot_number = 2;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 25412), 
    @last_rune_id, 
    2
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 25412);

-- Rune ID: 43945989627

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 3 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(43945989627, 
 9215591, 
 1, 
 14434992917, 
 3,
 5, 
 6, 
 10, 
 15, 
 12,
 523050, 
 62152, 
 (SELECT id FROM stat_types WHERE code = 'DEF_FLAT'), 
 118,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    5,
    0,
    5
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 5 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    10,
    0,
    10
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 10 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    22,
    0,
    22
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 22 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    11,
    0,
    7
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND 7 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 25412)
AND slot_number = 3;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 25412), 
    @last_rune_id, 
    3
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 25412);

-- Rune ID: 35233095681

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 5 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(35233095681, 
 9215591, 
 1, 
 14434992917, 
 5,
 5, 
 6, 
 10, 
 15, 
 12,
 557920, 
 63896, 
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 1800,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    5,
    0,
    5
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 5 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    15,
    0,
    8
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND 8 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    17,
    0,
    15
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 15 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'),
    4,
    0,
    4
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_DMG')
    AND is_ancient = 0
    AND 4 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 25412)
AND slot_number = 5;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 25412), 
    @last_rune_id, 
    5
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 25412);

-- Rune ID: 26435989474

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 6 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(26435989474, 
 9215591, 
 1, 
 14434992917, 
 6,
 5, 
 6, 
 14, 
 15, 
 15,
 592790, 
 131742, 
 (SELECT id FROM stat_types WHERE code = 'DEF_PCT'), 
 63,
 (SELECT id FROM stat_types WHERE code = 'RES'), 
 4, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    5,
    0,
    -2
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND -2 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    11,
    0,
    8
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 8 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    17,
    0,
    17
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 17 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ACC'),
    7,
    1,
    7
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ACC')
    AND is_ancient = 0
    AND 7 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_upgrades 
(rune_id, level_reached, stat_type_id, old_value, new_value, upgrade_date)
SELECT 
    @last_rune_id,
    3,
    (SELECT id FROM stat_types WHERE code = 'ACC'),
    7.0,
    7.0,
    NOW();

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 25412)
AND slot_number = 6;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 25412), 
    @last_rune_id, 
    6
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 25412);

-- Rune ID: 39222333389

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 1 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(39222333389, 
 9215591, 
 1, 
 14552331335, 
 1,
 5, 
 6, 
 1, 
 15, 
 12,
 361380, 
 63019, 
 (SELECT id FROM stat_types WHERE code = 'ATK_FLAT'), 
 118,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    10,
    1,
    3
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 3 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    8,
    0,
    1
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 1 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    20,
    0,
    16
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 16 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    6,
    0,
    6
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 6 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 10132)
AND slot_number = 1;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 10132), 
    @last_rune_id, 
    1
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 10132);

-- Rune ID: 31720424629

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 2 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(31720424629, 
 9215591, 
 1, 
 14552331335, 
 2,
 5, 
 6, 
 10, 
 15, 
 15,
 760800, 
 138040, 
 (SELECT id FROM stat_types WHERE code = 'HP_PCT'), 
 63,
 (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'), 
 4, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    5,
    0,
    0
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 0 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    21,
    0,
    17
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 17 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ACC'),
    8,
    1,
    8
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ACC')
    AND is_ancient = 0
    AND 8 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_FLAT'),
    244,
    0,
    -299
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_FLAT')
    AND is_ancient = 0
    AND -299 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 10132)
AND slot_number = 2;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 10132), 
    @last_rune_id, 
    2
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 10132);

-- Rune ID: 39192305458

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 3 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(39192305458, 
 9215591, 
 1, 
 14552331335, 
 3,
 5, 
 6, 
 10, 
 15, 
 12,
 570600, 
 64530, 
 (SELECT id FROM stat_types WHERE code = 'DEF_FLAT'), 
 118,
 (SELECT id FROM stat_types WHERE code = 'RES'), 
 4, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    18,
    0,
    18
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 18 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    11,
    0,
    8
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 8 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    8,
    0,
    3
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 3 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    8,
    1,
    3
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND 3 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_upgrades 
(rune_id, level_reached, stat_type_id, old_value, new_value, upgrade_date)
SELECT 
    @last_rune_id,
    3,
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    3.0,
    8.0,
    NOW();

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 10132)
AND slot_number = 3;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 10132), 
    @last_rune_id, 
    3
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 10132);

-- Rune ID: 20133367098

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 4 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_DMG')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(20133367098, 
 9215591, 
 1, 
 14552331335, 
 4,
 5, 
 6, 
 1, 
 15, 
 15,
 399420, 
 129863, 
 (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'), 
 80,
 (SELECT id FROM stat_types WHERE code = 'DEF_FLAT'), 
 16, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    6,
    0,
    6
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 6 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    22,
    0,
    15
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 15 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    15,
    0,
    8
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 8 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    10,
    1,
    3
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND 3 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_upgrades 
(rune_id, level_reached, stat_type_id, old_value, new_value, upgrade_date)
SELECT 
    @last_rune_id,
    3,
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    3.0,
    10.0,
    NOW();

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 10132)
AND slot_number = 4;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 10132), 
    @last_rune_id, 
    4
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 10132);

-- Rune ID: 32369297937

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 5 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(32369297937, 
 9215591, 
 1, 
 14552331335, 
 5,
 5, 
 6, 
 10, 
 15, 
 15,
 557920, 
 127896, 
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 2448,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    20,
    0,
    13
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 13 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    7,
    1,
    7
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 7 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ACC'),
    21,
    0,
    21
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ACC')
    AND is_ancient = 0
    AND 21 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    7,
    0,
    0
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND 0 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 10132)
AND slot_number = 5;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 10132), 
    @last_rune_id, 
    5
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 10132);

-- Rune ID: 31547868541

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 6 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(31547868541, 
 9215591, 
 1, 
 14552331335, 
 6,
 5, 
 6, 
 10, 
 15, 
 12,
 646680, 
 68334, 
 (SELECT id FROM stat_types WHERE code = 'ATK_PCT'), 
 47,
 (SELECT id FROM stat_types WHERE code = 'ACC'), 
 5, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    10,
    0,
    10
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 10 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    5,
    0,
    5
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 5 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    23,
    0,
    18
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND 18 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'),
    5,
    0,
    5
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_DMG')
    AND is_ancient = 0
    AND 5 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 10132)
AND slot_number = 6;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 10132), 
    @last_rune_id, 
    6
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 10132);

-- Rune ID: 43228309080

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 1 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(43228309080, 
 9215591, 
 1, 
 14722209114, 
 1,
 5, 
 6, 
 10, 
 15, 
 15,
 662530, 
 133126, 
 (SELECT id FROM stat_types WHERE code = 'ATK_FLAT'), 
 160,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    38,
    0,
    28
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 28 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'RES'),
    7,
    0,
    7
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'RES')
    AND is_ancient = 0
    AND 7 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    8,
    1,
    2
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 2 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    5,
    0,
    1
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 1 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 25612)
AND slot_number = 1;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 25612), 
    @last_rune_id, 
    1
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 25612);

-- Rune ID: 37164148067

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 2 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(37164148067, 
 9215591, 
 1, 
 14722209114, 
 2,
 5, 
 6, 
 6, 
 15, 
 15,
 443800, 
 130190, 
 (SELECT id FROM stat_types WHERE code = 'SPD'), 
 42,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    6,
    0,
    6
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 6 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ACC'),
    27,
    0,
    27
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ACC')
    AND is_ancient = 0
    AND 27 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    7,
    0,
    0
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 0 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    10,
    1,
    3
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND 3 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_upgrades 
(rune_id, level_reached, stat_type_id, old_value, new_value, upgrade_date)
SELECT 
    @last_rune_id,
    3,
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    3.0,
    10.0,
    NOW();

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 25612)
AND slot_number = 2;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 25612), 
    @last_rune_id, 
    2
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 25612);

-- Rune ID: 32310415441

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 3 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(32310415441, 
 9215591, 
 1, 
 14722209114, 
 3,
 5, 
 6, 
 10, 
 15, 
 15,
 570600, 
 128530, 
 (SELECT id FROM stat_types WHERE code = 'DEF_FLAT'), 
 160,
 (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'), 
 6, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    7,
    1,
    7
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 7 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    20,
    0,
    16
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 16 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    5,
    0,
    -2
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND -2 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    8,
    0,
    1
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND 1 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 25612)
AND slot_number = 3;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 25612), 
    @last_rune_id, 
    3
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 25612);

-- Rune ID: 31001485036

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 4 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(31001485036, 
 9215591, 
 1, 
 14722209114, 
 4,
 5, 
 6, 
 6, 
 15, 
 15,
 399420, 
 127171, 
 (SELECT id FROM stat_types WHERE code = 'HP_PCT'), 
 63,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    9,
    1,
    1
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 1 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ACC'),
    6,
    0,
    6
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ACC')
    AND is_ancient = 0
    AND 6 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    20,
    0,
    16
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 16 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    6,
    0,
    -3
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND -3 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 25612)
AND slot_number = 4;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 25612), 
    @last_rune_id, 
    4
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 25612);

-- Rune ID: 20666332500

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 5 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(20666332500, 
 9215591, 
 1, 
 14722209114, 
 5,
 5, 
 6, 
 10, 
 15, 
 15,
 608640, 
 130432, 
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 2448,
 (SELECT id FROM stat_types WHERE code = 'DEF_PCT'), 
 7, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ACC'),
    6,
    0,
    6
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ACC')
    AND is_ancient = 0
    AND 6 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    13,
    1,
    4
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 4 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    22,
    0,
    18
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 18 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    6,
    0,
    -2
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND -2 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 25612)
AND slot_number = 5;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 25612), 
    @last_rune_id, 
    5
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 25612);

-- Rune ID: 31557422252

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 6 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(31557422252, 
 9215591, 
 1, 
 14722209114, 
 6,
 5, 
 6, 
 10, 
 15, 
 15,
 646680, 
 132334, 
 (SELECT id FROM stat_types WHERE code = 'HP_PCT'), 
 63,
 (SELECT id FROM stat_types WHERE code = 'DEF_PCT'), 
 5, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    6,
    0,
    6
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 6 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    14,
    0,
    11
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 11 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ACC'),
    13,
    0,
    13
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ACC')
    AND is_ancient = 0
    AND 13 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    9,
    1,
    4
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 4 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_upgrades 
(rune_id, level_reached, stat_type_id, old_value, new_value, upgrade_date)
SELECT 
    @last_rune_id,
    3,
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    4.0,
    9.0,
    NOW();

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 25612)
AND slot_number = 6;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 25612), 
    @last_rune_id, 
    6
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 25612);

-- Rune ID: 44366723157

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 1 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(44366723157, 
 9215591, 
 1, 
 14990455866, 
 1,
 5, 
 6, 
 3, 
 15, 
 12,
 481840, 
 68778, 
 (SELECT id FROM stat_types WHERE code = 'ATK_FLAT'), 
 118,
 (SELECT id FROM stat_types WHERE code = 'RES'), 
 7, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_FLAT'),
    321,
    0,
    321
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_FLAT')
    AND is_ancient = 0
    AND 321 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    21,
    0,
    21
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 21 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    6,
    0,
    6
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 6 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    24,
    0,
    24
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 24 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 23912)
AND slot_number = 1;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 23912), 
    @last_rune_id, 
    1
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 23912);

-- Rune ID: 35953074421

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 2 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(35953074421, 
 9215591, 
 1, 
 14990455866, 
 2,
 5, 
 6, 
 16, 
 15, 
 15,
 634000, 
 133949, 
 (SELECT id FROM stat_types WHERE code = 'SPD'), 
 42,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'),
    6,
    0,
    6
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_DMG')
    AND is_ancient = 0
    AND 6 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'RES'),
    12,
    0,
    12
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'RES')
    AND is_ancient = 0
    AND 12 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    21,
    0,
    13
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 13 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ACC'),
    7,
    0,
    7
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ACC')
    AND is_ancient = 0
    AND 7 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 23912)
AND slot_number = 2;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 23912), 
    @last_rune_id, 
    2
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 23912);

-- Rune ID: 34652661608

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 5 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(34652661608, 
 9215591, 
 1, 
 14990455866, 
 5,
 5, 
 6, 
 16, 
 15, 
 12,
 507200, 
 63159, 
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 1800,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    9,
    1,
    2
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND 2 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ACC'),
    11,
    0,
    11
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ACC')
    AND is_ancient = 0
    AND 11 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'RES'),
    8,
    0,
    8
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'RES')
    AND is_ancient = 0
    AND 8 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    23,
    0,
    18
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 18 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 23912)
AND slot_number = 5;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 23912), 
    @last_rune_id, 
    5
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 23912);

-- Rune ID: 39398441867

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 1 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(39398441867, 
 9215591, 
 1, 
 15249173528, 
 1,
 5, 
 6, 
 10, 
 15, 
 12,
 722760, 
 72138, 
 (SELECT id FROM stat_types WHERE code = 'ATK_FLAT'), 
 118,
 (SELECT id FROM stat_types WHERE code = 'ATK_PCT'), 
 6, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    12,
    0,
    9
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 9 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ACC'),
    7,
    0,
    7
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ACC')
    AND is_ancient = 0
    AND 7 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    22,
    0,
    15
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 15 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'RES'),
    5,
    0,
    5
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'RES')
    AND is_ancient = 0
    AND 5 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 20512)
AND slot_number = 1;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 20512), 
    @last_rune_id, 
    1
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 20512);

-- Rune ID: 45646960630

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 2 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(45646960630, 
 9215591, 
 1, 
 15249173528, 
 2,
 5, 
 6, 
 15, 
 15, 
 12,
 697400, 
 73344, 
 (SELECT id FROM stat_types WHERE code = 'SPD'), 
 31,
 (SELECT id FROM stat_types WHERE code = 'DEF_PCT'), 
 6, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'RES'),
    9,
    0,
    9
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'RES')
    AND is_ancient = 0
    AND 9 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ACC'),
    15,
    0,
    15
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ACC')
    AND is_ancient = 0
    AND 15 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    14,
    0,
    14
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 14 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_FLAT'),
    552,
    0,
    552
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_FLAT')
    AND is_ancient = 0
    AND 552 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 20512)
AND slot_number = 2;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 20512), 
    @last_rune_id, 
    2
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 20512);

-- Rune ID: 40970735288

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 3 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(40970735288, 
 9215591, 
 1, 
 15249173528, 
 3,
 5, 
 6, 
 15, 
 15, 
 12,
 475500, 
 61461, 
 (SELECT id FROM stat_types WHERE code = 'DEF_FLAT'), 
 118,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'RES'),
    13,
    0,
    13
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'RES')
    AND is_ancient = 0
    AND 13 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    10,
    0,
    7
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 7 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    21,
    0,
    14
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 14 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    9,
    1,
    5
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND 5 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_upgrades 
(rune_id, level_reached, stat_type_id, old_value, new_value, upgrade_date)
SELECT 
    @last_rune_id,
    3,
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    5.0,
    9.0,
    NOW();

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 20512)
AND slot_number = 3;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 20512), 
    @last_rune_id, 
    3
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 20512);

-- Rune ID: 32279369437

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 5 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(32279369437, 
 9215591, 
 1, 
 15249173528, 
 5,
 5, 
 6, 
 10, 
 15, 
 15,
 608640, 
 130432, 
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 2448,
 (SELECT id FROM stat_types WHERE code = 'ATK_FLAT'), 
 13, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ACC'),
    8,
    0,
    8
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ACC')
    AND is_ancient = 0
    AND 8 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    17,
    0,
    14
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 14 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    7,
    0,
    1
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 1 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    9,
    1,
    3
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND 3 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_upgrades 
(rune_id, level_reached, stat_type_id, old_value, new_value, upgrade_date)
SELECT 
    @last_rune_id,
    3,
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    3.0,
    9.0,
    NOW();

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 20512)
AND slot_number = 5;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 20512), 
    @last_rune_id, 
    5
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 20512);

-- Rune ID: 42856706655

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 6 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'ACC')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(42856706655, 
 9215591, 
 1, 
 15249173528, 
 6,
 5, 
 6, 
 10, 
 15, 
 15,
 592790, 
 129639, 
 (SELECT id FROM stat_types WHERE code = 'ACC'), 
 64,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    8,
    0,
    0
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND 0 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    15,
    0,
    10
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 10 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    17,
    0,
    17
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 17 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    9,
    1,
    4
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 4 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_upgrades 
(rune_id, level_reached, stat_type_id, old_value, new_value, upgrade_date)
SELECT 
    @last_rune_id,
    3,
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    4.0,
    9.0,
    NOW();

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 20512)
AND slot_number = 6;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 20512), 
    @last_rune_id, 
    6
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 20512);

-- Rune ID: 41562767654

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 1 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(41562767654, 
 9215591, 
 1, 
 15579407208, 
 1,
 5, 
 6, 
 14, 
 15, 
 15,
 662530, 
 135476, 
 (SELECT id FROM stat_types WHERE code = 'ATK_FLAT'), 
 160,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 339, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'RES'),
    4,
    0,
    4
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'RES')
    AND is_ancient = 0
    AND 4 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    6,
    0,
    2
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 2 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    31,
    0,
    24
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 24 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ACC'),
    4,
    0,
    4
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ACC')
    AND is_ancient = 0
    AND 4 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 13812)
AND slot_number = 1;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 13812), 
    @last_rune_id, 
    1
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 13812);

-- Rune ID: 41697243976

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 5 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(41697243976, 
 9215591, 
 1, 
 15579407208, 
 5,
 5, 
 6, 
 14, 
 15, 
 12,
 507200, 
 63159, 
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 1800,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    16,
    0,
    13
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 13 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ACC'),
    14,
    0,
    14
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ACC')
    AND is_ancient = 0
    AND 14 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    5,
    0,
    0
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 0 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'RES'),
    8,
    0,
    8
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'RES')
    AND is_ancient = 0
    AND 8 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 13812)
AND slot_number = 5;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 13812), 
    @last_rune_id, 
    5
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 13812);

-- Rune ID: 39404878328

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 1 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(39404878328, 
 9215591, 
 1, 
 15918982012, 
 1,
 5, 
 6, 
 19, 
 15, 
 12,
 602300, 
 68251, 
 (SELECT id FROM stat_types WHERE code = 'ATK_FLAT'), 
 118,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    11,
    1,
    4
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 4 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ACC'),
    13,
    0,
    13
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ACC')
    AND is_ancient = 0
    AND 13 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'),
    10,
    0,
    10
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_DMG')
    AND is_ancient = 0
    AND 10 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    16,
    0,
    12
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 12 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 23712)
AND slot_number = 1;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 23712), 
    @last_rune_id, 
    1
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 23712);

-- Rune ID: 32751271472

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 2 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(32751271472, 
 9215591, 
 1, 
 15918982012, 
 2,
 5, 
 6, 
 19, 
 15, 
 15,
 634000, 
 133949, 
 (SELECT id FROM stat_types WHERE code = 'SPD'), 
 42,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    8,
    1,
    3
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 3 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    23,
    0,
    16
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 16 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'RES'),
    18,
    0,
    18
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'RES')
    AND is_ancient = 0
    AND 18 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_FLAT'),
    365,
    0,
    126
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_FLAT')
    AND is_ancient = 0
    AND 126 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 23712)
AND slot_number = 2;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 23712), 
    @last_rune_id, 
    2
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 23712);

-- Rune ID: 41605413812

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 3 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(41605413812, 
 9215591, 
 1, 
 15918982012, 
 3,
 5, 
 6, 
 19, 
 15, 
 15,
 523050, 
 128008, 
 (SELECT id FROM stat_types WHERE code = 'DEF_FLAT'), 
 160,
 (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'), 
 6, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    22,
    0,
    14
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND 14 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'),
    9,
    0,
    9
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_DMG')
    AND is_ancient = 0
    AND 9 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_FLAT'),
    335,
    0,
    -85
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_FLAT')
    AND is_ancient = 0
    AND -85 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    15,
    0,
    9
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 9 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 23712)
AND slot_number = 3;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 23712), 
    @last_rune_id, 
    3
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 23712);

-- Rune ID: 24715363894

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 4 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(24715363894, 
 9215591, 
 1, 
 15918982012, 
 4,
 5, 
 6, 
 19, 
 15, 
 15,
 570600, 
 130554, 
 (SELECT id FROM stat_types WHERE code = 'DEF_PCT'), 
 63,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    8,
    0,
    8
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 8 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    7,
    0,
    0
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 0 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    19,
    0,
    12
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 12 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    10,
    0,
    6
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 6 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 23712)
AND slot_number = 4;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 23712), 
    @last_rune_id, 
    4
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 23712);

-- Rune ID: 22924327354

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 5 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(22924327354, 
 9215591, 
 1, 
 15918982012, 
 5,
 5, 
 6, 
 19, 
 15, 
 12,
 557920, 
 65875, 
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 1800,
 (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'), 
 6, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    5,
    0,
    1
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 1 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    26,
    0,
    21
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 21 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    6,
    0,
    -1
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND -1 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ACC'),
    4,
    0,
    4
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ACC')
    AND is_ancient = 0
    AND 4 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 23712)
AND slot_number = 5;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 23712), 
    @last_rune_id, 
    5
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 23712);

-- Rune ID: 23472616938

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 6 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(23472616938, 
 9215591, 
 1, 
 15918982012, 
 6,
 5, 
 6, 
 19, 
 15, 
 15,
 538900, 
 128856, 
 (SELECT id FROM stat_types WHERE code = 'HP_PCT'), 
 63,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ACC'),
    8,
    0,
    8
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ACC')
    AND is_ancient = 0
    AND 8 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'RES'),
    20,
    0,
    20
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'RES')
    AND is_ancient = 0
    AND 20 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    8,
    0,
    1
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND 1 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_FLAT'),
    314,
    0,
    -67
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_FLAT')
    AND is_ancient = 0
    AND -67 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 23712)
AND slot_number = 6;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 23712), 
    @last_rune_id, 
    6
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 23712);

-- Rune ID: 43021565402

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 2 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(43021565402, 
 9215591, 
 1, 
 16171143973, 
 2,
 5, 
 6, 
 24, 
 15, 
 15,
 697400, 
 134870, 
 (SELECT id FROM stat_types WHERE code = 'SPD'), 
 42,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ACC'),
    8,
    1,
    8
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ACC')
    AND is_ancient = 0
    AND 8 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    5,
    0,
    -2
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND -2 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    27,
    0,
    20
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 20 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    8,
    0,
    2
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 2 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 27512)
AND slot_number = 2;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 27512), 
    @last_rune_id, 
    2
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 27512);

-- Rune ID: 41276116346

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 4 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(41276116346, 
 9215591, 
 1, 
 16171143973, 
 4,
 5, 
 6, 
 17, 
 15, 
 15,
 627660, 
 133609, 
 (SELECT id FROM stat_types WHERE code = 'HP_PCT'), 
 63,
 (SELECT id FROM stat_types WHERE code = 'DEF_FLAT'), 
 14, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_FLAT'),
    372,
    0,
    -156
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_FLAT')
    AND is_ancient = 0
    AND -156 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ACC'),
    15,
    0,
    15
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ACC')
    AND is_ancient = 0
    AND 15 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'),
    5,
    0,
    5
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_DMG')
    AND is_ancient = 0
    AND 5 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    12,
    0,
    8
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 8 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 27512)
AND slot_number = 4;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 27512), 
    @last_rune_id, 
    4
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 27512);

-- Rune ID: 40449284744

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 5 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(40449284744, 
 9215591, 
 1, 
 16171143973, 
 5,
 15, 
 16, 
 22, 
 15, 
 12,
 608640, 
 68591, 
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 1800,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    10,
    0,
    2
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 1
    AND 2 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    16,
    0,
    12
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 1
    AND 12 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    18,
    0,
    11
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 1
    AND 11 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    11,
    1,
    2
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 1
    AND 2 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_upgrades 
(rune_id, level_reached, stat_type_id, old_value, new_value, upgrade_date)
SELECT 
    @last_rune_id,
    3,
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    2.0,
    11.0,
    NOW();

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 27512)
AND slot_number = 5;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 27512), 
    @last_rune_id, 
    5
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 27512);

-- Rune ID: 37144420620

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 6 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(37144420620, 
 9215591, 
 1, 
 16171143973, 
 6,
 5, 
 6, 
 17, 
 15, 
 15,
 538900, 
 128856, 
 (SELECT id FROM stat_types WHERE code = 'HP_PCT'), 
 63,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_FLAT'),
    208,
    0,
    -238
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_FLAT')
    AND is_ancient = 0
    AND -238 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    6,
    0,
    -2
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND -2 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    20,
    0,
    16
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 16 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    5,
    0,
    -2
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND -2 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 27512)
AND slot_number = 6;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 27512), 
    @last_rune_id, 
    6
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 27512);

-- Rune ID: 42049734918

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 1 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(42049734918, 
 9215591, 
 1, 
 16201316884, 
 1,
 5, 
 6, 
 3, 
 15, 
 12,
 481840, 
 68778, 
 (SELECT id FROM stat_types WHERE code = 'ATK_FLAT'), 
 118,
 (SELECT id FROM stat_types WHERE code = 'RES'), 
 8, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'),
    7,
    0,
    7
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_DMG')
    AND is_ancient = 0
    AND 7 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    20,
    0,
    16
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 16 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    6,
    0,
    6
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 6 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    5,
    0,
    1
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 1 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 25212)
AND slot_number = 1;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 25212), 
    @last_rune_id, 
    1
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 25212);

-- Rune ID: 40088929013

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 2 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(40088929013, 
 9215591, 
 1, 
 16201316884, 
 2,
 5, 
 6, 
 6, 
 15, 
 15,
 443800, 
 130190, 
 (SELECT id FROM stat_types WHERE code = 'ATK_PCT'), 
 63,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    23,
    0,
    19
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 19 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'),
    4,
    0,
    4
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_DMG')
    AND is_ancient = 0
    AND 4 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    7,
    1,
    7
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 7 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ACC'),
    8,
    0,
    8
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ACC')
    AND is_ancient = 0
    AND 8 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 25212)
AND slot_number = 2;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 25212), 
    @last_rune_id, 
    2
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 25212);

-- Rune ID: 25785740711

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 3 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(25785740711, 
 9215591, 
 1, 
 16201316884, 
 3,
 5, 
 6, 
 3, 
 15, 
 12,
 332850, 
 58642, 
 (SELECT id FROM stat_types WHERE code = 'DEF_FLAT'), 
 118,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    9,
    1,
    2
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND 2 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    7,
    0,
    2
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 2 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    21,
    0,
    16
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 16 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ACC'),
    5,
    0,
    5
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ACC')
    AND is_ancient = 0
    AND 5 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 25212)
AND slot_number = 3;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 25212), 
    @last_rune_id, 
    3
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 25212);

-- Rune ID: 45715965548

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 4 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(45715965548, 
 9215591, 
 1, 
 16201316884, 
 4,
 5, 
 6, 
 3, 
 15, 
 15,
 399420, 
 127171, 
 (SELECT id FROM stat_types WHERE code = 'ATK_PCT'), 
 63,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    5,
    0,
    5
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 5 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    20,
    0,
    20
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 20 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    7,
    0,
    7
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND 7 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_FLAT'),
    16,
    0,
    16
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_FLAT')
    AND is_ancient = 0
    AND 16 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 25212)
AND slot_number = 4;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 25212), 
    @last_rune_id, 
    4
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 25212);

-- Rune ID: 42632861926

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 6 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(42632861926, 
 9215591, 
 1, 
 16201316884, 
 6,
 5, 
 6, 
 19, 
 15, 
 15,
 592790, 
 131742, 
 (SELECT id FROM stat_types WHERE code = 'ATK_PCT'), 
 63,
 (SELECT id FROM stat_types WHERE code = 'ACC'), 
 5, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    7,
    0,
    2
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND 2 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    21,
    0,
    17
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 17 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    5,
    1,
    5
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 5 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_FLAT'),
    15,
    0,
    -12
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_FLAT')
    AND is_ancient = 0
    AND -12 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 25212)
AND slot_number = 6;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 25212), 
    @last_rune_id, 
    6
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 25212);

-- Rune ID: 44237216837

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 2 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(44237216837, 
 9215591, 
 1, 
 16289429192, 
 2,
 5, 
 6, 
 15, 
 15, 
 12,
 697400, 
 73344, 
 (SELECT id FROM stat_types WHERE code = 'SPD'), 
 31,
 (SELECT id FROM stat_types WHERE code = 'ATK_FLAT'), 
 13, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'),
    18,
    0,
    18
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_DMG')
    AND is_ancient = 0
    AND 18 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    8,
    0,
    8
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND 8 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    11,
    0,
    11
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 11 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    6,
    0,
    6
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 6 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 25912)
AND slot_number = 2;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 25912), 
    @last_rune_id, 
    2
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 25912);

-- Rune ID: 39957703076

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 3 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(39957703076, 
 9215591, 
 1, 
 16289429192, 
 3,
 5, 
 6, 
 13, 
 15, 
 12,
 523050, 
 62152, 
 (SELECT id FROM stat_types WHERE code = 'DEF_FLAT'), 
 118,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    6,
    0,
    1
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 1 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ACC'),
    10,
    0,
    10
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ACC')
    AND is_ancient = 0
    AND 10 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    18,
    0,
    15
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 15 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    8,
    1,
    3
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND 3 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_upgrades 
(rune_id, level_reached, stat_type_id, old_value, new_value, upgrade_date)
SELECT 
    @last_rune_id,
    3,
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    3.0,
    8.0,
    NOW();

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 25912)
AND slot_number = 3;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 25912), 
    @last_rune_id, 
    3
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 25912);

-- Rune ID: 45301479236

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 4 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(45301479236, 
 9215591, 
 1, 
 16289429192, 
 4,
 5, 
 6, 
 13, 
 15, 
 15,
 684720, 
 134236, 
 (SELECT id FROM stat_types WHERE code = 'ATK_PCT'), 
 63,
 (SELECT id FROM stat_types WHERE code = 'ACC'), 
 8, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    9,
    0,
    9
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 9 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'RES'),
    8,
    0,
    8
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'RES')
    AND is_ancient = 0
    AND 8 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    14,
    0,
    14
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 14 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    14,
    0,
    14
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 14 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 25912)
AND slot_number = 4;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 25912), 
    @last_rune_id, 
    4
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 25912);

-- Rune ID: 39820286215

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 5 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(39820286215, 
 9215591, 
 1, 
 16289429192, 
 5,
 5, 
 6, 
 13, 
 15, 
 12,
 557920, 
 63896, 
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 1800,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    21,
    0,
    17
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 17 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    4,
    0,
    4
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 4 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    8,
    1,
    2
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 2 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'),
    5,
    0,
    5
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_DMG')
    AND is_ancient = 0
    AND 5 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 25912)
AND slot_number = 5;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 25912), 
    @last_rune_id, 
    5
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 25912);

-- Rune ID: 40993979227

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 6 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(40993979227, 
 9215591, 
 1, 
 16289429192, 
 6,
 5, 
 6, 
 15, 
 15, 
 15,
 592790, 
 131742, 
 (SELECT id FROM stat_types WHERE code = 'ATK_PCT'), 
 63,
 (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'), 
 5, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_FLAT'),
    20,
    0,
    20
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_FLAT')
    AND is_ancient = 0
    AND 20 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    15,
    0,
    15
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 15 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ACC'),
    14,
    0,
    14
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ACC')
    AND is_ancient = 0
    AND 14 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    7,
    1,
    7
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 7 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_upgrades 
(rune_id, level_reached, stat_type_id, old_value, new_value, upgrade_date)
SELECT 
    @last_rune_id,
    3,
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    7.0,
    7.0,
    NOW();

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 25912)
AND slot_number = 6;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 25912), 
    @last_rune_id, 
    6
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 25912);

-- Rune ID: 40182668894

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 1 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(40182668894, 
 9215591, 
 1, 
 16320981539, 
 1,
 5, 
 6, 
 5, 
 15, 
 12,
 662530, 
 69126, 
 (SELECT id FROM stat_types WHERE code = 'ATK_FLAT'), 
 118,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    6,
    0,
    -1
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND -1 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    11,
    0,
    7
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 7 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    15,
    0,
    15
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 15 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'),
    7,
    0,
    7
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_DMG')
    AND is_ancient = 0
    AND 7 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 17912)
AND slot_number = 1;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 17912), 
    @last_rune_id, 
    1
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 17912);

-- Rune ID: 41714517722

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 2 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(41714517722, 
 9215591, 
 1, 
 16320981539, 
 2,
 5, 
 6, 
 5, 
 15, 
 15,
 697400, 
 134870, 
 (SELECT id FROM stat_types WHERE code = 'ATK_PCT'), 
 63,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    8,
    0,
    8
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 8 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'),
    8,
    1,
    8
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_DMG')
    AND is_ancient = 0
    AND 8 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    13,
    0,
    9
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 9 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_FLAT'),
    15,
    0,
    -8
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_FLAT')
    AND is_ancient = 0
    AND -8 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 17912)
AND slot_number = 2;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 17912), 
    @last_rune_id, 
    2
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 17912);

-- Rune ID: 41721889858

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 3 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(41721889858, 
 9215591, 
 1, 
 16320981539, 
 3,
 5, 
 6, 
 5, 
 15, 
 12,
 570600, 
 64530, 
 (SELECT id FROM stat_types WHERE code = 'DEF_FLAT'), 
 118,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 143, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    7,
    0,
    0
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND 0 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    4,
    0,
    4
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 4 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    21,
    0,
    17
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 17 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'),
    7,
    1,
    7
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_DMG')
    AND is_ancient = 0
    AND 7 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_upgrades 
(rune_id, level_reached, stat_type_id, old_value, new_value, upgrade_date)
SELECT 
    @last_rune_id,
    3,
    (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'),
    7.0,
    7.0,
    NOW();

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 17912)
AND slot_number = 3;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 17912), 
    @last_rune_id, 
    3
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 17912);

-- Rune ID: 27246842516

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 5 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(27246842516, 
 9215591, 
 1, 
 16320981539, 
 5,
 5, 
 6, 
 5, 
 15, 
 15,
 557920, 
 127896, 
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 2448,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    11,
    0,
    7
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 7 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    7,
    0,
    0
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND 0 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    14,
    0,
    14
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 14 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    8,
    1,
    2
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 2 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_upgrades 
(rune_id, level_reached, stat_type_id, old_value, new_value, upgrade_date)
SELECT 
    @last_rune_id,
    3,
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    2.0,
    8.0,
    NOW();

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 17912)
AND slot_number = 5;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 17912), 
    @last_rune_id, 
    5
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 17912);

-- Rune ID: 44697040100

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 6 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'ACC')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(44697040100, 
 9215591, 
 1, 
 16320981539, 
 6,
 15, 
 16, 
 15, 
 15, 
 12,
 646680, 
 70628, 
 (SELECT id FROM stat_types WHERE code = 'ACC'), 
 48,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    11,
    0,
    11
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 1
    AND 11 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    14,
    0,
    14
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 1
    AND 14 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    5,
    0,
    5
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 1
    AND 5 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'),
    18,
    0,
    18
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_DMG')
    AND is_ancient = 1
    AND 18 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 17912)
AND slot_number = 6;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 17912), 
    @last_rune_id, 
    6
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 17912);

-- Rune ID: 40258388175

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 3 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(40258388175, 
 9215591, 
 1, 
 16524368967, 
 3,
 5, 
 6, 
 13, 
 15, 
 12,
 523050, 
 62152, 
 (SELECT id FROM stat_types WHERE code = 'DEF_FLAT'), 
 118,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    16,
    0,
    16
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 16 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    12,
    0,
    12
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 12 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ACC'),
    8,
    0,
    8
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ACC')
    AND is_ancient = 0
    AND 8 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    9,
    1,
    2
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND 2 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_upgrades 
(rune_id, level_reached, stat_type_id, old_value, new_value, upgrade_date)
SELECT 
    @last_rune_id,
    3,
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    2.0,
    9.0,
    NOW();

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 24712)
AND slot_number = 3;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 24712), 
    @last_rune_id, 
    3
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 24712);

-- Rune ID: 27383675390

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 4 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_DMG')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(27383675390, 
 9215591, 
 1, 
 16524368967, 
 4,
 5, 
 6, 
 18, 
 15, 
 12,
 570600, 
 66554, 
 (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'), 
 59,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    11,
    1,
    4
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 4 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    30,
    0,
    23
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND 23 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'RES'),
    12,
    0,
    12
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'RES')
    AND is_ancient = 0
    AND 12 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    5,
    0,
    2
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 2 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 24712)
AND slot_number = 4;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 24712), 
    @last_rune_id, 
    4
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 24712);

-- Rune ID: 44538451769

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 5 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(44538451769, 
 9215591, 
 1, 
 16524368967, 
 5,
 5, 
 6, 
 13, 
 15, 
 12,
 557920, 
 63896, 
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 1800,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_FLAT'),
    16,
    0,
    16
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_FLAT')
    AND is_ancient = 0
    AND 16 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    4,
    0,
    4
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 4 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    16,
    0,
    16
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 16 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    19,
    0,
    19
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 19 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 24712)
AND slot_number = 5;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 24712), 
    @last_rune_id, 
    5
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 24712);

-- Rune ID: 21537815311

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 1 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(21537815311, 
 9215591, 
 1, 
 16695738113, 
 1,
 15, 
 16, 
 14, 
 15, 
 15,
 795036, 
 142572, 
 (SELECT id FROM stat_types WHERE code = 'ATK_FLAT'), 
 160,
 (SELECT id FROM stat_types WHERE code = 'ACC'), 
 4, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    20,
    0,
    15
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 1
    AND 15 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    11,
    1,
    3
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 1
    AND 3 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    7,
    0,
    7
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 1
    AND 7 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    17,
    0,
    5
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 1
    AND 5 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 17012)
AND slot_number = 1;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 17012), 
    @last_rune_id, 
    1
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 17012);

-- Rune ID: 36207693653

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 2 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(36207693653, 
 9215591, 
 1, 
 16695738113, 
 2,
 5, 
 6, 
 13, 
 15, 
 15,
 697400, 
 134870, 
 (SELECT id FROM stat_types WHERE code = 'HP_PCT'), 
 63,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    12,
    0,
    8
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND 8 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    18,
    0,
    15
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 15 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_FLAT'),
    367,
    0,
    -79
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_FLAT')
    AND is_ancient = 0
    AND -79 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    9,
    1,
    4
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 4 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_upgrades 
(rune_id, level_reached, stat_type_id, old_value, new_value, upgrade_date)
SELECT 
    @last_rune_id,
    3,
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    4.0,
    9.0,
    NOW();

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 17012)
AND slot_number = 2;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 17012), 
    @last_rune_id, 
    2
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 17012);

-- Rune ID: 25845073889

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 3 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(25845073889, 
 9215591, 
 1, 
 16695738113, 
 3,
 5, 
 6, 
 13, 
 15, 
 15,
 523050, 
 126152, 
 (SELECT id FROM stat_types WHERE code = 'DEF_FLAT'), 
 160,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    17,
    0,
    14
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 14 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    15,
    0,
    10
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND 10 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    11,
    1,
    5
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 5 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_FLAT'),
    315,
    0,
    -56
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_FLAT')
    AND is_ancient = 0
    AND -56 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 17012)
AND slot_number = 3;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 17012), 
    @last_rune_id, 
    3
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 17012);

-- Rune ID: 17051222048

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 4 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(17051222048, 
 9215591, 
 1, 
 16695738113, 
 4,
 5, 
 6, 
 13, 
 15, 
 15,
 627660, 
 131383, 
 (SELECT id FROM stat_types WHERE code = 'HP_PCT'), 
 63,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    19,
    0,
    15
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 15 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    5,
    0,
    -1
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND -1 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_FLAT'),
    14,
    0,
    -4
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_FLAT')
    AND is_ancient = 0
    AND -4 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    10,
    1,
    5
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND 5 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_upgrades 
(rune_id, level_reached, stat_type_id, old_value, new_value, upgrade_date)
SELECT 
    @last_rune_id,
    3,
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    5.0,
    10.0,
    NOW();

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 17012)
AND slot_number = 4;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 17012), 
    @last_rune_id, 
    4
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 17012);

-- Rune ID: 41036799564

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 5 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(41036799564, 
 9215591, 
 1, 
 16695738113, 
 5,
 15, 
 16, 
 14, 
 15, 
 15,
 608640, 
 132591, 
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 2448,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    12,
    1,
    0
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 1
    AND 0 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    15,
    0,
    7
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 1
    AND 7 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    11,
    0,
    6
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 1
    AND 6 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    24,
    0,
    16
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 1
    AND 16 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 17012)
AND slot_number = 5;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 17012), 
    @last_rune_id, 
    5
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 17012);

-- Rune ID: 25732378293

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 6 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(25732378293, 
 9215591, 
 1, 
 16695738113, 
 6,
 5, 
 6, 
 13, 
 15, 
 15,
 646680, 
 132334, 
 (SELECT id FROM stat_types WHERE code = 'DEF_PCT'), 
 63,
 (SELECT id FROM stat_types WHERE code = 'DEF_FLAT'), 
 20, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    16,
    0,
    12
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 12 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'),
    10,
    0,
    10
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_DMG')
    AND is_ancient = 0
    AND 10 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    11,
    0,
    11
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 11 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    11,
    1,
    6
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 6 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_upgrades 
(rune_id, level_reached, stat_type_id, old_value, new_value, upgrade_date)
SELECT 
    @last_rune_id,
    3,
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    6.0,
    11.0,
    NOW();

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 17012)
AND slot_number = 6;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 17012), 
    @last_rune_id, 
    6
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 17012);

-- Rune ID: 40380737443

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 1 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(40380737443, 
 9215591, 
 1, 
 16843031709, 
 1,
 5, 
 6, 
 13, 
 15, 
 15,
 722760, 
 136138, 
 (SELECT id FROM stat_types WHERE code = 'ATK_FLAT'), 
 160,
 (SELECT id FROM stat_types WHERE code = 'RES'), 
 4, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    20,
    0,
    16
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 16 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    10,
    1,
    6
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 6 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ACC'),
    5,
    0,
    5
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ACC')
    AND is_ancient = 0
    AND 5 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    6,
    0,
    1
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 1 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 25012)
AND slot_number = 1;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 25012), 
    @last_rune_id, 
    1
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 25012);

-- Rune ID: 24643409689

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 5 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(24643409689, 
 9215591, 
 1, 
 16843031709, 
 5,
 5, 
 6, 
 6, 
 15, 
 12,
 405760, 
 63602, 
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 1800,
 (SELECT id FROM stat_types WHERE code = 'RES'), 
 7, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ACC'),
    9,
    1,
    9
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ACC')
    AND is_ancient = 0
    AND 9 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    16,
    0,
    12
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 12 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    5,
    0,
    -2
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND -2 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    18,
    0,
    11
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND 11 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 25012)
AND slot_number = 5;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 25012), 
    @last_rune_id, 
    5
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 25012);

-- Rune ID: 41530643210

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 1 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(41530643210, 
 9215591, 
 1, 
 16858683090, 
 1,
 5, 
 6, 
 5, 
 15, 
 15,
 722760, 
 136138, 
 (SELECT id FROM stat_types WHERE code = 'ATK_FLAT'), 
 160,
 (SELECT id FROM stat_types WHERE code = 'SPD'), 
 4, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'),
    12,
    0,
    12
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_DMG')
    AND is_ancient = 0
    AND 12 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    16,
    0,
    16
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 16 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    7,
    0,
    0
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 0 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    8,
    0,
    2
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 2 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 18912)
AND slot_number = 1;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 18912), 
    @last_rune_id, 
    1
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 18912);

-- Rune ID: 27494744140

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 2 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(27494744140, 
 9215591, 
 1, 
 16858683090, 
 2,
 15, 
 16, 
 15, 
 15, 
 15,
 760800, 
 140738, 
 (SELECT id FROM stat_types WHERE code = 'ATK_PCT'), 
 63,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_FLAT'),
    560,
    1,
    99
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_FLAT')
    AND is_ancient = 1
    AND 99 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    22,
    0,
    13
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 1
    AND 13 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    17,
    0,
    17
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 1
    AND 17 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    6,
    0,
    1
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 1
    AND 1 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 18912)
AND slot_number = 2;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 18912), 
    @last_rune_id, 
    2
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 18912);

-- Rune ID: 41560239381

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 3 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(41560239381, 
 9215591, 
 1, 
 16858683090, 
 3,
 5, 
 6, 
 5, 
 15, 
 12,
 570600, 
 64530, 
 (SELECT id FROM stat_types WHERE code = 'DEF_FLAT'), 
 118,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 203, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    20,
    0,
    16
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 16 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    6,
    0,
    6
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 6 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'),
    6,
    0,
    6
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_DMG')
    AND is_ancient = 0
    AND 6 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    9,
    1,
    3
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 3 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_upgrades 
(rune_id, level_reached, stat_type_id, old_value, new_value, upgrade_date)
SELECT 
    @last_rune_id,
    3,
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    3.0,
    9.0,
    NOW();

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 18912)
AND slot_number = 3;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 18912), 
    @last_rune_id, 
    3
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 18912);

-- Rune ID: 44021477006

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 4 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_DMG')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(44021477006, 
 9215591, 
 1, 
 16858683090, 
 4,
 5, 
 6, 
 5, 
 15, 
 12,
 684720, 
 70236, 
 (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'), 
 59,
 (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'), 
 5, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_FLAT'),
    15,
    0,
    -6
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_FLAT')
    AND is_ancient = 0
    AND -6 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    17,
    0,
    13
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 13 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    12,
    0,
    5
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 5 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    9,
    1,
    4
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 4 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_upgrades 
(rune_id, level_reached, stat_type_id, old_value, new_value, upgrade_date)
SELECT 
    @last_rune_id,
    3,
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    4.0,
    9.0,
    NOW();

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 18912)
AND slot_number = 4;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 18912), 
    @last_rune_id, 
    4
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 18912);

-- Rune ID: 31067344540

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 5 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(31067344540, 
 9215591, 
 1, 
 16858683090, 
 5,
 5, 
 6, 
 15, 
 15, 
 15,
 557920, 
 129875, 
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 2448,
 (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'), 
 7, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    22,
    0,
    12
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND 12 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    10,
    0,
    6
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 6 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    12,
    1,
    5
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 5 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    8,
    0,
    1
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 1 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 18912)
AND slot_number = 5;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 18912), 
    @last_rune_id, 
    5
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 18912);

-- Rune ID: 20862155451

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 6 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(20862155451, 
 9215591, 
 1, 
 16858683090, 
 6,
 5, 
 6, 
 5, 
 15, 
 15,
 592790, 
 129639, 
 (SELECT id FROM stat_types WHERE code = 'ATK_PCT'), 
 63,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ACC'),
    9,
    0,
    9
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ACC')
    AND is_ancient = 0
    AND 9 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    5,
    0,
    -5
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND -5 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    16,
    0,
    16
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 16 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    8,
    1,
    4
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 4 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_upgrades 
(rune_id, level_reached, stat_type_id, old_value, new_value, upgrade_date)
SELECT 
    @last_rune_id,
    3,
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    4.0,
    8.0,
    NOW();

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 18912)
AND slot_number = 6;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 18912), 
    @last_rune_id, 
    6
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 18912);

-- Rune ID: 33134069105

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 1 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(33134069105, 
 9215591, 
 1, 
 17305372508, 
 1,
 5, 
 6, 
 10, 
 15, 
 12,
 662530, 
 69126, 
 (SELECT id FROM stat_types WHERE code = 'ATK_FLAT'), 
 118,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    17,
    0,
    14
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 14 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    14,
    0,
    7
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 7 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ACC'),
    8,
    0,
    8
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ACC')
    AND is_ancient = 0
    AND 8 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    6,
    0,
    -1
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND -1 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 28612)
AND slot_number = 1;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 28612), 
    @last_rune_id, 
    1
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 28612);

-- Rune ID: 36608622671

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 2 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(36608622671, 
 9215591, 
 1, 
 17305372508, 
 2,
 5, 
 6, 
 15, 
 15, 
 15,
 634000, 
 133949, 
 (SELECT id FROM stat_types WHERE code = 'SPD'), 
 42,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ACC'),
    21,
    0,
    21
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ACC')
    AND is_ancient = 0
    AND 21 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_FLAT'),
    468,
    0,
    58
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_FLAT')
    AND is_ancient = 0
    AND 58 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    10,
    1,
    3
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 3 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    5,
    0,
    5
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 5 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 28612)
AND slot_number = 2;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 28612), 
    @last_rune_id, 
    2
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 28612);

-- Rune ID: 37026800555

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 3 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(37026800555, 
 9215591, 
 1, 
 17305372508, 
 3,
 5, 
 6, 
 10, 
 15, 
 12,
 523050, 
 62152, 
 (SELECT id FROM stat_types WHERE code = 'DEF_FLAT'), 
 118,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    6,
    0,
    6
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 6 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    9,
    1,
    2
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 2 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    22,
    0,
    18
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 18 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ACC'),
    4,
    0,
    4
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ACC')
    AND is_ancient = 0
    AND 4 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 28612)
AND slot_number = 3;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 28612), 
    @last_rune_id, 
    3
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 28612);

-- Rune ID: 43019104742

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 4 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_DMG')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(43019104742, 
 9215591, 
 1, 
 17305372508, 
 4,
 5, 
 6, 
 15, 
 15, 
 15,
 570600, 
 130554, 
 (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'), 
 80,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    22,
    0,
    18
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 18 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    11,
    0,
    8
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 8 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    8,
    1,
    1
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 1 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_FLAT'),
    363,
    0,
    6
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_FLAT')
    AND is_ancient = 0
    AND 6 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 28612)
AND slot_number = 4;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 28612), 
    @last_rune_id, 
    4
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 28612);

-- Rune ID: 41548709095

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 5 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(41548709095, 
 9215591, 
 1, 
 17305372508, 
 5,
 15, 
 16, 
 10, 
 15, 
 13,
 730368, 
 84518, 
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 1920,
 (SELECT id FROM stat_types WHERE code = 'ATK_FLAT'), 
 18, 
 'legendary',
 13,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    9,
    0,
    9
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 1
    AND 9 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ACC'),
    14,
    0,
    14
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ACC')
    AND is_ancient = 1
    AND 14 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    9,
    1,
    6
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 1
    AND 6 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    19,
    0,
    19
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 1
    AND 19 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 28612)
AND slot_number = 5;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 28612), 
    @last_rune_id, 
    5
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 28612);

-- Rune ID: 44957644884

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 6 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(44957644884, 
 9215591, 
 1, 
 17305372508, 
 6,
 5, 
 6, 
 10, 
 15, 
 12,
 646680, 
 68334, 
 (SELECT id FROM stat_types WHERE code = 'ATK_PCT'), 
 47,
 (SELECT id FROM stat_types WHERE code = 'ACC'), 
 8, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    21,
    0,
    21
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND 21 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_FLAT'),
    11,
    0,
    11
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_FLAT')
    AND is_ancient = 0
    AND 11 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    12,
    0,
    12
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 12 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    8,
    0,
    8
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 8 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 28612)
AND slot_number = 6;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 28612), 
    @last_rune_id, 
    6
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 28612);

-- Rune ID: 44707103740

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 1 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(44707103740, 
 9215591, 
 1, 
 17414158135, 
 1,
 5, 
 6, 
 13, 
 15, 
 15,
 722760, 
 136138, 
 (SELECT id FROM stat_types WHERE code = 'ATK_FLAT'), 
 160,
 (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'), 
 6, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    10,
    0,
    7
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 7 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_FLAT'),
    414,
    1,
    -7
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_FLAT')
    AND is_ancient = 0
    AND -7 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    6,
    0,
    2
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 2 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    26,
    0,
    19
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 19 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 14512)
AND slot_number = 1;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 14512), 
    @last_rune_id, 
    1
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 14512);

-- Rune ID: 41364441627

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 2 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(41364441627, 
 9215591, 
 1, 
 17414158135, 
 2,
 5, 
 6, 
 13, 
 15, 
 15,
 697400, 
 134870, 
 (SELECT id FROM stat_types WHERE code = 'SPD'), 
 42,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    11,
    1,
    6
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 6 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    6,
    0,
    0
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 0 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    24,
    0,
    24
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 24 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_FLAT'),
    294,
    0,
    -142
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_FLAT')
    AND is_ancient = 0
    AND -142 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 14512)
AND slot_number = 2;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 14512), 
    @last_rune_id, 
    2
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 14512);

-- Rune ID: 45450547723

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 3 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(45450547723, 
 9215591, 
 1, 
 17414158135, 
 3,
 5, 
 6, 
 15, 
 15, 
 15,
 523050, 
 128008, 
 (SELECT id FROM stat_types WHERE code = 'DEF_FLAT'), 
 160,
 (SELECT id FROM stat_types WHERE code = 'ACC'), 
 4, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    5,
    0,
    1
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 1 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    18,
    0,
    18
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 18 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    20,
    0,
    14
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 14 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    9,
    1,
    4
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND 4 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_upgrades 
(rune_id, level_reached, stat_type_id, old_value, new_value, upgrade_date)
SELECT 
    @last_rune_id,
    3,
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    4.0,
    9.0,
    NOW();

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 14512)
AND slot_number = 3;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 14512), 
    @last_rune_id, 
    3
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 14512);

-- Rune ID: 43782393109

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 4 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_DMG')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(43782393109, 
 9215591, 
 1, 
 17414158135, 
 4,
 5, 
 6, 
 13, 
 15, 
 15,
 684720, 
 134236, 
 (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'), 
 80,
 (SELECT id FROM stat_types WHERE code = 'DEF_PCT'), 
 6, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    22,
    0,
    17
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 17 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    13,
    0,
    8
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 8 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    6,
    1,
    6
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 6 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    8,
    0,
    -2
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND -2 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 14512)
AND slot_number = 4;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 14512), 
    @last_rune_id, 
    4
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 14512);

-- Rune ID: 24074060318

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 5 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(24074060318, 
 9215591, 
 1, 
 17414158135, 
 5,
 5, 
 6, 
 13, 
 15, 
 15,
 557920, 
 127896, 
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 2448,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    12,
    0,
    12
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 12 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    14,
    0,
    7
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 7 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    14,
    0,
    8
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 8 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    8,
    1,
    4
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 4 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_upgrades 
(rune_id, level_reached, stat_type_id, old_value, new_value, upgrade_date)
SELECT 
    @last_rune_id,
    3,
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    4.0,
    8.0,
    NOW();

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 14512)
AND slot_number = 5;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 14512), 
    @last_rune_id, 
    5
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 14512);

-- Rune ID: 22178791851

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 6 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(22178791851, 
 9215591, 
 1, 
 17414158135, 
 6,
 5, 
 6, 
 15, 
 15, 
 15,
 538900, 
 128856, 
 (SELECT id FROM stat_types WHERE code = 'ATK_PCT'), 
 63,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    8,
    0,
    1
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 1 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    12,
    0,
    5
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND 5 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    6,
    1,
    6
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 6 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    22,
    0,
    18
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 18 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 14512)
AND slot_number = 6;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 14512), 
    @last_rune_id, 
    6
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 14512);

-- Rune ID: 41670109511

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 1 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(41670109511, 
 9215591, 
 1, 
 17740410028, 
 1,
 5, 
 6, 
 11, 
 15, 
 12,
 662530, 
 71476, 
 (SELECT id FROM stat_types WHERE code = 'ATK_FLAT'), 
 118,
 (SELECT id FROM stat_types WHERE code = 'RES'), 
 7, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    16,
    0,
    13
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 13 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    11,
    0,
    6
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 6 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'),
    7,
    0,
    7
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_DMG')
    AND is_ancient = 0
    AND 7 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    4,
    0,
    4
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 4 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 25712)
AND slot_number = 1;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 25712), 
    @last_rune_id, 
    1
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 25712);

-- Rune ID: 39645306536

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 2 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(39645306536, 
 9215591, 
 1, 
 17740410028, 
 2,
 15, 
 16, 
 15, 
 15, 
 15,
 760800, 
 140738, 
 (SELECT id FROM stat_types WHERE code = 'ATK_PCT'), 
 63,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ACC'),
    8,
    0,
    8
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ACC')
    AND is_ancient = 1
    AND 8 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    12,
    0,
    12
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 1
    AND 12 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    18,
    0,
    18
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 1
    AND 18 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'),
    5,
    0,
    5
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_DMG')
    AND is_ancient = 1
    AND 5 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 25712)
AND slot_number = 2;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 25712), 
    @last_rune_id, 
    2
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 25712);

-- Rune ID: 33814494771

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 5 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(33814494771, 
 9215591, 
 1, 
 17740410028, 
 5,
 5, 
 6, 
 11, 
 15, 
 12,
 557920, 
 65875, 
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 1800,
 (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'), 
 4, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    22,
    0,
    15
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND 15 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    13,
    0,
    7
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 7 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    5,
    0,
    -1
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND -1 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    5,
    0,
    1
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 1 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 25712)
AND slot_number = 5;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 25712), 
    @last_rune_id, 
    5
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 25712);

-- Rune ID: 20465624997

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 6 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(20465624997, 
 9215591, 
 1, 
 17740410028, 
 6,
 5, 
 6, 
 11, 
 15, 
 15,
 592790, 
 131742, 
 (SELECT id FROM stat_types WHERE code = 'HP_PCT'), 
 63,
 (SELECT id FROM stat_types WHERE code = 'ATK_FLAT'), 
 14, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    14,
    0,
    9
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 9 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ACC'),
    21,
    0,
    21
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ACC')
    AND is_ancient = 0
    AND 21 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    6,
    1,
    6
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 6 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    7,
    0,
    -1
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND -1 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 25712)
AND slot_number = 6;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 25712), 
    @last_rune_id, 
    6
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 25712);

-- Rune ID: 27194785957

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 2 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(27194785957, 
 9215591, 
 1, 
 17895834565, 
 2,
 5, 
 6, 
 17, 
 15, 
 15,
 634000, 
 133949, 
 (SELECT id FROM stat_types WHERE code = 'SPD'), 
 42,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    12,
    0,
    6
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 6 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ACC'),
    14,
    0,
    14
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ACC')
    AND is_ancient = 0
    AND 14 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'RES'),
    16,
    0,
    16
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'RES')
    AND is_ancient = 0
    AND 16 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    10,
    0,
    0
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND 0 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 26812)
AND slot_number = 2;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 26812), 
    @last_rune_id, 
    2
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 26812);

-- Rune ID: 38152915940

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 3 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(38152915940, 
 9215591, 
 1, 
 17895834565, 
 3,
 5, 
 6, 
 13, 
 15, 
 15,
 570600, 
 128530, 
 (SELECT id FROM stat_types WHERE code = 'DEF_FLAT'), 
 160,
 (SELECT id FROM stat_types WHERE code = 'HP_PCT'), 
 7, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'RES'),
    21,
    0,
    21
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'RES')
    AND is_ancient = 0
    AND 21 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    9,
    1,
    4
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND 4 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    10,
    0,
    6
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 6 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_FLAT'),
    335,
    0,
    33
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_FLAT')
    AND is_ancient = 0
    AND 33 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 26812)
AND slot_number = 3;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 26812), 
    @last_rune_id, 
    3
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 26812);

-- Rune ID: 25861982340

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 5 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(25861982340, 
 9215591, 
 1, 
 17895834565, 
 5,
 5, 
 6, 
 13, 
 15, 
 15,
 557920, 
 127896, 
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 2448,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'RES'),
    7,
    0,
    7
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'RES')
    AND is_ancient = 0
    AND 7 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ACC'),
    5,
    0,
    5
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ACC')
    AND is_ancient = 0
    AND 5 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    20,
    0,
    17
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 17 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    9,
    1,
    5
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 5 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_upgrades 
(rune_id, level_reached, stat_type_id, old_value, new_value, upgrade_date)
SELECT 
    @last_rune_id,
    3,
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    5.0,
    9.0,
    NOW();

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 26812)
AND slot_number = 5;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 26812), 
    @last_rune_id, 
    5
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 26812);

-- Rune ID: 43442289902

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 6 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(43442289902, 
 9215591, 
 1, 
 17895834565, 
 6,
 5, 
 6, 
 17, 
 15, 
 12,
 538900, 
 64856, 
 (SELECT id FROM stat_types WHERE code = 'HP_PCT'), 
 47,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ACC'),
    20,
    0,
    20
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ACC')
    AND is_ancient = 0
    AND 20 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'RES'),
    8,
    0,
    8
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'RES')
    AND is_ancient = 0
    AND 8 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    10,
    0,
    7
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 7 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    7,
    0,
    3
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND 3 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 26812)
AND slot_number = 6;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 26812), 
    @last_rune_id, 
    6
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 26812);

-- Rune ID: 38110408344

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 1 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(38110408344, 
 9215591, 
 1, 
 17911689867, 
 1,
 5, 
 6, 
 15, 
 15, 
 12,
 662530, 
 71476, 
 (SELECT id FROM stat_types WHERE code = 'ATK_FLAT'), 
 118,
 (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'), 
 5, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    11,
    0,
    5
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 5 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    17,
    0,
    13
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 13 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    11,
    1,
    5
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 5 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'RES'),
    7,
    0,
    7
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'RES')
    AND is_ancient = 0
    AND 7 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 26112)
AND slot_number = 1;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 26112), 
    @last_rune_id, 
    1
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 26112);

-- Rune ID: 28158513737

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 3 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(28158513737, 
 9215591, 
 1, 
 17911689867, 
 3,
 5, 
 6, 
 8, 
 15, 
 12,
 356625, 
 61405, 
 (SELECT id FROM stat_types WHERE code = 'DEF_FLAT'), 
 118,
 (SELECT id FROM stat_types WHERE code = 'DEF_PCT'), 
 6, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    5,
    1,
    5
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 5 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ACC'),
    8,
    0,
    8
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ACC')
    AND is_ancient = 0
    AND 8 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'),
    11,
    0,
    11
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_DMG')
    AND is_ancient = 0
    AND 11 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    20,
    0,
    16
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 16 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 26112)
AND slot_number = 3;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 26112), 
    @last_rune_id, 
    3
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 26112);

-- Rune ID: 42486962727

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 4 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_DMG')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(42486962727, 
 9215591, 
 1, 
 17911689867, 
 4,
 5, 
 6, 
 8, 
 15, 
 15,
 370890, 
 126421, 
 (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'), 
 80,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    11,
    1,
    4
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 4 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    17,
    0,
    17
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 17 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_FLAT'),
    31,
    0,
    14
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_FLAT')
    AND is_ancient = 0
    AND 14 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    7,
    0,
    0
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND 0 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 26112)
AND slot_number = 4;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 26112), 
    @last_rune_id, 
    4
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 26112);

-- Rune ID: 34998584987

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 5 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(34998584987, 
 9215591, 
 1, 
 17911689867, 
 5,
 5, 
 6, 
 8, 
 15, 
 12,
 380400, 
 63098, 
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 1800,
 (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'), 
 4, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    14,
    0,
    8
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 8 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    16,
    0,
    13
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 13 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'),
    7,
    0,
    7
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_DMG')
    AND is_ancient = 0
    AND 7 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_FLAT'),
    27,
    1,
    6
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_FLAT')
    AND is_ancient = 0
    AND 6 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_upgrades 
(rune_id, level_reached, stat_type_id, old_value, new_value, upgrade_date)
SELECT 
    @last_rune_id,
    3,
    (SELECT id FROM stat_types WHERE code = 'ATK_FLAT'),
    6.0,
    27.0,
    NOW();

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 26112)
AND slot_number = 5;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 26112), 
    @last_rune_id, 
    5
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 26112);

-- Rune ID: 41774305503

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 6 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(41774305503, 
 9215591, 
 1, 
 17911689867, 
 6,
 5, 
 6, 
 15, 
 15, 
 15,
 538900, 
 128856, 
 (SELECT id FROM stat_types WHERE code = 'ATK_PCT'), 
 63,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    11,
    0,
    11
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 11 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    20,
    0,
    15
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND 15 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_FLAT'),
    19,
    0,
    19
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_FLAT')
    AND is_ancient = 0
    AND 19 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'),
    7,
    0,
    7
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_DMG')
    AND is_ancient = 0
    AND 7 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 26112)
AND slot_number = 6;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 26112), 
    @last_rune_id, 
    6
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 26112);

-- Rune ID: 40219940228

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 1 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(40219940228, 
 9215591, 
 1, 
 18149532436, 
 1,
 5, 
 6, 
 13, 
 15, 
 12,
 662530, 
 69126, 
 (SELECT id FROM stat_types WHERE code = 'ATK_FLAT'), 
 118,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    5,
    0,
    0
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 0 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    17,
    0,
    14
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 14 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'RES'),
    10,
    0,
    10
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'RES')
    AND is_ancient = 0
    AND 10 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    8,
    1,
    1
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 1 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_upgrades 
(rune_id, level_reached, stat_type_id, old_value, new_value, upgrade_date)
SELECT 
    @last_rune_id,
    3,
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    1.0,
    8.0,
    NOW();

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 21012)
AND slot_number = 1;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 21012), 
    @last_rune_id, 
    1
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 21012);

-- Rune ID: 24167045501

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 3 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(24167045501, 
 9215591, 
 1, 
 18149532436, 
 3,
 5, 
 6, 
 13, 
 15, 
 15,
 523050, 
 126152, 
 (SELECT id FROM stat_types WHERE code = 'DEF_FLAT'), 
 160,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ACC'),
    8,
    0,
    8
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ACC')
    AND is_ancient = 0
    AND 8 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    8,
    0,
    2
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 2 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    20,
    0,
    16
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 16 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    12,
    1,
    6
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND 6 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_upgrades 
(rune_id, level_reached, stat_type_id, old_value, new_value, upgrade_date)
SELECT 
    @last_rune_id,
    3,
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    6.0,
    12.0,
    NOW();

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 21012)
AND slot_number = 3;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 21012), 
    @last_rune_id, 
    3
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 21012);

-- Rune ID: 33614619710

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 4 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(33614619710, 
 9215591, 
 1, 
 18149532436, 
 4,
 5, 
 6, 
 14, 
 15, 
 15,
 627660, 
 133609, 
 (SELECT id FROM stat_types WHERE code = 'DEF_PCT'), 
 63,
 (SELECT id FROM stat_types WHERE code = 'ACC'), 
 7, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    16,
    0,
    12
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 12 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    11,
    0,
    11
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 11 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    9,
    1,
    3
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 3 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'RES'),
    5,
    0,
    5
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'RES')
    AND is_ancient = 0
    AND 5 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 21012)
AND slot_number = 4;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 21012), 
    @last_rune_id, 
    4
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 21012);

-- Rune ID: 39486787322

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 1 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(39486787322, 
 9215591, 
 1, 
 18387778445, 
 1,
 5, 
 6, 
 4, 
 15, 
 15,
 451725, 
 132179, 
 (SELECT id FROM stat_types WHERE code = 'ATK_FLAT'), 
 160,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 177, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    15,
    0,
    9
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 9 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'),
    12,
    0,
    12
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_DMG')
    AND is_ancient = 0
    AND 12 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    9,
    0,
    9
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 9 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    10,
    0,
    6
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 6 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 29312)
AND slot_number = 1;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 29312), 
    @last_rune_id, 
    1
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 29312);

-- Rune ID: 20616340045

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 2 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(20616340045, 
 9215591, 
 1, 
 18387778445, 
 2,
 5, 
 6, 
 5, 
 15, 
 15,
 760800, 
 138040, 
 (SELECT id FROM stat_types WHERE code = 'SPD'), 
 42,
 (SELECT id FROM stat_types WHERE code = 'RES'), 
 7, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'),
    16,
    0,
    16
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_DMG')
    AND is_ancient = 0
    AND 16 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    8,
    0,
    1
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 1 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_FLAT'),
    35,
    0,
    15
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_FLAT')
    AND is_ancient = 0
    AND 15 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    7,
    1,
    7
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 7 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_upgrades 
(rune_id, level_reached, stat_type_id, old_value, new_value, upgrade_date)
SELECT 
    @last_rune_id,
    3,
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    7.0,
    7.0,
    NOW();

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 29312)
AND slot_number = 2;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 29312), 
    @last_rune_id, 
    2
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 29312);

-- Rune ID: 41671647344

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 3 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(41671647344, 
 9215591, 
 1, 
 18387778445, 
 3,
 5, 
 6, 
 5, 
 15, 
 12,
 523050, 
 62152, 
 (SELECT id FROM stat_types WHERE code = 'DEF_FLAT'), 
 118,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    4,
    0,
    4
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 4 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'),
    20,
    0,
    20
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_DMG')
    AND is_ancient = 0
    AND 20 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    10,
    0,
    6
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 6 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    8,
    1,
    3
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 3 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_upgrades 
(rune_id, level_reached, stat_type_id, old_value, new_value, upgrade_date)
SELECT 
    @last_rune_id,
    3,
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    3.0,
    8.0,
    NOW();

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 29312)
AND slot_number = 3;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 29312), 
    @last_rune_id, 
    3
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 29312);

-- Rune ID: 18323644549

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 4 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_DMG')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(18323644549, 
 9215591, 
 1, 
 18387778445, 
 4,
 5, 
 6, 
 5, 
 15, 
 15,
 627660, 
 131383, 
 (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'), 
 80,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    15,
    0,
    11
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 11 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    6,
    0,
    -1
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND -1 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_FLAT'),
    33,
    0,
    13
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_FLAT')
    AND is_ancient = 0
    AND 13 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    6,
    1,
    6
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 6 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_upgrades 
(rune_id, level_reached, stat_type_id, old_value, new_value, upgrade_date)
SELECT 
    @last_rune_id,
    3,
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    6.0,
    6.0,
    NOW();

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 29312)
AND slot_number = 4;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 29312), 
    @last_rune_id, 
    4
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 29312);

-- Rune ID: 43021584664

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 5 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(43021584664, 
 9215591, 
 1, 
 18387778445, 
 5,
 5, 
 6, 
 4, 
 15, 
 12,
 380400, 
 63098, 
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 1800,
 (SELECT id FROM stat_types WHERE code = 'HP_PCT'), 
 6, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    30,
    0,
    23
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 23 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    4,
    0,
    1
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 1 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'RES'),
    5,
    0,
    5
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'RES')
    AND is_ancient = 0
    AND 5 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    6,
    0,
    6
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 6 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 29312)
AND slot_number = 5;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 29312), 
    @last_rune_id, 
    5
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 29312);

-- Rune ID: 41600120776

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 1 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(41600120776, 
 9215591, 
 1, 
 18416714102, 
 1,
 5, 
 6, 
 5, 
 15, 
 12,
 662530, 
 69126, 
 (SELECT id FROM stat_types WHERE code = 'ATK_FLAT'), 
 118,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    8,
    0,
    4
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 4 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'),
    25,
    0,
    25
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_DMG')
    AND is_ancient = 0
    AND 25 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    4,
    0,
    0
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 0 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    8,
    1,
    3
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 3 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_upgrades 
(rune_id, level_reached, stat_type_id, old_value, new_value, upgrade_date)
SELECT 
    @last_rune_id,
    3,
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    3.0,
    8.0,
    NOW();

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 21112)
AND slot_number = 1;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 21112), 
    @last_rune_id, 
    1
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 21112);

-- Rune ID: 41630331356

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 2 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(41630331356, 
 9215591, 
 1, 
 18416714102, 
 2,
 5, 
 6, 
 5, 
 15, 
 15,
 760800, 
 138040, 
 (SELECT id FROM stat_types WHERE code = 'ATK_PCT'), 
 63,
 (SELECT id FROM stat_types WHERE code = 'SPD'), 
 5, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    9,
    0,
    9
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 9 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_FLAT'),
    26,
    0,
    10
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_FLAT')
    AND is_ancient = 0
    AND 10 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'),
    14,
    0,
    14
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_DMG')
    AND is_ancient = 0
    AND 14 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_FLAT'),
    28,
    1,
    8
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_FLAT')
    AND is_ancient = 0
    AND 8 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_upgrades 
(rune_id, level_reached, stat_type_id, old_value, new_value, upgrade_date)
SELECT 
    @last_rune_id,
    3,
    (SELECT id FROM stat_types WHERE code = 'ATK_FLAT'),
    8.0,
    28.0,
    NOW();

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 21112)
AND slot_number = 2;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 21112), 
    @last_rune_id, 
    2
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 21112);

-- Rune ID: 32678414626

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 3 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(32678414626, 
 9215591, 
 1, 
 18416714102, 
 3,
 5, 
 6, 
 5, 
 15, 
 15,
 570600, 
 128530, 
 (SELECT id FROM stat_types WHERE code = 'DEF_FLAT'), 
 160,
 (SELECT id FROM stat_types WHERE code = 'HP_PCT'), 
 7, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'),
    20,
    0,
    20
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_DMG')
    AND is_ancient = 0
    AND 20 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    8,
    0,
    1
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND 1 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ACC'),
    12,
    0,
    12
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ACC')
    AND is_ancient = 0
    AND 12 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    7,
    1,
    7
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 7 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_upgrades 
(rune_id, level_reached, stat_type_id, old_value, new_value, upgrade_date)
SELECT 
    @last_rune_id,
    3,
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    7.0,
    7.0,
    NOW();

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 21112)
AND slot_number = 3;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 21112), 
    @last_rune_id, 
    3
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 21112);

-- Rune ID: 44159513009

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 4 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_DMG')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(44159513009, 
 9215591, 
 1, 
 18416714102, 
 4,
 5, 
 6, 
 15, 
 15, 
 12,
 627660, 
 69609, 
 (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'), 
 59,
 (SELECT id FROM stat_types WHERE code = 'ACC'), 
 8, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    6,
    0,
    6
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 6 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_FLAT'),
    59,
    0,
    59
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_FLAT')
    AND is_ancient = 0
    AND 59 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_FLAT'),
    12,
    0,
    12
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_FLAT')
    AND is_ancient = 0
    AND 12 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    15,
    0,
    15
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 15 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 21112)
AND slot_number = 4;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 21112), 
    @last_rune_id, 
    4
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 21112);

-- Rune ID: 30484146105

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 5 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(30484146105, 
 9215591, 
 1, 
 18416714102, 
 5,
 5, 
 6, 
 5, 
 15, 
 15,
 557920, 
 127896, 
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 2448,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    6,
    1,
    2
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 2 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    12,
    0,
    5
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 5 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    17,
    0,
    17
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 17 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'),
    4,
    0,
    4
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_DMG')
    AND is_ancient = 0
    AND 4 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 21112)
AND slot_number = 5;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 21112), 
    @last_rune_id, 
    5
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 21112);

-- Rune ID: 40806096247

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 6 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(40806096247, 
 9215591, 
 1, 
 18416714102, 
 6,
 5, 
 6, 
 15, 
 15, 
 15,
 592790, 
 131742, 
 (SELECT id FROM stat_types WHERE code = 'DEF_PCT'), 
 63,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 279, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    11,
    0,
    11
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 11 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    24,
    0,
    19
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 19 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    8,
    1,
    8
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 8 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    13,
    0,
    7
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 7 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 21112)
AND slot_number = 6;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 21112), 
    @last_rune_id, 
    6
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 21112);

-- Rune ID: 30780809326

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 1 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(30780809326, 
 9215591, 
 1, 
 18421441964, 
 1,
 5, 
 6, 
 8, 
 15, 
 12,
 391495, 
 63889, 
 (SELECT id FROM stat_types WHERE code = 'ATK_FLAT'), 
 118,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    5,
    0,
    5
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 5 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    17,
    0,
    14
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 14 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'),
    13,
    0,
    13
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_DMG')
    AND is_ancient = 0
    AND 13 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    10,
    1,
    5
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 5 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_upgrades 
(rune_id, level_reached, stat_type_id, old_value, new_value, upgrade_date)
SELECT 
    @last_rune_id,
    3,
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    5.0,
    10.0,
    NOW();

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 10612)
AND slot_number = 1;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 10612), 
    @last_rune_id, 
    1
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 10612);

-- Rune ID: 40771013000

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 3 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(40771013000, 
 9215591, 
 1, 
 18421441964, 
 3,
 5, 
 6, 
 8, 
 15, 
 12,
 309075, 
 58017, 
 (SELECT id FROM stat_types WHERE code = 'DEF_FLAT'), 
 118,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    15,
    0,
    12
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 12 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'),
    5,
    1,
    5
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_DMG')
    AND is_ancient = 0
    AND 5 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    20,
    0,
    13
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND 13 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    4,
    0,
    4
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 4 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 10612)
AND slot_number = 3;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 10612), 
    @last_rune_id, 
    3
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 10612);

-- Rune ID: 31515535687

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 4 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_DMG')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(31515535687, 
 9215591, 
 1, 
 18421441964, 
 4,
 5, 
 6, 
 8, 
 15, 
 15,
 370890, 
 126421, 
 (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'), 
 80,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    14,
    0,
    8
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND 8 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    11,
    1,
    5
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 5 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    14,
    0,
    14
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 14 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_FLAT'),
    17,
    0,
    -5
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_FLAT')
    AND is_ancient = 0
    AND -5 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 10612)
AND slot_number = 4;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 10612), 
    @last_rune_id, 
    4
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 10612);

-- Rune ID: 39192320832

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 5 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(39192320832, 
 9215591, 
 1, 
 18421441964, 
 5,
 5, 
 6, 
 8, 
 15, 
 15,
 329680, 
 123485, 
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 2448,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    16,
    0,
    16
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 16 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    11,
    0,
    7
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 7 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    8,
    1,
    3
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 3 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'),
    5,
    0,
    5
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_DMG')
    AND is_ancient = 0
    AND 5 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 10612)
AND slot_number = 5;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 10612), 
    @last_rune_id, 
    5
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 10612);

-- Rune ID: 43117282965

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 6 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(43117282965, 
 9215591, 
 1, 
 18421441964, 
 6,
 5, 
 6, 
 4, 
 15, 
 15,
 404175, 
 128792, 
 (SELECT id FROM stat_types WHERE code = 'ATK_PCT'), 
 63,
 (SELECT id FROM stat_types WHERE code = 'HP_PCT'), 
 7, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_FLAT'),
    42,
    0,
    21
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_FLAT')
    AND is_ancient = 0
    AND 21 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'RES'),
    4,
    0,
    4
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'RES')
    AND is_ancient = 0
    AND 4 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    10,
    0,
    10
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 10 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ACC'),
    4,
    0,
    4
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ACC')
    AND is_ancient = 0
    AND 4 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 10612)
AND slot_number = 6;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 10612), 
    @last_rune_id, 
    6
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 10612);

-- Rune ID: 38376429785

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 1 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(38376429785, 
 9215591, 
 1, 
 18542125895, 
 1,
 5, 
 6, 
 24, 
 15, 
 15,
 722760, 
 136138, 
 (SELECT id FROM stat_types WHERE code = 'ATK_FLAT'), 
 160,
 (SELECT id FROM stat_types WHERE code = 'ACC'), 
 4, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    13,
    0,
    6
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 6 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    14,
    0,
    7
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 7 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    4,
    0,
    4
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 4 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    14,
    0,
    10
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 10 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 13912)
AND slot_number = 1;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 13912), 
    @last_rune_id, 
    1
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 13912);

-- Rune ID: 37342471452

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 2 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(37342471452, 
 9215591, 
 1, 
 18542125895, 
 2,
 5, 
 6, 
 17, 
 15, 
 12,
 697400, 
 73344, 
 (SELECT id FROM stat_types WHERE code = 'SPD'), 
 31,
 (SELECT id FROM stat_types WHERE code = 'ACC'), 
 6, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    5,
    0,
    5
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 5 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    23,
    0,
    17
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND 17 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    13,
    0,
    6
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 6 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_FLAT'),
    15,
    0,
    -4
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_FLAT')
    AND is_ancient = 0
    AND -4 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 13912)
AND slot_number = 2;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 13912), 
    @last_rune_id, 
    2
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 13912);

-- Rune ID: 33101689043

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 4 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_DMG')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(33101689043, 
 9215591, 
 1, 
 18542125895, 
 4,
 5, 
 6, 
 14, 
 15, 
 15,
 627660, 
 133609, 
 (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'), 
 80,
 (SELECT id FROM stat_types WHERE code = 'DEF_PCT'), 
 5, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    22,
    0,
    22
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 22 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    10,
    1,
    3
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 3 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ACC'),
    6,
    0,
    6
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ACC')
    AND is_ancient = 0
    AND 6 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    6,
    0,
    2
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 2 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 13912)
AND slot_number = 4;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 13912), 
    @last_rune_id, 
    4
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 13912);

-- Rune ID: 40250845299

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 5 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(40250845299, 
 9215591, 
 1, 
 18542125895, 
 5,
 5, 
 6, 
 7, 
 15, 
 12,
 405760, 
 63602, 
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 1800,
 (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'), 
 4, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    8,
    1,
    1
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 1 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    16,
    0,
    9
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND 9 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    16,
    0,
    12
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 12 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    8,
    0,
    2
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 2 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 13912)
AND slot_number = 5;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 13912), 
    @last_rune_id, 
    5
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 13912);

-- Rune ID: 41499886449

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 6 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'ACC')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(41499886449, 
 9215591, 
 1, 
 18542125895, 
 6,
 5, 
 6, 
 17, 
 15, 
 15,
 538900, 
 128856, 
 (SELECT id FROM stat_types WHERE code = 'ACC'), 
 64,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    13,
    1,
    5
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 5 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    8,
    0,
    -1
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND -1 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    21,
    0,
    17
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 17 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    6,
    0,
    0
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 0 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 13912)
AND slot_number = 6;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 13912), 
    @last_rune_id, 
    6
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 13912);

-- Rune ID: 41336887964

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 1 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(41336887964, 
 9215591, 
 1, 
 18575182724, 
 1,
 5, 
 6, 
 2, 
 15, 
 12,
 421610, 
 64680, 
 (SELECT id FROM stat_types WHERE code = 'ATK_FLAT'), 
 118,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    16,
    0,
    11
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 11 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    10,
    0,
    3
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 3 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ACC'),
    7,
    0,
    7
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ACC')
    AND is_ancient = 0
    AND 7 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'RES'),
    6,
    0,
    6
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'RES')
    AND is_ancient = 0
    AND 6 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 23312)
AND slot_number = 1;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 23312), 
    @last_rune_id, 
    1
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 23312);

-- Rune ID: 41499846935

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 2 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(41499846935, 
 9215591, 
 1, 
 18575182724, 
 2,
 5, 
 6, 
 2, 
 15, 
 15,
 443800, 
 130190, 
 (SELECT id FROM stat_types WHERE code = 'ATK_PCT'), 
 63,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    10,
    0,
    6
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 6 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    23,
    0,
    17
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND 17 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_FLAT'),
    16,
    0,
    0
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_FLAT')
    AND is_ancient = 0
    AND 0 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_FLAT'),
    29,
    1,
    17
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_FLAT')
    AND is_ancient = 0
    AND 17 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_upgrades 
(rune_id, level_reached, stat_type_id, old_value, new_value, upgrade_date)
SELECT 
    @last_rune_id,
    3,
    (SELECT id FROM stat_types WHERE code = 'ATK_FLAT'),
    17.0,
    29.0,
    NOW();

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 23312)
AND slot_number = 2;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 23312), 
    @last_rune_id, 
    2
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 23312);

-- Rune ID: 44060597927

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 3 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(44060597927, 
 9215591, 
 1, 
 18575182724, 
 3,
 5, 
 6, 
 1, 
 15, 
 12,
 332850, 
 60885, 
 (SELECT id FROM stat_types WHERE code = 'DEF_FLAT'), 
 118,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 356, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    8,
    0,
    2
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND 2 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'RES'),
    7,
    0,
    7
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'RES')
    AND is_ancient = 0
    AND 7 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    23,
    0,
    19
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 19 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'),
    7,
    0,
    7
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_DMG')
    AND is_ancient = 0
    AND 7 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 23312)
AND slot_number = 3;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 23312), 
    @last_rune_id, 
    3
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 23312);

-- Rune ID: 42430212558

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 5 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(42430212558, 
 9215591, 
 1, 
 18575182724, 
 5,
 5, 
 6, 
 1, 
 15, 
 12,
 355040, 
 62545, 
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 1800,
 (SELECT id FROM stat_types WHERE code = 'DEF_FLAT'), 
 12, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    12,
    0,
    12
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 12 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    12,
    0,
    9
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 9 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    7,
    0,
    1
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND 1 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    21,
    0,
    17
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 17 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 23312)
AND slot_number = 5;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 23312), 
    @last_rune_id, 
    5
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 23312);

-- Rune ID: 40026373139

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 6 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(40026373139, 
 9215591, 
 1, 
 18575182724, 
 6,
 5, 
 6, 
 17, 
 15, 
 12,
 538900, 
 64856, 
 (SELECT id FROM stat_types WHERE code = 'DEF_PCT'), 
 47,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    10,
    0,
    6
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 6 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    4,
    0,
    4
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 4 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    21,
    0,
    15
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 15 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    8,
    1,
    1
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 1 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_upgrades 
(rune_id, level_reached, stat_type_id, old_value, new_value, upgrade_date)
SELECT 
    @last_rune_id,
    3,
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    1.0,
    8.0,
    NOW();

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 23312)
AND slot_number = 6;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 23312), 
    @last_rune_id, 
    6
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 23312);

-- Rune ID: 41278932446

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 2 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(41278932446, 
 9215591, 
 1, 
 18618267424, 
 2,
 5, 
 6, 
 17, 
 15, 
 15,
 697400, 
 137344, 
 (SELECT id FROM stat_types WHERE code = 'SPD'), 
 42,
 (SELECT id FROM stat_types WHERE code = 'DEF_PCT'), 
 6, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    13,
    0,
    5
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 5 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_FLAT'),
    155,
    0,
    -280
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_FLAT')
    AND is_ancient = 0
    AND -280 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ACC'),
    22,
    0,
    22
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ACC')
    AND is_ancient = 0
    AND 22 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'RES'),
    4,
    0,
    4
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'RES')
    AND is_ancient = 0
    AND 4 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 13912)
AND slot_number = 2;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 13912), 
    @last_rune_id, 
    2
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 13912);

-- Rune ID: 31078537519

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 3 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(31078537519, 
 9215591, 
 1, 
 18618267424, 
 3,
 5, 
 6, 
 23, 
 15, 
 12,
 475500, 
 61461, 
 (SELECT id FROM stat_types WHERE code = 'DEF_FLAT'), 
 118,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    5,
    0,
    -3
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND -3 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    20,
    0,
    16
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 16 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    9,
    1,
    2
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND 2 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ACC'),
    14,
    0,
    14
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ACC')
    AND is_ancient = 0
    AND 14 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 13912)
AND slot_number = 3;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 13912), 
    @last_rune_id, 
    3
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 13912);

-- Rune ID: 43914129019

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 4 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_DMG')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(43914129019, 
 9215591, 
 1, 
 18618267424, 
 4,
 5, 
 6, 
 7, 
 15, 
 12,
 456480, 
 67053, 
 (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'), 
 59,
 (SELECT id FROM stat_types WHERE code = 'HP_PCT'), 
 7, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_FLAT'),
    142,
    0,
    142
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_FLAT')
    AND is_ancient = 0
    AND 142 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    17,
    0,
    13
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 13 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    13,
    0,
    8
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 8 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ACC'),
    11,
    0,
    11
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ACC')
    AND is_ancient = 0
    AND 11 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 13912)
AND slot_number = 4;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 13912), 
    @last_rune_id, 
    4
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 13912);

-- Rune ID: 35467922572

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 5 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(35467922572, 
 9215591, 
 1, 
 18618267424, 
 5,
 5, 
 6, 
 7, 
 15, 
 15,
 405760, 
 127602, 
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 2448,
 (SELECT id FROM stat_types WHERE code = 'ACC'), 
 7, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    8,
    1,
    2
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 2 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    17,
    0,
    13
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 13 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    15,
    0,
    9
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND 9 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    5,
    0,
    0
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 0 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 13912)
AND slot_number = 5;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 13912), 
    @last_rune_id, 
    5
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 13912);

-- Rune ID: 41532267341

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 6 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'ACC')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(41532267341, 
 9215591, 
 1, 
 18618267424, 
 6,
 5, 
 6, 
 14, 
 15, 
 12,
 592790, 
 67742, 
 (SELECT id FROM stat_types WHERE code = 'ACC'), 
 48,
 (SELECT id FROM stat_types WHERE code = 'RES'), 
 6, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    19,
    0,
    16
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 16 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_FLAT'),
    15,
    0,
    15
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_FLAT')
    AND is_ancient = 0
    AND 15 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    6,
    0,
    -1
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND -1 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    9,
    0,
    9
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 9 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 13912)
AND slot_number = 6;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 13912), 
    @last_rune_id, 
    6
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 13912);

-- Rune ID: 32185230091

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 1 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(32185230091, 
 9215591, 
 1, 
 18670087962, 
 1,
 5, 
 6, 
 10, 
 15, 
 12,
 722760, 
 72138, 
 (SELECT id FROM stat_types WHERE code = 'ATK_FLAT'), 
 118,
 (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'), 
 6, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    10,
    1,
    4
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 4 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    16,
    0,
    16
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 16 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    10,
    0,
    7
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 7 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    7,
    0,
    0
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 0 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 28312)
AND slot_number = 1;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 28312), 
    @last_rune_id, 
    1
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 28312);

-- Rune ID: 41995116472

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 2 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(41995116472, 
 9215591, 
 1, 
 18670087962, 
 2,
 15, 
 16, 
 15, 
 15, 
 15,
 760800, 
 140738, 
 (SELECT id FROM stat_types WHERE code = 'ATK_PCT'), 
 63,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    18,
    0,
    14
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 1
    AND 14 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'),
    14,
    0,
    14
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_DMG')
    AND is_ancient = 1
    AND 14 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    13,
    0,
    13
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 1
    AND 13 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_FLAT'),
    21,
    1,
    21
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_FLAT')
    AND is_ancient = 1
    AND 21 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_upgrades 
(rune_id, level_reached, stat_type_id, old_value, new_value, upgrade_date)
SELECT 
    @last_rune_id,
    3,
    (SELECT id FROM stat_types WHERE code = 'ATK_FLAT'),
    21.0,
    21.0,
    NOW();

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 28312)
AND slot_number = 2;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 28312), 
    @last_rune_id, 
    2
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 28312);

-- Rune ID: 30921991137

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 3 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(30921991137, 
 9215591, 
 1, 
 18670087962, 
 3,
 5, 
 6, 
 10, 
 15, 
 15,
 523050, 
 126152, 
 (SELECT id FROM stat_types WHERE code = 'DEF_FLAT'), 
 160,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_FLAT'),
    414,
    1,
    -66
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_FLAT')
    AND is_ancient = 0
    AND -66 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    8,
    0,
    0
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND 0 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    22,
    0,
    17
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 17 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    8,
    0,
    1
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 1 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 28312)
AND slot_number = 3;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 28312), 
    @last_rune_id, 
    3
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 28312);

-- Rune ID: 30484146828

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 4 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_DMG')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(30484146828, 
 9215591, 
 1, 
 18670087962, 
 4,
 5, 
 6, 
 15, 
 15, 
 15,
 570600, 
 130554, 
 (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'), 
 80,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    13,
    0,
    6
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 6 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    17,
    0,
    14
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 14 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_FLAT'),
    321,
    0,
    44
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_FLAT')
    AND is_ancient = 0
    AND 44 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    6,
    1,
    6
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 6 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_upgrades 
(rune_id, level_reached, stat_type_id, old_value, new_value, upgrade_date)
SELECT 
    @last_rune_id,
    3,
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    6.0,
    6.0,
    NOW();

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 28312)
AND slot_number = 4;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 28312), 
    @last_rune_id, 
    4
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 28312);

-- Rune ID: 36339405551

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 5 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(36339405551, 
 9215591, 
 1, 
 18670087962, 
 5,
 5, 
 6, 
 10, 
 15, 
 12,
 608640, 
 66432, 
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 1800,
 (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'), 
 4, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_FLAT'),
    30,
    1,
    30
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_FLAT')
    AND is_ancient = 0
    AND 30 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    5,
    0,
    0
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 0 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    16,
    0,
    12
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 12 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    14,
    0,
    7
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND 7 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 28312)
AND slot_number = 5;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 28312), 
    @last_rune_id, 
    5
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 28312);

-- Rune ID: 24008151320

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 1 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(24008151320, 
 9215591, 
 1, 
 18734200587, 
 1,
 5, 
 6, 
 6, 
 15, 
 15,
 481840, 
 132778, 
 (SELECT id FROM stat_types WHERE code = 'ATK_FLAT'), 
 160,
 (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'), 
 7, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    21,
    0,
    12
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 12 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    6,
    0,
    2
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 2 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    14,
    0,
    14
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 14 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    10,
    1,
    6
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 6 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_upgrades 
(rune_id, level_reached, stat_type_id, old_value, new_value, upgrade_date)
SELECT 
    @last_rune_id,
    3,
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    6.0,
    10.0,
    NOW();

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 27912)
AND slot_number = 1;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 27912), 
    @last_rune_id, 
    1
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 27912);

-- Rune ID: 36125224235

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 2 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(36125224235, 
 9215591, 
 1, 
 18734200587, 
 2,
 5, 
 6, 
 17, 
 15, 
 15,
 634000, 
 133949, 
 (SELECT id FROM stat_types WHERE code = 'ATK_PCT'), 
 63,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    22,
    0,
    22
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 22 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    6,
    0,
    2
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 2 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'),
    7,
    1,
    7
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_DMG')
    AND is_ancient = 0
    AND 7 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_FLAT'),
    14,
    0,
    -10
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_FLAT')
    AND is_ancient = 0
    AND -10 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 27912)
AND slot_number = 2;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 27912), 
    @last_rune_id, 
    2
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 27912);

-- Rune ID: 32675635186

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 3 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(32675635186, 
 9215591, 
 1, 
 18734200587, 
 3,
 5, 
 6, 
 5, 
 15, 
 15,
 570600, 
 128530, 
 (SELECT id FROM stat_types WHERE code = 'DEF_FLAT'), 
 160,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 357, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    17,
    0,
    17
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 17 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    10,
    0,
    6
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 6 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    6,
    0,
    -1
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND -1 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'),
    8,
    1,
    8
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_DMG')
    AND is_ancient = 0
    AND 8 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_upgrades 
(rune_id, level_reached, stat_type_id, old_value, new_value, upgrade_date)
SELECT 
    @last_rune_id,
    3,
    (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'),
    8.0,
    8.0,
    NOW();

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 27912)
AND slot_number = 3;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 27912), 
    @last_rune_id, 
    3
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 27912);

-- Rune ID: 27572184599

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 4 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_DMG')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(27572184599, 
 9215591, 
 1, 
 18734200587, 
 4,
 5, 
 6, 
 5, 
 15, 
 15,
 627660, 
 131383, 
 (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'), 
 80,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    13,
    1,
    5
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 5 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_FLAT'),
    23,
    0,
    3
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_FLAT')
    AND is_ancient = 0
    AND 3 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    15,
    0,
    15
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 15 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    8,
    0,
    4
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 4 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 27912)
AND slot_number = 4;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 27912), 
    @last_rune_id, 
    4
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 27912);

-- Rune ID: 41596907956

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 5 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(41596907956, 
 9215591, 
 1, 
 18734200587, 
 5,
 5, 
 6, 
 5, 
 15, 
 15,
 608640, 
 130432, 
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 2448,
 (SELECT id FROM stat_types WHERE code = 'ATK_FLAT'), 
 10, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    10,
    0,
    6
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 6 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    6,
    0,
    6
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 6 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'),
    18,
    0,
    18
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_DMG')
    AND is_ancient = 0
    AND 18 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    10,
    1,
    0
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 0 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_upgrades 
(rune_id, level_reached, stat_type_id, old_value, new_value, upgrade_date)
SELECT 
    @last_rune_id,
    3,
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    0.0,
    10.0,
    NOW();

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 27912)
AND slot_number = 5;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 27912), 
    @last_rune_id, 
    5
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 27912);

-- Rune ID: 41621556179

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 6 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(41621556179, 
 9215591, 
 1, 
 18734200587, 
 6,
 5, 
 6, 
 5, 
 15, 
 15,
 592790, 
 129639, 
 (SELECT id FROM stat_types WHERE code = 'ATK_PCT'), 
 63,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    9,
    0,
    9
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 9 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    16,
    0,
    12
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 12 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_FLAT'),
    330,
    0,
    -73
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_FLAT')
    AND is_ancient = 0
    AND -73 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'),
    6,
    1,
    6
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_DMG')
    AND is_ancient = 0
    AND 6 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_upgrades 
(rune_id, level_reached, stat_type_id, old_value, new_value, upgrade_date)
SELECT 
    @last_rune_id,
    3,
    (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'),
    6.0,
    6.0,
    NOW();

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 27912)
AND slot_number = 6;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 27912), 
    @last_rune_id, 
    6
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 27912);

-- Rune ID: 42063235651

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 1 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(42063235651, 
 9215591, 
 1, 
 18737349841, 
 1,
 5, 
 6, 
 3, 
 15, 
 12,
 481840, 
 68778, 
 (SELECT id FROM stat_types WHERE code = 'ATK_FLAT'), 
 118,
 (SELECT id FROM stat_types WHERE code = 'HP_PCT'), 
 6, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    8,
    0,
    3
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 3 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ACC'),
    5,
    0,
    5
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ACC')
    AND is_ancient = 0
    AND 5 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    20,
    0,
    16
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 16 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_FLAT'),
    173,
    0,
    -271
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_FLAT')
    AND is_ancient = 0
    AND -271 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 19612)
AND slot_number = 1;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 19612), 
    @last_rune_id, 
    1
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 19612);

-- Rune ID: 44099571948

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 2 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(44099571948, 
 9215591, 
 1, 
 18737349841, 
 2,
 5, 
 6, 
 3, 
 15, 
 12,
 443800, 
 66190, 
 (SELECT id FROM stat_types WHERE code = 'ATK_PCT'), 
 47,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    11,
    0,
    11
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 11 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_FLAT'),
    302,
    0,
    302
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_FLAT')
    AND is_ancient = 0
    AND 302 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'),
    19,
    0,
    19
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_DMG')
    AND is_ancient = 0
    AND 19 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_FLAT'),
    11,
    0,
    11
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_FLAT')
    AND is_ancient = 0
    AND 11 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 19612)
AND slot_number = 2;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 19612), 
    @last_rune_id, 
    2
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 19612);

-- Rune ID: 38032808507

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 6 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(38032808507, 
 9215591, 
 1, 
 18737349841, 
 6,
 5, 
 6, 
 1, 
 15, 
 15,
 323340, 
 124174, 
 (SELECT id FROM stat_types WHERE code = 'ATK_PCT'), 
 63,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'),
    4,
    0,
    4
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_DMG')
    AND is_ancient = 0
    AND 4 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    20,
    0,
    16
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 16 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_FLAT'),
    196,
    0,
    -231
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_FLAT')
    AND is_ancient = 0
    AND -231 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    5,
    1,
    5
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 5 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_upgrades 
(rune_id, level_reached, stat_type_id, old_value, new_value, upgrade_date)
SELECT 
    @last_rune_id,
    3,
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    5.0,
    5.0,
    NOW();

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 19612)
AND slot_number = 6;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 19612), 
    @last_rune_id, 
    6
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 19612);

-- Rune ID: 24341570752

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 1 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(24341570752, 
 9215591, 
 1, 
 18899106877, 
 1,
 5, 
 6, 
 10, 
 15, 
 15,
 722760, 
 136138, 
 (SELECT id FROM stat_types WHERE code = 'ATK_FLAT'), 
 160,
 (SELECT id FROM stat_types WHERE code = 'ACC'), 
 4, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    29,
    0,
    23
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 23 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    5,
    0,
    1
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 1 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    6,
    1,
    -1
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND -1 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    6,
    0,
    6
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 6 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 14412)
AND slot_number = 1;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 14412), 
    @last_rune_id, 
    1
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 14412);

-- Rune ID: 41671596033

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 2 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(41671596033, 
 9215591, 
 1, 
 18899106877, 
 2,
 5, 
 6, 
 10, 
 15, 
 15,
 760800, 
 138040, 
 (SELECT id FROM stat_types WHERE code = 'SPD'), 
 42,
 (SELECT id FROM stat_types WHERE code = 'RES'), 
 4, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    5,
    1,
    5
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 5 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    18,
    0,
    11
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 11 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    21,
    0,
    14
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND 14 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    6,
    0,
    6
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 6 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 14412)
AND slot_number = 2;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 14412), 
    @last_rune_id, 
    2
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 14412);

-- Rune ID: 31999193735

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 3 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(31999193735, 
 9215591, 
 1, 
 18899106877, 
 3,
 5, 
 6, 
 10, 
 15, 
 12,
 523050, 
 62152, 
 (SELECT id FROM stat_types WHERE code = 'DEF_FLAT'), 
 118,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ACC'),
    8,
    0,
    8
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ACC')
    AND is_ancient = 0
    AND 8 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    7,
    1,
    4
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 4 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    21,
    0,
    21
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 21 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    13,
    0,
    8
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 8 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 14412)
AND slot_number = 3;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 14412), 
    @last_rune_id, 
    3
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 14412);

-- Rune ID: 24157153668

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 4 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_DMG')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(24157153668, 
 9215591, 
 1, 
 18899106877, 
 4,
 5, 
 6, 
 6, 
 15, 
 15,
 456480, 
 131053, 
 (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'), 
 80,
 (SELECT id FROM stat_types WHERE code = 'ACC'), 
 6, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    16,
    0,
    12
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 12 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    6,
    1,
    6
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 6 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    13,
    0,
    7
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 7 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    8,
    0,
    1
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 1 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 14412)
AND slot_number = 4;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 14412), 
    @last_rune_id, 
    4
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 14412);

-- Rune ID: 35201262724

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 5 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(35201262724, 
 9215591, 
 1, 
 18899106877, 
 5,
 5, 
 6, 
 10, 
 15, 
 15,
 608640, 
 130432, 
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 2448,
 (SELECT id FROM stat_types WHERE code = 'ACC'), 
 8, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    15,
    0,
    15
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 15 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    9,
    1,
    3
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND 3 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_FLAT'),
    24,
    0,
    -4
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_FLAT')
    AND is_ancient = 0
    AND -4 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    15,
    0,
    5
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 5 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 14412)
AND slot_number = 5;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 14412), 
    @last_rune_id, 
    5
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 14412);

-- Rune ID: 30760820568

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 6 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(30760820568, 
 9215591, 
 1, 
 18899106877, 
 6,
 5, 
 6, 
 6, 
 15, 
 15,
 377230, 
 125661, 
 (SELECT id FROM stat_types WHERE code = 'ATK_PCT'), 
 63,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    8,
    0,
    2
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 2 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    12,
    0,
    8
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 8 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ACC'),
    21,
    0,
    21
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ACC')
    AND is_ancient = 0
    AND 21 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    8,
    0,
    1
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND 1 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 14412)
AND slot_number = 6;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 14412), 
    @last_rune_id, 
    6
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 14412);

-- Rune ID: 45289880056

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 1 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(45289880056, 
 9215591, 
 1, 
 18925443868, 
 1,
 15, 
 16, 
 7, 
 15, 
 12,
 578208, 
 75333, 
 (SELECT id FROM stat_types WHERE code = 'ATK_FLAT'), 
 118,
 (SELECT id FROM stat_types WHERE code = 'ATK_PCT'), 
 5, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    11,
    0,
    11
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 1
    AND 11 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'RES'),
    7,
    1,
    7
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'RES')
    AND is_ancient = 1
    AND 7 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    5,
    0,
    0
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 1
    AND 0 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    30,
    0,
    24
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 1
    AND 24 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 14602)
AND slot_number = 1;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 14602), 
    @last_rune_id, 
    1
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 14602);

-- Rune ID: 23534059292

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 2 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(23534059292, 
 9215591, 
 1, 
 18925443868, 
 2,
 5, 
 6, 
 18, 
 15, 
 15,
 634000, 
 133949, 
 (SELECT id FROM stat_types WHERE code = 'HP_PCT'), 
 63,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    5,
    0,
    -4
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND -4 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    23,
    0,
    16
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 16 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    9,
    0,
    9
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 9 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    9,
    1,
    4
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 4 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_upgrades 
(rune_id, level_reached, stat_type_id, old_value, new_value, upgrade_date)
SELECT 
    @last_rune_id,
    3,
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    4.0,
    9.0,
    NOW();

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 14602)
AND slot_number = 2;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 14602), 
    @last_rune_id, 
    2
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 14602);

-- Rune ID: 24789433009

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 3 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(24789433009, 
 9215591, 
 1, 
 18925443868, 
 3,
 5, 
 6, 
 14, 
 15, 
 15,
 475500, 
 125461, 
 (SELECT id FROM stat_types WHERE code = 'DEF_FLAT'), 
 160,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    18,
    0,
    14
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 14 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    10,
    0,
    10
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 10 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    7,
    0,
    0
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND 0 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    9,
    1,
    -1
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND -1 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_upgrades 
(rune_id, level_reached, stat_type_id, old_value, new_value, upgrade_date)
SELECT 
    @last_rune_id,
    3,
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    -1.0,
    9.0,
    NOW();

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 14602)
AND slot_number = 3;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 14602), 
    @last_rune_id, 
    3
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 14602);

-- Rune ID: 21532270774

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 4 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_DMG')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(21532270774, 
 9215591, 
 1, 
 18925443868, 
 4,
 5, 
 6, 
 7, 
 15, 
 15,
 399420, 
 127171, 
 (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'), 
 80,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    10,
    0,
    10
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 10 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    8,
    0,
    2
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND 2 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    21,
    0,
    14
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 14 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    7,
    0,
    1
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 1 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 14602)
AND slot_number = 4;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 14602), 
    @last_rune_id, 
    4
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 14602);

-- Rune ID: 41751660284

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 5 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(41751660284, 
 9215591, 
 1, 
 18925443868, 
 5,
 15, 
 16, 
 7, 
 15, 
 12,
 486912, 
 69123, 
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 1800,
 (SELECT id FROM stat_types WHERE code = 'DEF_FLAT'), 
 14, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    12,
    0,
    7
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 1
    AND 7 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    11,
    0,
    11
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 1
    AND 11 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    15,
    0,
    10
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 1
    AND 10 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    11,
    1,
    2
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 1
    AND 2 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_upgrades 
(rune_id, level_reached, stat_type_id, old_value, new_value, upgrade_date)
SELECT 
    @last_rune_id,
    3,
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    2.0,
    11.0,
    NOW();

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 14602)
AND slot_number = 5;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 14602), 
    @last_rune_id, 
    5
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 14602);

-- Rune ID: 36200895772

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 6 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(36200895772, 
 9215591, 
 1, 
 18925443868, 
 6,
 5, 
 6, 
 7, 
 15, 
 15,
 431120, 
 129327, 
 (SELECT id FROM stat_types WHERE code = 'ATK_PCT'), 
 63,
 (SELECT id FROM stat_types WHERE code = 'DEF_PCT'), 
 5, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'),
    14,
    0,
    14
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_DMG')
    AND is_ancient = 0
    AND 14 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    5,
    0,
    5
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 5 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    17,
    0,
    13
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 13 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    8,
    1,
    1
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 1 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_upgrades 
(rune_id, level_reached, stat_type_id, old_value, new_value, upgrade_date)
SELECT 
    @last_rune_id,
    3,
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    1.0,
    8.0,
    NOW();

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 14602)
AND slot_number = 6;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 14602), 
    @last_rune_id, 
    6
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 14602);

-- Rune ID: 39645343977

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 1 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(39645343977, 
 9215591, 
 1, 
 18982768957, 
 1,
 15, 
 16, 
 14, 
 15, 
 12,
 795036, 
 78572, 
 (SELECT id FROM stat_types WHERE code = 'ATK_FLAT'), 
 118,
 (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'), 
 4, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_FLAT'),
    292,
    0,
    -198
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_FLAT')
    AND is_ancient = 1
    AND -198 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'RES'),
    21,
    0,
    21
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'RES')
    AND is_ancient = 1
    AND 21 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    11,
    0,
    6
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 1
    AND 6 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    14,
    1,
    5
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 1
    AND 5 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_upgrades 
(rune_id, level_reached, stat_type_id, old_value, new_value, upgrade_date)
SELECT 
    @last_rune_id,
    3,
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    5.0,
    14.0,
    NOW();

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 16212)
AND slot_number = 1;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 16212), 
    @last_rune_id, 
    1
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 16212);

-- Rune ID: 27269503013

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 3 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(27269503013, 
 9215591, 
 1, 
 18982768957, 
 3,
 5, 
 6, 
 14, 
 15, 
 12,
 523050, 
 64008, 
 (SELECT id FROM stat_types WHERE code = 'DEF_FLAT'), 
 118,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 159, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    6,
    0,
    6
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 6 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    10,
    0,
    6
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 6 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    23,
    0,
    16
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 16 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    8,
    0,
    2
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND 2 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 16212)
AND slot_number = 3;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 16212), 
    @last_rune_id, 
    3
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 16212);

-- Rune ID: 31980082515

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 4 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_DMG')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(31980082515, 
 9215591, 
 1, 
 18982768957, 
 4,
 5, 
 6, 
 14, 
 15, 
 15,
 570600, 
 130554, 
 (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'), 
 80,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_FLAT'),
    151,
    0,
    -335
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_FLAT')
    AND is_ancient = 0
    AND -335 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    23,
    0,
    19
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 19 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    11,
    1,
    4
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 4 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    6,
    0,
    6
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 6 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 16212)
AND slot_number = 4;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 16212), 
    @last_rune_id, 
    4
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 16212);

-- Rune ID: 40939997410

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 5 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(40939997410, 
 9215591, 
 1, 
 18982768957, 
 5,
 5, 
 6, 
 15, 
 15, 
 12,
 507200, 
 63159, 
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 1800,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    22,
    0,
    16
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 16 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    9,
    1,
    2
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND 2 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    11,
    0,
    7
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 7 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ACC'),
    6,
    0,
    6
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ACC')
    AND is_ancient = 0
    AND 6 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 16212)
AND slot_number = 5;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 16212), 
    @last_rune_id, 
    5
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 16212);

-- Rune ID: 43813719780

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 6 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(43813719780, 
 9215591, 
 1, 
 18982768957, 
 6,
 5, 
 6, 
 15, 
 15, 
 15,
 592790, 
 131742, 
 (SELECT id FROM stat_types WHERE code = 'DEF_PCT'), 
 63,
 (SELECT id FROM stat_types WHERE code = 'DEF_FLAT'), 
 15, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ACC'),
    11,
    0,
    11
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ACC')
    AND is_ancient = 0
    AND 11 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_FLAT'),
    14,
    0,
    14
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_FLAT')
    AND is_ancient = 0
    AND 14 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    17,
    0,
    15
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 15 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_FLAT'),
    283,
    0,
    -146
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_FLAT')
    AND is_ancient = 0
    AND -146 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 16212)
AND slot_number = 6;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 16212), 
    @last_rune_id, 
    6
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 16212);

-- Rune ID: 45418540263

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 2 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(45418540263, 
 9215591, 
 1, 
 7566993845, 
 2,
 5, 
 6, 
 17, 
 15, 
 12,
 634000, 
 69949, 
 (SELECT id FROM stat_types WHERE code = 'SPD'), 
 31,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    14,
    0,
    14
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 14 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    12,
    0,
    12
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 12 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    20,
    0,
    20
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND 20 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_FLAT'),
    12,
    0,
    12
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_FLAT')
    AND is_ancient = 0
    AND 12 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 11533)
AND slot_number = 2;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 11533), 
    @last_rune_id, 
    2
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 11533);

-- Rune ID: 40778871397

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 3 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(40778871397, 
 9215591, 
 1, 
 7566993845, 
 3,
 5, 
 6, 
 18, 
 15, 
 12,
 475500, 
 61461, 
 (SELECT id FROM stat_types WHERE code = 'DEF_FLAT'), 
 118,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ACC'),
    12,
    0,
    12
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ACC')
    AND is_ancient = 0
    AND 12 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    21,
    0,
    14
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND 14 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    9,
    1,
    5
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 5 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    12,
    0,
    8
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 8 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 11533)
AND slot_number = 3;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 11533), 
    @last_rune_id, 
    3
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 11533);

-- Rune ID: 30525082886

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 4 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(30525082886, 
 9215591, 
 1, 
 7566993845, 
 4,
 5, 
 6, 
 15, 
 15, 
 15,
 627660, 
 133609, 
 (SELECT id FROM stat_types WHERE code = 'DEF_PCT'), 
 63,
 (SELECT id FROM stat_types WHERE code = 'DEF_FLAT'), 
 17, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ACC'),
    7,
    1,
    7
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ACC')
    AND is_ancient = 0
    AND 7 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_FLAT'),
    10,
    0,
    -15
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_FLAT')
    AND is_ancient = 0
    AND -15 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    22,
    0,
    22
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 22 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    9,
    0,
    5
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 5 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 11533)
AND slot_number = 4;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 11533), 
    @last_rune_id, 
    4
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 11533);

-- Rune ID: 32917973546

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 5 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(32917973546, 
 9215591, 
 1, 
 7566993845, 
 5,
 5, 
 6, 
 17, 
 15, 
 12,
 507200, 
 63159, 
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 1800,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    20,
    0,
    14
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND 14 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    11,
    1,
    6
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 6 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    12,
    0,
    8
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 8 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    5,
    0,
    -1
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND -1 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 11533)
AND slot_number = 5;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 11533), 
    @last_rune_id, 
    5
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 11533);

-- Rune ID: 37156141573

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 1 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(37156141573, 
 9215591, 
 1, 
 7589263808, 
 1,
 5, 
 6, 
 6, 
 15, 
 15,
 421610, 
 128680, 
 (SELECT id FROM stat_types WHERE code = 'ATK_FLAT'), 
 160,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ACC'),
    5,
    0,
    5
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ACC')
    AND is_ancient = 0
    AND 5 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    24,
    0,
    19
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 19 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    8,
    0,
    0
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 0 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    4,
    0,
    4
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 4 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 18713)
AND slot_number = 1;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 18713), 
    @last_rune_id, 
    1
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 18713);

-- Rune ID: 41696107852

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 2 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(41696107852, 
 9215591, 
 1, 
 7589263808, 
 2,
 5, 
 6, 
 18, 
 15, 
 12,
 697400, 
 73344, 
 (SELECT id FROM stat_types WHERE code = 'DEF_PCT'), 
 47,
 (SELECT id FROM stat_types WHERE code = 'SPD'), 
 4, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'RES'),
    15,
    0,
    15
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'RES')
    AND is_ancient = 0
    AND 15 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_FLAT'),
    16,
    0,
    3
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_FLAT')
    AND is_ancient = 0
    AND 3 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    19,
    0,
    12
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 12 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    7,
    1,
    2
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 2 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_upgrades 
(rune_id, level_reached, stat_type_id, old_value, new_value, upgrade_date)
SELECT 
    @last_rune_id,
    3,
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    2.0,
    7.0,
    NOW();

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 18713)
AND slot_number = 2;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 18713), 
    @last_rune_id, 
    2
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 18713);

-- Rune ID: 20126511233

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 3 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(20126511233, 
 9215591, 
 1, 
 7589263808, 
 3,
 5, 
 6, 
 6, 
 15, 
 12,
 380400, 
 61877, 
 (SELECT id FROM stat_types WHERE code = 'DEF_FLAT'), 
 118,
 (SELECT id FROM stat_types WHERE code = 'RES'), 
 6, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    4,
    1,
    4
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 4 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    13,
    0,
    6
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 6 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    16,
    0,
    12
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 12 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ACC'),
    7,
    0,
    7
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ACC')
    AND is_ancient = 0
    AND 7 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 18713)
AND slot_number = 3;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 18713), 
    @last_rune_id, 
    3
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 18713);

-- Rune ID: 44800545253

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 5 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(44800545253, 
 9215591, 
 1, 
 7589263808, 
 5,
 5, 
 6, 
 16, 
 15, 
 12,
 557920, 
 65875, 
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 1800,
 (SELECT id FROM stat_types WHERE code = 'RES'), 
 7, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    5,
    0,
    -1
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND -1 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'),
    6,
    0,
    6
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_DMG')
    AND is_ancient = 0
    AND 6 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    20,
    0,
    16
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 16 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ACC'),
    5,
    0,
    5
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ACC')
    AND is_ancient = 0
    AND 5 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 18713)
AND slot_number = 5;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 18713), 
    @last_rune_id, 
    5
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 18713);

-- Rune ID: 42064494384

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 2 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(42064494384, 
 9215591, 
 1, 
 7696365443, 
 2,
 5, 
 6, 
 3, 
 15, 
 15,
 443800, 
 130190, 
 (SELECT id FROM stat_types WHERE code = 'SPD'), 
 42,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_FLAT'),
    33,
    0,
    16
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_FLAT')
    AND is_ancient = 0
    AND 16 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    16,
    0,
    16
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 16 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_FLAT'),
    11,
    0,
    11
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_FLAT')
    AND is_ancient = 0
    AND 11 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'),
    6,
    0,
    6
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_DMG')
    AND is_ancient = 0
    AND 6 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 18913)
AND slot_number = 2;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 18913), 
    @last_rune_id, 
    2
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 18913);

-- Rune ID: 42854680207

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 4 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_DMG')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(42854680207, 
 9215591, 
 1, 
 7696365443, 
 4,
 5, 
 6, 
 8, 
 15, 
 15,
 370890, 
 126421, 
 (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'), 
 80,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    5,
    0,
    0
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND 0 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_FLAT'),
    14,
    0,
    14
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_FLAT')
    AND is_ancient = 0
    AND 14 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    23,
    0,
    19
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 19 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    7,
    0,
    1
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 1 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 18913)
AND slot_number = 4;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 18913), 
    @last_rune_id, 
    4
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 18913);

-- Rune ID: 22159657848

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 6 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(22159657848, 
 9215591, 
 1, 
 7696365443, 
 6,
 5, 
 6, 
 16, 
 15, 
 15,
 538900, 
 128856, 
 (SELECT id FROM stat_types WHERE code = 'ATK_PCT'), 
 63,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    10,
    1,
    0
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND 0 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    8,
    0,
    -2
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND -2 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    21,
    0,
    16
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 16 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    6,
    0,
    6
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 6 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 18913)
AND slot_number = 6;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 18913), 
    @last_rune_id, 
    6
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 18913);

-- Rune ID: 31906403871

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 1 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(31906403871, 
 9215591, 
 1, 
 7708669644, 
 1,
 5, 
 6, 
 4, 
 15, 
 12,
 451725, 
 68179, 
 (SELECT id FROM stat_types WHERE code = 'ATK_FLAT'), 
 118,
 (SELECT id FROM stat_types WHERE code = 'RES'), 
 5, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    4,
    0,
    4
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 4 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    26,
    0,
    20
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 20 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    8,
    1,
    4
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 4 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'),
    5,
    0,
    5
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_DMG')
    AND is_ancient = 0
    AND 5 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 22013)
AND slot_number = 1;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 22013), 
    @last_rune_id, 
    1
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 22013);

-- Rune ID: 41962518199

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 2 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(41962518199, 
 9215591, 
 1, 
 7708669644, 
 2,
 5, 
 6, 
 15, 
 15, 
 12,
 697400, 
 73344, 
 (SELECT id FROM stat_types WHERE code = 'ATK_PCT'), 
 47,
 (SELECT id FROM stat_types WHERE code = 'ATK_FLAT'), 
 10, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ACC'),
    7,
    0,
    7
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ACC')
    AND is_ancient = 0
    AND 7 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    11,
    0,
    11
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 11 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'),
    14,
    0,
    14
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_DMG')
    AND is_ancient = 0
    AND 14 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    6,
    0,
    6
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 6 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 22013)
AND slot_number = 2;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 22013), 
    @last_rune_id, 
    2
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 22013);

-- Rune ID: 42063975290

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 3 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(42063975290, 
 9215591, 
 1, 
 7708669644, 
 3,
 5, 
 6, 
 4, 
 15, 
 12,
 309075, 
 58017, 
 (SELECT id FROM stat_types WHERE code = 'DEF_FLAT'), 
 118,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'),
    18,
    0,
    18
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_DMG')
    AND is_ancient = 0
    AND 18 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    6,
    0,
    6
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 6 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    23,
    0,
    16
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND 16 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ACC'),
    7,
    0,
    7
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ACC')
    AND is_ancient = 0
    AND 7 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 22013)
AND slot_number = 3;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 22013), 
    @last_rune_id, 
    3
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 22013);

-- Rune ID: 41532419115

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 4 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(41532419115, 
 9215591, 
 1, 
 7708669644, 
 4,
 5, 
 6, 
 14, 
 15, 
 15,
 627660, 
 133609, 
 (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'), 
 58,
 (SELECT id FROM stat_types WHERE code = 'ACC'), 
 8, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    12,
    0,
    5
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND 5 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_FLAT'),
    20,
    0,
    20
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_FLAT')
    AND is_ancient = 0
    AND 20 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    16,
    0,
    12
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 12 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    6,
    0,
    -3
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND -3 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 22013)
AND slot_number = 4;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 22013), 
    @last_rune_id, 
    4
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 22013);

-- Rune ID: 32465263642

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 5 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(32465263642, 
 9215591, 
 1, 
 7708669644, 
 5,
 5, 
 6, 
 4, 
 15, 
 12,
 329680, 
 59485, 
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 1800,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ACC'),
    5,
    0,
    5
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ACC')
    AND is_ancient = 0
    AND 5 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    5,
    1,
    5
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 5 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    28,
    0,
    21
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 21 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    6,
    0,
    3
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 3 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 22013)
AND slot_number = 5;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 22013), 
    @last_rune_id, 
    5
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 22013);

-- Rune ID: 40766811992

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 1 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(40766811992, 
 9215591, 
 1, 
 7775784823, 
 1,
 5, 
 6, 
 14, 
 15, 
 15,
 602300, 
 132251, 
 (SELECT id FROM stat_types WHERE code = 'ATK_FLAT'), 
 160,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    7,
    0,
    0
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 0 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    10,
    1,
    3
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 3 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    21,
    0,
    17
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 17 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_FLAT'),
    220,
    0,
    -223
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_FLAT')
    AND is_ancient = 0
    AND -223 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 22113)
AND slot_number = 1;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 22113), 
    @last_rune_id, 
    1
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 22113);

-- Rune ID: 44273096054

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 2 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(44273096054, 
 9215591, 
 1, 
 7775784823, 
 2,
 5, 
 6, 
 18, 
 15, 
 12,
 697400, 
 73344, 
 (SELECT id FROM stat_types WHERE code = 'HP_PCT'), 
 47,
 (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'), 
 5, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    20,
    0,
    13
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND 13 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'),
    4,
    0,
    4
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_DMG')
    AND is_ancient = 0
    AND 4 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    9,
    0,
    9
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 9 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ACC'),
    7,
    0,
    7
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ACC')
    AND is_ancient = 0
    AND 7 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 22113)
AND slot_number = 2;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 22113), 
    @last_rune_id, 
    2
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 22113);

-- Rune ID: 41155528670

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 3 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(41155528670, 
 9215591, 
 1, 
 7775784823, 
 3,
 15, 
 16, 
 14, 
 15, 
 12,
 627660, 
 69609, 
 (SELECT id FROM stat_types WHERE code = 'DEF_FLAT'), 
 118,
 (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'), 
 5, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    11,
    0,
    11
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 1
    AND 11 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    15,
    0,
    10
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 1
    AND 10 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    8,
    1,
    3
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 1
    AND 3 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ACC'),
    17,
    0,
    17
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ACC')
    AND is_ancient = 1
    AND 17 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 22113)
AND slot_number = 3;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 22113), 
    @last_rune_id, 
    3
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 22113);

-- Rune ID: 33291982539

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 5 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(33291982539, 
 9215591, 
 1, 
 7775784823, 
 5,
 5, 
 6, 
 16, 
 15, 
 12,
 557920, 
 65875, 
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 1800,
 (SELECT id FROM stat_types WHERE code = 'ATK_PCT'), 
 5, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    21,
    0,
    14
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND 14 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'),
    8,
    1,
    8
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_DMG')
    AND is_ancient = 0
    AND 8 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    15,
    0,
    11
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 11 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    6,
    0,
    6
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 6 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 22113)
AND slot_number = 5;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 22113), 
    @last_rune_id, 
    5
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 22113);

-- Rune ID: 32347967394

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 1 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(32347967394, 
 9215591, 
 1, 
 7948934438, 
 1,
 5, 
 6, 
 4, 
 15, 
 15,
 391495, 
 127889, 
 (SELECT id FROM stat_types WHERE code = 'ATK_FLAT'), 
 160,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    5,
    0,
    1
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 1 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    28,
    0,
    21
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 21 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    6,
    1,
    6
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 6 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'),
    5,
    0,
    5
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_DMG')
    AND is_ancient = 0
    AND 5 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 15513)
AND slot_number = 1;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 15513), 
    @last_rune_id, 
    1
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 15513);

-- Rune ID: 35594776469

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 2 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(35594776469, 
 9215591, 
 1, 
 7948934438, 
 2,
 5, 
 6, 
 11, 
 15, 
 15,
 697400, 
 137344, 
 (SELECT id FROM stat_types WHERE code = 'DEF_PCT'), 
 63,
 (SELECT id FROM stat_types WHERE code = 'ATK_FLAT'), 
 17, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    19,
    0,
    19
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 19 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    6,
    0,
    -1
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND -1 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'),
    11,
    0,
    11
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_DMG')
    AND is_ancient = 0
    AND 11 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    10,
    1,
    3
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 3 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_upgrades 
(rune_id, level_reached, stat_type_id, old_value, new_value, upgrade_date)
SELECT 
    @last_rune_id,
    3,
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    3.0,
    10.0,
    NOW();

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 15513)
AND slot_number = 2;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 15513), 
    @last_rune_id, 
    2
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 15513);

-- Rune ID: 26144901504

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 3 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(26144901504, 
 9215591, 
 1, 
 7948934438, 
 3,
 5, 
 6, 
 4, 
 15, 
 15,
 309075, 
 122017, 
 (SELECT id FROM stat_types WHERE code = 'DEF_FLAT'), 
 160,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    20,
    0,
    20
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 20 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'),
    7,
    1,
    7
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_DMG')
    AND is_ancient = 0
    AND 7 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    6,
    0,
    2
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 2 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    6,
    0,
    -1
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND -1 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 15513)
AND slot_number = 3;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 15513), 
    @last_rune_id, 
    3
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 15513);

-- Rune ID: 40858329997

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 4 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(40858329997, 
 9215591, 
 1, 
 7948934438, 
 4,
 5, 
 6, 
 18, 
 15, 
 15,
 627660, 
 133609, 
 (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'), 
 58,
 (SELECT id FROM stat_types WHERE code = 'RES'), 
 5, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    16,
    0,
    13
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 13 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    5,
    0,
    -2
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND -2 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    12,
    0,
    5
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND 5 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_FLAT'),
    268,
    0,
    -11
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_FLAT')
    AND is_ancient = 0
    AND -11 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 15513)
AND slot_number = 4;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 15513), 
    @last_rune_id, 
    4
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 15513);

-- Rune ID: 40767805932

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 5 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(40767805932, 
 9215591, 
 1, 
 7948934438, 
 5,
 5, 
 6, 
 15, 
 15, 
 15,
 507200, 
 127159, 
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 2448,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    20,
    0,
    17
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 17 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    6,
    1,
    0
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 0 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    8,
    0,
    2
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 2 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_FLAT'),
    16,
    0,
    -8
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_FLAT')
    AND is_ancient = 0
    AND -8 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 15513)
AND slot_number = 5;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 15513), 
    @last_rune_id, 
    5
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 15513);

-- Rune ID: 40425277994

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 1 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(40425277994, 
 9215591, 
 1, 
 8040075204, 
 1,
 5, 
 6, 
 7, 
 15, 
 15,
 481840, 
 132778, 
 (SELECT id FROM stat_types WHERE code = 'ATK_FLAT'), 
 160,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 225, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    11,
    0,
    7
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 7 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'RES'),
    23,
    0,
    23
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'RES')
    AND is_ancient = 0
    AND 23 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    10,
    1,
    3
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 3 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    7,
    0,
    0
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 0 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 23313)
AND slot_number = 1;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 23313), 
    @last_rune_id, 
    1
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 23313);

-- Rune ID: 33307453875

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 2 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(33307453875, 
 9215591, 
 1, 
 8040075204, 
 2,
 5, 
 6, 
 15, 
 15, 
 15,
 697400, 
 137344, 
 (SELECT id FROM stat_types WHERE code = 'DEF_PCT'), 
 63,
 (SELECT id FROM stat_types WHERE code = 'ATK_FLAT'), 
 18, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_FLAT'),
    475,
    0,
    48
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_FLAT')
    AND is_ancient = 0
    AND 48 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    7,
    0,
    4
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 4 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'RES'),
    14,
    0,
    14
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'RES')
    AND is_ancient = 0
    AND 14 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    15,
    0,
    11
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 11 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 23313)
AND slot_number = 2;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 23313), 
    @last_rune_id, 
    2
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 23313);

-- Rune ID: 33053183133

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 3 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(33053183133, 
 9215591, 
 1, 
 8040075204, 
 3,
 5, 
 6, 
 18, 
 15, 
 12,
 475500, 
 61461, 
 (SELECT id FROM stat_types WHERE code = 'DEF_FLAT'), 
 118,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    11,
    0,
    6
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 6 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    13,
    1,
    8
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 8 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    13,
    0,
    6
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND 6 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ACC'),
    21,
    0,
    21
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ACC')
    AND is_ancient = 0
    AND 21 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 23313)
AND slot_number = 3;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 23313), 
    @last_rune_id, 
    3
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 23313);

-- Rune ID: 41585263803

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 4 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(41585263803, 
 9215591, 
 1, 
 8040075204, 
 4,
 5, 
 6, 
 7, 
 15, 
 15,
 399420, 
 127171, 
 (SELECT id FROM stat_types WHERE code = 'HP_PCT'), 
 63,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_FLAT'),
    310,
    0,
    -55
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_FLAT')
    AND is_ancient = 0
    AND -55 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    11,
    0,
    7
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 7 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    22,
    0,
    15
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND 15 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ACC'),
    6,
    0,
    6
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ACC')
    AND is_ancient = 0
    AND 6 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 23313)
AND slot_number = 4;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 23313), 
    @last_rune_id, 
    4
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 23313);

-- Rune ID: 33822543618

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 5 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(33822543618, 
 9215591, 
 1, 
 8040075204, 
 5,
 5, 
 6, 
 18, 
 15, 
 15,
 557920, 
 129875, 
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 2448,
 (SELECT id FROM stat_types WHERE code = 'HP_PCT'), 
 8, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    18,
    0,
    14
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 14 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    11,
    1,
    4
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND 4 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ACC'),
    16,
    0,
    16
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ACC')
    AND is_ancient = 0
    AND 16 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_FLAT'),
    15,
    0,
    -1
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_FLAT')
    AND is_ancient = 0
    AND -1 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 23313)
AND slot_number = 5;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 23313), 
    @last_rune_id, 
    5
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 23313);

-- Rune ID: 25451641199

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 6 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(25451641199, 
 9215591, 
 1, 
 8040075204, 
 6,
 5, 
 6, 
 15, 
 15, 
 15,
 592790, 
 131742, 
 (SELECT id FROM stat_types WHERE code = 'HP_PCT'), 
 63,
 (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'), 
 7, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    6,
    0,
    0
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 0 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    8,
    1,
    5
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 5 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    11,
    0,
    5
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND 5 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ACC'),
    22,
    0,
    22
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ACC')
    AND is_ancient = 0
    AND 22 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 23313)
AND slot_number = 6;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 23313), 
    @last_rune_id, 
    6
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 23313);

-- Rune ID: 22118277933

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 1 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(22118277933, 
 9215591, 
 1, 
 8170641929, 
 1,
 5, 
 6, 
 1, 
 15, 
 15,
 361380, 
 127019, 
 (SELECT id FROM stat_types WHERE code = 'ATK_FLAT'), 
 160,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    11,
    1,
    4
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 4 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    6,
    0,
    6
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 6 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    23,
    0,
    19
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 19 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'),
    5,
    0,
    5
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_DMG')
    AND is_ancient = 0
    AND 5 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 18313)
AND slot_number = 1;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 18313), 
    @last_rune_id, 
    1
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 18313);

-- Rune ID: 30853947510

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 2 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(30853947510, 
 9215591, 
 1, 
 8170641929, 
 2,
 4, 
 5, 
 19, 
 15, 
 9,
 275400, 
 22717, 
 (SELECT id FROM stat_types WHERE code = 'HP_PCT'), 
 29,
 (SELECT id FROM stat_types WHERE code = 'SPD'), 
 5, 
 'heroic',
 9,
 'heroic',
 'heroic',
 4,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    10,
    0,
    10
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND 10 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'),
    9,
    0,
    9
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_DMG')
    AND is_ancient = 0
    AND 9 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    5,
    0,
    5
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 5 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 18313)
AND slot_number = 2;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 18313), 
    @last_rune_id, 
    2
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 18313);

-- Rune ID: 38050012068

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 3 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(38050012068, 
 9215591, 
 1, 
 8170641929, 
 3,
 5, 
 6, 
 1, 
 15, 
 15,
 332850, 
 124885, 
 (SELECT id FROM stat_types WHERE code = 'DEF_FLAT'), 
 160,
 (SELECT id FROM stat_types WHERE code = 'DEF_PCT'), 
 5, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ACC'),
    6,
    0,
    6
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ACC')
    AND is_ancient = 0
    AND 6 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    4,
    0,
    0
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 0 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    30,
    0,
    23
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 23 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_FLAT'),
    361,
    0,
    -170
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_FLAT')
    AND is_ancient = 0
    AND -170 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 18313)
AND slot_number = 3;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 18313), 
    @last_rune_id, 
    3
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 18313);

-- Rune ID: 45515335592

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 4 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(45515335592, 
 9215591, 
 1, 
 8170641929, 
 4,
 5, 
 6, 
 10, 
 15, 
 15,
 684720, 
 134236, 
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 2448,
 (SELECT id FROM stat_types WHERE code = 'ACC'), 
 6, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    10,
    1,
    0
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 0 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    26,
    0,
    26
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 26 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'RES'),
    7,
    0,
    7
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'RES')
    AND is_ancient = 0
    AND 7 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    6,
    0,
    -2
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND -2 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 18313)
AND slot_number = 4;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 18313), 
    @last_rune_id, 
    4
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 18313);

-- Rune ID: 41260425082

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 5 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(41260425082, 
 9215591, 
 1, 
 8170641929, 
 5,
 5, 
 6, 
 7, 
 15, 
 15,
 405760, 
 127602, 
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 2448,
 (SELECT id FROM stat_types WHERE code = 'DEF_PCT'), 
 5, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    22,
    0,
    18
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 18 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'RES'),
    4,
    0,
    4
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'RES')
    AND is_ancient = 0
    AND 4 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    8,
    0,
    2
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 2 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_FLAT'),
    20,
    0,
    -1
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_FLAT')
    AND is_ancient = 0
    AND -1 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 18313)
AND slot_number = 5;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 18313), 
    @last_rune_id, 
    5
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 18313);

-- Rune ID: 31596546391

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 6 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'RES')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(31596546391, 
 9215591, 
 1, 
 8170641929, 
 6,
 5, 
 5, 
 19, 
 15, 
 15,
 260100, 
 65505, 
 (SELECT id FROM stat_types WHERE code = 'RES'), 
 51,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    15,
    0,
    10
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 10 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ACC'),
    7,
    0,
    7
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ACC')
    AND is_ancient = 0
    AND 7 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    5,
    0,
    5
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 5 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    5,
    0,
    5
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND 5 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 18313)
AND slot_number = 6;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 18313), 
    @last_rune_id, 
    6
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 18313);

-- Rune ID: 31562879534

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 1 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(31562879534, 
 9215591, 
 1, 
 8328263324, 
 1,
 5, 
 6, 
 4, 
 15, 
 15,
 451725, 
 132179, 
 (SELECT id FROM stat_types WHERE code = 'ATK_FLAT'), 
 160,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 177, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    12,
    0,
    12
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 12 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'),
    20,
    0,
    20
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_DMG')
    AND is_ancient = 0
    AND 20 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    11,
    1,
    4
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 4 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    6,
    0,
    2
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 2 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 13413)
AND slot_number = 1;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 13413), 
    @last_rune_id, 
    1
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 13413);

-- Rune ID: 44806126869

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 2 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(44806126869, 
 9215591, 
 1, 
 8328263324, 
 2,
 5, 
 6, 
 8, 
 15, 
 15,
 412100, 
 129357, 
 (SELECT id FROM stat_types WHERE code = 'ATK_PCT'), 
 63,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'),
    6,
    1,
    6
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_DMG')
    AND is_ancient = 0
    AND 6 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    16,
    0,
    16
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 16 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    11,
    0,
    7
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 7 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_FLAT'),
    20,
    0,
    5
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_FLAT')
    AND is_ancient = 0
    AND 5 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 13413)
AND slot_number = 2;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 13413), 
    @last_rune_id, 
    2
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 13413);

-- Rune ID: 41010477747

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 3 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(41010477747, 
 9215591, 
 1, 
 8328263324, 
 3,
 5, 
 6, 
 25, 
 15, 
 15,
 523050, 
 126152, 
 (SELECT id FROM stat_types WHERE code = 'DEF_FLAT'), 
 160,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'),
    23,
    0,
    23
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_DMG')
    AND is_ancient = 0
    AND 23 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    6,
    0,
    0
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND 0 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    6,
    0,
    6
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 6 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    11,
    0,
    11
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 11 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 13413)
AND slot_number = 3;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 13413), 
    @last_rune_id, 
    3
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 13413);

-- Rune ID: 31876350329

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 4 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_DMG')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(31876350329, 
 9215591, 
 1, 
 8328263324, 
 4,
 5, 
 6, 
 8, 
 15, 
 15,
 427950, 
 130486, 
 (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'), 
 80,
 (SELECT id FROM stat_types WHERE code = 'DEF_FLAT'), 
 12, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_FLAT'),
    23,
    1,
    5
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_FLAT')
    AND is_ancient = 0
    AND 5 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    17,
    0,
    17
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 17 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    16,
    0,
    9
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 9 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ACC'),
    6,
    0,
    6
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ACC')
    AND is_ancient = 0
    AND 6 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 13413)
AND slot_number = 4;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 13413), 
    @last_rune_id, 
    4
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 13413);

-- Rune ID: 41920045094

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 5 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(41920045094, 
 9215591, 
 1, 
 8328263324, 
 5,
 5, 
 6, 
 8, 
 15, 
 15,
 329680, 
 123485, 
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 2448,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_FLAT'),
    20,
    0,
    -3
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_FLAT')
    AND is_ancient = 0
    AND -3 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    6,
    1,
    6
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 6 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    14,
    0,
    7
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 7 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'),
    24,
    0,
    24
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_DMG')
    AND is_ancient = 0
    AND 24 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 13413)
AND slot_number = 5;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 13413), 
    @last_rune_id, 
    5
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 13413);

-- Rune ID: 42064671810

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 6 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(42064671810, 
 9215591, 
 1, 
 8328263324, 
 6,
 5, 
 6, 
 8, 
 15, 
 15,
 350285, 
 124953, 
 (SELECT id FROM stat_types WHERE code = 'ATK_PCT'), 
 63,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'),
    18,
    0,
    18
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_DMG')
    AND is_ancient = 0
    AND 18 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_FLAT'),
    30,
    1,
    6
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_FLAT')
    AND is_ancient = 0
    AND 6 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    11,
    0,
    11
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 11 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_FLAT'),
    335,
    0,
    -100
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_FLAT')
    AND is_ancient = 0
    AND -100 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 13413)
AND slot_number = 6;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 13413), 
    @last_rune_id, 
    6
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 13413);

-- Rune ID: 39192939185

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 1 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(39192939185, 
 9215591, 
 1, 
 8352076802, 
 1,
 5, 
 6, 
 10, 
 15, 
 12,
 722760, 
 72138, 
 (SELECT id FROM stat_types WHERE code = 'ATK_FLAT'), 
 118,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 208, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'),
    20,
    0,
    20
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_DMG')
    AND is_ancient = 0
    AND 20 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    6,
    0,
    2
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 2 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    11,
    0,
    11
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 11 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    7,
    1,
    1
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 1 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_upgrades 
(rune_id, level_reached, stat_type_id, old_value, new_value, upgrade_date)
SELECT 
    @last_rune_id,
    3,
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    1.0,
    7.0,
    NOW();

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 19213)
AND slot_number = 1;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 19213), 
    @last_rune_id, 
    1
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 19213);

-- Rune ID: 23528449777

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 2 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(23528449777, 
 9215591, 
 1, 
 8352076802, 
 2,
 5, 
 6, 
 7, 
 15, 
 15,
 507200, 
 134503, 
 (SELECT id FROM stat_types WHERE code = 'ATK_PCT'), 
 63,
 (SELECT id FROM stat_types WHERE code = 'DEF_FLAT'), 
 15, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    21,
    0,
    16
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 16 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    7,
    1,
    7
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 7 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    13,
    0,
    4
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 4 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    5,
    0,
    -5
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND -5 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 19213)
AND slot_number = 2;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 19213), 
    @last_rune_id, 
    2
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 19213);

-- Rune ID: 31721651854

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 3 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(31721651854, 
 9215591, 
 1, 
 8352076802, 
 3,
 5, 
 6, 
 10, 
 15, 
 12,
 523050, 
 62152, 
 (SELECT id FROM stat_types WHERE code = 'DEF_FLAT'), 
 118,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'RES'),
    6,
    0,
    6
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'RES')
    AND is_ancient = 0
    AND 6 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    22,
    0,
    18
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 18 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_FLAT'),
    281,
    0,
    -161
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_FLAT')
    AND is_ancient = 0
    AND -161 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    8,
    1,
    1
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 1 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_upgrades 
(rune_id, level_reached, stat_type_id, old_value, new_value, upgrade_date)
SELECT 
    @last_rune_id,
    3,
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    1.0,
    8.0,
    NOW();

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 19213)
AND slot_number = 3;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 19213), 
    @last_rune_id, 
    3
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 19213);

-- Rune ID: 23163241407

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 6 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(23163241407, 
 9215591, 
 1, 
 8352076802, 
 6,
 5, 
 6, 
 16, 
 15, 
 15,
 538900, 
 128856, 
 (SELECT id FROM stat_types WHERE code = 'ATK_PCT'), 
 63,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    12,
    0,
    8
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 8 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    16,
    0,
    12
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 12 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'),
    5,
    1,
    5
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_DMG')
    AND is_ancient = 0
    AND 5 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ACC'),
    6,
    0,
    6
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ACC')
    AND is_ancient = 0
    AND 6 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 19213)
AND slot_number = 6;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 19213), 
    @last_rune_id, 
    6
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 19213);

-- Rune ID: 23439802751

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 1 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(23439802751, 
 9215591, 
 1, 
 8414791668, 
 1,
 5, 
 6, 
 17, 
 15, 
 15,
 602300, 
 132251, 
 (SELECT id FROM stat_types WHERE code = 'ATK_FLAT'), 
 160,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    20,
    0,
    15
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 15 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    11,
    1,
    2
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 2 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'RES'),
    5,
    0,
    5
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'RES')
    AND is_ancient = 0
    AND 5 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ACC'),
    5,
    0,
    5
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ACC')
    AND is_ancient = 0
    AND 5 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 21013)
AND slot_number = 1;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 21013), 
    @last_rune_id, 
    1
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 21013);

-- Rune ID: 41762655096

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 3 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(41762655096, 
 9215591, 
 1, 
 8414791668, 
 3,
 5, 
 6, 
 16, 
 15, 
 12,
 523050, 
 64008, 
 (SELECT id FROM stat_types WHERE code = 'DEF_FLAT'), 
 118,
 (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'), 
 5, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'RES'),
    16,
    0,
    16
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'RES')
    AND is_ancient = 0
    AND 16 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    22,
    0,
    16
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND 16 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    6,
    0,
    2
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 2 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ACC'),
    7,
    0,
    7
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ACC')
    AND is_ancient = 0
    AND 7 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 21013)
AND slot_number = 3;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 21013), 
    @last_rune_id, 
    3
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 21013);

-- Rune ID: 31601601316

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 4 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(31601601316, 
 9215591, 
 1, 
 8414791668, 
 4,
 5, 
 5, 
 19, 
 15, 
 12,
 302940, 
 37259, 
 (SELECT id FROM stat_types WHERE code = 'DEF_FLAT'), 
 99,
 (SELECT id FROM stat_types WHERE code = 'HP_PCT'), 
 4, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ACC'),
    7,
    0,
    7
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ACC')
    AND is_ancient = 0
    AND 7 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    12,
    0,
    12
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 12 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'),
    4,
    0,
    4
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_DMG')
    AND is_ancient = 0
    AND 4 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    3,
    0,
    -1
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND -1 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 21013)
AND slot_number = 4;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 21013), 
    @last_rune_id, 
    4
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 21013);

-- Rune ID: 34920882126

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 1 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(34920882126, 
 9215591, 
 1, 
 8564091486, 
 1,
 5, 
 6, 
 17, 
 15, 
 12,
 602300, 
 68251, 
 (SELECT id FROM stat_types WHERE code = 'ATK_FLAT'), 
 118,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    14,
    0,
    8
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 8 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'RES'),
    12,
    0,
    12
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'RES')
    AND is_ancient = 0
    AND 12 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    12,
    0,
    8
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 8 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    7,
    0,
    1
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 1 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 22413)
AND slot_number = 1;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 22413), 
    @last_rune_id, 
    1
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 22413);

-- Rune ID: 44802924483

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 2 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(44802924483, 
 9215591, 
 1, 
 8564091486, 
 2,
 5, 
 6, 
 6, 
 15, 
 12,
 507200, 
 70503, 
 (SELECT id FROM stat_types WHERE code = 'DEF_PCT'), 
 47,
 (SELECT id FROM stat_types WHERE code = 'ATK_PCT'), 
 6, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_FLAT'),
    304,
    0,
    304
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_FLAT')
    AND is_ancient = 0
    AND 304 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    6,
    0,
    6
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 6 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ACC'),
    11,
    0,
    11
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ACC')
    AND is_ancient = 0
    AND 11 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'RES'),
    28,
    0,
    28
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'RES')
    AND is_ancient = 0
    AND 28 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 22413)
AND slot_number = 2;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 22413), 
    @last_rune_id, 
    2
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 22413);

-- Rune ID: 40941586596

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 3 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(40941586596, 
 9215591, 
 1, 
 8564091486, 
 3,
 5, 
 6, 
 14, 
 15, 
 12,
 475500, 
 61461, 
 (SELECT id FROM stat_types WHERE code = 'DEF_FLAT'), 
 118,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'RES'),
    8,
    0,
    8
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'RES')
    AND is_ancient = 0
    AND 8 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    6,
    0,
    3
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 3 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    26,
    0,
    21
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 21 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    8,
    0,
    3
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND 3 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 22413)
AND slot_number = 3;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 22413), 
    @last_rune_id, 
    3
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 22413);

-- Rune ID: 34326932421

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 5 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(34326932421, 
 9215591, 
 1, 
 8564091486, 
 5,
 5, 
 6, 
 19, 
 15, 
 15,
 507200, 
 127159, 
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 2448,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'),
    4,
    0,
    4
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_DMG')
    AND is_ancient = 0
    AND 4 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    27,
    0,
    17
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND 17 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    8,
    0,
    1
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 1 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_FLAT'),
    18,
    0,
    -5
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_FLAT')
    AND is_ancient = 0
    AND -5 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 22413)
AND slot_number = 5;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 22413), 
    @last_rune_id, 
    5
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 22413);

-- Rune ID: 38376132465

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 1 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(38376132465, 
 9215591, 
 1, 
 8636452374, 
 1,
 15, 
 16, 
 10, 
 15, 
 12,
 795036, 
 75751, 
 (SELECT id FROM stat_types WHERE code = 'ATK_FLAT'), 
 118,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    17,
    0,
    13
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 1
    AND 13 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    11,
    0,
    11
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 1
    AND 11 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'),
    14,
    0,
    14
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_DMG')
    AND is_ancient = 1
    AND 14 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    10,
    1,
    1
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 1
    AND 1 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_upgrades 
(rune_id, level_reached, stat_type_id, old_value, new_value, upgrade_date)
SELECT 
    @last_rune_id,
    3,
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    1.0,
    10.0,
    NOW();

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 18813)
AND slot_number = 1;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 18813), 
    @last_rune_id, 
    1
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 18813);

-- Rune ID: 18496391435

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 3 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(18496391435, 
 9215591, 
 1, 
 8636452374, 
 3,
 5, 
 6, 
 4, 
 15, 
 15,
 356625, 
 125405, 
 (SELECT id FROM stat_types WHERE code = 'DEF_FLAT'), 
 160,
 (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'), 
 5, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ACC'),
    7,
    1,
    7
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ACC')
    AND is_ancient = 0
    AND 7 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    22,
    0,
    16
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 16 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    15,
    0,
    12
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 12 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    8,
    0,
    1
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND 1 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 18813)
AND slot_number = 3;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 18813), 
    @last_rune_id, 
    3
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 18813);

-- Rune ID: 42361149955

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 4 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_DMG')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(42361149955, 
 9215591, 
 1, 
 8636452374, 
 4,
 15, 
 16, 
 10, 
 15, 
 15,
 753192, 
 137659, 
 (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'), 
 80,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    17,
    0,
    17
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 1
    AND 17 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    22,
    0,
    15
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 1
    AND 15 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    9,
    1,
    6
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 1
    AND 6 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    9,
    0,
    3
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 1
    AND 3 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 18813)
AND slot_number = 4;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 18813), 
    @last_rune_id, 
    4
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 18813);

-- Rune ID: 44287713842

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 6 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(44287713842, 
 9215591, 
 1, 
 8636452374, 
 6,
 5, 
 6, 
 4, 
 15, 
 15,
 350285, 
 124953, 
 (SELECT id FROM stat_types WHERE code = 'ATK_PCT'), 
 63,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'),
    6,
    0,
    6
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_DMG')
    AND is_ancient = 0
    AND 6 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    31,
    0,
    24
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 24 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    6,
    0,
    3
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 3 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    4,
    1,
    4
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 4 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_upgrades 
(rune_id, level_reached, stat_type_id, old_value, new_value, upgrade_date)
SELECT 
    @last_rune_id,
    3,
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    4.0,
    4.0,
    NOW();

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 18813)
AND slot_number = 6;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 18813), 
    @last_rune_id, 
    6
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 18813);

-- Rune ID: 23268898897

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 1 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(23268898897, 
 9215591, 
 1, 
 8870961739, 
 1,
 5, 
 6, 
 18, 
 15, 
 12,
 602300, 
 68251, 
 (SELECT id FROM stat_types WHERE code = 'ATK_FLAT'), 
 118,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    16,
    0,
    13
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 13 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    9,
    1,
    3
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 3 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    14,
    0,
    7
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 7 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    5,
    0,
    5
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 5 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 20613)
AND slot_number = 1;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 20613), 
    @last_rune_id, 
    1
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 20613);

-- Rune ID: 41669726392

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 2 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(41669726392, 
 9215591, 
 1, 
 8870961739, 
 2,
 5, 
 6, 
 11, 
 15, 
 12,
 697400, 
 73344, 
 (SELECT id FROM stat_types WHERE code = 'HP_PCT'), 
 47,
 (SELECT id FROM stat_types WHERE code = 'DEF_FLAT'), 
 20, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    12,
    0,
    12
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 12 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_FLAT'),
    372,
    0,
    372
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_FLAT')
    AND is_ancient = 0
    AND 372 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    16,
    0,
    16
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 16 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ACC'),
    4,
    0,
    4
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ACC')
    AND is_ancient = 0
    AND 4 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 20613)
AND slot_number = 2;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 20613), 
    @last_rune_id, 
    2
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 20613);

-- Rune ID: 38142295897

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 3 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(38142295897, 
 9215591, 
 1, 
 8870961739, 
 3,
 5, 
 6, 
 7, 
 15, 
 12,
 380400, 
 61877, 
 (SELECT id FROM stat_types WHERE code = 'DEF_FLAT'), 
 118,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 177, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    9,
    1,
    3
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND 3 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    16,
    0,
    12
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 12 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    12,
    0,
    7
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 7 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'RES'),
    7,
    0,
    7
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'RES')
    AND is_ancient = 0
    AND 7 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 20613)
AND slot_number = 3;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 20613), 
    @last_rune_id, 
    3
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 20613);

-- Rune ID: 23195013890

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 5 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(23195013890, 
 9215591, 
 1, 
 8870961739, 
 5,
 5, 
 6, 
 18, 
 15, 
 15,
 507200, 
 127159, 
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 2448,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    9,
    0,
    9
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 9 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    18,
    0,
    15
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 15 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    10,
    1,
    4
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND 4 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    5,
    0,
    -1
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND -1 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 20613)
AND slot_number = 5;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 20613), 
    @last_rune_id, 
    5
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 20613);

-- Rune ID: 33033619834

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 1 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(33033619834, 
 9215591, 
 1, 
 9085903570, 
 1,
 5, 
 6, 
 18, 
 15, 
 15,
 662530, 
 135476, 
 (SELECT id FROM stat_types WHERE code = 'ATK_FLAT'), 
 160,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 143, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    10,
    1,
    6
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 6 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    8,
    0,
    2
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 2 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    22,
    0,
    22
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 22 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    6,
    0,
    0
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 0 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 17413)
AND slot_number = 1;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 17413), 
    @last_rune_id, 
    1
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 17413);

-- Rune ID: 45002414311

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 5 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(45002414311, 
 9215591, 
 1, 
 9085903570, 
 5,
 5, 
 6, 
 1, 
 15, 
 12,
 304320, 
 58752, 
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 1800,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    16,
    0,
    10
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND 10 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ACC'),
    13,
    0,
    13
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ACC')
    AND is_ancient = 0
    AND 13 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    16,
    0,
    13
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 13 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    6,
    0,
    6
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 6 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 17413)
AND slot_number = 5;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 17413), 
    @last_rune_id, 
    5
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 17413);

-- Rune ID: 39267001223

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 1 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(39267001223, 
 9215591, 
 1, 
 9123920839, 
 1,
 5, 
 6, 
 8, 
 15, 
 15,
 391495, 
 127889, 
 (SELECT id FROM stat_types WHERE code = 'ATK_FLAT'), 
 160,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'),
    19,
    0,
    19
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_DMG')
    AND is_ancient = 0
    AND 19 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    6,
    0,
    6
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 6 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    13,
    0,
    6
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 6 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    6,
    1,
    3
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 3 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_upgrades 
(rune_id, level_reached, stat_type_id, old_value, new_value, upgrade_date)
SELECT 
    @last_rune_id,
    3,
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    3.0,
    6.0,
    NOW();

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 13813)
AND slot_number = 1;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 13813), 
    @last_rune_id, 
    1
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 13813);

-- Rune ID: 23285366793

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 2 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(23285366793, 
 9215591, 
 1, 
 9123920839, 
 2,
 5, 
 6, 
 15, 
 15, 
 15,
 634000, 
 133949, 
 (SELECT id FROM stat_types WHERE code = 'ATK_PCT'), 
 63,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_FLAT'),
    38,
    0,
    12
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_FLAT')
    AND is_ancient = 0
    AND 12 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    12,
    0,
    6
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND 6 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    16,
    0,
    12
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 12 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ACC'),
    6,
    1,
    6
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ACC')
    AND is_ancient = 0
    AND 6 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_upgrades 
(rune_id, level_reached, stat_type_id, old_value, new_value, upgrade_date)
SELECT 
    @last_rune_id,
    3,
    (SELECT id FROM stat_types WHERE code = 'ACC'),
    6.0,
    6.0,
    NOW();

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 13813)
AND slot_number = 2;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 13813), 
    @last_rune_id, 
    2
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 13813);

-- Rune ID: 35352432754

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 3 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(35352432754, 
 9215591, 
 1, 
 9123920839, 
 3,
 5, 
 6, 
 8, 
 15, 
 12,
 309075, 
 58017, 
 (SELECT id FROM stat_types WHERE code = 'DEF_FLAT'), 
 118,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'),
    17,
    0,
    17
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_DMG')
    AND is_ancient = 0
    AND 17 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    5,
    0,
    2
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 2 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    11,
    0,
    11
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 11 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    10,
    1,
    5
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND 5 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_upgrades 
(rune_id, level_reached, stat_type_id, old_value, new_value, upgrade_date)
SELECT 
    @last_rune_id,
    3,
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    5.0,
    10.0,
    NOW();

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 13813)
AND slot_number = 3;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 13813), 
    @last_rune_id, 
    3
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 13813);

-- Rune ID: 32680317290

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 4 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(32680317290, 
 9215591, 
 1, 
 9123920839, 
 4,
 5, 
 6, 
 15, 
 15, 
 15,
 570600, 
 130554, 
 (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'), 
 58,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    16,
    0,
    13
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 13 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    11,
    0,
    5
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 5 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    8,
    1,
    2
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 2 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_FLAT'),
    326,
    0,
    62
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_FLAT')
    AND is_ancient = 0
    AND 62 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 13813)
AND slot_number = 4;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 13813), 
    @last_rune_id, 
    4
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 13813);

-- Rune ID: 42881949478

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 5 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(42881949478, 
 9215591, 
 1, 
 9123920839, 
 5,
 5, 
 6, 
 8, 
 15, 
 12,
 380400, 
 63098, 
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 1800,
 (SELECT id FROM stat_types WHERE code = 'ACC'), 
 8, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    13,
    0,
    9
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 9 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'),
    19,
    0,
    19
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_DMG')
    AND is_ancient = 0
    AND 19 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_FLAT'),
    12,
    0,
    -2
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_FLAT')
    AND is_ancient = 0
    AND -2 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    6,
    0,
    6
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 6 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 13813)
AND slot_number = 5;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 13813), 
    @last_rune_id, 
    5
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 13813);

-- Rune ID: 31023112376

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 1 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(31023112376, 
 9215591, 
 1, 
 9271963652, 
 1,
 5, 
 6, 
 14, 
 15, 
 12,
 602300, 
 68251, 
 (SELECT id FROM stat_types WHERE code = 'ATK_FLAT'), 
 118,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    10,
    1,
    5
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 5 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    14,
    0,
    7
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 7 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    16,
    0,
    12
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 12 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ACC'),
    8,
    0,
    8
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ACC')
    AND is_ancient = 0
    AND 8 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 21113)
AND slot_number = 1;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 21113), 
    @last_rune_id, 
    1
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 21113);

-- Rune ID: 45381311560

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 2 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(45381311560, 
 9215591, 
 1, 
 9271963652, 
 2,
 5, 
 6, 
 7, 
 15, 
 12,
 443800, 
 66190, 
 (SELECT id FROM stat_types WHERE code = 'SPD'), 
 31,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'RES'),
    18,
    0,
    18
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'RES')
    AND is_ancient = 0
    AND 18 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ACC'),
    17,
    0,
    17
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ACC')
    AND is_ancient = 0
    AND 17 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    5,
    0,
    5
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 5 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_FLAT'),
    13,
    0,
    13
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_FLAT')
    AND is_ancient = 0
    AND 13 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 21113)
AND slot_number = 2;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 21113), 
    @last_rune_id, 
    2
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 21113);

-- Rune ID: 40030696605

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 3 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(40030696605, 
 9215591, 
 1, 
 9271963652, 
 3,
 5, 
 6, 
 7, 
 15, 
 15,
 380400, 
 125877, 
 (SELECT id FROM stat_types WHERE code = 'DEF_FLAT'), 
 160,
 (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'), 
 5, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    16,
    0,
    12
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 12 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    7,
    0,
    2
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 2 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ACC'),
    13,
    0,
    13
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ACC')
    AND is_ancient = 0
    AND 13 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    11,
    1,
    4
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND 4 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_upgrades 
(rune_id, level_reached, stat_type_id, old_value, new_value, upgrade_date)
SELECT 
    @last_rune_id,
    3,
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    4.0,
    11.0,
    NOW();

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 21113)
AND slot_number = 3;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 21113), 
    @last_rune_id, 
    3
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 21113);

-- Rune ID: 41005633909

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 5 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(41005633909, 
 9215591, 
 1, 
 9271963652, 
 5,
 5, 
 6, 
 18, 
 15, 
 12,
 557920, 
 65875, 
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 1800,
 (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'), 
 6, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    21,
    0,
    15
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND 15 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    9,
    1,
    5
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 5 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    9,
    0,
    6
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 6 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ACC'),
    14,
    0,
    14
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ACC')
    AND is_ancient = 0
    AND 14 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 21113)
AND slot_number = 5;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 21113), 
    @last_rune_id, 
    5
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 21113);

-- Rune ID: 43981686791

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 6 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'ACC')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(43981686791, 
 9215591, 
 1, 
 9271963652, 
 6,
 5, 
 6, 
 13, 
 15, 
 12,
 646680, 
 68334, 
 (SELECT id FROM stat_types WHERE code = 'ACC'), 
 48,
 (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'), 
 6, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_FLAT'),
    62,
    0,
    62
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_FLAT')
    AND is_ancient = 0
    AND 62 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'RES'),
    14,
    0,
    14
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'RES')
    AND is_ancient = 0
    AND 14 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    5,
    0,
    5
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 5 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    8,
    0,
    8
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 8 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 21113)
AND slot_number = 6;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 21113), 
    @last_rune_id, 
    6
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 21113);

-- Rune ID: 31524611820

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 1 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(31524611820, 
 9215591, 
 1, 
 9287570481, 
 1,
 5, 
 6, 
 8, 
 15, 
 12,
 391495, 
 63889, 
 (SELECT id FROM stat_types WHERE code = 'ATK_FLAT'), 
 118,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    13,
    0,
    6
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 6 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    6,
    1,
    2
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 2 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'),
    19,
    0,
    19
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_DMG')
    AND is_ancient = 0
    AND 19 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    5,
    0,
    5
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 5 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 15033)
AND slot_number = 1;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 15033), 
    @last_rune_id, 
    1
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 15033);

-- Rune ID: 39204558130

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 3 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(39204558130, 
 9215591, 
 1, 
 9287570481, 
 3,
 5, 
 6, 
 8, 
 15, 
 12,
 356625, 
 61405, 
 (SELECT id FROM stat_types WHERE code = 'DEF_FLAT'), 
 118,
 (SELECT id FROM stat_types WHERE code = 'RES'), 
 4, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'),
    16,
    0,
    16
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_DMG')
    AND is_ancient = 0
    AND 16 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    5,
    1,
    5
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 5 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    11,
    0,
    8
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 8 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    7,
    0,
    0
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND 0 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 15033)
AND slot_number = 3;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 15033), 
    @last_rune_id, 
    3
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 15033);

-- Rune ID: 22942136182

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 4 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_DMG')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(22942136182, 
 9215591, 
 1, 
 9287570481, 
 4,
 5, 
 6, 
 22, 
 15, 
 15,
 570600, 
 130554, 
 (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'), 
 80,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    20,
    0,
    16
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 16 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    6,
    0,
    -1
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND -1 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    5,
    1,
    5
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 5 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    6,
    0,
    -1
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND -1 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 15033)
AND slot_number = 4;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 15033), 
    @last_rune_id, 
    4
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 15033);

-- Rune ID: 30965184320

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 5 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(30965184320, 
 9215591, 
 1, 
 9287570481, 
 5,
 5, 
 6, 
 8, 
 15, 
 12,
 380400, 
 63098, 
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 1800,
 (SELECT id FROM stat_types WHERE code = 'ACC'), 
 4, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    10,
    0,
    10
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 10 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    24,
    0,
    19
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 19 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    5,
    0,
    -1
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND -1 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'),
    6,
    1,
    6
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_DMG')
    AND is_ancient = 0
    AND 6 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_upgrades 
(rune_id, level_reached, stat_type_id, old_value, new_value, upgrade_date)
SELECT 
    @last_rune_id,
    3,
    (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'),
    6.0,
    6.0,
    NOW();

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 15033)
AND slot_number = 5;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 15033), 
    @last_rune_id, 
    5
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 15033);

-- Rune ID: 23161744136

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 6 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(23161744136, 
 9215591, 
 1, 
 9287570481, 
 6,
 5, 
 6, 
 16, 
 15, 
 15,
 592790, 
 131742, 
 (SELECT id FROM stat_types WHERE code = 'ATK_PCT'), 
 63,
 (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'), 
 7, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    7,
    0,
    0
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 0 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    17,
    0,
    17
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 17 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    10,
    1,
    6
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 6 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ACC'),
    4,
    0,
    4
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ACC')
    AND is_ancient = 0
    AND 4 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 15033)
AND slot_number = 6;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 15033), 
    @last_rune_id, 
    6
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 15033);

-- Rune ID: 16371635997

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 1 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(16371635997, 
 9215591, 
 1, 
 9630896273, 
 1,
 5, 
 6, 
 3, 
 15, 
 15,
 421610, 
 128680, 
 (SELECT id FROM stat_types WHERE code = 'ATK_FLAT'), 
 160,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    20,
    0,
    15
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 15 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    6,
    0,
    -1
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND -1 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    7,
    0,
    0
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 0 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    11,
    0,
    11
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 11 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 22613)
AND slot_number = 1;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 22613), 
    @last_rune_id, 
    1
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 22613);

-- Rune ID: 19941303064

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 2 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(19941303064, 
 9215591, 
 1, 
 9630896273, 
 2,
 5, 
 6, 
 3, 
 15, 
 15,
 443800, 
 130190, 
 (SELECT id FROM stat_types WHERE code = 'SPD'), 
 42,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    14,
    0,
    7
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 7 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    8,
    0,
    1
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 1 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    9,
    1,
    2
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND 2 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    20,
    0,
    20
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 20 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 22613)
AND slot_number = 2;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 22613), 
    @last_rune_id, 
    2
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 22613);

-- Rune ID: 35919866685

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 3 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(35919866685, 
 9215591, 
 1, 
 9630896273, 
 3,
 5, 
 6, 
 15, 
 15, 
 15,
 523050, 
 128008, 
 (SELECT id FROM stat_types WHERE code = 'DEF_FLAT'), 
 160,
 (SELECT id FROM stat_types WHERE code = 'ACC'), 
 8, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    12,
    0,
    4
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND 4 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    8,
    0,
    4
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 4 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    8,
    1,
    8
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 8 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    21,
    0,
    17
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 17 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 22613)
AND slot_number = 3;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 22613), 
    @last_rune_id, 
    3
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 22613);

-- Rune ID: 34913682790

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 4 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_DMG')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(34913682790, 
 9215591, 
 1, 
 9630896273, 
 4,
 5, 
 6, 
 15, 
 15, 
 15,
 627660, 
 133609, 
 (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'), 
 80,
 (SELECT id FROM stat_types WHERE code = 'RES'), 
 6, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    7,
    1,
    1
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 1 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    19,
    0,
    15
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 15 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    6,
    0,
    6
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 6 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    8,
    0,
    2
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 2 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 22613)
AND slot_number = 4;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 22613), 
    @last_rune_id, 
    4
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 22613);

-- Rune ID: 31694835136

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 5 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(31694835136, 
 9215591, 
 1, 
 9630896273, 
 5,
 15, 
 15, 
 3, 
 15, 
 15,
 235008, 
 67939, 
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 2088,
 (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'), 
 4, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    11,
    1,
    3
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 3 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    23,
    0,
    18
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 18 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ACC'),
    6,
    0,
    6
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ACC')
    AND is_ancient = 0
    AND 6 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    7,
    0,
    -2
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND -2 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 22613)
AND slot_number = 5;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 22613), 
    @last_rune_id, 
    5
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 22613);

-- Rune ID: 24817039751

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 6 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(24817039751, 
 9215591, 
 1, 
 9630896273, 
 6,
 5, 
 6, 
 3, 
 15, 
 15,
 377230, 
 125661, 
 (SELECT id FROM stat_types WHERE code = 'ATK_PCT'), 
 63,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'),
    10,
    1,
    10
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_DMG')
    AND is_ancient = 0
    AND 10 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_FLAT'),
    29,
    0,
    -1
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_FLAT')
    AND is_ancient = 0
    AND -1 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    15,
    0,
    10
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 10 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    11,
    0,
    11
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 11 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 22613)
AND slot_number = 6;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 22613), 
    @last_rune_id, 
    6
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 22613);

-- Rune ID: 39206958924

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 1 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(39206958924, 
 9215591, 
 1, 
 9632533681, 
 1,
 5, 
 6, 
 4, 
 15, 
 12,
 391495, 
 63889, 
 (SELECT id FROM stat_types WHERE code = 'ATK_FLAT'), 
 118,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    10,
    0,
    6
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 6 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    4,
    0,
    4
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 4 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'),
    18,
    0,
    18
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_DMG')
    AND is_ancient = 0
    AND 18 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    11,
    1,
    6
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 6 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_upgrades 
(rune_id, level_reached, stat_type_id, old_value, new_value, upgrade_date)
SELECT 
    @last_rune_id,
    3,
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    6.0,
    11.0,
    NOW();

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 11813)
AND slot_number = 1;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 11813), 
    @last_rune_id, 
    1
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 11813);

-- Rune ID: 34820662796

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 2 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(34820662796, 
 9215591, 
 1, 
 9632533681, 
 2,
 5, 
 6, 
 14, 
 15, 
 15,
 634000, 
 133949, 
 (SELECT id FROM stat_types WHERE code = 'DEF_PCT'), 
 63,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    25,
    0,
    18
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 18 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ACC'),
    7,
    1,
    7
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ACC')
    AND is_ancient = 0
    AND 7 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    11,
    0,
    7
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 7 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    8,
    0,
    2
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 2 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 11813)
AND slot_number = 2;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 11813), 
    @last_rune_id, 
    2
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 11813);

-- Rune ID: 29369807704

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 3 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(29369807704, 
 9215591, 
 1, 
 9632533681, 
 3,
 5, 
 6, 
 4, 
 15, 
 15,
 356625, 
 125405, 
 (SELECT id FROM stat_types WHERE code = 'DEF_FLAT'), 
 160,
 (SELECT id FROM stat_types WHERE code = 'DEF_PCT'), 
 6, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    6,
    0,
    0
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 0 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    11,
    0,
    11
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 11 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'),
    18,
    0,
    18
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_DMG')
    AND is_ancient = 0
    AND 18 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ACC'),
    8,
    1,
    8
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ACC')
    AND is_ancient = 0
    AND 8 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_upgrades 
(rune_id, level_reached, stat_type_id, old_value, new_value, upgrade_date)
SELECT 
    @last_rune_id,
    3,
    (SELECT id FROM stat_types WHERE code = 'ACC'),
    8.0,
    8.0,
    NOW();

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 11813)
AND slot_number = 3;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 11813), 
    @last_rune_id, 
    3
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 11813);

-- Rune ID: 44775194628

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 4 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(44775194628, 
 9215591, 
 1, 
 9632533681, 
 4,
 5, 
 6, 
 15, 
 15, 
 12,
 627660, 
 69609, 
 (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'), 
 43,
 (SELECT id FROM stat_types WHERE code = 'HP_PCT'), 
 6, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    11,
    0,
    11
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 11 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ACC'),
    20,
    0,
    20
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ACC')
    AND is_ancient = 0
    AND 20 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_FLAT'),
    16,
    0,
    16
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_FLAT')
    AND is_ancient = 0
    AND 16 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    7,
    0,
    7
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 7 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 11813)
AND slot_number = 4;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 11813), 
    @last_rune_id, 
    4
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 11813);

-- Rune ID: 43301159315

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 5 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(43301159315, 
 9215591, 
 1, 
 9632533681, 
 5,
 5, 
 6, 
 16, 
 15, 
 15,
 557920, 
 129875, 
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 2448,
 (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'), 
 5, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_FLAT'),
    18,
    0,
    3
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_FLAT')
    AND is_ancient = 0
    AND 3 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    10,
    0,
    6
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 6 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ACC'),
    5,
    0,
    5
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ACC')
    AND is_ancient = 0
    AND 5 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    22,
    0,
    22
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 22 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 11813)
AND slot_number = 5;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 11813), 
    @last_rune_id, 
    5
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 11813);

-- Rune ID: 37533219429

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 1 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(37533219429, 
 9215591, 
 1, 
 9640461267, 
 1,
 15, 
 16, 
 7, 
 15, 
 15,
 505932, 
 134417, 
 (SELECT id FROM stat_types WHERE code = 'ATK_FLAT'), 
 160,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    22,
    0,
    17
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 1
    AND 17 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'RES'),
    10,
    0,
    10
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'RES')
    AND is_ancient = 1
    AND 10 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    11,
    1,
    4
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 1
    AND 4 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    5,
    0,
    -4
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 1
    AND -4 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 21413)
AND slot_number = 1;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 21413), 
    @last_rune_id, 
    1
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 21413);

-- Rune ID: 27335320554

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 2 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(27335320554, 
 9215591, 
 1, 
 9640461267, 
 2,
 5, 
 6, 
 15, 
 15, 
 15,
 697400, 
 137344, 
 (SELECT id FROM stat_types WHERE code = 'HP_PCT'), 
 63,
 (SELECT id FROM stat_types WHERE code = 'RES'), 
 5, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ACC'),
    5,
    0,
    5
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ACC')
    AND is_ancient = 0
    AND 5 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    11,
    0,
    11
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 11 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    7,
    1,
    1
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND 1 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    21,
    0,
    17
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 17 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 21413)
AND slot_number = 2;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 21413), 
    @last_rune_id, 
    2
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 21413);

-- Rune ID: 37537590241

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 3 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(37537590241, 
 9215591, 
 1, 
 9640461267, 
 3,
 15, 
 16, 
 14, 
 15, 
 12,
 570600, 
 66554, 
 (SELECT id FROM stat_types WHERE code = 'DEF_FLAT'), 
 118,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    15,
    0,
    6
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 1
    AND 6 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    17,
    0,
    13
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 1
    AND 13 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'RES'),
    9,
    0,
    9
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'RES')
    AND is_ancient = 1
    AND 9 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    7,
    0,
    -2
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 1
    AND -2 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 21413)
AND slot_number = 3;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 21413), 
    @last_rune_id, 
    3
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 21413);

-- Rune ID: 31983445252

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 4 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(31983445252, 
 9215591, 
 1, 
 9640461267, 
 4,
 15, 
 16, 
 7, 
 15, 
 15,
 479304, 
 132605, 
 (SELECT id FROM stat_types WHERE code = 'HP_PCT'), 
 63,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    12,
    0,
    7
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 1
    AND 7 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    18,
    0,
    9
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 1
    AND 9 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    22,
    0,
    13
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 1
    AND 13 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'RES'),
    9,
    0,
    9
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'RES')
    AND is_ancient = 1
    AND 9 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 21413)
AND slot_number = 4;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 21413), 
    @last_rune_id, 
    4
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 21413);

-- Rune ID: 25638384323

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 5 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(25638384323, 
 9215591, 
 1, 
 9640461267, 
 5,
 5, 
 6, 
 14, 
 15, 
 15,
 557920, 
 129875, 
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 2448,
 (SELECT id FROM stat_types WHERE code = 'ATK_FLAT'), 
 17, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'RES'),
    13,
    0,
    13
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'RES')
    AND is_ancient = 0
    AND 13 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    13,
    0,
    5
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 5 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    11,
    1,
    4
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND 4 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    16,
    0,
    12
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 12 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 21413)
AND slot_number = 5;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 21413), 
    @last_rune_id, 
    5
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 21413);

-- Rune ID: 34883726552

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 6 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(34883726552, 
 9215591, 
 1, 
 9640461267, 
 6,
 5, 
 6, 
 15, 
 15, 
 15,
 592790, 
 131742, 
 (SELECT id FROM stat_types WHERE code = 'HP_PCT'), 
 63,
 (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'), 
 4, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    22,
    0,
    15
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 15 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    7,
    1,
    3
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 3 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    14,
    0,
    8
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND 8 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    12,
    0,
    12
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 12 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 21413)
AND slot_number = 6;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 21413), 
    @last_rune_id, 
    6
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 21413);

-- Rune ID: 45533077817

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 2 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(45533077817, 
 9215591, 
 1, 
 9975586420, 
 2,
 5, 
 6, 
 15, 
 15, 
 12,
 697400, 
 73344, 
 (SELECT id FROM stat_types WHERE code = 'SPD'), 
 31,
 (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'), 
 4, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_FLAT'),
    12,
    0,
    12
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_FLAT')
    AND is_ancient = 0
    AND 12 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    15,
    0,
    15
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 15 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    16,
    0,
    16
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 16 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_FLAT'),
    422,
    0,
    422
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_FLAT')
    AND is_ancient = 0
    AND 422 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 19713)
AND slot_number = 2;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 19713), 
    @last_rune_id, 
    2
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 19713);

-- Rune ID: 40828287678

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 3 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(40828287678, 
 9215591, 
 1, 
 9975586420, 
 3,
 5, 
 6, 
 18, 
 15, 
 15,
 475500, 
 125461, 
 (SELECT id FROM stat_types WHERE code = 'DEF_FLAT'), 
 160,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ACC'),
    7,
    0,
    7
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ACC')
    AND is_ancient = 0
    AND 7 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    5,
    0,
    -2
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND -2 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    22,
    0,
    17
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 17 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    9,
    1,
    3
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 3 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_upgrades 
(rune_id, level_reached, stat_type_id, old_value, new_value, upgrade_date)
SELECT 
    @last_rune_id,
    3,
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    3.0,
    9.0,
    NOW();

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 19713)
AND slot_number = 3;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 19713), 
    @last_rune_id, 
    3
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 19713);

-- Rune ID: 36505460502

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 4 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(36505460502, 
 9215591, 
 1, 
 9975586420, 
 4,
 5, 
 6, 
 20, 
 15, 
 12,
 570600, 
 66554, 
 (SELECT id FROM stat_types WHERE code = 'ATK_PCT'), 
 47,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    22,
    0,
    18
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 18 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_FLAT'),
    16,
    0,
    16
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_FLAT')
    AND is_ancient = 0
    AND 16 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    6,
    0,
    6
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 6 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'),
    5,
    0,
    5
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_DMG')
    AND is_ancient = 0
    AND 5 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 19713)
AND slot_number = 4;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 19713), 
    @last_rune_id, 
    4
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 19713);

-- Rune ID: 34925250825

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 5 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(34925250825, 
 9215591, 
 1, 
 9975586420, 
 5,
 5, 
 6, 
 7, 
 15, 
 12,
 405760, 
 63602, 
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 1800,
 (SELECT id FROM stat_types WHERE code = 'HP_PCT'), 
 5, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    9,
    1,
    2
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 2 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ACC'),
    12,
    0,
    12
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ACC')
    AND is_ancient = 0
    AND 12 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    16,
    0,
    12
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 12 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    7,
    0,
    0
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND 0 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 19713)
AND slot_number = 5;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 19713), 
    @last_rune_id, 
    5
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 19713);

-- Rune ID: 39188827732

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 1 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(39188827732, 
 9215591, 
 1, 
 10004967817, 
 1,
 5, 
 6, 
 4, 
 15, 
 12,
 391495, 
 63889, 
 (SELECT id FROM stat_types WHERE code = 'ATK_FLAT'), 
 118,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    16,
    0,
    12
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 12 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    11,
    1,
    4
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 4 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    10,
    0,
    10
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 10 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'),
    5,
    0,
    5
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_DMG')
    AND is_ancient = 0
    AND 5 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 24413)
AND slot_number = 1;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 24413), 
    @last_rune_id, 
    1
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 24413);

-- Rune ID: 32713084972

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 2 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(32713084972, 
 9215591, 
 1, 
 10004967817, 
 2,
 5, 
 6, 
 16, 
 15, 
 15,
 634000, 
 133949, 
 (SELECT id FROM stat_types WHERE code = 'ATK_PCT'), 
 63,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    11,
    1,
    4
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 4 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_FLAT'),
    192,
    0,
    -199
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_FLAT')
    AND is_ancient = 0
    AND -199 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    11,
    0,
    11
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 11 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    22,
    0,
    18
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 18 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 24413)
AND slot_number = 2;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 24413), 
    @last_rune_id, 
    2
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 24413);

-- Rune ID: 34955843296

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 3 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(34955843296, 
 9215591, 
 1, 
 10004967817, 
 3,
 5, 
 6, 
 16, 
 15, 
 12,
 475500, 
 61461, 
 (SELECT id FROM stat_types WHERE code = 'DEF_FLAT'), 
 118,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    12,
    0,
    8
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 8 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'RES'),
    11,
    0,
    11
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'RES')
    AND is_ancient = 0
    AND 11 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    8,
    0,
    1
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 1 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ACC'),
    22,
    0,
    22
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ACC')
    AND is_ancient = 0
    AND 22 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 24413)
AND slot_number = 3;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 24413), 
    @last_rune_id, 
    3
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 24413);

-- Rune ID: 41277229172

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 4 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(41277229172, 
 9215591, 
 1, 
 10004967817, 
 4,
 5, 
 6, 
 17, 
 15, 
 15,
 570600, 
 130554, 
 (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'), 
 58,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ACC'),
    13,
    0,
    13
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ACC')
    AND is_ancient = 0
    AND 13 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    11,
    0,
    4
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 4 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    23,
    0,
    17
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 17 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    7,
    0,
    0
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND 0 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 24413)
AND slot_number = 4;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 24413), 
    @last_rune_id, 
    4
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 24413);

-- Rune ID: 41014331100

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 5 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(41014331100, 
 9215591, 
 1, 
 10004967817, 
 5,
 5, 
 6, 
 4, 
 15, 
 12,
 329680, 
 59485, 
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 1800,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    6,
    0,
    6
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 6 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'),
    19,
    0,
    19
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_DMG')
    AND is_ancient = 0
    AND 19 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    10,
    0,
    6
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 6 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    9,
    1,
    4
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 4 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_upgrades 
(rune_id, level_reached, stat_type_id, old_value, new_value, upgrade_date)
SELECT 
    @last_rune_id,
    3,
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    4.0,
    9.0,
    NOW();

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 24413)
AND slot_number = 5;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 24413), 
    @last_rune_id, 
    5
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 24413);

-- Rune ID: 40771013003

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 1 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(40771013003, 
 9215591, 
 1, 
 10225426403, 
 1,
 5, 
 6, 
 15, 
 15, 
 12,
 602300, 
 68251, 
 (SELECT id FROM stat_types WHERE code = 'ATK_FLAT'), 
 118,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    10,
    1,
    4
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 4 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    6,
    0,
    6
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 6 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    21,
    0,
    17
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 17 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'),
    11,
    0,
    11
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_DMG')
    AND is_ancient = 0
    AND 11 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 22913)
AND slot_number = 1;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 22913), 
    @last_rune_id, 
    1
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 22913);

-- Rune ID: 42441681534

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 2 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(42441681534, 
 9215591, 
 1, 
 10225426403, 
 2,
 5, 
 6, 
 4, 
 15, 
 15,
 475500, 
 133873, 
 (SELECT id FROM stat_types WHERE code = 'ATK_PCT'), 
 63,
 (SELECT id FROM stat_types WHERE code = 'DEF_PCT'), 
 5, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_FLAT'),
    12,
    0,
    -9
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_FLAT')
    AND is_ancient = 0
    AND -9 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'),
    15,
    0,
    15
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_DMG')
    AND is_ancient = 0
    AND 15 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    10,
    0,
    6
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 6 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    5,
    1,
    5
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 5 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_upgrades 
(rune_id, level_reached, stat_type_id, old_value, new_value, upgrade_date)
SELECT 
    @last_rune_id,
    3,
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    5.0,
    5.0,
    NOW();

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 22913)
AND slot_number = 2;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 22913), 
    @last_rune_id, 
    2
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 22913);

-- Rune ID: 33051266099

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 3 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(33051266099, 
 9215591, 
 1, 
 10225426403, 
 3,
 5, 
 6, 
 15, 
 15, 
 15,
 475500, 
 125461, 
 (SELECT id FROM stat_types WHERE code = 'DEF_FLAT'), 
 160,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    6,
    0,
    3
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 3 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    13,
    0,
    9
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 9 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    23,
    0,
    16
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND 16 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    6,
    0,
    6
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 6 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 22913)
AND slot_number = 3;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 22913), 
    @last_rune_id, 
    3
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 22913);

-- Rune ID: 21859883087

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 5 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(21859883087, 
 9215591, 
 1, 
 10225426403, 
 5,
 5, 
 6, 
 4, 
 15, 
 15,
 329680, 
 123485, 
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 2448,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'),
    22,
    0,
    22
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_DMG')
    AND is_ancient = 0
    AND 22 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    8,
    1,
    2
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 2 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    8,
    0,
    1
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 1 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    5,
    0,
    5
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 5 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 22913)
AND slot_number = 5;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 22913), 
    @last_rune_id, 
    5
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 22913);

-- Rune ID: 42712819058

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 1 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(42712819058, 
 9215591, 
 1, 
 10340052499, 
 1,
 5, 
 6, 
 10, 
 15, 
 12,
 662530, 
 69126, 
 (SELECT id FROM stat_types WHERE code = 'ATK_FLAT'), 
 118,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    13,
    0,
    7
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 7 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    11,
    0,
    6
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 6 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_FLAT'),
    247,
    0,
    -184
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_FLAT')
    AND is_ancient = 0
    AND -184 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    16,
    0,
    13
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 13 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 17913)
AND slot_number = 1;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 17913), 
    @last_rune_id, 
    1
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 17913);

-- Rune ID: 45711696035

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 2 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(45711696035, 
 9215591, 
 1, 
 10340052499, 
 2,
 5, 
 6, 
 15, 
 15, 
 12,
 697400, 
 73344, 
 (SELECT id FROM stat_types WHERE code = 'SPD'), 
 31,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 143, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    6,
    0,
    6
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 6 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    11,
    0,
    11
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 11 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'RES'),
    15,
    0,
    15
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'RES')
    AND is_ancient = 0
    AND 15 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_FLAT'),
    27,
    0,
    27
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_FLAT')
    AND is_ancient = 0
    AND 27 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 17913)
AND slot_number = 2;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 17913), 
    @last_rune_id, 
    2
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 17913);

-- Rune ID: 43269532780

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 3 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(43269532780, 
 9215591, 
 1, 
 10340052499, 
 3,
 5, 
 6, 
 10, 
 15, 
 12,
 570600, 
 64530, 
 (SELECT id FROM stat_types WHERE code = 'DEF_FLAT'), 
 118,
 (SELECT id FROM stat_types WHERE code = 'ACC'), 
 8, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    14,
    0,
    14
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 14 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'),
    11,
    0,
    11
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_DMG')
    AND is_ancient = 0
    AND 11 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    9,
    0,
    9
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 9 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'RES'),
    12,
    0,
    12
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'RES')
    AND is_ancient = 0
    AND 12 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 17913)
AND slot_number = 3;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 17913), 
    @last_rune_id, 
    3
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 17913);

-- Rune ID: 30800400265

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 4 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(30800400265, 
 9215591, 
 1, 
 10340052499, 
 4,
 5, 
 6, 
 10, 
 15, 
 15,
 627660, 
 131383, 
 (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'), 
 58,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    8,
    1,
    2
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND 2 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    10,
    0,
    6
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 6 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    19,
    0,
    12
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 12 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ACC'),
    6,
    0,
    6
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ACC')
    AND is_ancient = 0
    AND 6 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 17913)
AND slot_number = 4;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 17913), 
    @last_rune_id, 
    4
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 17913);

-- Rune ID: 41010514997

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 6 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(41010514997, 
 9215591, 
 1, 
 10340052499, 
 6,
 5, 
 6, 
 18, 
 15, 
 12,
 538900, 
 64856, 
 (SELECT id FROM stat_types WHERE code = 'ATK_PCT'), 
 47,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    19,
    0,
    13
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND 13 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    10,
    0,
    6
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 6 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    9,
    1,
    6
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 6 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_FLAT'),
    17,
    0,
    -3
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_FLAT')
    AND is_ancient = 0
    AND -3 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 17913)
AND slot_number = 6;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 17913), 
    @last_rune_id, 
    6
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 17913);

-- Rune ID: 41701582561

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 1 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(41701582561, 
 9215591, 
 1, 
 10449419341, 
 1,
 5, 
 6, 
 11, 
 15, 
 15,
 602300, 
 132251, 
 (SELECT id FROM stat_types WHERE code = 'ATK_FLAT'), 
 160,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    8,
    1,
    3
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 3 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    31,
    0,
    23
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 23 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'),
    9,
    0,
    9
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_DMG')
    AND is_ancient = 0
    AND 9 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    5,
    0,
    5
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 5 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 1000113)
AND slot_number = 1;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 1000113), 
    @last_rune_id, 
    1
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 1000113);

-- Rune ID: 19297107153

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 2 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(19297107153, 
 9215591, 
 1, 
 10449419341, 
 2,
 5, 
 6, 
 5, 
 15, 
 15,
 697400, 
 134870, 
 (SELECT id FROM stat_types WHERE code = 'ATK_PCT'), 
 63,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'),
    7,
    1,
    7
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_DMG')
    AND is_ancient = 0
    AND 7 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    9,
    0,
    9
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 9 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_FLAT'),
    30,
    0,
    8
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_FLAT')
    AND is_ancient = 0
    AND 8 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    16,
    0,
    12
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 12 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 1000113)
AND slot_number = 2;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 1000113), 
    @last_rune_id, 
    2
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 1000113);

-- Rune ID: 26434891537

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 4 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_DMG')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(26434891537, 
 9215591, 
 1, 
 10449419341, 
 4,
 5, 
 6, 
 5, 
 15, 
 15,
 684720, 
 134236, 
 (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'), 
 80,
 (SELECT id FROM stat_types WHERE code = 'ACC'), 
 5, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    19,
    0,
    9
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 9 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    4,
    0,
    0
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 0 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    6,
    0,
    6
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 6 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_FLAT'),
    22,
    1,
    4
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_FLAT')
    AND is_ancient = 0
    AND 4 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_upgrades 
(rune_id, level_reached, stat_type_id, old_value, new_value, upgrade_date)
SELECT 
    @last_rune_id,
    3,
    (SELECT id FROM stat_types WHERE code = 'ATK_FLAT'),
    4.0,
    22.0,
    NOW();

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 1000113)
AND slot_number = 4;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 1000113), 
    @last_rune_id, 
    4
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 1000113);

-- Rune ID: 40976198174

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 5 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(40976198174, 
 9215591, 
 1, 
 10449419341, 
 5,
 5, 
 6, 
 5, 
 15, 
 12,
 557920, 
 63896, 
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 1800,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    10,
    1,
    4
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 4 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    15,
    0,
    15
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 15 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'),
    7,
    0,
    7
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_DMG')
    AND is_ancient = 0
    AND 7 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_FLAT'),
    44,
    0,
    24
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_FLAT')
    AND is_ancient = 0
    AND 24 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 1000113)
AND slot_number = 5;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 1000113), 
    @last_rune_id, 
    5
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 1000113);

-- Rune ID: 16215528798

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 1 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(16215528798, 
 9215591, 
 1, 
 10609335651, 
 1,
 5, 
 6, 
 5, 
 15, 
 15,
 722760, 
 136138, 
 (SELECT id FROM stat_types WHERE code = 'ATK_FLAT'), 
 160,
 (SELECT id FROM stat_types WHERE code = 'ATK_PCT'), 
 6, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    9,
    1,
    2
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 2 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    11,
    0,
    11
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 11 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'),
    20,
    0,
    20
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_DMG')
    AND is_ancient = 0
    AND 20 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ACC'),
    7,
    0,
    7
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ACC')
    AND is_ancient = 0
    AND 7 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 16533)
AND slot_number = 1;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 16533), 
    @last_rune_id, 
    1
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 16533);

-- Rune ID: 40207931865

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 3 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(40207931865, 
 9215591, 
 1, 
 10609335651, 
 3,
 5, 
 6, 
 5, 
 15, 
 15,
 523050, 
 126152, 
 (SELECT id FROM stat_types WHERE code = 'DEF_FLAT'), 
 160,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    8,
    0,
    1
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND 1 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    8,
    0,
    8
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 8 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_FLAT'),
    647,
    0,
    187
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_FLAT')
    AND is_ancient = 0
    AND 187 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'),
    16,
    0,
    16
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_DMG')
    AND is_ancient = 0
    AND 16 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 16533)
AND slot_number = 3;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 16533), 
    @last_rune_id, 
    3
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 16533);

-- Rune ID: 20862248645

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 4 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_DMG')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(20862248645, 
 9215591, 
 1, 
 10609335651, 
 4,
 5, 
 6, 
 15, 
 15, 
 15,
 570600, 
 130554, 
 (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'), 
 80,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    4,
    0,
    4
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 4 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    8,
    0,
    2
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 2 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    26,
    0,
    19
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND 19 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    8,
    1,
    3
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 3 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_upgrades 
(rune_id, level_reached, stat_type_id, old_value, new_value, upgrade_date)
SELECT 
    @last_rune_id,
    3,
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    3.0,
    8.0,
    NOW();

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 16533)
AND slot_number = 4;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 16533), 
    @last_rune_id, 
    4
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 16533);

-- Rune ID: 41984310278

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 5 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(41984310278, 
 9215591, 
 1, 
 10609335651, 
 5,
 5, 
 6, 
 15, 
 15, 
 12,
 557920, 
 65875, 
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 1800,
 (SELECT id FROM stat_types WHERE code = 'DEF_FLAT'), 
 19, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    16,
    0,
    11
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND 11 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    7,
    0,
    7
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 7 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    10,
    0,
    7
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 7 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    15,
    0,
    15
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 15 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 16533)
AND slot_number = 5;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 16533), 
    @last_rune_id, 
    5
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 16533);

-- Rune ID: 44237452762

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 6 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(44237452762, 
 9215591, 
 1, 
 10609335651, 
 6,
 5, 
 6, 
 5, 
 15, 
 15,
 646680, 
 132334, 
 (SELECT id FROM stat_types WHERE code = 'DEF_PCT'), 
 63,
 (SELECT id FROM stat_types WHERE code = 'ACC'), 
 4, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    10,
    1,
    1
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 1 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    5,
    0,
    1
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 1 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    4,
    0,
    4
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 4 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'),
    31,
    0,
    31
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_DMG')
    AND is_ancient = 0
    AND 31 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 16533)
AND slot_number = 6;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 16533), 
    @last_rune_id, 
    6
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 16533);

-- Rune ID: 30964703415

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 1 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(30964703415, 
 9215591, 
 1, 
 10777610954, 
 1,
 5, 
 6, 
 4, 
 15, 
 15,
 391495, 
 127889, 
 (SELECT id FROM stat_types WHERE code = 'ATK_FLAT'), 
 160,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    11,
    1,
    5
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 5 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'),
    12,
    0,
    12
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_DMG')
    AND is_ancient = 0
    AND 12 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    16,
    0,
    16
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 16 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    4,
    0,
    0
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 0 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 18613)
AND slot_number = 1;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 18613), 
    @last_rune_id, 
    1
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 18613);

-- Rune ID: 41000362205

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 2 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(41000362205, 
 9215591, 
 1, 
 10777610954, 
 2,
 5, 
 6, 
 18, 
 15, 
 15,
 697400, 
 137344, 
 (SELECT id FROM stat_types WHERE code = 'ATK_PCT'), 
 63,
 (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'), 
 5, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    15,
    0,
    8
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND 8 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    8,
    1,
    3
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 3 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'RES'),
    12,
    0,
    12
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'RES')
    AND is_ancient = 0
    AND 12 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    16,
    0,
    12
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 12 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 18613)
AND slot_number = 2;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 18613), 
    @last_rune_id, 
    2
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 18613);

-- Rune ID: 44498081549

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 3 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(44498081549, 
 9215591, 
 1, 
 10777610954, 
 3,
 5, 
 6, 
 14, 
 15, 
 12,
 523050, 
 64008, 
 (SELECT id FROM stat_types WHERE code = 'DEF_FLAT'), 
 118,
 (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'), 
 7, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    22,
    0,
    15
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 15 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_FLAT'),
    510,
    0,
    199
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_FLAT')
    AND is_ancient = 0
    AND 199 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ACC'),
    7,
    0,
    7
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ACC')
    AND is_ancient = 0
    AND 7 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    12,
    0,
    8
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 8 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 18613)
AND slot_number = 3;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 18613), 
    @last_rune_id, 
    3
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 18613);

-- Rune ID: 26354965722

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 4 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(26354965722, 
 9215591, 
 1, 
 10777610954, 
 4,
 5, 
 6, 
 18, 
 15, 
 12,
 627660, 
 69609, 
 (SELECT id FROM stat_types WHERE code = 'ATK_PCT'), 
 47,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 168, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    15,
    0,
    12
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 12 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    12,
    0,
    5
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 5 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'),
    5,
    0,
    5
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_DMG')
    AND is_ancient = 0
    AND 5 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    10,
    0,
    10
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 10 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 18613)
AND slot_number = 4;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 18613), 
    @last_rune_id, 
    4
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 18613);

-- Rune ID: 39287693368

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 5 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(39287693368, 
 9215591, 
 1, 
 10777610954, 
 5,
 5, 
 6, 
 4, 
 15, 
 15,
 329680, 
 123485, 
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 2448,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    13,
    0,
    6
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 6 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    17,
    0,
    17
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 17 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    7,
    1,
    4
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 4 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'),
    7,
    0,
    7
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_DMG')
    AND is_ancient = 0
    AND 7 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 18613)
AND slot_number = 5;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 18613), 
    @last_rune_id, 
    5
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 18613);

-- Rune ID: 43918436612

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 6 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(43918436612, 
 9215591, 
 1, 
 10777610954, 
 6,
 5, 
 6, 
 7, 
 15, 
 12,
 431120, 
 65327, 
 (SELECT id FROM stat_types WHERE code = 'ATK_PCT'), 
 47,
 (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'), 
 5, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    21,
    0,
    17
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 17 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ACC'),
    5,
    0,
    5
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ACC')
    AND is_ancient = 0
    AND 5 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'RES'),
    5,
    0,
    5
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'RES')
    AND is_ancient = 0
    AND 5 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_FLAT'),
    18,
    0,
    18
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_FLAT')
    AND is_ancient = 0
    AND 18 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 18613)
AND slot_number = 6;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 18613), 
    @last_rune_id, 
    6
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 18613);

-- Rune ID: 40839976266

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 1 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(40839976266, 
 9215591, 
 1, 
 11070111854, 
 1,
 5, 
 6, 
 14, 
 15, 
 12,
 662530, 
 71476, 
 (SELECT id FROM stat_types WHERE code = 'ATK_FLAT'), 
 118,
 (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'), 
 7, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    6,
    1,
    6
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 6 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    10,
    0,
    6
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 6 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    22,
    0,
    15
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 15 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    5,
    0,
    -1
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND -1 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 22213)
AND slot_number = 1;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 22213), 
    @last_rune_id, 
    1
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 22213);

-- Rune ID: 44824424998

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 2 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(44824424998, 
 9215591, 
 1, 
 11070111854, 
 2,
 5, 
 6, 
 17, 
 15, 
 12,
 634000, 
 69949, 
 (SELECT id FROM stat_types WHERE code = 'SPD'), 
 31,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_FLAT'),
    364,
    0,
    364
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_FLAT')
    AND is_ancient = 0
    AND 364 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    15,
    0,
    15
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 15 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    18,
    0,
    18
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND 18 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    5,
    0,
    5
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 5 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 22213)
AND slot_number = 2;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 22213), 
    @last_rune_id, 
    2
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 22213);

-- Rune ID: 43216039296

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 3 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(43216039296, 
 9215591, 
 1, 
 11070111854, 
 3,
 5, 
 6, 
 20, 
 15, 
 12,
 475500, 
 61461, 
 (SELECT id FROM stat_types WHERE code = 'DEF_FLAT'), 
 118,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    6,
    0,
    1
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND 1 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    22,
    0,
    18
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 18 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    15,
    0,
    9
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 9 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'),
    5,
    0,
    5
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_DMG')
    AND is_ancient = 0
    AND 5 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 22213)
AND slot_number = 3;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 22213), 
    @last_rune_id, 
    3
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 22213);

-- Rune ID: 43923315522

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 4 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_DMG')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(43923315522, 
 9215591, 
 1, 
 11070111854, 
 4,
 1, 
 4, 
 19, 
 15, 
 0,
 79380, 
 5336, 
 (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'), 
 6,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'rare',
 0,
 'normal',
 'normal',
 1,
 0);

SET @last_rune_id = LAST_INSERT_ID();

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 22213)
AND slot_number = 4;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 22213), 
    @last_rune_id, 
    4
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 22213);

-- Rune ID: 31598736147

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 6 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(31598736147, 
 9215591, 
 1, 
 11070111854, 
 6,
 5, 
 6, 
 19, 
 15, 
 15,
 538900, 
 128856, 
 (SELECT id FROM stat_types WHERE code = 'DEF_PCT'), 
 63,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_FLAT'),
    52,
    0,
    24
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_FLAT')
    AND is_ancient = 0
    AND 24 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_FLAT'),
    17,
    0,
    -1
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_FLAT')
    AND is_ancient = 0
    AND -1 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    9,
    1,
    2
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 2 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    5,
    0,
    5
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 5 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 22213)
AND slot_number = 6;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 22213), 
    @last_rune_id, 
    6
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 22213);

-- Rune ID: 41338620074

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 1 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(41338620074, 
 9215591, 
 1, 
 11255213005, 
 1,
 5, 
 6, 
 13, 
 15, 
 12,
 722760, 
 72138, 
 (SELECT id FROM stat_types WHERE code = 'ATK_FLAT'), 
 118,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 357, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    29,
    0,
    23
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 23 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ACC'),
    11,
    1,
    11
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ACC')
    AND is_ancient = 0
    AND 11 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    6,
    0,
    6
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 6 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    5,
    0,
    -1
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND -1 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 16613)
AND slot_number = 1;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 16613), 
    @last_rune_id, 
    1
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 16613);

-- Rune ID: 38146367251

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 2 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(38146367251, 
 9215591, 
 1, 
 11255213005, 
 2,
 5, 
 6, 
 13, 
 15, 
 15,
 697400, 
 134870, 
 (SELECT id FROM stat_types WHERE code = 'HP_PCT'), 
 63,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ACC'),
    16,
    0,
    16
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ACC')
    AND is_ancient = 0
    AND 16 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    20,
    0,
    14
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 14 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'RES'),
    8,
    0,
    8
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'RES')
    AND is_ancient = 0
    AND 8 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    11,
    1,
    5
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND 5 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_upgrades 
(rune_id, level_reached, stat_type_id, old_value, new_value, upgrade_date)
SELECT 
    @last_rune_id,
    3,
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    5.0,
    11.0,
    NOW();

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 16613)
AND slot_number = 2;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 16613), 
    @last_rune_id, 
    2
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 16613);

-- Rune ID: 41418116706

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 3 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(41418116706, 
 9215591, 
 1, 
 11255213005, 
 3,
 5, 
 6, 
 13, 
 15, 
 12,
 570600, 
 64530, 
 (SELECT id FROM stat_types WHERE code = 'DEF_FLAT'), 
 118,
 (SELECT id FROM stat_types WHERE code = 'RES'), 
 4, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ACC'),
    4,
    0,
    4
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ACC')
    AND is_ancient = 0
    AND 4 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    10,
    0,
    10
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 10 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    13,
    0,
    6
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND 6 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    23,
    0,
    17
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 17 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 16613)
AND slot_number = 3;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 16613), 
    @last_rune_id, 
    3
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 16613);

-- Rune ID: 23528394649

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 4 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(23528394649, 
 9215591, 
 1, 
 11255213005, 
 4,
 5, 
 6, 
 13, 
 15, 
 15,
 684720, 
 134236, 
 (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'), 
 58,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 273, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    20,
    0,
    15
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 15 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    6,
    0,
    2
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 2 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    14,
    0,
    8
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 8 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    10,
    1,
    4
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND 4 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_upgrades 
(rune_id, level_reached, stat_type_id, old_value, new_value, upgrade_date)
SELECT 
    @last_rune_id,
    3,
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    4.0,
    10.0,
    NOW();

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 16613)
AND slot_number = 4;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 16613), 
    @last_rune_id, 
    4
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 16613);

-- Rune ID: 31509597218

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 5 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(31509597218, 
 9215591, 
 1, 
 11255213005, 
 5,
 5, 
 6, 
 11, 
 15, 
 12,
 507200, 
 63159, 
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 1800,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    8,
    0,
    -2
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND -2 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    11,
    1,
    4
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 4 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    16,
    0,
    6
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 6 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    16,
    0,
    16
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 16 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 16613)
AND slot_number = 5;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 16613), 
    @last_rune_id, 
    5
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 16613);

-- Rune ID: 16974102976

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 6 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(16974102976, 
 9215591, 
 1, 
 11255213005, 
 6,
 5, 
 6, 
 1, 
 15, 
 15,
 323340, 
 124174, 
 (SELECT id FROM stat_types WHERE code = 'HP_PCT'), 
 63,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ACC'),
    14,
    0,
    14
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ACC')
    AND is_ancient = 0
    AND 14 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    18,
    0,
    11
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND 11 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    9,
    1,
    2
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 2 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'RES'),
    16,
    0,
    16
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'RES')
    AND is_ancient = 0
    AND 16 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 16613)
AND slot_number = 6;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 16613), 
    @last_rune_id, 
    6
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 16613);

-- Rune ID: 43362910436

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 1 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(43362910436, 
 9215591, 
 1, 
 11463638177, 
 1,
 5, 
 6, 
 7, 
 15, 
 12,
 421610, 
 64680, 
 (SELECT id FROM stat_types WHERE code = 'ATK_FLAT'), 
 118,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    20,
    0,
    16
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 16 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    11,
    1,
    4
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 4 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'RES'),
    5,
    0,
    5
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'RES')
    AND is_ancient = 0
    AND 5 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    6,
    0,
    -1
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND -1 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 22113)
AND slot_number = 1;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 22113), 
    @last_rune_id, 
    1
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 22113);

-- Rune ID: 41630099171

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 2 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(41630099171, 
 9215591, 
 1, 
 11463638177, 
 2,
 5, 
 6, 
 14, 
 15, 
 12,
 697400, 
 73344, 
 (SELECT id FROM stat_types WHERE code = 'HP_PCT'), 
 47,
 (SELECT id FROM stat_types WHERE code = 'ATK_FLAT'), 
 16, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    4,
    0,
    4
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 4 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    9,
    1,
    4
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 4 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    21,
    0,
    17
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 17 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_FLAT'),
    213,
    0,
    -197
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_FLAT')
    AND is_ancient = 0
    AND -197 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 22113)
AND slot_number = 2;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 22113), 
    @last_rune_id, 
    2
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 22113);

-- Rune ID: 26709880864

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 3 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(26709880864, 
 9215591, 
 1, 
 11463638177, 
 3,
 5, 
 6, 
 15, 
 15, 
 12,
 523050, 
 64008, 
 (SELECT id FROM stat_types WHERE code = 'DEF_FLAT'), 
 118,
 (SELECT id FROM stat_types WHERE code = 'ACC'), 
 7, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_FLAT'),
    617,
    0,
    276
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_FLAT')
    AND is_ancient = 0
    AND 276 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    14,
    0,
    9
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND 9 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    5,
    1,
    0
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 0 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    17,
    0,
    13
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 13 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 22113)
AND slot_number = 3;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 22113), 
    @last_rune_id, 
    3
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 22113);

-- Rune ID: 42946410434

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 5 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(42946410434, 
 9215591, 
 1, 
 11463638177, 
 5,
 5, 
 6, 
 1, 
 15, 
 12,
 304320, 
 58752, 
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 1800,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    20,
    0,
    16
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 16 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    5,
    0,
    1
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 1 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    8,
    0,
    4
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND 4 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ACC'),
    9,
    0,
    9
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ACC')
    AND is_ancient = 0
    AND 9 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 22113)
AND slot_number = 5;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 22113), 
    @last_rune_id, 
    5
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 22113);

-- Rune ID: 34968122706

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 1 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(34968122706, 
 9215591, 
 1, 
 11735639637, 
 1,
 5, 
 6, 
 15, 
 15, 
 15,
 602300, 
 132251, 
 (SELECT id FROM stat_types WHERE code = 'ATK_FLAT'), 
 160,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    21,
    0,
    16
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 16 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ACC'),
    7,
    1,
    7
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ACC')
    AND is_ancient = 0
    AND 7 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    11,
    0,
    7
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 7 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    7,
    0,
    0
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 0 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 24713)
AND slot_number = 1;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 24713), 
    @last_rune_id, 
    1
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 24713);

-- Rune ID: 40982554816

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 2 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(40982554816, 
 9215591, 
 1, 
 11735639637, 
 2,
 5, 
 6, 
 18, 
 15, 
 12,
 634000, 
 69949, 
 (SELECT id FROM stat_types WHERE code = 'SPD'), 
 31,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ACC'),
    16,
    0,
    16
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ACC')
    AND is_ancient = 0
    AND 16 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_FLAT'),
    11,
    0,
    -7
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_FLAT')
    AND is_ancient = 0
    AND -7 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    16,
    0,
    16
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 16 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    5,
    0,
    -2
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND -2 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 24713)
AND slot_number = 2;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 24713), 
    @last_rune_id, 
    2
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 24713);

-- Rune ID: 33837637777

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 3 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(33837637777, 
 9215591, 
 1, 
 11735639637, 
 3,
 5, 
 6, 
 15, 
 15, 
 15,
 523050, 
 128008, 
 (SELECT id FROM stat_types WHERE code = 'DEF_FLAT'), 
 160,
 (SELECT id FROM stat_types WHERE code = 'ACC'), 
 8, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    5,
    0,
    -1
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND -1 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    16,
    0,
    9
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 9 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    16,
    0,
    13
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 13 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_FLAT'),
    241,
    0,
    -159
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_FLAT')
    AND is_ancient = 0
    AND -159 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 24713)
AND slot_number = 3;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 24713), 
    @last_rune_id, 
    3
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 24713);

-- Rune ID: 44576645841

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 4 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_DMG')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(44576645841, 
 9215591, 
 1, 
 11735639637, 
 4,
 5, 
 6, 
 16, 
 15, 
 12,
 627660, 
 69609, 
 (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'), 
 59,
 (SELECT id FROM stat_types WHERE code = 'RES'), 
 5, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ACC'),
    15,
    0,
    15
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ACC')
    AND is_ancient = 0
    AND 15 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_FLAT'),
    299,
    0,
    299
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_FLAT')
    AND is_ancient = 0
    AND 299 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    11,
    0,
    11
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 11 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    23,
    0,
    23
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 23 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 24713)
AND slot_number = 4;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 24713), 
    @last_rune_id, 
    4
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 24713);

-- Rune ID: 35584069494

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 5 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(35584069494, 
 9215591, 
 1, 
 11735639637, 
 5,
 5, 
 6, 
 21, 
 15, 
 12,
 507200, 
 63159, 
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 1800,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    18,
    0,
    18
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 18 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    16,
    0,
    12
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 12 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    11,
    1,
    4
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 4 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    7,
    0,
    0
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND 0 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 24713)
AND slot_number = 5;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 24713), 
    @last_rune_id, 
    5
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 24713);

-- Rune ID: 34320043595

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 6 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(34320043595, 
 9215591, 
 1, 
 11735639637, 
 6,
 5, 
 6, 
 19, 
 15, 
 15,
 538900, 
 128856, 
 (SELECT id FROM stat_types WHERE code = 'DEF_PCT'), 
 63,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ACC'),
    11,
    0,
    11
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ACC')
    AND is_ancient = 0
    AND 11 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_FLAT'),
    23,
    1,
    2
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_FLAT')
    AND is_ancient = 0
    AND 2 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    5,
    0,
    1
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 1 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'),
    5,
    0,
    5
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_DMG')
    AND is_ancient = 0
    AND 5 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 24713)
AND slot_number = 6;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 24713), 
    @last_rune_id, 
    6
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 24713);

-- Rune ID: 23192352283

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 1 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(23192352283, 
 9215591, 
 1, 
 11802419117, 
 1,
 5, 
 6, 
 14, 
 15, 
 15,
 602300, 
 132251, 
 (SELECT id FROM stat_types WHERE code = 'ATK_FLAT'), 
 160,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    10,
    1,
    3
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 3 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    10,
    0,
    6
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 6 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    21,
    0,
    12
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 12 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_FLAT'),
    274,
    0,
    -238
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_FLAT')
    AND is_ancient = 0
    AND -238 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 15713)
AND slot_number = 1;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 15713), 
    @last_rune_id, 
    1
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 15713);

-- Rune ID: 36299400827

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 2 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(36299400827, 
 9215591, 
 1, 
 11802419117, 
 2,
 15, 
 16, 
 7, 
 15, 
 12,
 532560, 
 72228, 
 (SELECT id FROM stat_types WHERE code = 'ATK_PCT'), 
 47,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ACC'),
    15,
    0,
    15
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ACC')
    AND is_ancient = 1
    AND 15 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    17,
    0,
    12
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 1
    AND 12 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    8,
    1,
    8
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 1
    AND 8 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    5,
    0,
    -3
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 1
    AND -3 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 15713)
AND slot_number = 2;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 15713), 
    @last_rune_id, 
    2
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 15713);

-- Rune ID: 40752074235

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 3 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(40752074235, 
 9215591, 
 1, 
 11802419117, 
 3,
 5, 
 6, 
 14, 
 15, 
 12,
 475500, 
 61461, 
 (SELECT id FROM stat_types WHERE code = 'DEF_FLAT'), 
 118,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ACC'),
    12,
    0,
    12
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ACC')
    AND is_ancient = 0
    AND 12 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    16,
    0,
    12
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 12 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    6,
    0,
    0
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 0 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    10,
    1,
    3
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND 3 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_upgrades 
(rune_id, level_reached, stat_type_id, old_value, new_value, upgrade_date)
SELECT 
    @last_rune_id,
    3,
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    3.0,
    10.0,
    NOW();

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 15713)
AND slot_number = 3;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 15713), 
    @last_rune_id, 
    3
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 15713);

-- Rune ID: 32807391978

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 4 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(32807391978, 
 9215591, 
 1, 
 11802419117, 
 4,
 5, 
 6, 
 14, 
 15, 
 15,
 570600, 
 130554, 
 (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'), 
 58,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    12,
    0,
    5
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 5 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    8,
    0,
    0
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 0 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    17,
    0,
    13
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 13 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    11,
    1,
    4
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND 4 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_upgrades 
(rune_id, level_reached, stat_type_id, old_value, new_value, upgrade_date)
SELECT 
    @last_rune_id,
    3,
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    4.0,
    11.0,
    NOW();

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 15713)
AND slot_number = 4;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 15713), 
    @last_rune_id, 
    4
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 15713);

-- Rune ID: 23865258602

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 5 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(23865258602, 
 9215591, 
 1, 
 11802419117, 
 5,
 5, 
 6, 
 16, 
 15, 
 15,
 557920, 
 129875, 
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 2448,
 (SELECT id FROM stat_types WHERE code = 'DEF_FLAT'), 
 13, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    21,
    0,
    15
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 15 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    8,
    0,
    4
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 4 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ACC'),
    7,
    0,
    7
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ACC')
    AND is_ancient = 0
    AND 7 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    11,
    0,
    11
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 11 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 15713)
AND slot_number = 5;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 15713), 
    @last_rune_id, 
    5
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 15713);

-- Rune ID: 42899618178

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 1 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(42899618178, 
 9215591, 
 1, 
 12419623527, 
 1,
 5, 
 6, 
 3, 
 15, 
 15,
 481840, 
 132778, 
 (SELECT id FROM stat_types WHERE code = 'ATK_FLAT'), 
 160,
 (SELECT id FROM stat_types WHERE code = 'RES'), 
 5, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    17,
    0,
    17
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 17 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    6,
    0,
    4
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 4 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    8,
    0,
    2
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 2 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'),
    18,
    0,
    18
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_DMG')
    AND is_ancient = 0
    AND 18 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 25313)
AND slot_number = 1;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 25313), 
    @last_rune_id, 
    1
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 25313);

-- Rune ID: 39271712494

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 3 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(39271712494, 
 9215591, 
 1, 
 12419623527, 
 3,
 5, 
 6, 
 4, 
 15, 
 12,
 356625, 
 61405, 
 (SELECT id FROM stat_types WHERE code = 'DEF_FLAT'), 
 118,
 (SELECT id FROM stat_types WHERE code = 'HP_PCT'), 
 8, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    21,
    0,
    21
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 21 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    5,
    0,
    1
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 1 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    10,
    1,
    3
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND 3 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'),
    4,
    0,
    4
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_DMG')
    AND is_ancient = 0
    AND 4 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 25313)
AND slot_number = 3;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 25313), 
    @last_rune_id, 
    3
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 25313);

-- Rune ID: 42901211948

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 4 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(42901211948, 
 9215591, 
 1, 
 12419623527, 
 4,
 5, 
 6, 
 3, 
 15, 
 12,
 456480, 
 67053, 
 (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'), 
 43,
 (SELECT id FROM stat_types WHERE code = 'ACC'), 
 8, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    6,
    0,
    6
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 6 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    26,
    0,
    26
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 26 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_FLAT'),
    445,
    0,
    445
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_FLAT')
    AND is_ancient = 0
    AND 445 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'),
    6,
    0,
    6
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_DMG')
    AND is_ancient = 0
    AND 6 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 25313)
AND slot_number = 4;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 25313), 
    @last_rune_id, 
    4
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 25313);

-- Rune ID: 33051008351

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 1 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(33051008351, 
 9215591, 
 1, 
 12852303335, 
 1,
 5, 
 6, 
 15, 
 15, 
 12,
 662530, 
 71476, 
 (SELECT id FROM stat_types WHERE code = 'ATK_FLAT'), 
 118,
 (SELECT id FROM stat_types WHERE code = 'RES'), 
 6, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_FLAT'),
    549,
    0,
    68
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_FLAT')
    AND is_ancient = 0
    AND 68 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    21,
    0,
    15
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 15 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    8,
    0,
    3
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 3 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    10,
    0,
    7
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 7 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 20413)
AND slot_number = 1;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 20413), 
    @last_rune_id, 
    1
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 20413);

-- Rune ID: 31221165322

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 2 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(31221165322, 
 9215591, 
 1, 
 12852303335, 
 2,
 5, 
 5, 
 19, 
 15, 
 15,
 306000, 
 68241, 
 (SELECT id FROM stat_types WHERE code = 'HP_PCT'), 
 51,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'RES'),
    9,
    0,
    9
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'RES')
    AND is_ancient = 0
    AND 9 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    12,
    0,
    12
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 12 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    6,
    0,
    6
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND 6 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ACC'),
    5,
    0,
    5
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ACC')
    AND is_ancient = 0
    AND 5 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 20413)
AND slot_number = 2;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 20413), 
    @last_rune_id, 
    2
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 20413);

-- Rune ID: 33051900002

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 3 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(33051900002, 
 9215591, 
 1, 
 12852303335, 
 3,
 5, 
 6, 
 15, 
 15, 
 15,
 523050, 
 128008, 
 (SELECT id FROM stat_types WHERE code = 'DEF_FLAT'), 
 160,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 214, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    14,
    0,
    9
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND 9 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    10,
    0,
    7
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 7 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    16,
    0,
    11
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 11 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    6,
    0,
    6
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 6 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 20413)
AND slot_number = 3;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 20413), 
    @last_rune_id, 
    3
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 20413);

-- Rune ID: 32405303336

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 5 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(32405303336, 
 9215591, 
 1, 
 12852303335, 
 5,
 5, 
 6, 
 19, 
 15, 
 12,
 557920, 
 65875, 
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 1800,
 (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'), 
 5, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    5,
    0,
    1
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 1 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    19,
    0,
    12
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 12 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    9,
    0,
    9
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 9 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_FLAT'),
    17,
    0,
    5
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_FLAT')
    AND is_ancient = 0
    AND 5 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 20413)
AND slot_number = 5;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 20413), 
    @last_rune_id, 
    5
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 20413);

-- Rune ID: 40391195078

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 1 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(40391195078, 
 9215591, 
 1, 
 13665155780, 
 1,
 5, 
 6, 
 13, 
 15, 
 15,
 722760, 
 136138, 
 (SELECT id FROM stat_types WHERE code = 'ATK_FLAT'), 
 160,
 (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'), 
 4, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    20,
    0,
    17
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 17 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    6,
    0,
    1
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 1 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    7,
    0,
    3
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 3 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ACC'),
    9,
    1,
    9
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ACC')
    AND is_ancient = 0
    AND 9 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_upgrades 
(rune_id, level_reached, stat_type_id, old_value, new_value, upgrade_date)
SELECT 
    @last_rune_id,
    3,
    (SELECT id FROM stat_types WHERE code = 'ACC'),
    9.0,
    9.0,
    NOW();

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 19613)
AND slot_number = 1;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 19613), 
    @last_rune_id, 
    1
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 19613);

-- Rune ID: 23137464370

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 3 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(23137464370, 
 9215591, 
 1, 
 13665155780, 
 3,
 5, 
 6, 
 13, 
 15, 
 15,
 570600, 
 128530, 
 (SELECT id FROM stat_types WHERE code = 'DEF_FLAT'), 
 160,
 (SELECT id FROM stat_types WHERE code = 'DEF_PCT'), 
 6, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_FLAT'),
    293,
    0,
    -129
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_FLAT')
    AND is_ancient = 0
    AND -129 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'RES'),
    4,
    0,
    4
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'RES')
    AND is_ancient = 0
    AND 4 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    20,
    0,
    17
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 17 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    10,
    1,
    4
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 4 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_upgrades 
(rune_id, level_reached, stat_type_id, old_value, new_value, upgrade_date)
SELECT 
    @last_rune_id,
    3,
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    4.0,
    10.0,
    NOW();

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 19613)
AND slot_number = 3;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 19613), 
    @last_rune_id, 
    3
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 19613);

-- Rune ID: 36531841415

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 6 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(36531841415, 
 9215591, 
 1, 
 13665155780, 
 6,
 15, 
 16, 
 15, 
 15, 
 15,
 646680, 
 134628, 
 (SELECT id FROM stat_types WHERE code = 'DEF_PCT'), 
 63,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    11,
    1,
    -1
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 1
    AND -1 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    9,
    0,
    3
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 1
    AND 3 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    12,
    0,
    12
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 1
    AND 12 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    22,
    0,
    18
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 1
    AND 18 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 19613)
AND slot_number = 6;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 19613), 
    @last_rune_id, 
    6
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 19613);

-- Rune ID: 38531347112

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 1 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(38531347112, 
 9215591, 
 1, 
 13927746654, 
 1,
 5, 
 6, 
 7, 
 15, 
 12,
 421610, 
 64680, 
 (SELECT id FROM stat_types WHERE code = 'ATK_FLAT'), 
 118,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    8,
    1,
    3
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 3 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    14,
    0,
    10
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 10 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    12,
    0,
    5
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 5 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'RES'),
    13,
    0,
    13
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'RES')
    AND is_ancient = 0
    AND 13 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 25113)
AND slot_number = 1;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 25113), 
    @last_rune_id, 
    1
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 25113);

-- Rune ID: 27174807755

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 3 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(27174807755, 
 9215591, 
 1, 
 13927746654, 
 3,
 5, 
 6, 
 15, 
 15, 
 15,
 523050, 
 128008, 
 (SELECT id FROM stat_types WHERE code = 'DEF_FLAT'), 
 160,
 (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'), 
 5, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'RES'),
    12,
    0,
    12
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'RES')
    AND is_ancient = 0
    AND 12 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    17,
    0,
    13
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 13 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    8,
    1,
    3
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND 3 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    8,
    0,
    2
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 2 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 25113)
AND slot_number = 3;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 25113), 
    @last_rune_id, 
    3
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 25113);

-- Rune ID: 36601887399

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 5 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(36601887399, 
 9215591, 
 1, 
 13927746654, 
 5,
 5, 
 6, 
 17, 
 15, 
 12,
 557920, 
 65875, 
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 1800,
 (SELECT id FROM stat_types WHERE code = 'HP_PCT'), 
 7, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    12,
    0,
    7
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND 7 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    11,
    0,
    7
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 7 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    16,
    0,
    11
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 11 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'RES'),
    4,
    0,
    4
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'RES')
    AND is_ancient = 0
    AND 4 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 25113)
AND slot_number = 5;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 25113), 
    @last_rune_id, 
    5
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 25113);

-- Rune ID: 35876567422

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 1 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(35876567422, 
 9215591, 
 1, 
 14894088168, 
 1,
 5, 
 6, 
 5, 
 15, 
 15,
 662530, 
 133126, 
 (SELECT id FROM stat_types WHERE code = 'ATK_FLAT'), 
 160,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    10,
    0,
    5
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 5 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    13,
    0,
    5
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 5 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    10,
    0,
    10
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 10 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'),
    5,
    1,
    5
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_DMG')
    AND is_ancient = 0
    AND 5 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_upgrades 
(rune_id, level_reached, stat_type_id, old_value, new_value, upgrade_date)
SELECT 
    @last_rune_id,
    3,
    (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'),
    5.0,
    5.0,
    NOW();

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 25213)
AND slot_number = 1;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 25213), 
    @last_rune_id, 
    1
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 25213);

-- Rune ID: 33672312749

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 2 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(33672312749, 
 9215591, 
 1, 
 14894088168, 
 2,
 5, 
 6, 
 5, 
 15, 
 15,
 760800, 
 138040, 
 (SELECT id FROM stat_types WHERE code = 'DEF_PCT'), 
 63,
 (SELECT id FROM stat_types WHERE code = 'HP_PCT'), 
 7, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    23,
    0,
    23
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 23 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    10,
    1,
    3
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 3 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ACC'),
    6,
    0,
    6
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ACC')
    AND is_ancient = 0
    AND 6 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    6,
    0,
    2
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 2 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 25213)
AND slot_number = 2;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 25213), 
    @last_rune_id, 
    2
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 25213);

-- Rune ID: 41570697782

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 3 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(41570697782, 
 9215591, 
 1, 
 14894088168, 
 3,
 5, 
 6, 
 5, 
 15, 
 12,
 570600, 
 64530, 
 (SELECT id FROM stat_types WHERE code = 'DEF_FLAT'), 
 118,
 (SELECT id FROM stat_types WHERE code = 'SPD'), 
 4, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'),
    5,
    1,
    5
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_DMG')
    AND is_ancient = 0
    AND 5 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    19,
    0,
    19
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 19 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    15,
    0,
    8
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND 8 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_FLAT'),
    274,
    0,
    -125
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_FLAT')
    AND is_ancient = 0
    AND -125 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 25213)
AND slot_number = 3;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 25213), 
    @last_rune_id, 
    3
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 25213);

-- Rune ID: 23293529452

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 4 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_DMG')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(23293529452, 
 9215591, 
 1, 
 14894088168, 
 4,
 5, 
 6, 
 18, 
 15, 
 15,
 570600, 
 130554, 
 (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'), 
 80,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    9,
    1,
    3
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 3 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_FLAT'),
    30,
    0,
    0
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_FLAT')
    AND is_ancient = 0
    AND 0 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    16,
    0,
    16
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 16 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    14,
    0,
    7
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 7 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 25213)
AND slot_number = 4;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 25213), 
    @last_rune_id, 
    4
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 25213);

-- Rune ID: 41665664901

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 5 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(41665664901, 
 9215591, 
 1, 
 14894088168, 
 5,
 5, 
 6, 
 5, 
 15, 
 12,
 608640, 
 66432, 
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 1800,
 (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'), 
 5, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    21,
    0,
    16
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 16 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_FLAT'),
    25,
    0,
    9
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_FLAT')
    AND is_ancient = 0
    AND 9 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    6,
    0,
    2
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 2 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'),
    5,
    1,
    5
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_DMG')
    AND is_ancient = 0
    AND 5 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_upgrades 
(rune_id, level_reached, stat_type_id, old_value, new_value, upgrade_date)
SELECT 
    @last_rune_id,
    3,
    (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'),
    5.0,
    5.0,
    NOW();

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 25213)
AND slot_number = 5;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 25213), 
    @last_rune_id, 
    5
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 25213);

-- Rune ID: 33061789508

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 6 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(33061789508, 
 9215591, 
 1, 
 14894088168, 
 6,
 5, 
 6, 
 7, 
 15, 
 15,
 377230, 
 125661, 
 (SELECT id FROM stat_types WHERE code = 'ATK_PCT'), 
 63,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    14,
    0,
    9
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 9 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    7,
    1,
    3
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 3 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    18,
    0,
    18
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 18 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    6,
    0,
    1
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND 1 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 25213)
AND slot_number = 6;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 25213), 
    @last_rune_id, 
    6
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 25213);

-- Rune ID: 41721355782

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 1 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(41721355782, 
 9215591, 
 1, 
 14908812136, 
 1,
 5, 
 6, 
 18, 
 15, 
 12,
 662530, 
 71476, 
 (SELECT id FROM stat_types WHERE code = 'ATK_FLAT'), 
 118,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 239, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'RES'),
    14,
    0,
    14
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'RES')
    AND is_ancient = 0
    AND 14 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    26,
    0,
    19
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 19 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    4,
    0,
    0
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 0 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    11,
    1,
    4
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 4 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_upgrades 
(rune_id, level_reached, stat_type_id, old_value, new_value, upgrade_date)
SELECT 
    @last_rune_id,
    3,
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    4.0,
    11.0,
    NOW();

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 20713)
AND slot_number = 1;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 20713), 
    @last_rune_id, 
    1
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 20713);

-- Rune ID: 41645307085

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 2 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(41645307085, 
 9215591, 
 1, 
 14908812136, 
 2,
 5, 
 6, 
 18, 
 15, 
 15,
 634000, 
 133949, 
 (SELECT id FROM stat_types WHERE code = 'SPD'), 
 42,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    10,
    1,
    5
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 5 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    12,
    0,
    5
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 5 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    20,
    0,
    10
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND 10 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_FLAT'),
    186,
    0,
    -304
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_FLAT')
    AND is_ancient = 0
    AND -304 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 20713)
AND slot_number = 2;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 20713), 
    @last_rune_id, 
    2
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 20713);

-- Rune ID: 41531541382

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 3 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(41531541382, 
 9215591, 
 1, 
 14908812136, 
 3,
 5, 
 6, 
 11, 
 15, 
 12,
 523050, 
 64008, 
 (SELECT id FROM stat_types WHERE code = 'DEF_FLAT'), 
 118,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 315, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    15,
    0,
    9
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND 9 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    8,
    0,
    4
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 4 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    15,
    0,
    12
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 12 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ACC'),
    4,
    0,
    4
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ACC')
    AND is_ancient = 0
    AND 4 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 20713)
AND slot_number = 3;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 20713), 
    @last_rune_id, 
    3
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 20713);

-- Rune ID: 40792020341

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 4 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(40792020341, 
 9215591, 
 1, 
 14908812136, 
 4,
 5, 
 6, 
 11, 
 15, 
 15,
 627660, 
 133609, 
 (SELECT id FROM stat_types WHERE code = 'HP_PCT'), 
 63,
 (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'), 
 6, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    17,
    0,
    13
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 13 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    11,
    0,
    4
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND 4 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'),
    4,
    0,
    4
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_DMG')
    AND is_ancient = 0
    AND 4 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_FLAT'),
    19,
    0,
    -3
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_FLAT')
    AND is_ancient = 0
    AND -3 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 20713)
AND slot_number = 4;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 20713), 
    @last_rune_id, 
    4
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 20713);

-- Rune ID: 32675155929

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 5 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(32675155929, 
 9215591, 
 1, 
 14908812136, 
 5,
 5, 
 6, 
 11, 
 15, 
 15,
 507200, 
 127159, 
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 2448,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    14,
    0,
    7
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 7 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    5,
    0,
    -2
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND -2 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    18,
    0,
    14
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 14 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    11,
    1,
    4
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND 4 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_upgrades 
(rune_id, level_reached, stat_type_id, old_value, new_value, upgrade_date)
SELECT 
    @last_rune_id,
    3,
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    4.0,
    11.0,
    NOW();

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 20713)
AND slot_number = 5;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 20713), 
    @last_rune_id, 
    5
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 20713);

-- Rune ID: 41571181686

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 6 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(41571181686, 
 9215591, 
 1, 
 14908812136, 
 6,
 5, 
 6, 
 11, 
 15, 
 15,
 592790, 
 131742, 
 (SELECT id FROM stat_types WHERE code = 'DEF_PCT'), 
 63,
 (SELECT id FROM stat_types WHERE code = 'ATK_PCT'), 
 8, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    15,
    0,
    12
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 12 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    20,
    0,
    14
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 14 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_FLAT'),
    12,
    0,
    -10
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_FLAT')
    AND is_ancient = 0
    AND -10 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'),
    7,
    0,
    7
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_DMG')
    AND is_ancient = 0
    AND 7 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 20713)
AND slot_number = 6;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 20713), 
    @last_rune_id, 
    6
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 20713);

-- Rune ID: 41219006028

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 1 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(41219006028, 
 9215591, 
 1, 
 14936624822, 
 1,
 5, 
 6, 
 3, 
 15, 
 12,
 481840, 
 68778, 
 (SELECT id FROM stat_types WHERE code = 'ATK_FLAT'), 
 118,
 (SELECT id FROM stat_types WHERE code = 'HP_PCT'), 
 7, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    16,
    0,
    13
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 13 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    11,
    0,
    4
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 4 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    6,
    0,
    6
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 6 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'),
    6,
    1,
    6
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_DMG')
    AND is_ancient = 0
    AND 6 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_upgrades 
(rune_id, level_reached, stat_type_id, old_value, new_value, upgrade_date)
SELECT 
    @last_rune_id,
    3,
    (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'),
    6.0,
    6.0,
    NOW();

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 26213)
AND slot_number = 1;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 26213), 
    @last_rune_id, 
    1
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 26213);

-- Rune ID: 43851871893

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 6 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(43851871893, 
 9215591, 
 1, 
 14936624822, 
 6,
 5, 
 6, 
 6, 
 15, 
 12,
 377230, 
 61661, 
 (SELECT id FROM stat_types WHERE code = 'ATK_PCT'), 
 47,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    7,
    0,
    7
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND 7 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    20,
    0,
    16
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 16 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ACC'),
    8,
    0,
    8
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ACC')
    AND is_ancient = 0
    AND 8 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_FLAT'),
    10,
    0,
    10
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_FLAT')
    AND is_ancient = 0
    AND 10 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 26213)
AND slot_number = 6;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 26213), 
    @last_rune_id, 
    6
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 26213);

-- Rune ID: 44331479610

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 3 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(44331479610, 
 9215591, 
 1, 
 14958461405, 
 3,
 5, 
 6, 
 1, 
 15, 
 12,
 332850, 
 60885, 
 (SELECT id FROM stat_types WHERE code = 'DEF_FLAT'), 
 118,
 (SELECT id FROM stat_types WHERE code = 'ACC'), 
 6, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    13,
    0,
    7
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND 7 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    16,
    0,
    12
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 12 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'RES'),
    11,
    0,
    11
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'RES')
    AND is_ancient = 0
    AND 11 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_FLAT'),
    294,
    0,
    6
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_FLAT')
    AND is_ancient = 0
    AND 6 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 26313)
AND slot_number = 3;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 26313), 
    @last_rune_id, 
    3
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 26313);

-- Rune ID: 43995943723

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 5 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(43995943723, 
 9215591, 
 1, 
 14958461405, 
 5,
 5, 
 6, 
 1, 
 15, 
 12,
 304320, 
 58752, 
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 1800,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    9,
    0,
    5
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 5 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ACC'),
    6,
    0,
    6
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ACC')
    AND is_ancient = 0
    AND 6 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'RES'),
    27,
    0,
    27
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'RES')
    AND is_ancient = 0
    AND 27 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    8,
    0,
    -1
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND -1 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 26313)
AND slot_number = 5;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 26313), 
    @last_rune_id, 
    5
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 26313);

-- Rune ID: 34280460631

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 6 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(34280460631, 
 9215591, 
 1, 
 14958461405, 
 6,
 5, 
 6, 
 19, 
 15, 
 15,
 538900, 
 128856, 
 (SELECT id FROM stat_types WHERE code = 'DEF_PCT'), 
 63,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    11,
    0,
    11
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 11 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'),
    14,
    0,
    14
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_DMG')
    AND is_ancient = 0
    AND 14 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    5,
    0,
    5
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 5 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ACC'),
    6,
    0,
    6
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ACC')
    AND is_ancient = 0
    AND 6 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 26313)
AND slot_number = 6;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 26313), 
    @last_rune_id, 
    6
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 26313);

-- Rune ID: 40271731725

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 1 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(40271731725, 
 9215591, 
 1, 
 15043730252, 
 1,
 5, 
 6, 
 13, 
 15, 
 15,
 662530, 
 133126, 
 (SELECT id FROM stat_types WHERE code = 'ATK_FLAT'), 
 160,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ACC'),
    8,
    0,
    8
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ACC')
    AND is_ancient = 0
    AND 8 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    11,
    0,
    7
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 7 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    22,
    0,
    15
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 15 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    11,
    1,
    4
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 4 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_upgrades 
(rune_id, level_reached, stat_type_id, old_value, new_value, upgrade_date)
SELECT 
    @last_rune_id,
    3,
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    4.0,
    11.0,
    NOW();

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 15233)
AND slot_number = 1;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 15233), 
    @last_rune_id, 
    1
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 15233);

-- Rune ID: 32848165593

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 2 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(32848165593, 
 9215591, 
 1, 
 15043730252, 
 2,
 5, 
 6, 
 13, 
 15, 
 15,
 760800, 
 138040, 
 (SELECT id FROM stat_types WHERE code = 'HP_PCT'), 
 63,
 (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'), 
 4, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    10,
    0,
    10
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 10 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    9,
    1,
    4
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND 4 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    16,
    0,
    12
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 12 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    5,
    0,
    2
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 2 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 15233)
AND slot_number = 2;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 15233), 
    @last_rune_id, 
    2
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 15233);

-- Rune ID: 25939248687

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 3 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(25939248687, 
 9215591, 
 1, 
 15043730252, 
 3,
 5, 
 6, 
 13, 
 15, 
 15,
 523050, 
 126152, 
 (SELECT id FROM stat_types WHERE code = 'DEF_FLAT'), 
 160,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    5,
    0,
    -3
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND -3 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    20,
    0,
    16
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 16 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_FLAT'),
    337,
    0,
    -16
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_FLAT')
    AND is_ancient = 0
    AND -16 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    10,
    1,
    2
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 2 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_upgrades 
(rune_id, level_reached, stat_type_id, old_value, new_value, upgrade_date)
SELECT 
    @last_rune_id,
    3,
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    2.0,
    10.0,
    NOW();

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 15233)
AND slot_number = 3;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 15233), 
    @last_rune_id, 
    3
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 15233);

-- Rune ID: 32194634637

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 4 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(32194634637, 
 9215591, 
 1, 
 15043730252, 
 4,
 5, 
 6, 
 10, 
 15, 
 15,
 627660, 
 131383, 
 (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'), 
 58,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    9,
    1,
    4
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 4 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ACC'),
    7,
    0,
    7
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ACC')
    AND is_ancient = 0
    AND 7 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    11,
    0,
    1
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 1 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    24,
    0,
    20
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 20 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 15233)
AND slot_number = 4;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 15233), 
    @last_rune_id, 
    4
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 15233);

-- Rune ID: 25824080772

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 5 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(25824080772, 
 9215591, 
 1, 
 15043730252, 
 5,
 5, 
 6, 
 2, 
 15, 
 15,
 355040, 
 124152, 
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 2448,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    22,
    0,
    18
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 18 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    11,
    1,
    1
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 1 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    7,
    0,
    0
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND 0 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    11,
    0,
    11
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 11 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 15233)
AND slot_number = 5;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 15233), 
    @last_rune_id, 
    5
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 15233);

-- Rune ID: 34782109076

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 6 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(34782109076, 
 9215591, 
 1, 
 15043730252, 
 6,
 5, 
 6, 
 13, 
 15, 
 15,
 592790, 
 129639, 
 (SELECT id FROM stat_types WHERE code = 'HP_PCT'), 
 63,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    6,
    0,
    6
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 6 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    11,
    1,
    5
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND 5 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    23,
    0,
    17
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 17 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    12,
    0,
    9
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 9 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 15233)
AND slot_number = 6;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 15233), 
    @last_rune_id, 
    6
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 15233);

-- Rune ID: 41403397011

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 1 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(41403397011, 
 9215591, 
 1, 
 15243987288, 
 1,
 5, 
 6, 
 17, 
 15, 
 12,
 602300, 
 68251, 
 (SELECT id FROM stat_types WHERE code = 'ATK_FLAT'), 
 118,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    7,
    0,
    3
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 3 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    11,
    0,
    7
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 7 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    17,
    0,
    17
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 17 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    8,
    0,
    1
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 1 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 22713)
AND slot_number = 1;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 22713), 
    @last_rune_id, 
    1
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 22713);

-- Rune ID: 33013938645

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 2 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(33013938645, 
 9215591, 
 1, 
 15243987288, 
 2,
 5, 
 6, 
 19, 
 15, 
 15,
 697400, 
 137344, 
 (SELECT id FROM stat_types WHERE code = 'ATK_PCT'), 
 63,
 (SELECT id FROM stat_types WHERE code = 'ATK_FLAT'), 
 18, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ACC'),
    4,
    0,
    4
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ACC')
    AND is_ancient = 0
    AND 4 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'RES'),
    12,
    0,
    12
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'RES')
    AND is_ancient = 0
    AND 12 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    9,
    0,
    9
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 9 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'),
    20,
    0,
    20
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_DMG')
    AND is_ancient = 0
    AND 20 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 22713)
AND slot_number = 2;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 22713), 
    @last_rune_id, 
    2
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 22713);

-- Rune ID: 40434684051

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 3 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(40434684051, 
 9215591, 
 1, 
 15243987288, 
 3,
 5, 
 6, 
 17, 
 15, 
 12,
 523050, 
 64008, 
 (SELECT id FROM stat_types WHERE code = 'DEF_FLAT'), 
 118,
 (SELECT id FROM stat_types WHERE code = 'DEF_PCT'), 
 6, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'RES'),
    8,
    0,
    8
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'RES')
    AND is_ancient = 0
    AND 8 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    15,
    0,
    9
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 9 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    16,
    0,
    12
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 12 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'),
    4,
    0,
    4
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_DMG')
    AND is_ancient = 0
    AND 4 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 22713)
AND slot_number = 3;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 22713), 
    @last_rune_id, 
    3
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 22713);

-- Rune ID: 41387874295

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 4 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(41387874295, 
 9215591, 
 1, 
 15243987288, 
 4,
 5, 
 6, 
 7, 
 15, 
 15,
 456480, 
 131053, 
 (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'), 
 58,
 (SELECT id FROM stat_types WHERE code = 'RES'), 
 4, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    26,
    0,
    19
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND 19 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_FLAT'),
    16,
    0,
    -1
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_FLAT')
    AND is_ancient = 0
    AND -1 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    10,
    1,
    4
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 4 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    10,
    0,
    6
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 6 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 22713)
AND slot_number = 4;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 22713), 
    @last_rune_id, 
    4
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 22713);

-- Rune ID: 43028778837

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 5 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(43028778837, 
 9215591, 
 1, 
 15243987288, 
 5,
 5, 
 6, 
 4, 
 15, 
 12,
 329680, 
 59485, 
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 1800,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    17,
    0,
    13
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 13 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'),
    13,
    0,
    13
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_DMG')
    AND is_ancient = 0
    AND 13 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    6,
    0,
    2
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 2 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    6,
    1,
    6
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 6 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_upgrades 
(rune_id, level_reached, stat_type_id, old_value, new_value, upgrade_date)
SELECT 
    @last_rune_id,
    3,
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    6.0,
    6.0,
    NOW();

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 22713)
AND slot_number = 5;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 22713), 
    @last_rune_id, 
    5
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 22713);

-- Rune ID: 20835737456

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 1 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(20835737456, 
 9215591, 
 1, 
 15414460237, 
 1,
 5, 
 6, 
 13, 
 15, 
 15,
 662530, 
 133126, 
 (SELECT id FROM stat_types WHERE code = 'ATK_FLAT'), 
 160,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    11,
    0,
    7
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 7 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    20,
    0,
    14
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 14 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    10,
    1,
    3
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 3 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_FLAT'),
    511,
    0,
    23
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_FLAT')
    AND is_ancient = 0
    AND 23 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 11613)
AND slot_number = 1;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 11613), 
    @last_rune_id, 
    1
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 11613);

-- Rune ID: 34928196464

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 2 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(34928196464, 
 9215591, 
 1, 
 15414460237, 
 2,
 5, 
 6, 
 13, 
 15, 
 15,
 760800, 
 138040, 
 (SELECT id FROM stat_types WHERE code = 'SPD'), 
 42,
 (SELECT id FROM stat_types WHERE code = 'RES'), 
 7, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    5,
    0,
    -1
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND -1 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    11,
    1,
    4
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND 4 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ACC'),
    29,
    0,
    29
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ACC')
    AND is_ancient = 0
    AND 29 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_FLAT'),
    19,
    0,
    -4
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_FLAT')
    AND is_ancient = 0
    AND -4 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 11613)
AND slot_number = 2;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 11613), 
    @last_rune_id, 
    2
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 11613);

-- Rune ID: 32806876585

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 3 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(32806876585, 
 9215591, 
 1, 
 15414460237, 
 3,
 5, 
 6, 
 14, 
 15, 
 15,
 523050, 
 128008, 
 (SELECT id FROM stat_types WHERE code = 'DEF_FLAT'), 
 160,
 (SELECT id FROM stat_types WHERE code = 'ACC'), 
 7, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    21,
    0,
    16
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 16 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    11,
    0,
    3
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 3 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    9,
    1,
    9
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 9 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    7,
    0,
    -2
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND -2 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 11613)
AND slot_number = 3;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 11613), 
    @last_rune_id, 
    3
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 11613);

-- Rune ID: 27376250176

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 4 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(27376250176, 
 9215591, 
 1, 
 15414460237, 
 4,
 5, 
 6, 
 13, 
 15, 
 15,
 627660, 
 131383, 
 (SELECT id FROM stat_types WHERE code = 'HP_PCT'), 
 63,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    16,
    0,
    12
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 12 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_FLAT'),
    26,
    0,
    6
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_FLAT')
    AND is_ancient = 0
    AND 6 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    9,
    1,
    3
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND 3 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    13,
    0,
    9
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 9 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 11613)
AND slot_number = 4;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 11613), 
    @last_rune_id, 
    4
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 11613);

-- Rune ID: 21919359857

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 5 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(21919359857, 
 9215591, 
 1, 
 15414460237, 
 5,
 5, 
 6, 
 13, 
 15, 
 15,
 557920, 
 127896, 
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 2448,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    24,
    0,
    17
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 17 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    10,
    0,
    6
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 6 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    8,
    0,
    2
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND 2 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    9,
    1,
    3
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 3 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_upgrades 
(rune_id, level_reached, stat_type_id, old_value, new_value, upgrade_date)
SELECT 
    @last_rune_id,
    3,
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    3.0,
    9.0,
    NOW();

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 11613)
AND slot_number = 5;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 11613), 
    @last_rune_id, 
    5
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 11613);

-- Rune ID: 33837414009

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 6 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(33837414009, 
 9215591, 
 1, 
 15414460237, 
 6,
 5, 
 6, 
 14, 
 15, 
 15,
 538900, 
 128856, 
 (SELECT id FROM stat_types WHERE code = 'HP_PCT'), 
 63,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    5,
    0,
    -2
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND -2 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    6,
    0,
    1
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 1 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    28,
    0,
    20
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 20 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ACC'),
    10,
    1,
    10
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ACC')
    AND is_ancient = 0
    AND 10 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_upgrades 
(rune_id, level_reached, stat_type_id, old_value, new_value, upgrade_date)
SELECT 
    @last_rune_id,
    3,
    (SELECT id FROM stat_types WHERE code = 'ACC'),
    10.0,
    10.0,
    NOW();

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 11613)
AND slot_number = 6;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 11613), 
    @last_rune_id, 
    6
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 11613);

-- Rune ID: 23649827646

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 1 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(23649827646, 
 9215591, 
 1, 
 15472627994, 
 1,
 5, 
 6, 
 13, 
 15, 
 15,
 722760, 
 136138, 
 (SELECT id FROM stat_types WHERE code = 'ATK_FLAT'), 
 160,
 (SELECT id FROM stat_types WHERE code = 'HP_PCT'), 
 5, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    4,
    0,
    4
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 4 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_FLAT'),
    489,
    1,
    87
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_FLAT')
    AND is_ancient = 0
    AND 87 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    23,
    0,
    19
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 19 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    7,
    0,
    1
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 1 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 25913)
AND slot_number = 1;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 25913), 
    @last_rune_id, 
    1
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 25913);

-- Rune ID: 34399548352

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 2 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(34399548352, 
 9215591, 
 1, 
 15472627994, 
 2,
 5, 
 6, 
 13, 
 15, 
 15,
 697400, 
 134870, 
 (SELECT id FROM stat_types WHERE code = 'DEF_PCT'), 
 63,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    6,
    1,
    0
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 0 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    14,
    0,
    8
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 8 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    17,
    0,
    14
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 14 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ACC'),
    7,
    0,
    7
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ACC')
    AND is_ancient = 0
    AND 7 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 25913)
AND slot_number = 2;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 25913), 
    @last_rune_id, 
    2
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 25913);

-- Rune ID: 40863831969

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 3 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(40863831969, 
 9215591, 
 1, 
 15472627994, 
 3,
 5, 
 6, 
 14, 
 15, 
 15,
 523050, 
 128008, 
 (SELECT id FROM stat_types WHERE code = 'DEF_FLAT'), 
 160,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 266, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ACC'),
    8,
    0,
    8
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ACC')
    AND is_ancient = 0
    AND 8 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    24,
    0,
    20
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 20 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    11,
    1,
    4
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND 4 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    5,
    0,
    5
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 5 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 25913)
AND slot_number = 3;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 25913), 
    @last_rune_id, 
    3
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 25913);

-- Rune ID: 41289925151

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 4 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(41289925151, 
 9215591, 
 1, 
 15472627994, 
 4,
 5, 
 6, 
 13, 
 15, 
 15,
 684720, 
 134236, 
 (SELECT id FROM stat_types WHERE code = 'DEF_PCT'), 
 63,
 (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'), 
 7, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    13,
    1,
    7
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 7 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_FLAT'),
    17,
    0,
    0
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_FLAT')
    AND is_ancient = 0
    AND 0 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    21,
    0,
    17
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 17 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_FLAT'),
    309,
    0,
    -7
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_FLAT')
    AND is_ancient = 0
    AND -7 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 25913)
AND slot_number = 4;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 25913), 
    @last_rune_id, 
    4
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 25913);

-- Rune ID: 40927844523

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 5 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(40927844523, 
 9215591, 
 1, 
 15472627994, 
 5,
 5, 
 6, 
 14, 
 15, 
 15,
 507200, 
 127159, 
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 2448,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    8,
    1,
    3
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 3 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    15,
    0,
    11
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 11 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    21,
    0,
    17
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND 17 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ACC'),
    6,
    0,
    6
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ACC')
    AND is_ancient = 0
    AND 6 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 25913)
AND slot_number = 5;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 25913), 
    @last_rune_id, 
    5
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 25913);

-- Rune ID: 41663361894

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 6 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(41663361894, 
 9215591, 
 1, 
 15472627994, 
 6,
 5, 
 6, 
 13, 
 15, 
 15,
 646680, 
 132334, 
 (SELECT id FROM stat_types WHERE code = 'DEF_PCT'), 
 63,
 (SELECT id FROM stat_types WHERE code = 'RES'), 
 4, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_FLAT'),
    35,
    1,
    13
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_FLAT')
    AND is_ancient = 0
    AND 13 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    21,
    0,
    17
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 17 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_FLAT'),
    16,
    0,
    -5
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_FLAT')
    AND is_ancient = 0
    AND -5 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_FLAT'),
    500,
    0,
    107
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_FLAT')
    AND is_ancient = 0
    AND 107 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 25913)
AND slot_number = 6;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 25913), 
    @last_rune_id, 
    6
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 25913);

-- Rune ID: 40923042838

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 1 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(40923042838, 
 9215591, 
 1, 
 15542740972, 
 1,
 5, 
 6, 
 18, 
 15, 
 15,
 662530, 
 135476, 
 (SELECT id FROM stat_types WHERE code = 'ATK_FLAT'), 
 160,
 (SELECT id FROM stat_types WHERE code = 'RES'), 
 7, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    20,
    0,
    16
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 16 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_FLAT'),
    245,
    0,
    -259
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_FLAT')
    AND is_ancient = 0
    AND -259 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    11,
    1,
    5
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 5 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    8,
    0,
    4
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 4 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 21213)
AND slot_number = 1;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 21213), 
    @last_rune_id, 
    1
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 21213);

-- Rune ID: 23522533160

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 2 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(23522533160, 
 9215591, 
 1, 
 15542740972, 
 2,
 5, 
 6, 
 13, 
 15, 
 15,
 697400, 
 134870, 
 (SELECT id FROM stat_types WHERE code = 'HP_PCT'), 
 63,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    21,
    0,
    12
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND 12 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ACC'),
    7,
    0,
    7
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ACC')
    AND is_ancient = 0
    AND 7 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'RES'),
    16,
    0,
    16
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'RES')
    AND is_ancient = 0
    AND 16 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    8,
    1,
    6
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 6 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_upgrades 
(rune_id, level_reached, stat_type_id, old_value, new_value, upgrade_date)
SELECT 
    @last_rune_id,
    3,
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    6.0,
    8.0,
    NOW();

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 21213)
AND slot_number = 2;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 21213), 
    @last_rune_id, 
    2
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 21213);

-- Rune ID: 37615263086

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 3 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(37615263086, 
 9215591, 
 1, 
 15542740972, 
 3,
 5, 
 6, 
 13, 
 15, 
 15,
 570600, 
 128530, 
 (SELECT id FROM stat_types WHERE code = 'DEF_FLAT'), 
 160,
 (SELECT id FROM stat_types WHERE code = 'ACC'), 
 7, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    37,
    0,
    31
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND 31 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'RES'),
    4,
    0,
    4
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'RES')
    AND is_ancient = 0
    AND 4 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    8,
    1,
    5
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 5 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    7,
    0,
    1
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 1 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 21213)
AND slot_number = 3;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 21213), 
    @last_rune_id, 
    3
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 21213);

-- Rune ID: 39931235305

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 4 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(39931235305, 
 9215591, 
 1, 
 15542740972, 
 4,
 5, 
 6, 
 13, 
 15, 
 15,
 684720, 
 134236, 
 (SELECT id FROM stat_types WHERE code = 'DEF_PCT'), 
 63,
 (SELECT id FROM stat_types WHERE code = 'ACC'), 
 8, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    17,
    0,
    14
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 14 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    9,
    1,
    3
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 3 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    11,
    0,
    6
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 6 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_FLAT'),
    13,
    0,
    -16
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_FLAT')
    AND is_ancient = 0
    AND -16 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 21213)
AND slot_number = 4;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 21213), 
    @last_rune_id, 
    4
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 21213);

-- Rune ID: 21405413068

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 5 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(21405413068, 
 9215591, 
 1, 
 15542740972, 
 5,
 5, 
 6, 
 13, 
 15, 
 15,
 608640, 
 130432, 
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 2448,
 (SELECT id FROM stat_types WHERE code = 'DEF_FLAT'), 
 14, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    19,
    0,
    13
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 13 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    9,
    1,
    3
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 3 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    6,
    0,
    3
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 3 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    21,
    0,
    14
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND 14 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 21213)
AND slot_number = 5;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 21213), 
    @last_rune_id, 
    5
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 21213);

-- Rune ID: 33033764048

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 6 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(33033764048, 
 9215591, 
 1, 
 15542740972, 
 6,
 5, 
 6, 
 18, 
 15, 
 15,
 538900, 
 128856, 
 (SELECT id FROM stat_types WHERE code = 'DEF_PCT'), 
 63,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_FLAT'),
    612,
    0,
    137
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_FLAT')
    AND is_ancient = 0
    AND 137 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'RES'),
    7,
    0,
    7
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'RES')
    AND is_ancient = 0
    AND 7 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    12,
    1,
    6
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 6 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    14,
    0,
    10
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 10 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 21213)
AND slot_number = 6;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 21213), 
    @last_rune_id, 
    6
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 21213);

-- Rune ID: 40770002409

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 1 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(40770002409, 
 9215591, 
 1, 
 15746121236, 
 1,
 5, 
 6, 
 18, 
 15, 
 15,
 602300, 
 132251, 
 (SELECT id FROM stat_types WHERE code = 'ATK_FLAT'), 
 160,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    16,
    0,
    12
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 12 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    6,
    0,
    -4
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND -4 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    15,
    0,
    8
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 8 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    4,
    0,
    4
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 4 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 16113)
AND slot_number = 1;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 16113), 
    @last_rune_id, 
    1
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 16113);

-- Rune ID: 34340110915

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 2 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(34340110915, 
 9215591, 
 1, 
 15746121236, 
 2,
 5, 
 6, 
 19, 
 15, 
 15,
 634000, 
 133949, 
 (SELECT id FROM stat_types WHERE code = 'ATK_PCT'), 
 63,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    12,
    0,
    7
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND 7 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    10,
    0,
    10
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 10 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    16,
    0,
    10
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 10 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_FLAT'),
    23,
    1,
    2
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_FLAT')
    AND is_ancient = 0
    AND 2 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_upgrades 
(rune_id, level_reached, stat_type_id, old_value, new_value, upgrade_date)
SELECT 
    @last_rune_id,
    3,
    (SELECT id FROM stat_types WHERE code = 'ATK_FLAT'),
    2.0,
    23.0,
    NOW();

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 16113)
AND slot_number = 2;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 16113), 
    @last_rune_id, 
    2
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 16113);

-- Rune ID: 36301929227

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 3 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(36301929227, 
 9215591, 
 1, 
 15746121236, 
 3,
 5, 
 6, 
 7, 
 15, 
 15,
 332850, 
 122642, 
 (SELECT id FROM stat_types WHERE code = 'DEF_FLAT'), 
 160,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'RES'),
    7,
    0,
    7
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'RES')
    AND is_ancient = 0
    AND 7 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    23,
    0,
    18
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 18 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    11,
    1,
    5
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 5 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    6,
    0,
    6
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 6 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 16113)
AND slot_number = 3;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 16113), 
    @last_rune_id, 
    3
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 16113);

-- Rune ID: 39906868573

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 5 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(39906868573, 
 9215591, 
 1, 
 15746121236, 
 5,
 5, 
 6, 
 7, 
 15, 
 12,
 405760, 
 63602, 
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 1800,
 (SELECT id FROM stat_types WHERE code = 'RES'), 
 4, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    16,
    0,
    12
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 12 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    12,
    0,
    12
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 12 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    8,
    0,
    1
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 1 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    10,
    1,
    5
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND 5 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_upgrades 
(rune_id, level_reached, stat_type_id, old_value, new_value, upgrade_date)
SELECT 
    @last_rune_id,
    3,
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    5.0,
    10.0,
    NOW();

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 16113)
AND slot_number = 5;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 16113), 
    @last_rune_id, 
    5
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 16113);

-- Rune ID: 31156641538

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 1 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(31156641538, 
 9215591, 
 1, 
 15819541033, 
 1,
 5, 
 6, 
 16, 
 15, 
 15,
 662530, 
 135476, 
 (SELECT id FROM stat_types WHERE code = 'ATK_FLAT'), 
 160,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 174, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ACC'),
    8,
    0,
    8
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ACC')
    AND is_ancient = 0
    AND 8 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    27,
    0,
    20
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 20 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    7,
    1,
    3
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 3 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    7,
    0,
    0
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 0 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 14413)
AND slot_number = 1;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 14413), 
    @last_rune_id, 
    1
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 14413);

-- Rune ID: 18287317852

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 2 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(18287317852, 
 9215591, 
 1, 
 15819541033, 
 2,
 5, 
 6, 
 16, 
 15, 
 15,
 634000, 
 133949, 
 (SELECT id FROM stat_types WHERE code = 'SPD'), 
 42,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ACC'),
    21,
    0,
    21
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ACC')
    AND is_ancient = 0
    AND 21 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    9,
    1,
    2
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 2 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    5,
    0,
    -2
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND -2 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'RES'),
    20,
    0,
    20
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'RES')
    AND is_ancient = 0
    AND 20 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 14413)
AND slot_number = 2;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 14413), 
    @last_rune_id, 
    2
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 14413);

-- Rune ID: 43829375451

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 3 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(43829375451, 
 9215591, 
 1, 
 15819541033, 
 3,
 5, 
 6, 
 16, 
 15, 
 12,
 523050, 
 64008, 
 (SELECT id FROM stat_types WHERE code = 'DEF_FLAT'), 
 118,
 (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'), 
 5, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    5,
    0,
    0
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND 0 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ACC'),
    7,
    0,
    7
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ACC')
    AND is_ancient = 0
    AND 7 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    22,
    0,
    17
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 17 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_FLAT'),
    199,
    0,
    -319
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_FLAT')
    AND is_ancient = 0
    AND -319 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 14413)
AND slot_number = 3;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 14413), 
    @last_rune_id, 
    3
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 14413);

-- Rune ID: 39828696236

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 4 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(39828696236, 
 9215591, 
 1, 
 15819541033, 
 4,
 5, 
 6, 
 16, 
 15, 
 15,
 627660, 
 133609, 
 (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'), 
 58,
 (SELECT id FROM stat_types WHERE code = 'HP_PCT'), 
 7, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_FLAT'),
    297,
    0,
    -103
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_FLAT')
    AND is_ancient = 0
    AND -103 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    19,
    0,
    15
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 15 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ACC'),
    8,
    0,
    8
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ACC')
    AND is_ancient = 0
    AND 8 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    5,
    0,
    -2
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND -2 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 14413)
AND slot_number = 4;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 14413), 
    @last_rune_id, 
    4
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 14413);

-- Rune ID: 41382052186

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 5 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(41382052186, 
 9215591, 
 1, 
 15819541033, 
 5,
 5, 
 6, 
 16, 
 15, 
 12,
 557920, 
 65875, 
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 1800,
 (SELECT id FROM stat_types WHERE code = 'ACC'), 
 8, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    15,
    0,
    8
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 8 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'RES'),
    20,
    0,
    20
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'RES')
    AND is_ancient = 0
    AND 20 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    11,
    0,
    7
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 7 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_FLAT'),
    15,
    0,
    15
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_FLAT')
    AND is_ancient = 0
    AND 15 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 14413)
AND slot_number = 5;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 14413), 
    @last_rune_id, 
    5
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 14413);

-- Rune ID: 44555363808

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 6 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(44555363808, 
 9215591, 
 1, 
 15819541033, 
 6,
 5, 
 6, 
 16, 
 15, 
 15,
 592790, 
 131742, 
 (SELECT id FROM stat_types WHERE code = 'HP_PCT'), 
 63,
 (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'), 
 4, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'RES'),
    16,
    0,
    16
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'RES')
    AND is_ancient = 0
    AND 16 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    10,
    0,
    2
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 2 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    17,
    0,
    13
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 13 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ACC'),
    5,
    0,
    5
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ACC')
    AND is_ancient = 0
    AND 5 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 14413)
AND slot_number = 6;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 14413), 
    @last_rune_id, 
    6
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 14413);

-- Rune ID: 41706655544

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 2 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(41706655544, 
 9215591, 
 1, 
 15942962459, 
 2,
 5, 
 6, 
 18, 
 15, 
 12,
 634000, 
 69949, 
 (SELECT id FROM stat_types WHERE code = 'ATK_PCT'), 
 47,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'RES'),
    4,
    0,
    4
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'RES')
    AND is_ancient = 0
    AND 4 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    15,
    0,
    12
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 12 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    14,
    0,
    9
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 9 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    7,
    0,
    0
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND 0 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 25413)
AND slot_number = 2;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 25413), 
    @last_rune_id, 
    2
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 25413);

-- Rune ID: 39845053355

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 3 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(39845053355, 
 9215591, 
 1, 
 15942962459, 
 3,
 5, 
 6, 
 6, 
 15, 
 12,
 380400, 
 61877, 
 (SELECT id FROM stat_types WHERE code = 'DEF_FLAT'), 
 118,
 (SELECT id FROM stat_types WHERE code = 'HP_PCT'), 
 5, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    4,
    0,
    4
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 4 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ACC'),
    12,
    0,
    12
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ACC')
    AND is_ancient = 0
    AND 12 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    16,
    0,
    12
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 12 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    11,
    1,
    4
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND 4 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_upgrades 
(rune_id, level_reached, stat_type_id, old_value, new_value, upgrade_date)
SELECT 
    @last_rune_id,
    3,
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    4.0,
    11.0,
    NOW();

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 25413)
AND slot_number = 3;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 25413), 
    @last_rune_id, 
    3
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 25413);

-- Rune ID: 41611481868

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 5 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(41611481868, 
 9215591, 
 1, 
 15942962459, 
 5,
 5, 
 6, 
 14, 
 15, 
 12,
 557920, 
 65875, 
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 1800,
 (SELECT id FROM stat_types WHERE code = 'HP_PCT'), 
 5, 
 'legendary',
 12,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    16,
    0,
    12
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 12 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    6,
    0,
    1
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 1 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    11,
    0,
    11
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 11 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    6,
    0,
    -1
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND -1 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 25413)
AND slot_number = 5;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 25413), 
    @last_rune_id, 
    5
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 25413);

-- Rune ID: 31807594268

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 2 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(31807594268, 
 9215591, 
 1, 
 16097733053, 
 2,
 15, 
 16, 
 18, 
 15, 
 15,
 760800, 
 140738, 
 (SELECT id FROM stat_types WHERE code = 'HP_PCT'), 
 63,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    11,
    0,
    11
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 1
    AND 11 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    20,
    0,
    12
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 1
    AND 12 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ACC'),
    6,
    0,
    6
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ACC')
    AND is_ancient = 1
    AND 6 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    8,
    1,
    1
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 1
    AND 1 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_upgrades 
(rune_id, level_reached, stat_type_id, old_value, new_value, upgrade_date)
SELECT 
    @last_rune_id,
    3,
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    1.0,
    8.0,
    NOW();

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 27513)
AND slot_number = 2;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 27513), 
    @last_rune_id, 
    2
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 27513);

-- Rune ID: 26579215397

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 3 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(26579215397, 
 9215591, 
 1, 
 16097733053, 
 3,
 5, 
 6, 
 15, 
 15, 
 15,
 475500, 
 125461, 
 (SELECT id FROM stat_types WHERE code = 'DEF_FLAT'), 
 160,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    21,
    0,
    14
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND 14 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    10,
    0,
    7
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 7 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    8,
    1,
    2
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 2 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ACC'),
    6,
    0,
    6
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ACC')
    AND is_ancient = 0
    AND 6 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 27513)
AND slot_number = 3;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 27513), 
    @last_rune_id, 
    3
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 27513);

-- Rune ID: 33888367798

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 4 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(33888367798, 
 9215591, 
 1, 
 16097733053, 
 4,
 5, 
 6, 
 17, 
 15, 
 15,
 570600, 
 130554, 
 (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'), 
 58,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    20,
    0,
    14
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND 14 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    12,
    0,
    7
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 7 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ACC'),
    8,
    0,
    8
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ACC')
    AND is_ancient = 0
    AND 8 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    10,
    1,
    0
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 0 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_upgrades 
(rune_id, level_reached, stat_type_id, old_value, new_value, upgrade_date)
SELECT 
    @last_rune_id,
    3,
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    0.0,
    10.0,
    NOW();

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 27513)
AND slot_number = 4;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 27513), 
    @last_rune_id, 
    4
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 27513);

-- Rune ID: 33161011970

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 5 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(33161011970, 
 9215591, 
 1, 
 16097733053, 
 5,
 5, 
 6, 
 16, 
 15, 
 15,
 557920, 
 129875, 
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 2448,
 (SELECT id FROM stat_types WHERE code = 'DEF_FLAT'), 
 17, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    6,
    0,
    2
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 2 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    20,
    0,
    13
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 13 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    14,
    0,
    7
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND 7 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'),
    6,
    0,
    6
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_DMG')
    AND is_ancient = 0
    AND 6 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 27513)
AND slot_number = 5;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 27513), 
    @last_rune_id, 
    5
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 27513);

-- Rune ID: 40155086915

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 1 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(40155086915, 
 9215591, 
 1, 
 16322043465, 
 1,
 5, 
 6, 
 13, 
 15, 
 15,
 662530, 
 133126, 
 (SELECT id FROM stat_types WHERE code = 'ATK_FLAT'), 
 160,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    17,
    0,
    13
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 13 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    13,
    0,
    6
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 6 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    11,
    1,
    6
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 6 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    6,
    0,
    6
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 6 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 21513)
AND slot_number = 1;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 21513), 
    @last_rune_id, 
    1
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 21513);

-- Rune ID: 43290003298

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 2 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(43290003298, 
 9215591, 
 1, 
 16322043465, 
 2,
 5, 
 6, 
 13, 
 15, 
 15,
 697400, 
 134870, 
 (SELECT id FROM stat_types WHERE code = 'HP_PCT'), 
 63,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    11,
    0,
    11
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 11 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    5,
    0,
    1
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 1 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    27,
    0,
    20
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 20 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    7,
    1,
    3
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND 3 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_upgrades 
(rune_id, level_reached, stat_type_id, old_value, new_value, upgrade_date)
SELECT 
    @last_rune_id,
    3,
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    3.0,
    7.0,
    NOW();

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 21513)
AND slot_number = 2;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 21513), 
    @last_rune_id, 
    2
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 21513);

-- Rune ID: 41326506828

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 3 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(41326506828, 
 9215591, 
 1, 
 16322043465, 
 3,
 5, 
 6, 
 13, 
 15, 
 15,
 570600, 
 128530, 
 (SELECT id FROM stat_types WHERE code = 'DEF_FLAT'), 
 160,
 (SELECT id FROM stat_types WHERE code = 'HP_PCT'), 
 7, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    6,
    0,
    3
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 3 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    9,
    1,
    3
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND 3 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'),
    6,
    0,
    6
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_DMG')
    AND is_ancient = 0
    AND 6 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    24,
    0,
    24
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 24 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 21513)
AND slot_number = 3;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 21513), 
    @last_rune_id, 
    3
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 21513);

-- Rune ID: 23350875760

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 4 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_DMG')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(23350875760, 
 9215591, 
 1, 
 16322043465, 
 4,
 5, 
 6, 
 13, 
 15, 
 15,
 627660, 
 131383, 
 (SELECT id FROM stat_types WHERE code = 'CRIT_DMG'), 
 80,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    5,
    0,
    5
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 5 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    19,
    0,
    12
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 12 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    11,
    1,
    1
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 1 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    15,
    0,
    11
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 11 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 21513)
AND slot_number = 4;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 21513), 
    @last_rune_id, 
    4
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 21513);

-- Rune ID: 23235880126

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 5 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(23235880126, 
 9215591, 
 1, 
 16322043465, 
 5,
 5, 
 6, 
 11, 
 15, 
 15,
 507200, 
 127159, 
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 2448,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    22,
    0,
    18
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 18 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    6,
    0,
    -2
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND -2 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    11,
    1,
    1
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 1 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    12,
    0,
    12
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 12 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 21513)
AND slot_number = 5;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 21513), 
    @last_rune_id, 
    5
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 21513);

-- Rune ID: 32797704875

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 6 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(32797704875, 
 9215591, 
 1, 
 16322043465, 
 6,
 5, 
 6, 
 6, 
 15, 
 15,
 431120, 
 129327, 
 (SELECT id FROM stat_types WHERE code = 'HP_PCT'), 
 63,
 (SELECT id FROM stat_types WHERE code = 'ACC'), 
 6, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    9,
    1,
    5
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 5 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    27,
    0,
    27
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 27 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    8,
    0,
    1
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 1 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    7,
    0,
    0
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND 0 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 21513)
AND slot_number = 6;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 21513), 
    @last_rune_id, 
    6
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 21513);

-- Rune ID: 36131644696

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 1 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(36131644696, 
 9215591, 
 1, 
 16599787558, 
 1,
 5, 
 6, 
 13, 
 15, 
 15,
 662530, 
 133126, 
 (SELECT id FROM stat_types WHERE code = 'ATK_FLAT'), 
 160,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    7,
    0,
    1
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 1 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    11,
    0,
    7
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 7 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    16,
    0,
    16
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 16 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    10,
    1,
    4
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 4 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_upgrades 
(rune_id, level_reached, stat_type_id, old_value, new_value, upgrade_date)
SELECT 
    @last_rune_id,
    3,
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    4.0,
    10.0,
    NOW();

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 23513)
AND slot_number = 1;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 23513), 
    @last_rune_id, 
    1
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 23513);

-- Rune ID: 24167075449

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 5 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(24167075449, 
 9215591, 
 1, 
 16599787558, 
 5,
 5, 
 6, 
 13, 
 15, 
 15,
 608640, 
 130432, 
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 2448,
 (SELECT id FROM stat_types WHERE code = 'DEF_FLAT'), 
 12, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'CRIT_RATE'),
    24,
    0,
    24
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'CRIT_RATE')
    AND is_ancient = 0
    AND 24 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    6,
    0,
    1
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 1 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    7,
    0,
    0
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND 0 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    10,
    1,
    4
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 4 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_upgrades 
(rune_id, level_reached, stat_type_id, old_value, new_value, upgrade_date)
SELECT 
    @last_rune_id,
    3,
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    4.0,
    10.0,
    NOW();

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 23513)
AND slot_number = 5;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 23513), 
    @last_rune_id, 
    5
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 23513);

-- Rune ID: 41095659337

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 1 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(41095659337, 
 9215591, 
 1, 
 16656619190, 
 1,
 5, 
 6, 
 7, 
 15, 
 15,
 421610, 
 128680, 
 (SELECT id FROM stat_types WHERE code = 'ATK_FLAT'), 
 160,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    12,
    0,
    8
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 0
    AND 8 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    6,
    1,
    -1
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND -1 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'RES'),
    15,
    0,
    15
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'RES')
    AND is_ancient = 0
    AND 15 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    19,
    0,
    12
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 12 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 17013)
AND slot_number = 1;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 17013), 
    @last_rune_id, 
    1
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 17013);

-- Rune ID: 41546067124

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 2 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(41546067124, 
 9215591, 
 1, 
 16656619190, 
 2,
 5, 
 6, 
 15, 
 15, 
 15,
 697400, 
 137344, 
 (SELECT id FROM stat_types WHERE code = 'SPD'), 
 42,
 (SELECT id FROM stat_types WHERE code = 'ACC'), 
 4, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    6,
    0,
    0
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 0
    AND 0 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    19,
    0,
    13
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 0
    AND 13 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'RES'),
    15,
    0,
    15
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'RES')
    AND is_ancient = 0
    AND 15 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    11,
    1,
    6
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'ATK_PCT')
    AND is_ancient = 0
    AND 6 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_upgrades 
(rune_id, level_reached, stat_type_id, old_value, new_value, upgrade_date)
SELECT 
    @last_rune_id,
    3,
    (SELECT id FROM stat_types WHERE code = 'ATK_PCT'),
    6.0,
    11.0,
    NOW();

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 17013)
AND slot_number = 2;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 17013), 
    @last_rune_id, 
    2
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 17013);

-- Rune ID: 41302954094

SET @valid_slot = (
    SELECT COUNT(*) 
    FROM slot_stat_constraints 
    WHERE slot_no = 3 
    AND stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_FLAT')
);

INSERT INTO runes 
(rune_id, wizard_id, occupied_type, occupied_id, slot_no, `rank`, 
 `class`, set_id, upgrade_limit, upgrade_curr, base_value, sell_value, 
 pri_eff_type, pri_eff_value, prefix_eff_type, prefix_eff_value, 
 quality, level, original_grade, current_grade, original_quality, locked)
VALUES 
(41302954094, 
 9215591, 
 1, 
 16656619190, 
 3,
 15, 
 16, 
 14, 
 15, 
 15,
 570600, 
 130554, 
 (SELECT id FROM stat_types WHERE code = 'DEF_FLAT'), 
 160,
 (SELECT id FROM stat_types WHERE code = 'HP_FLAT'), 
 0, 
 'legendary',
 15,
 'legendary',
 'legendary',
 5,
 0);

SET @last_rune_id = LAST_INSERT_ID();

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'HP_PCT'),
    28,
    0,
    20
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'HP_PCT')
    AND is_ancient = 1
    AND 20 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'RES'),
    16,
    0,
    16
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'RES')
    AND is_ancient = 1
    AND 16 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'DEF_PCT'),
    10,
    1,
    2
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'DEF_PCT')
    AND is_ancient = 1
    AND 2 BETWEEN substat_initial_min AND substat_initial_max
);

INSERT INTO rune_substats 
(rune_id, stat_type_id, stat_value, upgrade_count, initial_value)
SELECT 
    @last_rune_id, 
    (SELECT id FROM stat_types WHERE code = 'SPD'),
    5,
    0,
    1
WHERE EXISTS (
    SELECT 1 FROM rune_stat_ranges 
    WHERE stat_type_id = (SELECT id FROM stat_types WHERE code = 'SPD')
    AND is_ancient = 1
    AND 1 BETWEEN substat_initial_min AND substat_initial_max
);

-- Supprimer toute rune existante dans ce slot pour ce monstre
DELETE FROM monster_runes 
WHERE monster_id = (SELECT id FROM monsters WHERE com2us_id = 17013)
AND slot_number = 3;

-- Insérer la nouvelle association rune-monstre
INSERT INTO monster_runes (monster_id, rune_id, slot_number)
SELECT 
    (SELECT id FROM monsters WHERE com2us_id = 17013), 
    @last_rune_id, 
    3
WHERE EXISTS (SELECT 1 FROM monsters WHERE com2us_id = 17013);


COMMIT;
